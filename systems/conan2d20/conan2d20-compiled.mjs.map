{"version":3,"file":"conan2d20.mjs","sources":["src/hooks/diceSoNiceReadyHook.mjs","src/config.mjs","src/apps/ApplyDamage.mjs","src/system/TalentManager.mjs","src/apps/CharGenStages/CharGenBaseStage.mjs","src/apps/CharGenStages/CharGenArchetype.mjs","src/apps/CharGenStages/CharGenAttributeAspects.mjs","src/apps/CharGenStages/CharGenAttributes.mjs","src/apps/CharGenStages/CharGenCaste.mjs","src/apps/CharGenStages/CharGenEducation.mjs","src/apps/CharGenStages/CharGenFortune.mjs","src/apps/CharGenStages/CharGenHomeland.mjs","src/apps/CharGenStages/CharGenLanguage.mjs","src/apps/CharGenStages/CharGenName.mjs","src/apps/CharGenStages/CharGenNature.mjs","src/apps/CharGenStages/CharGenSkills.mjs","src/apps/CharGenStages/CharGenStartingAttributes.mjs","src/apps/CharGenStages/CharGenStory.mjs","src/apps/CharGenStages/CharGenTalent.mjs","src/apps/CharGenStages/CharGenWarStory.mjs","src/apps/CharGenStages/CharGenBelongings.mjs","src/system/ConanDice.mjs","src/documents/ConanActor.mjs","src/system/ConanProgress.mjs","src/apps/CharacterCreator.mjs","src/apps/CharacterUpgrade.mjs","src/apps/CombatDiceRoller.mjs","src/apps/Counter.mjs","src/apps/DamageRoller.mjs","src/apps/MomentumBanker.mjs","src/apps/SkillRoller.mjs","src/apps/SkillRollRequest.mjs","src/apps/SoakDiceRoller.mjs","src/apps/SourceFilterSettings.mjs","src/apps/SendItem.mjs","src/apps/TalentRequirementEditor.mjs","src/apps/TraitSelector.mjs","src/documents/ConanItem.mjs","src/sheets/ConanBaseItemSheet.mjs","src/sheets/ConanBaseActorSheet.mjs","src/utils/encumbrance.mjs","src/apps/CompendiumItemSelector.mjs","src/apps/CompendiumItemSelectors/ArchetypeSelector.mjs","src/apps/CompendiumItemSelectors/CasteSelector.mjs","src/apps/CompendiumItemSelectors/EducationSelector.mjs","src/apps/CompendiumItemSelectors/HomelandSelector.mjs","src/apps/CompendiumItemSelectors/LanguageSelector.mjs","src/apps/CompendiumItemSelectors/NatureSelector.mjs","src/apps/CompendiumItemSelectors/StorySelector.mjs","src/apps/CompendiumItemSelectors/WarStorySelector.mjs","src/sheets/ConanCharacterSheet.mjs","src/sheets/ConanNPCSheet.mjs","src/sheets/ConanTransportSheet.mjs","src/combat/Combat2d20.mjs","src/system/CombatDie.mjs","src/combat/CombatTracker2d20.mjs","src/system/ConanChat.mjs","src/documents/ConanCompendiums.mjs","src/hooks/conanCharacterCreatorHooks.mjs","src/menu/ConanMenuLayer.mjs","src/menu/ConanMenu.mjs","src/hooks/conanMenuHooks.mjs","src/migrations/ConanUpdateBase.mjs","src/migrations/updates/Update_031421.mjs","src/migrations/updates/Update_220106.mjs","src/migrations/updates/Update_22040301.mjs","src/migrations/updates/Update_22081201.mjs","src/migrations/updates/Update_22102901.mjs","src/migrations/updates/Update_22110501.mjs","src/migrations/updates/Update_22120601.mjs","src/migrations/updates/Update_22122701.mjs","src/migrations/updates/Update_23061601.mjs","src/migrations/updates/Update_23061901.mjs","src/migrations/updates/Update_23062001.mjs","src/migrations/updates/Update_23062201.mjs","src/migrations/updates/Update_23062301.mjs","src/migrations/updates/Update_23062302.mjs","src/migrations/updates/Update_23062303.mjs","src/migrations/updates/Update_23062601.mjs","src/migrations/updates/Update_23062602.mjs","src/migrations/updates/Update_23062701.mjs","src/migrations/updates/Update_23062702.mjs","src/migrations/updates/Update_23062801.mjs","src/migrations/updates/Update_23062901.mjs","src/migrations/updates/Update_23063001.mjs","src/migrations/updates/Update_23071301.mjs","src/migrations/updates/Update_23071501.mjs","src/migrations/updates/Update_23072101.mjs","src/migrations/updates/Update_23081401.mjs","src/migrations/updates/Update_23091301.mjs","src/migrations/updates/Update_23100201.mjs","src/migrations/updates/Update_23100601.mjs","src/migrations/updates/Update_23111001.mjs","src/migrations/updates/Update_24012101.mjs","src/migrations/updates/Update_24012601.mjs","src/migrations/updates/Update_24022401.mjs","src/migrations/ConanMigrationRunner.mjs","src/overrides.mjs","src/socket.mjs","src/settings.mjs","src/hooks/readyHook.mjs","src/hooks/setupHook.mjs","src/system/ConanHooks.mjs","src/system/ConanMacros.mjs","src/utils/ConanUtils.mjs","src/utils/Logger.mjs","src/templates.mjs","src/handlebars.mjs","src/enrichers.mjs","src/hooks/initHook.mjs","conan2d20.mjs"],"sourcesContent":["export function diceSoNiceReadyHook(dice3d) {\n\tconsole.log(`${SYSTEM_NAME} | Running diceSoNiceReady hook`);\n\n\tdice3d.addSystem(\n\t\t{id: \"conan2d20black\", name: \"Conan 2d20 - Black\"},\n\t\t\"default\"\n\t);\n\tdice3d.addSystem({id: \"conan2d20white\", name: \"Conan 2d20 - White\"}, false);\n\n\tdice3d.addDicePreset({\n\t\ttype: \"d20\",\n\t\tlabels: [\n\t\t\t\"systems/conan2d20/assets/dice/phoenix/phoenix-black.png\",\n\t\t\t\"2\",\n\t\t\t\"3\",\n\t\t\t\"4\",\n\t\t\t\"5\",\n\t\t\t\"6\",\n\t\t\t\"7\",\n\t\t\t\"8\",\n\t\t\t\"9\",\n\t\t\t\"10\",\n\t\t\t\"11\",\n\t\t\t\"12\",\n\t\t\t\"13\",\n\t\t\t\"14\",\n\t\t\t\"15\",\n\t\t\t\"16\",\n\t\t\t\"17\",\n\t\t\t\"18\",\n\t\t\t\"19\",\n\t\t\t\"20\",\n\t\t],\n\t\t/* eslint-disable-next-line no-sparse-arrays */\n\t\tbumpMaps: [\n\t\t\t\"systems/conan2d20/assets/dice/phoenix/phoenixBump.png\",\n\t\t\t...Array(19),\n\t\t],\n\t\tsystem: \"conan2d20black\",\n\t});\n\n\tdice3d.addDicePreset({\n\t\ttype: \"d20\",\n\t\tlabels: [\n\t\t\t\"systems/conan2d20/assets/dice/phoenix/phoenix-white.png\",\n\t\t\t\"2\",\n\t\t\t\"3\",\n\t\t\t\"4\",\n\t\t\t\"5\",\n\t\t\t\"6\",\n\t\t\t\"7\",\n\t\t\t\"8\",\n\t\t\t\"9\",\n\t\t\t\"10\",\n\t\t\t\"11\",\n\t\t\t\"12\",\n\t\t\t\"13\",\n\t\t\t\"14\",\n\t\t\t\"15\",\n\t\t\t\"16\",\n\t\t\t\"17\",\n\t\t\t\"18\",\n\t\t\t\"19\",\n\t\t\t\"20\",\n\t\t],\n\t\t/* eslint-disable-next-line no-sparse-arrays */\n\t\tbumpMaps: [\n\t\t\t\"systems/conan2d20/assets/dice/phoenix/phoenixBump.png\",\n\t\t\t...Array(19),\n\t\t],\n\t\tsystem: \"conan2d20white\",\n\t});\n\n\tdice3d.addDicePreset({\n\t\ttype: \"dp\",\n\t\tlabels: [\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat1.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat2.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat3.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat4.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat5.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat6.png\",\n\t\t],\n\t\tbumpMaps: [\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat1.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat2.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat3.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat4.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat5.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/black/Combat6.png\",\n\t\t],\n\t\tsystem: \"conan2d20black\",\n\t});\n\n\tdice3d.addDicePreset({\n\t\ttype: \"dp\",\n\t\tlabels: [\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat1.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat2.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat3.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat4.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat5.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat6.png\",\n\t\t],\n\t\tbumpMaps: [\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat1.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat2.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat3.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat4.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat5.png\",\n\t\t\t\"systems/conan2d20/assets/dice/combat/white/Combat6.png\",\n\t\t],\n\t\tsystem: \"conan2d20white\",\n\t});\n}\n","export const SYSTEM_ID = \"conan2d20\";\nexport const SYSTEM_NAME = \"Conan 2d20\";\n\nexport const CONFIG = {};\n\nCONFIG.DEFAULT_MOB_SIZE = 5;\n\nCONFIG.ASSIST_2D20_DICE = 1;\nCONFIG.BASE_2D20_DICE = 2;\nCONFIG.MAX_2D20_DICE = 5;\nCONFIG.MAX_2D20_PURCHASE = 3;\n\nCONFIG.actionTypes = {\n\tfree: \"CONAN.Item.Action.Types.Free\",\n\tminor: \"CONAN.Item.Action.Types.Minor\",\n\treaction: \"CONAN.Item.Action.Types.Reaction\",\n\tstandard: \"CONAN.Item.Action.Types.Standard\",\n};\n\nCONFIG.armorQualities = {\n\tbrittle: \"CONAN.Item.Armor.Qualities.Brittle\",\n\tbulky: \"CONAN.Item.Armor.Qualities.Bulky\",\n\tcool: \"CONAN.Item.Armor.Qualities.Cool\",\n\tcouragex: \"CONAN.Item.Armor.Qualities.CourageX\",\n\tfragile: \"CONAN.Item.Armor.Qualities.Fragile\",\n\theavy: \"CONAN.Item.Armor.Qualities.Heavy\",\n\tintimidating: \"CONAN.Item.Armor.Qualities.Intimidating\",\n\tnoisy: \"CONAN.Item.Armor.Qualities.Noisy\",\n\tmentalPiercingx: \"CONAN.Item.Armor.Qualities.PiercingX\",\n\tvheavy: \"CONAN.Item.Armor.Qualities.VeryHeavy\",\n\twarm: \"CONAN.Item.Armor.Qualities.Warm\",\n};\n\nCONFIG.armorTypes = {\n\theavyArmor: \"CONAN.Item.Armor.Types.HeavyArmor\",\n\theavyCloth: \"CONAN.Item.Armor.Types.HeavyClothing\",\n\tlightArmor: \"CONAN.Item.Armor.Types.LightArmor\",\n\tveryHeavyArmor: \"CONAN.Item.Armor.Types.VeryHeavyArmor\",\n};\n\nCONFIG.attributeIds = [\n\t\"agi\",\n\t\"awa\",\n\t\"bra\",\n\t\"coo\",\n\t\"int\",\n\t\"per\",\n\t\"wil\",\n];\n\nCONFIG.attributeLabels = {\n\tbra: \"CONAN.Actor.Attribute.Brawn.label\",\n\tagi: \"CONAN.Actor.Attribute.Agility.label\",\n\tawa: \"CONAN.Actor.Attribute.Awareness.label\",\n\tcoo: \"CONAN.Actor.Attribute.Coordination.label\",\n\tint: \"CONAN.Actor.Attribute.Intelligence.label\",\n\twil: \"CONAN.Actor.Attribute.Will.label\",\n\tper: \"CONAN.Actor.Attribute.Personality.label\",\n};\n\nCONFIG.attributeTooltips = {\n\tbra: \"CONAN.Actor.Attribute.Brawn.tooltip\",\n\tagi: \"CONAN.Actor.Attribute.Agility.tooltip\",\n\tawa: \"CONAN.Actor.Attribute.Awareness.tooltip\",\n\tcoo: \"CONAN.Actor.Attribute.Coordination.tooltip\",\n\tint: \"CONAN.Actor.Attribute.Intelligence.tooltip\",\n\twil: \"CONAN.Actor.Attribute.Will.tooltip\",\n\tper: \"CONAN.Actor.Attribute.Personality.tooltip\",\n};\n\nCONFIG.backgroundItems = [\n\t\"archetype\",\n\t\"aspect\",\n\t\"caste\",\n\t\"education\",\n\t\"homeland\",\n\t\"language\",\n\t\"nature\",\n\t\"story\",\n\t\"warstory\",\n];\n\nCONFIG.coverageTypes = {\n\thead: \"CONAN.Item.Armor.Coverage.Head\",\n\ttorso: \"CONAN.Item.Armor.Coverage.Torso\",\n\tlarm: \"CONAN.Item.Armor.Coverage.LeftArm\",\n\trarm: \"CONAN.Item.Armor.Coverage.RightArm\",\n\tlleg: \"CONAN.Item.Armor.Coverage.LeftLeg\",\n\trleg: \"CONAN.Item.Armor.Coverage.RightLeg\",\n};\n\nCONFIG.defaultActorTokenImages = {\n\tcharacter: \"systems/conan2d20/assets/tokens/conan-default-actor-green.webp\",\n\tmount: \"systems/conan2d20/assets/tokens/conan-default-actor-purple.webp\",\n\tnpc: \"systems/conan2d20/assets/tokens/conan-default-actor-red.webp\",\n\ttransport: \"systems/conan2d20/assets/tokens/conan-default-actor-brown.webp\",\n\twatercraft: \"systems/conan2d20/assets/tokens/conan-default-actor-blue.webp\",\n};\n\nCONFIG.JournalUuids = {\n\treleaseNotes: \"Compendium.conan2d20.documentation.JournalEntry.g7Ur47STfj45yX7k\",\n};\n\nCONFIG.skillIds = [\n\t\"acr\",\n\t\"alc\",\n\t\"ani\",\n\t\"ath\",\n\t\"com\",\n\t\"cou\",\n\t\"cra\",\n\t\"dis\",\n\t\"hea\",\n\t\"ins\",\n\t\"lin\",\n\t\"lor\",\n\t\"mel\",\n\t\"obs\",\n\t\"par\",\n\t\"per\",\n\t\"ran\",\n\t\"res\",\n\t\"sai\",\n\t\"soc\",\n\t\"sor\",\n\t\"ste\",\n\t\"sur\",\n\t\"thi\",\n\t\"war\",\n];\n\nCONFIG.skills = {\n\tacr: \"CONAN.skills.acr\",\n\tmel: \"CONAN.skills.mel\",\n\tste: \"CONAN.skills.ste\",\n\tins: \"CONAN.skills.ins\",\n\tobs: \"CONAN.skills.obs\",\n\tsur: \"CONAN.skills.sur\",\n\tthi: \"CONAN.skills.thi\",\n\tath: \"CONAN.skills.ath\",\n\tres: \"CONAN.skills.res\",\n\tpar: \"CONAN.skills.par\",\n\tran: \"CONAN.skills.ran\",\n\tsai: \"CONAN.skills.sai\",\n\talc: \"CONAN.skills.alc\",\n\tcra: \"CONAN.skills.cra\",\n\thea: \"CONAN.skills.hea\",\n\tlin: \"CONAN.skills.lin\",\n\tlor: \"CONAN.skills.lor\",\n\twar: \"CONAN.skills.war\",\n\tani: \"CONAN.skills.ani\",\n\tcom: \"CONAN.skills.com\",\n\tcou: \"CONAN.skills.cou\",\n\tper: \"CONAN.skills.per\",\n\tsoc: \"CONAN.skills.soc\",\n\tdis: \"CONAN.skills.dis\",\n\tsor: \"CONAN.skills.sor\",\n};\n\nCONFIG.skillsEnglish = {\n\tacr: \"Acrobatics\",\n\tmel: \"Melee\",\n\tste: \"Stealth\",\n\tins: \"Insight\",\n\tobs: \"Observation\",\n\tsur: \"Survival\",\n\tthi: \"Thievery\",\n\tath: \"Athletics\",\n\tres: \"Resistance\",\n\tpar: \"Parry\",\n\tran: \"Ranged Weapons\",\n\tsai: \"Sailing\",\n\talc: \"Alchemy\",\n\tcra: \"Craft\",\n\thea: \"Healing\",\n\tlin: \"Linguistics\",\n\tlor: \"Lore\",\n\twar: \"Warfare\",\n\tani: \"Animal Handling\",\n\tcom: \"Command\",\n\tcou: \"Counsel\",\n\tper: \"Persuade\",\n\tsoc: \"Society\",\n\tdis: \"Discipline\",\n\tsor: \"Sorcery\",\n};\n\nCONFIG.skillAttributeMap = {\n\tacr: \"agi\",\n\tmel: \"agi\",\n\tste: \"agi\",\n\tins: \"awa\",\n\tobs: \"awa\",\n\tsur: \"awa\",\n\tthi: \"awa\",\n\tath: \"bra\",\n\tres: \"bra\",\n\tpar: \"coo\",\n\tran: \"coo\",\n\tsai: \"coo\",\n\talc: \"int\",\n\tcra: \"int\",\n\thea: \"int\",\n\tlin: \"int\",\n\tlor: \"int\",\n\twar: \"int\",\n\tani: \"per\",\n\tcom: \"per\",\n\tcou: \"per\",\n\tper: \"per\",\n\tsoc: \"per\",\n\tdis: \"wil\",\n\tsor: \"wil\",\n};\n\nCONFIG.skillTooltips = {\n\tacr: \"CONAN.skillTooltips.acr\",\n\talc: \"CONAN.skillTooltips.alc\",\n\tani: \"CONAN.skillTooltips.ani\",\n\tath: \"CONAN.skillTooltips.ath\",\n\tcmb: \"CONAN.skillTooltips.cmb\",\n\tcom: \"CONAN.skillTooltips.com\",\n\tcou: \"CONAN.skillTooltips.cou\",\n\tcra: \"CONAN.skillTooltips.cra\",\n\tdis: \"CONAN.skillTooltips.dis\",\n\tfrt: \"CONAN.skillTooltips.frt\",\n\thea: \"CONAN.skillTooltips.hea\",\n\tins: \"CONAN.skillTooltips.ins\",\n\tknw: \"CONAN.skillTooltips.knw\",\n\tlin: \"CONAN.skillTooltips.lin\",\n\tlor: \"CONAN.skillTooltips.lor\",\n\tmel: \"CONAN.skillTooltips.mel\",\n\tmov: \"CONAN.skillTooltips.mov\",\n\tobs: \"CONAN.skillTooltips.obs\",\n\tpar: \"CONAN.skillTooltips.par\",\n\tper: \"CONAN.skillTooltips.per\",\n\tran: \"CONAN.skillTooltips.ran\",\n\tres: \"CONAN.skillTooltips.res\",\n\tsai: \"CONAN.skillTooltips.sai\",\n\tscl: \"CONAN.skillTooltips.scl\",\n\tsns: \"CONAN.skillTooltips.sns\",\n\tsoc: \"CONAN.skillTooltips.soc\",\n\tsor: \"CONAN.skillTooltips.sor\",\n\tste: \"CONAN.skillTooltips.ste\",\n\tsur: \"CONAN.skillTooltips.sur\",\n\tthi: \"CONAN.skillTooltips.thi\",\n\twar: \"CONAN.skillTooltips.war\",\n};\n\nCONFIG.talentRequirementTypes = {\n\texpertise: \"CONAN.Talent.RequirementTypes.Expertise.label\",\n\tfocus: \"CONAN.Talent.RequirementTypes.Focus.label\",\n\tspecial: \"CONAN.Talent.RequirementTypes.Special.label\",\n\ttalent: \"CONAN.Talent.RequirementTypes.Talent.label\",\n};\n\nCONFIG.enchantmentExplodingItems = {\n\tflashPaper: \"CONAN.enchantmentExplodingItems.fla\",\n\tsmallFireworks: \"CONAN.enchantmentExplodingItems.sma\",\n\tloudFireworks: \"CONAN.enchantmentExplodingItems.lou\",\n\tlargeFireworks: \"CONAN.enchantmentExplodingItems.lar\",\n\tsmallExplosives: \"CONAN.enchantmentExplodingItems.sme\",\n\tlargeExplosives: \"CONAN.enchantmentExplodingItems.lex\",\n};\n\nCONFIG.enchantmentStrengths = {\n\tweak: \"CONAN.enchantmentStrengths.wea\",\n\taverage: \"CONAN.enchantmentStrengths.ave\",\n\tpotent: \"CONAN.enchantmentStrengths.pot\",\n\tdangerous: \"CONAN.enchantmentStrengths.dan\",\n\textraordinary: \"CONAN.enchantmentStrengths.ext\",\n\tdevastationg: \"CONAN.enchantmentStrengths.dev\",\n};\n\nCONFIG.enchantmentBlindingStrengths = {\n\tregular: \"CONAN.enchantmentBlindingStrengths.reg\",\n\tdry: \"CONAN.enchantmentBlindingStrengths.dry\",\n\tfine: \"CONAN.enchantmentBlindingStrengths.fin\",\n\tperfumed: \"CONAN.enchantmentBlindingStrengths.per\",\n\tburning: \"CONAN.enchantmentBlindingStrengths.bur\",\n};\n\nCONFIG.enchantmentTalismanTypes = {\n\tanimal: \"CONAN.enchantmentTalismanTypes.ani\",\n\tchasme: \"CONAN.enchantmentTalismanTypes.cha\",\n\thamsa: \"CONAN.enchantmentTalismanTypes.ham\",\n\tnazar: \"CONAN.enchantmentTalismanTypes.naz\",\n\tpictish: \"CONAN.enchantmentTalismanTypes.pic\",\n};\n\nCONFIG.enchantmentTypes = {\n\tblindingPowder: \"CONAN.enchantmentTypes.bli\",\n\tburningLiquid: \"CONAN.enchantmentTypes.bur\",\n\texplodingPowder: \"CONAN.enchantmentTypes.exp\",\n\tlotusPollen: \"CONAN.enchantmentTypes.lot\",\n\treinforcedFabric: \"CONAN.enchantmentTypes.rei\",\n\ttalisman: \"CONAN.enchantmentTypes.tal\",\n\tupasGlass: \"CONAN.enchantmentTypes.upa\",\n};\n\nCONFIG.upasGlassSizes = {\n\tresilient: \"CONAN.upasGlassSizes.res\",\n\tstrengthened: \"CONAN.upasGlassSizes.str\",\n\tunbreakable: \"CONAN.upasGlassSizes.unb\",\n};\n\nCONFIG.enchantmentVolatilities = {\n\tburningAlcohol: \"CONAN.enchantmentVolatilities.bur\",\n\texplodingLiquor: \"CONAN.enchantmentVolatilities.exp\",\n\tvolatileSpirits: \"CONAN.enchantmentVolatilities.vol\",\n\thellishBrimstone: \"CONAN.enchantmentVolatilities.hel\",\n};\n\nCONFIG.expertiseFields = {\n\tmov: \"CONAN.expertiseFields.mov\",\n\tcmb: \"CONAN.expertiseFields.cmb\",\n\tfrt: \"CONAN.expertiseFields.frt\",\n\tknw: \"CONAN.expertiseFields.knw\",\n\tscl: \"CONAN.expertiseFields.scl\",\n\tsns: \"CONAN.expertiseFields.sns\",\n};\n\n// Hard-coded so we can always use the English versions in the text enrichers\n// as a fallback\nCONFIG.expertiseFieldsEnglish = {\n\tmov: \"Movement\",\n\tcmb: \"Combat\",\n\tfrt: \"Fortitude\",\n\tknw: \"Knowledge\",\n\tscl: \"Social\",\n\tsns: \"Senses\",\n};\n\nCONFIG.expertiseAttributeMap = {\n\tmov: \"agi\",\n\tcmb: \"agi\",\n\tfrt: \"bra\",\n\tknw: \"int\",\n\tscl: \"per\",\n\tsns: \"awa\",\n};\n\nCONFIG.rollDifficultyLevels = {\n\t0: \"CONAN.skillRollDifficultyLevels.0\",\n\t1: \"CONAN.skillRollDifficultyLevels.1\",\n\t2: \"CONAN.skillRollDifficultyLevels.2\",\n\t3: \"CONAN.skillRollDifficultyLevels.3\",\n\t4: \"CONAN.skillRollDifficultyLevels.4\",\n\t5: \"CONAN.skillRollDifficultyLevels.5\",\n};\n\nCONFIG.skillRollResourceSpends = {\n\tmomentum: \"CONAN.skillRollResourceSpends.mome\",\n\tdoom: \"CONAN.skillRollResourceSpends.doom\",\n};\n\nCONFIG.rollResults = {\n\tsuccess: \"CONAN.SkillRoll.Success.label\",\n\tfailure: \"CONAN.SkillRoll.Failure.label\",\n};\n\nCONFIG.attacks = {\n\tweapon: \"CONAN.attackTypes.weapon\",\n\tdisplay: \"CONAN.attackTypes.display\",\n};\n\nCONFIG.attackTypes = {\n\tmelee: \"CONAN.attackTypes.melee\",\n\tranged: \"CONAN.attackTypes.ranged\",\n\tthreaten: \"CONAN.attackTypes.threaten\",\n};\n\nCONFIG.damageTypes = {\n\tmental: \"CONAN.damageTypes.mental\",\n\tphysical: \"CONAN.damageTypes.physical\",\n};\n\nCONFIG.MOUNT_CAPABILITIES = {\n\tpack: \"CONAN.mount.capabilties.pack.name\",\n\tmount: \"CONAN.mount.capabilties.mount.name\",\n\tbattle: \"CONAN.mount.capabilties.battle.name\",\n};\n\nCONFIG.MOUNT_CAPABILITY_TOOLTIPS = {\n\tpack: \"CONAN.mount.capabilties.pack.description\",\n\tmount: \"CONAN.mount.capabilties.mount.description\",\n\tbattle: \"CONAN.mount.capabilties.battle.description\",\n};\n\nCONFIG.npcActionTypes = {\n\tabilities: \"CONAN.Item.NpcAction.Types.SpecialAbility\",\n\tdoom: \"CONAN.Item.NpcAction.Types.DoomSpend\",\n};\n\nCONFIG.NPC_CATEGORIES = {\n\thorror: \"CONAN.npc.categories.horror.name\",\n\tundead: \"CONAN.npc.categories.undead.name\",\n};\n\nCONFIG.NPC_CATEGORY_TOOLTIPS = {\n\thorror: \"CONAN.npc.categories.horror.description\",\n\tundead: \"CONAN.npc.categories.undead.description\",\n};\n\nCONFIG.npcAttackTypes = {\n\tmelee: \"CONAN.npcAttackTypes.melee\",\n\tranged: \"CONAN.npcAttackTypes.ranged\",\n\tthreaten: \"CONAN.npcAttackTypes.threaten\",\n};\n\nCONFIG.NPC_TYPES = {\n\tminion: \"CONAN.npc.type.minion\",\n\ttoughened: \"CONAN.npc.type.toughened\",\n\tnemesis: \"CONAN.npc.type.nemesis\",\n};\n\nCONFIG.availabilityTypes = {\n\t0: \"CONAN.skillRollDifficultyLevels.0\",\n\t1: \"CONAN.skillRollDifficultyLevels.1\",\n\t2: \"CONAN.skillRollDifficultyLevels.2\",\n\t3: \"CONAN.skillRollDifficultyLevels.3\",\n\t4: \"CONAN.skillRollDifficultyLevels.4\",\n\t5: \"CONAN.skillRollDifficultyLevels.5\",\n};\n\nCONFIG.conditionTypes = {\n\tblind: \"CONAN.conditions.bli\",\n\tburningx: \"CONAN.conditions.bur\",\n\tdazed: \"CONAN.conditions.daz\",\n\tdead: \"CONAN.conditions.dead\",\n\tdeaf: \"CONAN.conditions.dea\",\n\tgrappled: \"CONAN.conditions.grappled\",\n\tguardBroken: \"CONAN.conditions.gua\",\n\thindered: \"CONAN.conditions.hin\",\n\tpoisoned: \"CONAN.conditions.poi\",\n\tprone: \"CONAN.conditions.pro\",\n\tstaggered: \"CONAN.conditions.sta\",\n};\n\nCONFIG.itemPermissions = {\n\taction: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tarchetype: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tarmor: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t\t\"mount\",\n\t\t\t\"transport\",\n\t\t\t\"watercraft\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"character\",\n\t\t],\n\t},\n\taspect: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tcaste: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tdisplay: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"character\",\n\t\t],\n\t},\n\teducation: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tenchantment: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"character\",\n\t\t],\n\t},\n\thomeland: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tkit: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t\t\"mount\",\n\t\t\t\"transport\",\n\t\t\t\"watercraft\",\n\n\t\t],\n\t\tcanUse: [\n\t\t\t\"character\",\n\t\t],\n\t},\n\tlanguage: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tmiscellaneous: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t\t\"mount\",\n\t\t\t\"transport\",\n\t\t\t\"watercraft\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"character\",\n\t\t],\n\t},\n\tnature: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tnpcaction: {\n\t\tcanOwn: [\n\t\t\t\"mount\",\n\t\t\t\"npc\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"mount\",\n\t\t\t\"npc\",\n\t\t],\n\t},\n\tnpcattack: {\n\t\tcanOwn: [\n\t\t\t\"mount\",\n\t\t\t\"npc\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"mount\",\n\t\t\t\"npc\",\n\t\t],\n\t},\n\tspell: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"character\",\n\t\t],\n\t},\n\tstory: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\ttalent: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"character\",\n\t\t],\n\t},\n\twarstory: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t],\n\t\tcanUse: [],\n\t},\n\tweapon: {\n\t\tcanOwn: [\n\t\t\t\"character\",\n\t\t\t\"mount\",\n\t\t\t\"transport\",\n\t\t\t\"watercraft\",\n\t\t],\n\t\tcanUse: [\n\t\t\t\"character\",\n\t\t],\n\t},\n};\n\nCONFIG.kitTypes = {\n\tfacility: \"CONAN.kitTypes.fac\",\n\tkit: \"CONAN.kitTypes.kit\",\n\tlibrary: \"CONAN.kitTypes.lib\",\n\treload: \"CONAN.kitTypes.rel\",\n\tresource: \"CONAN.kitTypes.res\",\n\ttool: \"CONAN.kitTypes.too\",\n};\n\nCONFIG.kitUses = {\n\t1: \"1\",\n\t2: \"2\",\n\t3: \"3\",\n\t4: \"4\",\n\t5: \"5\",\n\t6: \"6\",\n\tinf: \"&infin;\",\n};\n\nCONFIG.lotusPollenColors = {\n\tblack: \"CONAN.lotusPollenColors.black\",\n\tpurple: \"CONAN.lotusPollenColors.purple\",\n\tyellow: \"CONAN.lotusPollenColors.yellow\",\n\tgreen: \"CONAN.lotusPollenColors.green\",\n\tgray: \"CONAN.lotusPollenColors.gray\",\n\tgolden: \"CONAN.lotusPollenColors.golden\",\n};\n\nCONFIG.lotusPollenDifficulty = {\n\tper: \"CONAN.lotusPollenDifficulty\",\n};\n\nCONFIG.lotusPollenForms = {\n\tgas: \"CONAN.lotusPollenForms.gas\",\n\tpowder: \"CONAN.lotusPollenForms.pow\",\n\tliquid: \"CONAN.lotusPollenForms.liq\",\n};\n\nCONFIG.lotusPollenUses = {\n\topiate: \"CONAN.lotusPollenUses.opi\",\n\tpoison: \"CONAN.lotusPollenUses.poi\",\n\tparalytic: \"CONAN.lotusPollenUses.par\",\n\thallucinogenic: \"CONAN.lotusPollenUses.hal\",\n\tenchantment: \"CONAN.lotusPollenUses.enc\",\n\tanger: \"CONAN.lotusPollenUses.ang\",\n\tmadness: \"CONAN.lotusPollenUses.mad\",\n};\n\nCONFIG.WATERCRAFT_QUALITIES = {\n\tagile: \"CONAN.qualities.watercraft.agile.name\",\n\tdeep_draft: \"CONAN.qualities.watercraft.deep_draft.name\",\n\tgalley: \"CONAN.qualities.watercraft.galley.name\",\n\tlight_craft: \"CONAN.qualities.watercraft.light_craft.name\",\n\tponderous: \"CONAN.qualities.watercraft.ponderous.name\",\n\tportage: \"CONAN.qualities.watercraft.portage.name\",\n\tram: \"CONAN.qualities.watercraft.ram.name\",\n\trugged: \"CONAN.qualities.watercraft.rugged.name\",\n\tshallow_draft: \"CONAN.qualities.watercraft.shallow_draft.name\",\n\tship: \"CONAN.qualities.watercraft.ship.name\",\n};\n\nCONFIG.WATERCRAFT_QUALITY_TOOLTIPS = {\n\tagile: \"CONAN.qualities.watercraft.agile.description\",\n\tdeep_draft: \"CONAN.qualities.watercraft.deep_draft.description\",\n\tgalley: \"CONAN.qualities.watercraft.galley.description\",\n\tlight_craft: \"CONAN.qualities.watercraft.light_craft.description\",\n\tponderous: \"CONAN.qualities.watercraft.ponderous.description\",\n\tportage: \"CONAN.qualities.watercraft.portage.description\",\n\tram: \"CONAN.qualities.watercraft.ram.description\",\n\trugged: \"CONAN.qualities.watercraft.rugged.description\",\n\tshallow_draft: \"CONAN.qualities.watercraft.shallow_draft.description\",\n\tship: \"CONAN.qualities.watercraft.ship.description\",\n};\n\nCONFIG.sources = {\n\tageOfConan: \"CONAN.SourceBook.ageOfConan\",\n\tancientRuins: \"CONAN.SourceBook.ancientRuins\",\n\tbookOfSkelos: \"CONAN.SourceBook.bookOfSkelos\",\n\tconanTheAdventurer: \"CONAN.SourceBook.conanTheAdventurer\",\n\tconanTheBarbarian: \"CONAN.SourceBook.conanTheBarbarian\",\n\tconanTheBrigand: \"CONAN.SourceBook.conanTheBrigand\",\n\tconanTheKing: \"CONAN.SourceBook.conanTheKing\",\n\tconanTheMercenary: \"CONAN.SourceBook.conanTheMercenary\",\n\tconanThePirate: \"CONAN.SourceBook.conanThePirate\",\n\tconanTheScout: \"CONAN.SourceBook.conanTheScout\",\n\tconanTheThief: \"CONAN.SourceBook.conanTheThief\",\n\tconanTheWanderer: \"CONAN.SourceBook.conanTheWanderer\",\n\tcoreRulebook: \"CONAN.SourceBook.coreRulebook\",\n\texilesSourcebook: \"CONAN.SourceBook.exilesSourcebook\",\n\thorrorsOfTheHyborianAge: \"CONAN.SourceBook.horrorsOfTheHyborianAge\",\n\tjeweledThronesOfTheEarth: \"CONAN.SourceBook.jeweledThronesOfTheEarth\",\n\tkullOfAtlantis: \"CONAN.SourceBook.kullOfAtlantis\",\n\tmonolithSourcebook: \"CONAN.SourceBook.monolithSourcebook\",\n\tnamelessCults: \"CONAN.SourceBook.namelessCults\",\n\tpitOfKutallu: \"CONAN.SourceBook.pitOfKutallu\",\n\tquickstart: \"CONAN.SourceBook.quickstart\",\n\tshadowOfTheSorcerer: \"CONAN.SourceBook.shadowOfTheSorcerer\",\n\tshiningKingdoms: \"CONAN.SourceBook.shiningKingdoms\",\n\ttreasureHouseOfJaizinKaa: \"CONAN.SourceBook.treasureHouseOfJaizinKaa\",\n\twavesStainedCrimson: \"CONAN.SourceBook.wavesStainedCrimson\",\n};\n\nCONFIG.statusEffects = [\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/blind.svg\",\n\t\tid: \"blind\",\n\t\tname: \"CONAN.conditions.bli\",\n\t\ttitle: \"CONAN.conditionDescriptionBlin\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/burningx.svg\",\n\t\tid: \"burningx\",\n\t\tname: \"CONAN.conditions.bur\",\n\t\ttitle: \"CONAN.conditionDescriptionBurn\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: 1,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/dazed.svg\",\n\t\tid: \"dazed\",\n\t\tname: \"CONAN.conditions.daz\",\n\t\ttitle: \"CONAN.conditionDescriptionDaze\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/dead.svg\",\n\t\tid: \"dead\",\n\t\tname: \"CONAN.conditions.dead\",\n\t\ttitle: \"CONAN.conditionDescriptionDead\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/deaf.svg\",\n\t\tid: \"deaf\",\n\t\tname: \"CONAN.conditions.dea\",\n\t\ttitle: \"CONAN.conditionDescriptionDeaf\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/grappled.svg\",\n\t\tid: \"grappled\",\n\t\tname: \"CONAN.conditions.grappled\",\n\t\ttitle: \"CONAN.conditionDescriptionGrappled\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/guardbreak.svg\",\n\t\tid: \"guardBroken\",\n\t\tname: \"CONAN.conditions.gua\",\n\t\ttitle: \"CONAN.conditionDescriptionGuar\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/hindered.svg\",\n\t\tid: \"hindered\",\n\t\tname: \"CONAN.conditions.hin\",\n\t\ttitle: \"CONAN.conditionDescriptionHind\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/poisoned.svg\",\n\t\tid: \"poisoned\",\n\t\tname: \"CONAN.conditions.poi\",\n\t\ttitle: \"CONAN.conditionDescriptionPois\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/prone.svg\",\n\t\tid: \"prone\",\n\t\tname: \"CONAN.conditions.pro\",\n\t\ttitle: \"CONAN.conditionDescriptionPron\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n\t{\n\t\timg: \"systems/conan2d20/assets/icons/conditions/staggered.svg\",\n\t\tid: \"staggered\",\n\t\tname: \"CONAN.conditions.sta\",\n\t\ttitle: \"CONAN.conditionDescriptionStag\",\n\t\tflags: {\n\t\t\tconan2d20: {\n\t\t\t\ttrigger: \"endRound\",\n\t\t\t\tvalue: null,\n\t\t\t},\n\t\t},\n\t},\n];\n\nCONFIG.transpoAnimals = {\n\tone: \"CONAN.transpoAnimals.1\",\n\tonep: \"CONAN.transpoAnimals.1p\",\n\ttwo: \"CONAN.transpoAnimals.2\",\n\ttwop: \"CONAN.transpoAnimals.2p\",\n\tfour: \"CONAN.transpoAnimals.4\",\n\tfourp: \"CONAN.transpoAnimals.4p\",\n};\n\nCONFIG.transpoBoatTypes = {\n\tbireme: \"CONAN.transpoBoatTypes.bireme\",\n\tcanoe: \"CONAN.transpoBoatTypes.canoe\",\n\tcarrack: \"CONAN.transpoBoatTypes.carrack\",\n\tcog: \"CONAN.transpoBoatTypes.cog\",\n\tgalley: \"CONAN.transpoBoatTypes.galley\",\n\tgondola: \"CONAN.transpoBoatTypes.gondola\",\n\tkayak: \"CONAN.transpoBoatTypes.kayak\",\n\tlongboat: \"CONAN.transpoBoatTypes.longboat\",\n\tlongship: \"CONAN.transpoBoatTypes.longship\",\n\traft: \"CONAN.transpoBoatTypes.raft\",\n};\n\nCONFIG.transpoCapabilities = {\n\tp: \"CONAN.transpoCapabilities.p\",\n\tmp: \"CONAN.transpoCapabilities.mp\",\n\tbmp: \"CONAN.transpoCapabilities.bmp\",\n};\n\nCONFIG.transpoCartTypes = {\n\tcarriage: \"CONAN.transpoCartTypes.carriage\",\n\tcart: \"CONAN.transpoCartTypes.cart\",\n\thchar: \"CONAN.transpoCartTypes.hchar\",\n\tlchar: \"CONAN.transpoCartTypes.lchar\",\n\tlitter: \"CONAN.transpoCartTypes.litter\",\n\twagon: \"CONAN.transpoCartTypes.wagon\",\n\tpwagon: \"CONAN.transpoCartTypes.pwagon\",\n};\n\nCONFIG.transpoCategories = {\n\tmounts: \"CONAN.transpoCategories.mounts\",\n\tcarts: \"CONAN.transpoCategories.carts\",\n\tboats: \"CONAN.transpoCategories.boats\",\n};\n\nCONFIG.transpoMountTypes = {\n\tbuffalo: \"CONAN.transpoMountTypes.buffalo\",\n\tcamel: \"CONAN.transpoMountTypes.camel\",\n\tdonkey: \"CONAN.transpoMountTypes.donkey\",\n\tdhorse: \"CONAN.transpoMountTypes.dhorse\",\n\trhorse: \"CONAN.transpoMountTypes.rhorse\",\n\twhorse: \"CONAN.transpoMountTypes.whorse\",\n};\n\nCONFIG.talentTypes = {\n\tbloodline: \"CONAN.talentTypes.bloodline\",\n\tcaste: \"CONAN.talentTypes.caste\",\n\tfortune: \"CONAN.talentTypes.fortune\",\n\thomeland: \"CONAN.talentTypes.homeland\",\n\tother: \"CONAN.talentTypes.other\",\n\tskill: \"CONAN.talentTypes.skill\",\n};\n\nCONFIG.weaponQualities = {\n\tarea: \"CONAN.qualities.weapons.area\",\n\tbacklashx: \"CONAN.qualities.weapons.back\",\n\tblessedx: \"CONAN.qualities.weapons.bles\",\n\tblinding: \"CONAN.qualities.weapons.blin\",\n\tbrilliant: \"CONAN.qualities.weapons.bril\",\n\tcavalryx: \"CONAN.qualities.weapons.cava\",\n\tcover: \"CONAN.qualities.weapons.cove\",\n\tcursedx: \"CONAN.qualities.weapons.curs\",\n\tenchantedx: \"CONAN.qualities.weapons.ench\",\n\tensorcelledx: \"CONAN.qualities.weapons.enso\",\n\tfamiliar: \"CONAN.qualities.weapons.fami\",\n\tfearsomex: \"CONAN.qualities.weapons.fear\",\n\tfragile: \"CONAN.qualities.weapons.frag\",\n\tgrappling: \"CONAN.qualities.weapons.grap\",\n\thiddenx: \"CONAN.qualities.weapons.hidd\",\n\timprovised: \"CONAN.qualities.weapons.impr\",\n\tintriguingx: \"CONAN.qualities.weapons.intr\",\n\tincendiaryx: \"CONAN.qualities.weapons.ince\",\n\tintense: \"CONAN.qualities.weapons.inte\",\n\tkeen: \"CONAN.qualities.weapons.keen\",\n\tknockdown: \"CONAN.qualities.weapons.knoc\",\n\tmaledictionx: \"CONAN.qualities.weapons.male\",\n\tnonlethal: \"CONAN.qualities.weapons.nonl\",\n\tpairedx: \"CONAN.qualities.weapons.pair\",\n\tparrying: \"CONAN.qualities.weapons.parr\",\n\tpatron: \"CONAN.qualities.weapons.patr\",\n\tpersistentx: \"CONAN.qualities.weapons.pers\",\n\tpiercingx: \"CONAN.qualities.weapons.pier\",\n\tpurposex: \"CONAN.qualities.weapons.purp\",\n\tregalx: \"CONAN.qualities.weapons.rega\",\n\tsanguinex: \"CONAN.qualities.weapons.sang\",\n\tshieldx: \"CONAN.qualities.weapons.shie\",\n\tspreadx: \"CONAN.qualities.weapons.spre\",\n\tstun: \"CONAN.qualities.weapons.stun\",\n\tsubtlex: \"CONAN.qualities.weapons.subt\",\n\tthrown: \"CONAN.qualities.weapons.thro\",\n\ttrappedx: \"CONAN.qualities.weapons.trap\",\n\tunforgivingx: \"CONAN.qualities.weapons.unfo\",\n\tvenom: \"CONAN.qualities.weapons.veno\",\n\tviciousx: \"CONAN.qualities.weapons.vici\",\n\tvolley: \"CONAN.qualities.weapons.voll\",\n\tweak: \"CONAN.qualities.weapons.weak\",\n};\n\nCONFIG.weaponTypes = {\n\tmelee: \"CONAN.weaponTypes.melee\",\n\tranged: \"CONAN.weaponTypes.ranged\",\n};\n\nCONFIG.weaponSizes = {\n\tcrew: \"CONAN.Item.Weapon.Sizes.crew\",\n\tfixed: \"CONAN.Item.Weapon.Sizes.fixed\",\n\tmonstrous: \"CONAN.Item.Weapon.Sizes.monstrous\",\n\toneHanded: \"CONAN.Item.Weapon.Sizes.oneHanded\",\n\ttwoHanded: \"CONAN.Item.Weapon.Sizes.twoHanded\",\n\tunbalanced: \"CONAN.Item.Weapon.Sizes.unbalanced\",\n\tunwieldy: \"CONAN.Item.Weapon.Sizes.unwieldy\",\n};\n\nCONFIG.weaponReaches = {\n\t1: \"1\",\n\t2: \"2\",\n\t3: \"3\",\n\t4: \"4\",\n};\n\nCONFIG.weaponRanges = {\n\tclose: \"CONAN.Item.Weapon.Ranges.close\",\n\tmedium: \"CONAN.Item.Weapon.Ranges.medium\",\n\tlong: \"CONAN.Item.Weapon.Ranges.long\",\n};\n\nCONFIG.soakValue = {\n\tlight: \"CONAN.SoakLight\",\n\theavy: \"CONAN.SoakHeavy\",\n};\n\nCONFIG.qualitiesDescriptions = {\n\tagile: \"CONAN.qualities.watercraft.agile.description\",\n\tarea: \"CONAN.qualities.description.area\",\n\tarmorFragile: \"CONAN.qualities.description.afra\",\n\tbacklashx: \"CONAN.qualities.description.back\",\n\tblessedx: \"CONAN.qualities.description.bles\",\n\tblinding: \"CONAN.qualities.description.blin\",\n\tbrilliant: \"CONAN.qualities.description.bril\",\n\tbrittle: \"CONAN.qualities.description.brit\",\n\tbulky: \"CONAN.qualities.description.bulk\",\n\tcavalryx: \"CONAN.qualities.description.cava\",\n\tcool: \"CONAN.qualities.description.cool\",\n\tcourage: \"CONAN.qualities.description.cour\",\n\tcover: \"CONAN.qualities.description.cove\",\n\tcursedx: \"CONAN.qualities.description.curs\",\n\tdeep_draft: \"CONAN.qualities.watercraft.deep_draft.description\",\n\tenchantedx: \"CONAN.qualities.description.ench\",\n\tensorcelledx: \"CONAN.qualities.description.enso\",\n\tfamiliar: \"CONAN.qualities.description.fami\",\n\tfearsomex: \"CONAN.qualities.description.fear\",\n\tfragile: \"CONAN.qualities.description.frag\",\n\tgalley: \"CONAN.qualities.watercraft.galley.description\",\n\tgrappling: \"CONAN.qualities.description.grap\",\n\theavy: \"CONAN.qualities.description.heav\",\n\thiddenx: \"CONAN.qualities.description.hidd\",\n\timprovised: \"CONAN.qualities.description.impr\",\n\tincendiaryx: \"CONAN.qualities.description.ince\",\n\tintense: \"CONAN.qualities.description.inte\",\n\tintimidating: \"CONAN.qualities.description.inti\",\n\tintriguingx: \"CONAN.qualities.description.intr\",\n\tkeen: \"CONAN.qualities.description.keen\",\n\tknockdown: \"CONAN.qualities.description.knoc\",\n\tlight_craft: \"CONAN.qualities.watercraft.light_craft.description\",\n\tmaledictionx: \"CONAN.qualities.description.male\",\n\tmentalPiercingx: \"CONAN.qualities.description.apie\",\n\tnoisy: \"CONAN.qualities.description.nois\",\n\tnonlethal: \"CONAN.qualities.description.nonl\",\n\tpaired: \"CONAN.qualities.description.pair\",\n\tpairedx: \"CONAN.qualities.description.pair\",\n\tparrying: \"CONAN.qualities.description.parr\",\n\tpatron: \"CONAN.qualities.description.patr\",\n\tpersistentx: \"CONAN.qualities.description.pers\",\n\tpiercingx: \"CONAN.qualities.description.pier\",\n\tponderous: \"CONAN.qualities.watercraft.ponderous.description\",\n\tportage: \"CONAN.qualities.watercraft.portage.description\",\n\tpurposex: \"CONAN.qualities.description.purp\",\n\tram: \"CONAN.qualities.watercraft.ram.description\",\n\tregalx: \"CONAN.qualities.description.rega\",\n\trugged: \"CONAN.qualities.watercraft.rugged.description\",\n\tsanguinex: \"CONAN.qualities.description.sang\",\n\tshallow_draft: \"CONAN.qualities.watercraft.shallow_draft.description\",\n\tshieldx: \"CONAN.qualities.description.shie\",\n\tship: \"CONAN.qualities.watercraft.ship.description\",\n\tspreadx: \"CONAN.qualities.description.spre\",\n\tstun: \"CONAN.qualities.description.stun\",\n\tsubtlex: \"CONAN.qualities.description.subt\",\n\tthrown: \"CONAN.qualities.description.thro\",\n\ttrappedx: \"CONAN.qualities.description.trap\",\n\tunforgivingx: \"CONAN.qualities.description.unfo\",\n\tvenom: \"CONAN.qualities.description.veno\",\n\tvheavy: \"CONAN.qualities.description.vhea\",\n\tviciousx: \"CONAN.qualities.description.vici\",\n\tvolley: \"CONAN.qualities.description.voll\",\n\twarm: \"CONAN.qualities.description.warm\",\n\tweak: \"CONAN.qualities.description.weak\",\n};\n\nexport function generateSortedData() {\n\tCONFIG.sortedAttributes = [];\n\tfor (let attribute in CONFIG.attributeLabels) {\n\t\tCONFIG.sortedAttributes.push({\n\t\t\tkey: attribute,\n\t\t\tname: CONFIG.attributeLabels[attribute],\n\t\t});\n\t}\n\tCONFIG.sortedAttributes.sort((a, b) => a.name.localeCompare(b.name));\n\n\tCONFIG.sortedSkills = [];\n\tfor (let skill in CONFIG.skills) {\n\t\tCONFIG.sortedSkills.push({\n\t\t\tkey: skill,\n\t\t\tname: CONFIG.skills[skill],\n\t\t});\n\t}\n\tCONFIG.sortedSkills.sort((a, b) => a.name.localeCompare(b.name));\n\n\tCONFIG.sortedSources = [];\n\tfor (let source in CONFIG.sources) {\n\t\tCONFIG.sortedSources.push({\n\t\t\tkey: source,\n\t\t\tname: CONFIG.sources[source],\n\t\t});\n\t}\n\tCONFIG.sortedSources.sort((a, b) => a.name.localeCompare(b.name));\n\n\tCONFIG.sortedWeaponQualities = [];\n\tfor (let quality in CONFIG.weaponQualities) {\n\t\tCONFIG.sortedWeaponQualities.push({\n\t\t\tkey: quality,\n\t\t\tname: CONFIG.weaponQualities[quality],\n\t\t});\n\t}\n\tCONFIG.sortedWeaponQualities.sort((a, b) => a.name.localeCompare(b.name));\n}\n","export default class ApplyDamage extends Application {\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.supported_qualities = [\n\t\t\t\"blinding\",\n\t\t\t\"cavalryx\",\n\t\t\t\"fearsomex\",\n\t\t\t\"grappling\",\n\t\t\t\"improvised\",\n\t\t\t\"incendiaryx\",\n\t\t\t\"intense\",\n\t\t\t\"knockdown\",\n\t\t\t\"nonlethal\",\n\t\t\t\"persistentx\",\n\t\t\t\"piercingx\",\n\t\t\t\"spreadx\",\n\t\t\t\"stun\",\n\t\t\t\"unforgivingx\",\n\t\t\t\"viciousx\",\n\t\t];\n\n\t\t// Transport actors can't take damage\n\t\tthis.targets = (options.targets ?? [])\n\t\t\t.filter(actor => actor.canTakeDamage);\n\n\t\tif (this.targets.length <= 0) {\n\t\t\tui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.ApplyDamage.Error.NoTokensSelected.message\"),\n\t\t\t\t{permanent: false}\n\t\t\t);\n\t\t}\n\n\t\tthis.isWatercraft =\n\t\t\t(this.targets.filter(t => t.isWatercraft)).length === this.targets.length;\n\n\t\tthis.damage = options.damage ?? {\n\t\t\teffects: 0,\n\t\t\tlocation: \"head\",\n\t\t\tresolve: 0,\n\t\t\tvigor: 0,\n\t\t};\n\n\t\tthis.damage.penetration = 0;\n\n\t\tthis.item = options.item ?? undefined;\n\n\t\tthis.qualities = null;\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"apply-damage\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/apply-damage.hbs\",\n\t\t\twidth: 280,\n\t\t\theight: \"auto\",\n\t\t\tsubmitOnChange: false,\n\t\t});\n\t}\n\n\tget title() {\n\t\tif (this.item) {\n\t\t\treturn `${this.item.name} ${game.i18n.localize(\"CONAN.Damage\")}`;\n\t\t}\n\t\telse {\n\t\t\treturn `${game.i18n.localize(\"CONAN.ApplyDamage.title\")}`;\n\t\t}\n\t}\n\n\tactivateListeners(html) {\n\t\tconst me = this;\n\n\t\thtml.find(\".apply-damage-button\").click(async event => {\n\t\t\tevent.preventDefault();\n\t\t\tthis.applyDamage();\n\t\t\tthis.close();\n\t\t});\n\n\t\thtml.find(\".character\").click(async event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst index = $(event.currentTarget).data(\"actor-index\");\n\t\t\tconst target = this.targets[index];\n\t\t\ttarget.sheet.render(true);\n\t\t});\n\n\t\thtml.find(\".character\").contextmenu(async event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst index = $(event.currentTarget).data(\"actor-index\");\n\t\t\tconst newTargetList = [];\n\n\t\t\tfor (let i = 0; i < this.targets.length; i++) {\n\t\t\t\tif (index === i) continue;\n\t\t\t\tnewTargetList.push(this.targets[i]);\n\t\t\t}\n\n\t\t\tif (newTargetList.length > 0) {\n\t\t\t\tthis.targets = newTargetList;\n\t\t\t\tthis.render(false);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t});\n\n\t\thtml.find(\".apply-damage .quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tconst btnUp = spinner.find(\".quantity-up\");\n\t\t\tconst btnDown = spinner.find(\".quantity-down\");\n\t\t\tconst quantityType = input.attr(\"data-quantity-type\");\n\n\t\t\tinput.on(\"wheel\", ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tif (ev.originalEvent.deltaY < 0) {\n\t\t\t\t\tme.damage[quantityType] += 1;\n\t\t\t\t}\n\t\t\t\telse if (ev.originalEvent.deltaY > 0) {\n\t\t\t\t\tme.damage[quantityType] -= 1;\n\t\t\t\t\tme.damage[quantityType] = me.damage[quantityType] >= 0\n\t\t\t\t\t\t? me.damage[quantityType]\n\t\t\t\t\t\t: 0;\n\t\t\t\t}\n\t\t\t\tme.render(false);\n\t\t\t});\n\n\t\t\tbtnUp.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme.damage[quantityType] += 1;\n\t\t\t\tme.render(false);\n\t\t\t});\n\n\t\t\tbtnDown.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme.damage[quantityType] -= 1;\n\t\t\t\tme.damage[quantityType] = me.damage[quantityType] >= 0\n\t\t\t\t\t? me.damage[quantityType]\n\t\t\t\t\t: 0;\n\t\t\t\tme.render(false);\n\t\t\t});\n\t\t});\n\n\t\thtml.find(\".apply-damage select\").on(\"change\", function() {\n\t\t\tconst selector = $(this);\n\t\t\tconst value = selector.val();\n\t\t\tme.damage.location = value;\n\t\t});\n\n\t\thtml.find(\".quality-tag\").click(event => {\n\t\t\tevent.preventDefault();\n\t\t\tlet qualitySlug = $(event.currentTarget).data(\"quality\");\n\n\t\t\tfor (const quality of this.qualities) {\n\t\t\t\tif (quality.slug === qualitySlug) {\n\t\t\t\t\tquality.enabled = !quality.enabled;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tme.render(true);\n\t\t});\n\n\t\tsuper.activateListeners(html);\n\t}\n\n\tasync applyDamage() {\n\t\tconst qualities = (this.qualities ?? []).filter(q => q.enabled && q.supported);\n\t\tthis.damage.locationLocalized = CONFIG.CONAN.coverageTypes[this.damage.location];\n\t\tfor (const target of this.targets) {\n\t\t\tconst damage = foundry.utils.duplicate(this.damage);\n\t\t\tconst results = await target.applyDamage(damage, qualities);\n\n\t\t\tconan.chat.renderApplyDamageResultCard(results);\n\t\t}\n\t}\n\n\tasync getData() {\n\t\tif (this.qualities === null && this.item) {\n\t\t\tconst itemData = await this.item.getChatData();\n\n\t\t\tthis.qualities = itemData.qualities;\n\n\t\t\tfor (const quality of this.qualities) {\n\t\t\t\tquality.supported = this.supported_qualities.includes(quality.type);\n\t\t\t\tquality.enabled = true;\n\t\t\t\tquality.slug = quality.label.slugify();\n\t\t\t}\n\t\t}\n\n\t\tconst selectedTargets = await this.getSelectedTargetsData();\n\n\t\tconst context = {\n\t\t\tdamage: this.damage,\n\t\t\thasQualities: this.item && this.qualities.length > 0,\n\t\t\tisWatercraft: this.isWatercraft,\n\t\t\titem: this.item,\n\t\t\tqualities: this.qualities,\n\t\t\tlocations: CONFIG.CONAN.coverageTypes,\n\t\t\tselectedTargets,\n\t\t};\n\n\t\treturn context;\n\t}\n\n\tasync getSelectedTargetsData() {\n\t\tconst selectedTargets = [];\n\n\t\tthis.targets.forEach((target, index) => {\n\t\t\tlet name;\n\t\t\tlet img;\n\n\t\t\tif (target.isToken) {\n\t\t\t\tname = target.token.name;\n\t\t\t\timg = target.token.texture.src;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tname = target.name;\n\t\t\t\timg = target.prototypeToken.texture.src;\n\t\t\t}\n\n\t\t\tselectedTargets.push({\n\t\t\t\timg,\n\t\t\t\tindex,\n\t\t\t\tname,\n\t\t\t});\n\t\t});\n\n\t\tif (selectedTargets.length > 1) {\n\t\t\tselectedTargets.sort((a, b) => a.name.localeCompare(b.name));\n\t\t}\n\n\t\treturn selectedTargets;\n\t}\n}\n","export default class TalentManager {\n\tconstructor(options={}) {\n\t\tthis.ignoreCost = options.ignoreCost ?? false;\n\n\t\tthis.actorKnownTalentsLut = {};\n\t\tthis.actorAttributes = [];\n\t\tthis.actorSkills = [];\n\t\tthis.actorXp = 200;\n\t}\n\n\tasync getAvailableTalentsForSkills(skills=[]) {\n\t\tconst selectedTalents = new Collection();\n\n\t\t// If we haven't been given an Array of skills then just return an empty\n\t\t// collection\n\t\tif (!Array.isArray(skills)) return selectedTalents;\n\n\t\tconst allSkillTalents = await conan.compendiums.skillTalents();\n\t\tfor (const talent of allSkillTalents) {\n\t\t\ttalent.system.multiRank = talent.system.rank.max > 1;\n\t\t\ttalent.system.talentIdentifier =\n\t\t\t\tconan.utils.generateTalentIdentifier(talent);\n\n\t\t\tif (skills.includes(talent.system.linkedSkill)) {\n\t\t\t\t// Make sure we meet the requirements\n\t\t\t\tconst meetsRequirements = await this._meetsRequirements(talent);\n\n\t\t\t\tif (meetsRequirements) {\n\t\t\t\t\tlet rank = 1;\n\n\t\t\t\t\tif (Object.hasOwn(this.actorKnownTalentsLut, talent.system.talentIdentifier)) {\n\t\t\t\t\t\tconst current = this.actorKnownTalentsLut[talent.system.talentIdentifier];\n\t\t\t\t\t\trank = current + 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst discount = this.actorSkills[talent.system.linkedSkill].discount;\n\t\t\t\t\tconst cost = talent.system.cost - discount;\n\n\t\t\t\t\tselectedTalents.set(talent._id, {item: talent, rank, cost});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn selectedTalents;\n\t}\n\n\tasync getAvailableSkillTalents() {\n\t\treturn await this.getAvailableTalentsForSkills(Object.keys(CONFIG.CONAN.skills));\n\t}\n\n\tasync getPurchasableTalents() {\n\t\tconst availableTalents = await this.getAvailableSkillTalents();\n\n\t\tconst fortuneTalents = await conan.compendiums.fortuneTalents();\n\t\tfor (const talent of fortuneTalents) {\n\t\t\t// Make sure we meet the requirements\n\t\t\tconst meetsRequirements = await this._meetsRequirements(talent);\n\n\t\t\tif (meetsRequirements) {\n\t\t\t\tlet rank = 1;\n\t\t\t\tif (Object.hasOwn(this.actorKnownTalentsLut, talent.system.talentIdentifier)) {\n\t\t\t\t\tconst current = this.actorKnownTalentsLut[talent.system.talentIdentifier];\n\t\t\t\t\trank = current + 1;\n\t\t\t\t}\n\n\t\t\t\tconst cost = talent.system.cost;\n\n\t\t\t\tavailableTalents.set(talent.id, {item: talent, rank, cost});\n\t\t\t}\n\t\t}\n\n\t\treturn availableTalents;\n\t}\n\n\tasync setActorAttributes(attributes) {\n\t\tthis.actorAttributes = attributes;\n\t}\n\n\tasync setActorSkills(skills) {\n\t\tthis.actorSkills = skills;\n\t\tfor (const key in this.actorSkills) {\n\t\t\tconst skill = this.actorSkills[key];\n\t\t\tskill.discount = 25 * Number(skill.focus.value);\n\t\t}\n\t}\n\n\tasync setActorXp(xp) {\n\t\tthis.actorXp = xp;\n\t}\n\n\tasync setKnownTalents(talents) {\n\t\tthis.actorKnownTalentsLut = {};\n\n\t\tfor (const talent of talents) {\n\t\t\tthis.actorKnownTalentsLut[talent.identifier] = talent.rank;\n\t\t}\n\t}\n\n\tasync _meetsRequirements(talent) {\n\t\tlet requirementsMet = true;\n\n\t\t// First make sure that if the character already knows the talent that\n\t\t// they have not maxed it out\n\t\tconst knownTalent = this.actorKnownTalentsLut[\n\t\t\ttalent.system.talentIdentifier\n\t\t];\n\n\t\tif (knownTalent) {\n\t\t\tif (knownTalent >= talent.system.rank.max) {\n\t\t\t\trequirementsMet = false;\n\t\t\t}\n\t\t}\n\n\t\tfor (const requirement of talent.system.requirements) {\n\t\t\t// If requirements are not met, no need to check further\n\t\t\tif (!requirementsMet) break;\n\n\t\t\tconst type = requirement.type;\n\t\t\tswitch (type) {\n\t\t\t\tcase \"expertise\":\n\t\t\t\tcase \"focus\":\n\t\t\t\t\tif (requirementsMet) {\n\t\t\t\t\t\tconst skill = this.actorSkills[requirement.skill];\n\t\t\t\t\t\trequirementsMet = skill[type].value >= requirement.value;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"talent\":\n\t\t\t\t\tfor (const required of requirement.talents) {\n\t\t\t\t\t\tconst check = await fromUuid(required.uuid);\n\n\t\t\t\t\t\tif (check) {\n\t\t\t\t\t\t\tconst known = this.actorKnownTalentsLut[\n\t\t\t\t\t\t\t\tcheck.system.talentIdentifier\n\t\t\t\t\t\t\t];\n\n\t\t\t\t\t\t\trequirementsMet = known\n\t\t\t\t\t\t\t\t? known >= required.rank\n\t\t\t\t\t\t\t\t: false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\trequirementsMet = false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!requirementsMet) break;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// Unless we've specifically been told to ignore to XP cost of the\n\t\t// Talent (during Character Creation mainly) then as a last check\n\t\t// ensure we have the XP funds to purchase it.\n\t\t//\n\t\tif (!this.ignoreCost) {\n\t\t\tconst discount = talent.system.linkedSkill !== \"\"\n\t\t\t\t? this.actorSkills[talent.system.linkedSkill].discount\n\t\t\t\t: 0;\n\n\t\t\tif (talent.system.cost - discount > this.actorXp) requirementsMet = false;\n\t\t}\n\n\t\treturn requirementsMet;\n\t}\n}\n","/** Class representing a stage of character creation  */\nimport TalentManager from \"../../system/TalentManager.mjs\";\n\nexport default class CharGenBaseStage {\n\tcharacterCreator;\n\n\tdata;\n\n\terrors = [];\n\n\tname = \"\";\n\n\tuuid = foundry.utils.randomID();\n\n\tvalid = false;\n\n\tconstructor(characterCreator) {\n\t\tthis.characterCreator = characterCreator;\n\t\tthis.talentManager = new TalentManager({ignoreCost: true});\n\t}\n\n\tget hasErrors() {\n\t\treturn this.errors.length > 0;\n\t}\n\n\tactivateListeners(html) {}\n\n\tasync applyAttributeBonuses(attributes) {}\n\n\tasync applySkillBonuses(skills) {}\n\n\tasync characterData() {}\n\n\tasync formConfig() {\n\t\treturn {\n\t\t\tCONFIG: CONFIG.CONAN,\n\t\t\tdata: this.data,\n\t\t\terrors: this.errors,\n\t\t\tname: this.name,\n\t\t\tuuid: this.uuid,\n\t\t\tvalid: this.valid,\n\t\t};\n\t}\n\n\tasync getItems() {}\n\n\tasync getItemFromResult(result) {\n\t\tconst uuid = [\n\t\t\t\"Compendium\",\n\t\t\tresult.documentCollection,\n\t\t\tresult.documentId,\n\n\t\t].join(\".\");\n\n\t\treturn await fromUuid(uuid);\n\t}\n\n\tasync getRollTable(name) {\n\t\tconst tables = await this.characterCreator.getRollTables(name) ?? [];\n\t\treturn tables[0];\n\t}\n\n\tasync getRollTables(name) {\n\t\tthis.tables = await this.characterCreator.getRollTables(name);\n\t}\n\n\tasync processElectiveSkillsSubmit(updateData) {\n\t\tconst electiveChanges = {};\n\t\tfor (const electiveSkill of this.electiveSkills) {\n\t\t\telectiveChanges[electiveSkill.skill] = {\n\t\t\t\toldChecked: electiveSkill.checked,\n\t\t\t\tnewChecked: false,\n\t\t\t};\n\n\t\t\telectiveSkill.bonus = 0;\n\t\t\telectiveSkill.checked = false;\n\t\t}\n\n\t\tconst electivesKey = `${this.name}_electiveSkill::`;\n\t\tfor (const key in updateData) {\n\t\t\tif (key.startsWith(electivesKey)) {\n\t\t\t\tconst [, skill] = key.split(\"::\");\n\t\t\t\tconst skillChecked = updateData[key] === skill ? true : false;\n\t\t\t\tfor (const electiveSkill of this.electiveSkills) {\n\t\t\t\t\tif (skillChecked && electiveSkill.skill === skill) {\n\t\t\t\t\t\telectiveSkill.bonus = 1;\n\t\t\t\t\t\telectiveSkill.checked = true;\n\n\t\t\t\t\t\telectiveChanges[skill].newChecked = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet electiveChanged = false;\n\t\tfor (const skill in electiveChanges) {\n\t\t\tconst oldChecked = electiveChanges[skill].oldChecked;\n\t\t\tconst newChecked = electiveChanges[skill].newChecked;\n\n\t\t\tif (oldChecked !== newChecked) {\n\t\t\t\telectiveChanged = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (electiveChanged) {\n\t\t\tawait this.characterCreator.updateCharacterData();\n\t\t}\n\n\t\treturn electiveChanged;\n\t}\n\n\n\tasync processSubmit(updateData) {\n\t\treturn updateData;\n\t}\n\n\tasync randomItem(items) {\n\t\tif (items.size > 0) {\n\t\t\tconst index = Math.floor(Math.random() * items.size);\n\n\t\t\treturn items.find((object, i) => {\n\t\t\t\treturn i === index;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.NoItemsAvailable\")\n\t\t\t);\n\t\t}\n\t}\n\n\tasync selectorUuidUpdated(updateData) {}\n\n\tasync validate() {}\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenArchetype extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"archetype\";\n\n\t\tthis.archetype = null;\n\n\t\tthis.careerSkills = [];\n\t\tthis.careerTalents = [];\n\t\tthis.electiveSkills = [];\n\t\tthis.mandatorySkills = [];\n\n\t\tthis.validate();\n\t}\n\n\tasync _onRollArchetype(event) {\n\t\tevent.preventDefault();\n\n\t\tconst archetypes = await conan.compendiums.archetypes();\n\t\tthis.archetype = await this.randomItem(archetypes);\n\n\t\tawait this.updateArchetypeData();\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".archetype-roll\").click(event => this._onRollArchetype(event));\n\t}\n\n\tasync applySkillBonuses(skills) {\n\t\tif (this.archetype) {\n\t\t\tfor (const mandatorySkill of this.mandatorySkills) {\n\t\t\t\tconst key = mandatorySkill.skill;\n\t\t\t\tskills[key].focus.value += 1;\n\t\t\t\tskills[key].expertise.value += 1;\n\t\t\t}\n\n\t\t\tfor (const electiveSkill of this.electiveSkills) {\n\t\t\t\tconst key = electiveSkill.skill;\n\t\t\t\tskills[key].focus.value += electiveSkill.bonus;\n\t\t\t\tskills[key].expertise.value += electiveSkill.bonus;\n\t\t\t}\n\n\t\t\tfor (const careerSkill of this.careerSkills) {\n\t\t\t\tconst key = careerSkill.skill;\n\t\t\t\tskills[key].focus.value += 2;\n\t\t\t\tskills[key].expertise.value += 2;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync characterData() {\n\t\treturn {\n\t\t\t\"system.background.archetype.value\": this.archetype?.uuid ?? \"\",\n\t\t};\n\t}\n\n\tasync formConfig() {\n\t\tconst archetypeUuid = this.archetype?.uuid ?? \"\";\n\n\t\tconst [selectedArchetypes, unselectedArchetypes] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.archetypes(),\n\t\t\t\tarchetypeUuid ? [archetypeUuid] : []\n\t\t\t);\n\n\t\tlet archetypeDescriptionHTML = \"\";\n\n\t\tif (this.archetype) {\n\t\t\tarchetypeDescriptionHTML = await TextEditor.enrichHTML(\n\t\t\t\tthis.archetype.system.description.value,\n\t\t\t\t{\n\t\t\t\t\tasync: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tarchetype: this.archetype,\n\t\t\tarchetypeDescriptionHTML,\n\t\t\tcareerSkills: this.careerSkills,\n\t\t\tcareerTalents: this.careerTalents,\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Archetype.description\"),\n\t\t\telectiveSkills: this.electiveSkills,\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Archetype.label\"),\n\t\t\tmandatorySkills: this.mandatorySkills,\n\t\t\tselected: selectedArchetypes,\n\t\t\ttemplate: () => \"apps/character-creator/archetype\",\n\t\t\tunselected: unselectedArchetypes,\n\t\t};\n\t}\n\n\tgetCareerSkill() {\n\t\treturn this.archetype?.system?.careerSkill?.choices[0] ?? \"\";\n\t}\n\n\tasync getItems() {\n\t\treturn this.careerTalents ?? [];\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tawait this.processElectiveSkillsSubmit(updateData);\n\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"archetypeUuid\") {\n\t\t\tthis.archetype = await fromUuid(updateData.uuid);\n\n\t\t\tawait this.updateArchetypeData();\n\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tasync updateArchetypeData() {\n\t\tconst skills = {};\n\n\t\tthis.careerSkills = [];\n\t\tfor (const skill of this.archetype?.system?.careerSkill?.choices ?? []) {\n\t\t\tskills[skill] = true;\n\t\t\tthis.careerSkills.push({\n\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\tskill,\n\t\t\t});\n\t\t}\n\n\t\tthis.electiveSkills = [];\n\t\tfor (const skill of this.archetype?.system?.electiveSkill?.choices ?? []) {\n\t\t\tskills[skill] = true;\n\t\t\tthis.electiveSkills.push({\n\t\t\t\tbonus: 0,\n\t\t\t\tchecked: false,\n\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\tskill,\n\t\t\t});\n\t\t}\n\n\t\tthis.mandatorySkills = [];\n\t\tfor (const skill of this.archetype?.system?.mandatorySkill?.choices ?? []) {\n\t\t\tskills[skill] = true;\n\t\t\tthis.mandatorySkills.push({\n\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\tskill,\n\t\t\t});\n\t\t}\n\n\t\tthis.careerTalents = [];\n\t\tfor (const talentUuid of this.archetype?.system?.careerTalent?.choices ?? []) {\n\t\t\tthis.careerTalents.push(await fromUuid(talentUuid));\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (!(this.archetype && this.archetype.type === \"archetype\")) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectAnArchetype\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.archetype) {\n\t\t\tlet electiveSkillCount = 0;\n\t\t\tfor (const skill of this.electiveSkills) {\n\t\t\t\tif (skill.checked) electiveSkillCount++;\n\t\t\t}\n\n\t\t\tif (electiveSkillCount !== 2) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectTwoElectiveSkills\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.careerTalent === \"\") {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectACareerTalent\")\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenAttributeAspects extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"attribute aspects\";\n\n\t\tthis.data = {\n\t\t\taspectOneUuid: null,\n\t\t\taspectTwoUuid: null,\n\t\t};\n\n\t\tthis.aspectOne = null;\n\t\tthis.aspectTwo = null;\n\n\t\tthis.selectorOneChanged = true;\n\t\tthis.selectorTwoChanged = true;\n\n\t\tthis.mandatory = {};\n\t\tthis.optional = {};\n\n\t\tthis._updateManadatoryAttributeConfig();\n\t\tthis._updateOptionalAttributeConfig();\n\n\t\tthis.validate();\n\t}\n\n\tasync _onRollAspect(event) {\n\t\tevent.preventDefault();\n\n\t\tconst aspectIndex = $(event.currentTarget).data(\"aspect-index\");\n\n\t\tconst aspects = await conan.compendiums.aspects();\n\t\tconst result = await this.randomItem(aspects);\n\n\t\tif (aspectIndex === \"one\") {\n\t\t\tthis.aspectOne = result;\n\t\t\tthis.data.aspectOneUuid = result.uuid;\n\t\t}\n\t\telse if (aspectIndex === \"two\") {\n\t\t\tthis.aspectTwo = result;\n\t\t\tthis.data.aspectTwoUuid = result.uuid;\n\t\t}\n\n\t\tthis._updateManadatoryAttributeConfig();\n\t\tthis._updateOptionalAttributeConfig();\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".aspect-roll\").click(event => this._onRollAspect(event));\n\t}\n\n\tasync applyAttributeBonuses(attributes) {\n\t\tfor (const mandatoryAttribute of this.mandatory.attributes) {\n\t\t\tconst key = mandatoryAttribute.attribute;\n\t\t\tattributes[key].value += mandatoryAttribute.bonus;\n\t\t}\n\n\t\tfor (const aspect of this.optional.aspects) {\n\t\t\tfor (const optionalAttribute of aspect.attributes) {\n\t\t\t\tconst key = optionalAttribute.attribute;\n\t\t\t\tattributes[key].value += optionalAttribute.bonus;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync formConfig() {\n\t\tconst aspects = await conan.compendiums.aspects();\n\n\t\tconst [selectedAspectOne, unselectedAspectOne] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\taspects,\n\t\t\t\tthis.data.aspectOneUuid ? [this.data.aspectOneUuid] : []\n\t\t\t);\n\n\t\tconst [selectedAspectTwo, unselectedAspectTwo] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\taspects,\n\t\t\t\tthis.data.aspectTwoUuid ? [this.data.aspectTwoUuid] : []\n\t\t\t);\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\taspects: [\n\t\t\t\t{\n\t\t\t\t\taspectIndex: \"one\",\n\t\t\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.AttributeAspect.One.label\"),\n\t\t\t\t\tselected: selectedAspectOne[0],\n\t\t\t\t\tunselected: unselectedAspectOne,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\taspectIndex: \"two\",\n\t\t\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.AttributeAspect.Two.label\"),\n\t\t\t\t\tselected: selectedAspectTwo[0],\n\t\t\t\t\tunselected: unselectedAspectTwo,\n\t\t\t\t},\n\t\t\t],\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.AttributeAspect.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.AttributeAspect.label\"),\n\t\t\tmandatory: this.mandatory,\n\t\t\toptional: this.optional,\n\t\t\ttemplate: () => \"apps/character-creator/attribute-aspects\",\n\t\t};\n\t}\n\n\tprocessMandatoryAttributeUpdates(updateData) {\n\t\tif (updateData.mandatoryBest) {\n\t\t\tfor (const entry of this.mandatory.attributes) {\n\t\t\t\tif (entry.id === updateData.mandatoryBest) {\n\t\t\t\t\tentry.best = true;\n\t\t\t\t\tentry.worst = false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tentry.best = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (updateData.mandatoryWorst) {\n\t\t\tfor (const entry of this.mandatory.attributes) {\n\t\t\t\tif (entry.id === updateData.mandatoryWorst) {\n\t\t\t\t\tentry.worst = true;\n\t\t\t\t\tentry.best = false;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tentry.worst = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Update bonuses\n\t\tfor (const entry of this.mandatory.attributes) {\n\t\t\tif (entry.best) {\n\t\t\t\tentry.bonus = 3;\n\t\t\t}\n\t\t\telse if (entry.worst) {\n\t\t\t\tentry.bonus = 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tentry.bonus = 2;\n\t\t\t}\n\t\t}\n\t}\n\n\tprocessOptionalAttributeUpdates(updateData) {\n\t\tif (updateData.aspectOptional_0) {\n\t\t\tfor (const entry of this.optional.aspects[0].attributes) {\n\t\t\t\tif (entry.id === updateData.aspectOptional_0) {\n\t\t\t\t\tentry.checked = true;\n\t\t\t\t\tentry.bonus = 1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tentry.checked = false;\n\t\t\t\t\tentry.bonus = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (updateData.aspectOptional_1) {\n\t\t\tfor (const entry of this.optional.aspects[1].attributes) {\n\t\t\t\tif (entry.id === updateData.aspectOptional_1) {\n\t\t\t\t\tentry.checked = true;\n\t\t\t\t\tentry.bonus = 1;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tentry.checked = false;\n\t\t\t\t\tentry.bonus = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.processMandatoryAttributeUpdates(updateData);\n\n\t\tthis.processOptionalAttributeUpdates(updateData);\n\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name.startsWith(\"aspect_\")) {\n\t\t\tconst aspect = await fromUuid(updateData.uuid);\n\n\t\t\tif (updateData.name.endsWith(\"_one\")) {\n\t\t\t\tthis.selectorOneChanged = true;\n\t\t\t\tthis.data.aspectOneUuid = updateData.uuid;\n\t\t\t\tthis.aspectOne = aspect;\n\t\t\t}\n\t\t\telse if (updateData.name.endsWith(\"_two\")) {\n\t\t\t\tthis.selectorTwoChanged = true;\n\t\t\t\tthis.data.aspectTwoUuid = updateData.uuid;\n\t\t\t\tthis.aspectTwo = aspect;\n\t\t\t}\n\n\t\t\tthis._updateManadatoryAttributeConfig();\n\t\t\tthis._updateOptionalAttributeConfig();\n\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (!(this.aspectOne && this.aspectOne.type === \"aspect\")\n\t\t\t|| !(this.aspectTwo && this.aspectOne.type === \"aspect\")\n\t\t) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.AttributeAspect.Errors.YouMustSelectBothAttributeAspects\")\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tconst best = this.mandatory.attributes.find(e => e.best);\n\t\t\tif (!best) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.AttributeAspect.Errors.YouMustSelectMandatoryBest\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst worst = this.mandatory.attributes.find(e => e.worst);\n\t\t\tif (!worst) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.AttributeAspect.Errors.YouMustSelectMandatoryWorst\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (best && worst) {\n\t\t\t\tif (best.attribute === worst.attribute) {\n\t\t\t\t\tthis.valid = false;\n\t\t\t\t\tthis.errors.push(\n\t\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.AttributeAspect.Errors.BestAndWorstTheSame\")\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.optional.aspects.forEach(aspect => {\n\t\t\tif (!aspect.attributes.find(a => a.checked)) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\t\"CONAN.CharacterCreator.AttributeAspect.Errors.YouMustSelectOneOptional\",\n\t\t\t\t\t\t{aspectName: aspect.aspectName}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tasync _updateManadatoryAttributeConfig() {\n\t\tthis.mandatory = {\n\t\t\tshow: this.aspectOne !== null && this.aspectTwo !== null,\n\t\t\tattributes: [],\n\t\t};\n\n\t\tif (this.mandatory.show) {\n\t\t\t[this.aspectOne, this.aspectTwo].forEach(aspect => {\n\t\t\t\tconst randomId = foundry.utils.randomID();\n\n\t\t\t\taspect.system.mandatoryAttribute.choices.forEach(attribute => {\n\t\t\t\t\tthis.mandatory.attributes.push({\n\t\t\t\t\t\taspectName: aspect.name,\n\t\t\t\t\t\tattribute,\n\t\t\t\t\t\tbest: false,\n\t\t\t\t\t\tid: `${attribute}_${randomId}`,\n\t\t\t\t\t\tname: CONFIG.CONAN.attributeLabels[attribute],\n\t\t\t\t\t\tworst: false,\n\t\t\t\t\t\tbonus: 2,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tasync _updateOptionalAttributeConfig() {\n\t\tthis.optional = {\n\t\t\tshow: this.aspectOne !== null && this.aspectTwo !== null,\n\t\t\taspects: [],\n\t\t};\n\n\t\tif (this.optional.show) {\n\t\t\tlet aspectIndex = 0;\n\t\t\t[this.aspectOne, this.aspectTwo].forEach(aspect => {\n\t\t\t\tconst aspectId = aspect.name.slugify();\n\t\t\t\tconst aspectData = {\n\t\t\t\t\taspectId,\n\t\t\t\t\taspectName: aspect.name,\n\t\t\t\t\tattributes: [],\n\t\t\t\t};\n\n\t\t\t\taspect.system.optionalAttribute.choices.forEach(attribute => {\n\t\t\t\t\tconst randomId = foundry.utils.randomID();\n\n\t\t\t\t\taspectData.attributes.push({\n\t\t\t\t\t\taspectId,\n\t\t\t\t\t\tattribute,\n\t\t\t\t\t\tbonus: 0,\n\t\t\t\t\t\tchecked: false,\n\t\t\t\t\t\tdataName: `aspectOptional_${aspectIndex}`,\n\t\t\t\t\t\tid: `${attribute}_${randomId}`,\n\t\t\t\t\t\tname: CONFIG.CONAN.attributeLabels[attribute],\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tthis.optional.aspects.push(aspectData);\n\n\t\t\t\taspectIndex++;\n\t\t\t});\n\t\t}\n\t}\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenAttributes extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"final attributes\";\n\n\t\tthis.baseAttributes = [];\n\t\tthis.attributes = [];\n\n\t\tCONFIG.CONAN.attributeIds.forEach(attribute => {\n\t\t\tthis.attributes.push({\n\t\t\t\tattribute,\n\t\t\t\tbonus: 0,\n\t\t\t\tchecked: false,\n\t\t\t\tlabel: CONFIG.CONAN.attributeLabels[attribute],\n\t\t\t});\n\t\t});\n\n\t\tthis.ancientBloodline = null;\n\t\tthis.ancientBloodlineNeeded = false;\n\t\tthis.ancientBloodlineUuid = \"\";\n\n\t\tthis.validate();\n\t}\n\n\tasync applyAttributeBonuses(attributes) {\n\t\tthis.baseAttributes = foundry.utils.duplicate(attributes);\n\t\tthis.ancientBloodlineNeeded = false;\n\t\tfor (const attribute in attributes) {\n\t\t\tconst bonus = this.attributes.find(a => a.attribute === attribute).bonus ?? 0;\n\t\t\tattributes[attribute].value += bonus;\n\t\t\tthis.baseAttributes[attribute].value += bonus;\n\n\t\t\tif (attributes[attribute].value > 12) this.ancientBloodlineNeeded = true;\n\t\t}\n\t}\n\n\tasync formConfig() {\n\t\tlet [selectedAncientBloodlines, unselectedAncientBloodlines] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.bloodlineTalents(),\n\t\t\t\tthis.ancientBloodlineUuid ? [this.ancientBloodlineUuid] : []\n\t\t\t);\n\n\t\tif (this.ancientBloodlineNeeded && this.ancientBloodline === null) {\n\t\t\tif (unselectedAncientBloodlines.length === 1) {\n\t\t\t\tthis.ancientBloodline = unselectedAncientBloodlines[0];\n\t\t\t\tthis.ancientBloodlineUuid = this.ancientBloodline.uuid;\n\t\t\t\tselectedAncientBloodlines = [this.ancientBloodline];\n\t\t\t}\n\t\t}\n\n\t\tlet ancientBloodlineDescriptionHTML = \"\";\n\n\t\tif (this.ancientBloodline) {\n\t\t\tancientBloodlineDescriptionHTML = await TextEditor.enrichHTML(\n\t\t\t\tthis.ancientBloodline.system.description.value,\n\t\t\t\t{\n\t\t\t\t\tasync: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tconst config = {\n\t\t\t...await super.formConfig(),\n\t\t\tancientBloodline: this.ancientBloodline,\n\t\t\tancientBloodlineDescriptionHTML,\n\t\t\tancientBloodlineNeeded: this.ancientBloodlineNeeded,\n\t\t\tattributes: this.attributes,\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Attributes.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Attributes.label\"),\n\t\t\tselectedAncientBloodlines,\n\t\t\ttemplate: () => \"apps/character-creator/attributes\",\n\t\t\tunselectedAncientBloodlines,\n\t\t};\n\n\t\treturn config;\n\t}\n\n\tasync getItems() {\n\t\tconst items = [];\n\n\t\tif (this.ancientBloodlineUuid !== \"\") {\n\t\t\titems.push(await fromUuid(this.ancientBloodlineUuid));\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tasync processAttributesSubmit(updateData) {\n\t\tconst changes = {};\n\t\tfor (const attribute of this.attributes) {\n\t\t\tchanges[attribute.attribute] = {\n\t\t\t\toldChecked: attribute.checked,\n\t\t\t\tnewChecked: false,\n\t\t\t};\n\n\t\t\tattribute.bonus = 0;\n\t\t\tattribute.checked = false;\n\t\t}\n\n\t\tconst updateKey = \"finishing_attribute::\";\n\t\tfor (const key in updateData) {\n\t\t\tif (key.startsWith(updateKey)) {\n\t\t\t\tconst [, attributeId] = key.split(\"::\");\n\t\t\t\tconst attributeChecked = updateData[key] === attributeId ? true : false;\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\tif (attributeChecked && attribute.attribute === attributeId) {\n\t\t\t\t\t\tattribute.checked = true;\n\n\t\t\t\t\t\tchanges[attributeId].newChecked = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst checkedAttributes = this.attributes.filter(a => a.checked) ?? [];\n\t\tlet bonus = 0;\n\t\tif (checkedAttributes.length === 1) bonus = 2;\n\t\tif (checkedAttributes.length === 2) bonus = 1;\n\n\t\tfor (const checkedAttribute of checkedAttributes) {\n\t\t\tcheckedAttribute.bonus = bonus;\n\t\t}\n\n\t\tlet changed = false;\n\t\tfor (const attribute in changes) {\n\t\t\tconst oldChecked = changes[attribute].oldChecked;\n\t\t\tconst newChecked = changes[attribute].newChecked;\n\n\t\t\tif (oldChecked !== newChecked) {\n\t\t\t\tchanged = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (changed) {\n\t\t\tawait this.characterCreator.updateCharacterData();\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tawait this.processAttributesSubmit(updateData);\n\n\t\tawait this.validate();\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"ancientBloodlineUuid\") {\n\t\t\tthis.ancientBloodlineUuid = updateData.uuid;\n\t\t\tthis.ancientBloodline = await fromUuid(updateData.uuid);\n\n\t\t\tawait this.validate();\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.valid = true;\n\t\tthis.errors = [];\n\n\t\tconst checkedAttributes = (this.attributes.filter(a => a.checked) ?? []).length;\n\n\t\tif (checkedAttributes > 2) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Attributes.Errors.MaxTwoAttributes\")\n\t\t\t);\n\t\t}\n\n\t\tif (checkedAttributes < 1) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Attributes.Errors.MinOneAttributes\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.ancientBloodlineNeeded && this.ancientBloodline === null) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.AncientBloodlineTalentNeeded\")\n\t\t\t);\n\t\t}\n\n\t\tfor (const attribute of Object.keys(this.baseAttributes)) {\n\t\t\tif (this.baseAttributes[attribute].value > 14) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.AttributeExceedsMax\")\n\t\t\t\t);\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenCaste extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"caste\";\n\n\t\tthis.caste = null;\n\t\tthis.casteSkill = \"\";\n\t\tthis.casteTalents = [];\n\n\t\tthis.validate();\n\t}\n\n\tasync _onRollCaste(event) {\n\t\tevent.preventDefault();\n\n\t\tconst castes = await conan.compendiums.castes();\n\t\tthis.caste = await this.randomItem(castes);\n\n\t\tawait this.updateCasteData();\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tasync updateCasteData() {\n\t\tthis.casteTalents = [];\n\n\t\tfor (const talentUuid of this.caste?.system?.talent?.choices ?? []) {\n\t\t\tthis.casteTalents.push(await fromUuid(talentUuid));\n\t\t}\n\n\t\tthis.casteSkill = CONFIG.CONAN.skills[this.caste?.system?.skill] ?? \"\";\n\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".caste-roll\").click(event => this._onRollCaste(event));\n\t}\n\n\tasync applySkillBonuses(skills) {\n\t\tif (!this.caste) return;\n\n\t\tconst skill = this.caste.system.skill;\n\t\tskills[skill].focus.value += 1;\n\t\tskills[skill].expertise.value += 1;\n\t}\n\n\tasync characterData() {\n\t\treturn {\n\t\t\t\"system.background.caste.value\": this.caste?.uuid ?? \"\",\n\t\t\t\"system.background.standing.value\": this.caste?.system?.socialStanding ?? 0,\n\t\t};\n\t}\n\n\tasync formConfig() {\n\t\tconst casteUuid = this.caste?.uuid ?? \"\";\n\n\t\tconst [selectedCastes, unselectedCastes] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.castes(),\n\t\t\t\tcasteUuid ? [casteUuid] : []\n\t\t\t);\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Caste.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Caste.label\"),\n\t\t\tselected: selectedCastes,\n\t\t\tunselected: unselectedCastes,\n\t\t\tcaste: this.caste,\n\t\t\tcasteTalents: this.casteTalents,\n\t\t\tcasteSkill: this.casteSkill,\n\t\t\tcasteStory: this.casteStory,\n\t\t\ttemplate: () => \"apps/character-creator/caste\",\n\t\t};\n\t}\n\n\tgetCasteUuid() {\n\t\treturn this.caste?.uuid ?? \"\";\n\t}\n\n\tasync getItems() {\n\t\tif (!(Array.isArray(this.casteTalents) && this.casteTalents.length > 0)) return;\n\n\t\tconst items = [];\n\t\tfor (const talent of this.casteTalents) {\n\t\t\titems.push(talent);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"casteUuid\") {\n\t\t\tthis.caste = await fromUuid(updateData.uuid);\n\n\t\t\tawait this.updateCasteData();\n\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (!(this.caste && this.caste.type === \"caste\")) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Caste.Errors.YouMustSelectACaste\")\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenEducation extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"education\";\n\n\t\tthis.education = null;\n\t\tthis.educationAttribute = \"\";\n\n\t\tthis.careerSkill = \"\";\n\t\tthis.educationSkills = [];\n\t\tthis.educationTalents = [];\n\n\t\tthis.selectedTalent = \"\";\n\n\t\tthis.mandatorySkills = [];\n\t\tthis.electiveSkills = [];\n\n\t\tthis.missingMandatoryCareerSkill = false;\n\t\tthis.missingElectiveCareerSkill = false;\n\n\t\tthis.validate();\n\t}\n\n\tasync _onRollEducation(event) {\n\t\tevent.preventDefault();\n\n\t\tconst educations = await conan.compendiums.educations();\n\t\tthis.education = await this.randomItem(educations);\n\n\t\tawait this.updateEducationData();\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".education-roll\").click(event => this._onRollEducation(event));\n\t}\n\n\tasync applyAttributeBonuses(attributes) {\n\t\tif (this.education && this.education.system.attribute) {\n\t\t\tconst key = this.education.system.attribute;\n\t\t\tattributes[key].value += 1;\n\t\t}\n\t}\n\n\tasync applySkillBonuses(skills) {\n\t\tif (this.education) {\n\t\t\tfor (const mandatorySkill of this.mandatorySkills) {\n\t\t\t\tconst key = mandatorySkill.skill;\n\t\t\t\tskills[key].focus.value += 1;\n\t\t\t\tskills[key].expertise.value += 1;\n\t\t\t}\n\n\t\t\tfor (const electiveSkill of this.electiveSkills) {\n\t\t\t\tconst key = electiveSkill.skill;\n\t\t\t\tskills[key].focus.value += electiveSkill.bonus;\n\t\t\t\tskills[key].expertise.value += electiveSkill.bonus;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync characterData() {\n\t\treturn {\n\t\t\t\"system.background.education.value\": this.education?.uuid ?? \"\",\n\t\t};\n\t}\n\n\tasync formConfig() {\n\t\tconst educationUuid = this.education?.uuid ?? \"\";\n\n\t\tconst [selectedEducations, unselectedEducations] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.educations(),\n\t\t\t\teducationUuid ? [educationUuid] : []\n\t\t\t);\n\n\t\tlet educationDescriptionHTML = \"\";\n\n\t\tif (this.education) {\n\t\t\teducationDescriptionHTML = await TextEditor.enrichHTML(\n\t\t\t\tthis.education.system.description.value,\n\t\t\t\t{\n\t\t\t\t\tasync: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tconst careerSkill = this.characterCreator.getCareerSkill();\n\t\tif (careerSkill !== this.careerSkill) {\n\t\t\tthis.careerSkill = careerSkill;\n\t\t\tawait this.updateEducationData();\n\t\t}\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Education.description\"),\n\t\t\telectiveSkills: this.electiveSkills,\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Education.label\"),\n\t\t\tmandatorySkills: this.mandatorySkills,\n\t\t\teducation: this.education,\n\t\t\teducationAttribute: this.educationAttribute,\n\t\t\teducationDescriptionHTML,\n\t\t\teducationTalents: this.educationTalents,\n\t\t\tselected: selectedEducations,\n\t\t\tselectedTalent: this.selectedTalent,\n\t\t\thasAttribute: (this.education?.system?.attribute ?? \"\") !== \"\",\n\t\t\ttemplate: () => \"apps/character-creator/education\",\n\t\t\tunselected: unselectedEducations,\n\t\t};\n\t}\n\n\tasync getItems() {\n\t\tconst items = [];\n\n\t\tif (this.selectedTalent !== \"\") {\n\t\t\titems.push(await fromUuid(this.selectedTalent));\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tconst electiveChanged = await this.processElectiveSkillsSubmit(updateData);\n\n\t\tif (electiveChanged) {\n\t\t\tthis.selectedTalent = \"\";\n\t\t\tawait this.updateEducationTalents();\n\t\t}\n\t\telse {\n\t\t\tthis.selectedTalent = updateData.education_talent ?? \"\";\n\t\t}\n\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"educationUuid\") {\n\t\t\tthis.education = await fromUuid(updateData.uuid);\n\n\t\t\tawait this.updateEducationData();\n\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tasync updateEducationTalents() {\n\t\tawait this.characterCreator.updateCharacterData();\n\n\t\tthis.educationTalents = await this.talentManager.getAvailableTalentsForSkills(\n\t\t\tthis.educationSkills\n\t\t);\n\t}\n\n\tasync updateEducationData() {\n\t\tconst skills = {};\n\n\t\tthis.educationAttribute = CONFIG.CONAN.attributeLabels[\n\t\t\tthis.education?.system?.attribute\n\t\t] ?? \"\";\n\n\t\tthis.mandatorySkills = [];\n\t\tfor (const skill of this.education?.system?.mandatorySkill?.choices ?? []) {\n\t\t\tskills[skill] = true;\n\t\t\tthis.mandatorySkills.push({\n\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\tskill,\n\t\t\t});\n\t\t}\n\n\t\tthis.careerSkill = this.characterCreator.getCareerSkill();\n\t\tthis.missingMandatoryCareerSkill = false;\n\t\tif (this.education?.system?.mandatorySkill?.career) {\n\t\t\tif (this.careerSkill) {\n\t\t\t\tskills[this.careerSkill] = true;\n\n\t\t\t\tthis.mandatorySkills.push({\n\t\t\t\t\tlabel: CONFIG.CONAN.skills[this.careerSkill],\n\t\t\t\t\tskill: this.careerSkill,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.missingMandatoryCareerSkill = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.education?.system?.mandatorySkill?.randomCareer) {\n\t\t\tconst archetypes = await conan.compendiums.archetypes();\n\t\t\tconst archetype = await this.randomItem(archetypes);\n\n\t\t\tif (archetype) {\n\t\t\t\tconst skill = archetype?.system?.careerSkill?.choices[0] ?? \"\";\n\n\t\t\t\tskills[skill] = true;\n\n\t\t\t\tthis.mandatorySkills.push({\n\t\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\t\tskill: skill,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.mandatorySkills.sort((a, b) => a.label.localeCompare(b.label));\n\n\t\tthis.electiveSkills = [];\n\t\tfor (const skill of this.education?.system?.electiveSkill?.choices ?? []) {\n\t\t\tskills[skill] = true;\n\t\t\tthis.electiveSkills.push({\n\t\t\t\tbonus: 0,\n\t\t\t\tchecked: false,\n\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\tskill,\n\t\t\t});\n\t\t}\n\n\t\tthis.missingElectiveCareerSkill = false;\n\t\tif (this.education?.system?.electiveSkill?.career) {\n\t\t\tif (this.careerSkill) {\n\t\t\t\tskills[this.careerSkill] = true;\n\n\t\t\t\tthis.electiveSkills.push({\n\t\t\t\t\tbonus: 0,\n\t\t\t\t\tchecked: false,\n\t\t\t\t\tlabel: CONFIG.CONAN.skills[this.careerSkill],\n\t\t\t\t\tskill: this.careerSkill,\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.missingElectiveCareerSkill = true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.education?.system?.electiveSkill?.randomCareer) {\n\t\t\tconst archetypes = await conan.compendiums.archetypes();\n\t\t\tconst archetype = await this.randomItem(archetypes);\n\n\t\t\tif (archetype) {\n\t\t\t\tconst skill = archetype?.system?.careerSkill?.choices[0] ?? \"\";\n\n\t\t\t\tskills[skill] = true;\n\n\t\t\t\tthis.electiveSkills.push({\n\t\t\t\t\tbonus: 0,\n\t\t\t\t\tchecked: false,\n\t\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\t\tskill: skill,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.electiveSkills.sort((a, b) => a.label.localeCompare(b.label));\n\n\t\tthis.selectedTalent = \"\";\n\t\tthis.educationSkills = Object.keys(skills);\n\n\t\tawait this.updateEducationTalents();\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (!(this.education && this.education.type === \"education\")) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectAnEducation\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.education) {\n\t\t\tif (this.missingMandatoryCareerSkill || this.missingElectiveCareerSkill) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectAnArchetype\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet electiveSkillCount = 0;\n\t\t\tfor (const skill of this.electiveSkills) {\n\t\t\t\tif (skill.checked) electiveSkillCount++;\n\t\t\t}\n\n\t\t\tif (electiveSkillCount !== 2) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectTwoElectiveSkills\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.selectedTalent === \"\") {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectATalent\")\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenFortune extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"fortune\";\n\n\t\tthis.baseAttributes = [];\n\t\tthis.attributes = [];\n\n\t\tthis.baseSkills = [];\n\t\tthis.skill = \"\";\n\n\t\tthis.skillBonuses = {};\n\n\t\tthis.fortuneSpend = \"none\";\n\n\t\tthis.fortuneSpendOptions = {\n\t\t\tnone: \"No Fortune Spend\",\n\t\t\tattribute: \"Attribute +1\",\n\t\t\tskill: \"Skill +2\",\n\t\t};\n\n\t\tCONFIG.CONAN.attributeIds.forEach(attribute => {\n\t\t\tthis.attributes.push({\n\t\t\t\tattribute,\n\t\t\t\tbonus: 0,\n\t\t\t\tchecked: false,\n\t\t\t\tlabel: CONFIG.CONAN.attributeLabels[attribute],\n\t\t\t});\n\t\t});\n\n\t\tthis.ancientBloodline = null;\n\t\tthis.ancientBloodlineNeeded = false;\n\t\tthis.ancientBloodlineUuid = \"\";\n\n\t\tthis.validate();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".delete-choice\").click(event => this._onDeleteSkill(event));\n\t}\n\n\tasync applyAttributeBonuses(attributes) {\n\t\tthis.baseAttributes = foundry.utils.duplicate(attributes);\n\t\tthis.ancientBloodlineNeeded = false;\n\n\t\tif (this.fortuneSpend !== \"attribute\") return;\n\n\t\tfor (const attribute in attributes) {\n\t\t\tconst bonus = this.attributes.find(a => a.attribute === attribute).bonus ?? 0;\n\t\t\tattributes[attribute].value += bonus;\n\t\t\tthis.baseAttributes[attribute].value += bonus;\n\n\t\t\tif (attributes[attribute].value > 12) this.ancientBloodlineNeeded = true;\n\t\t}\n\t}\n\n\tasync applySkillBonuses(skills) {\n\t\tthis.baseSkills = foundry.utils.duplicate(skills);\n\n\t\tif (this.fortuneSpend !== \"skill\" || this.skill === \"\") return;\n\n\t\tskills[this.skill].focus.value += 2;\n\t\tskills[this.skill].expertise.value += 2;\n\t}\n\n\tasync characterData() {\n\t\tconst maxFortune = this.fortuneSpend === \"none\" ? 3 : 2;\n\n\t\treturn {\n\t\t\t\"system.resources.fortune.max\": maxFortune,\n\t\t\t\"system.resources.fortune.value\": maxFortune,\n\t\t};\n\t}\n\n\tasync formConfig() {\n\t\tconst [selectedSkills, availableSkills] =\n\t\t\tconan.utils.getDedupedSelectedSkills(\n\t\t\t\tCONFIG.CONAN.sortedSkills,\n\t\t\t\tthis.skill ? [this.skill] : []\n\t\t\t);\n\n\t\tlet [selectedAncientBloodlines, unselectedAncientBloodlines] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.bloodlineTalents(),\n\t\t\t\tthis.ancientBloodlineUuid ? [this.ancientBloodlineUuid] : []\n\t\t\t);\n\n\t\tif (this.ancientBloodlineNeeded && this.ancientBloodline === null) {\n\t\t\tif (unselectedAncientBloodlines.length === 1) {\n\t\t\t\tthis.ancientBloodline = unselectedAncientBloodlines[0];\n\t\t\t\tthis.ancientBloodlineUuid = this.ancientBloodline.uuid;\n\t\t\t\tselectedAncientBloodlines = [this.ancientBloodline];\n\t\t\t\tawait this.validate();\n\t\t\t}\n\t\t}\n\n\t\tlet ancientBloodlineDescriptionHTML = \"\";\n\n\t\tif (this.ancientBloodline) {\n\t\t\tancientBloodlineDescriptionHTML = await TextEditor.enrichHTML(\n\t\t\t\tthis.ancientBloodline.system.description.value,\n\t\t\t\t{\n\t\t\t\t\tasync: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tconst config = {\n\t\t\t...await super.formConfig(),\n\t\t\tancientBloodline: this.ancientBloodline,\n\t\t\tancientBloodlineDescriptionHTML,\n\t\t\tancientBloodlineNeeded: this.ancientBloodlineNeeded,\n\t\t\tattributes: this.attributes,\n\t\t\tavailableSkills,\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Fortune.description\"),\n\t\t\tfortuneSpend: this.fortuneSpend,\n\t\t\tfortuneSpendOptions: this.fortuneSpendOptions,\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Fortune.label\"),\n\t\t\tselectedAncientBloodlines,\n\t\t\tselectedSkills,\n\t\t\tshowSkillTable: this.skill !== \"\",\n\t\t\ttemplate: () => \"apps/character-creator/fortune\",\n\t\t\tunselectedAncientBloodlines,\n\t\t};\n\n\t\treturn config;\n\t}\n\n\tasync processAttributesSubmit(updateData) {\n\t\tconst changes = {};\n\t\tfor (const attribute of this.attributes) {\n\t\t\tchanges[attribute.attribute] = {\n\t\t\t\toldChecked: attribute.checked,\n\t\t\t\tnewChecked: false,\n\t\t\t};\n\n\t\t\tattribute.bonus = 0;\n\t\t\tattribute.checked = false;\n\t\t}\n\n\t\tconst updateKey = \"fortune_attribute::\";\n\t\tfor (const key in updateData) {\n\t\t\tif (key.startsWith(updateKey)) {\n\t\t\t\tconst [, attributeId] = key.split(\"::\");\n\t\t\t\tconst attributeChecked = updateData[key] === attributeId ? true : false;\n\t\t\t\tfor (const attribute of this.attributes) {\n\t\t\t\t\tif (attributeChecked && attribute.attribute === attributeId) {\n\t\t\t\t\t\tattribute.checked = true;\n\n\t\t\t\t\t\tchanges[attributeId].newChecked = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst checkedAttributes = this.attributes.filter(a => a.checked) ?? [];\n\t\tlet bonus = 0;\n\t\tif (checkedAttributes.length === 1) bonus = 1;\n\n\t\tfor (const checkedAttribute of checkedAttributes) {\n\t\t\tcheckedAttribute.bonus = bonus;\n\t\t}\n\n\t\tlet changed = false;\n\t\tfor (const attribute in changes) {\n\t\t\tconst oldChecked = changes[attribute].oldChecked;\n\t\t\tconst newChecked = changes[attribute].newChecked;\n\n\t\t\tif (oldChecked !== newChecked) {\n\t\t\t\tchanged = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (changed) {\n\t\t\tawait this.characterCreator.updateCharacterData();\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.fortuneSpend = updateData.fortuneSpend;\n\t\tawait this.processAttributesSubmit(updateData);\n\t\tawait this.characterCreator.updateCharacterData();\n\t\tawait this.validate();\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"ancientBloodlineUuid\") {\n\t\t\tthis.ancientBloodlineUuid = updateData.uuid;\n\t\t\tthis.ancientBloodline = await fromUuid(updateData.uuid);\n\n\t\t\tawait this.validate();\n\t\t}\n\n\t\tif (updateData.name === \"fortuneSkillUuid\") {\n\t\t\tthis.skill = updateData.uuid;\n\t\t\tawait this.characterCreator.updateCharacterData();\n\t\t\tawait this.validate();\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.valid = true;\n\t\tthis.errors = [];\n\n\t\tif (this.fortuneSpend === \"attribute\") {\n\t\t\tconst checkedAttributes = (this.attributes.filter(a => a.checked) ?? []).length;\n\n\t\t\tif (checkedAttributes > 1) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Attributes.Errors.MaxOneAttributes\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (checkedAttributes < 1) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Attributes.Errors.MinOneAttributes\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.ancientBloodlineNeeded && this.ancientBloodline === null) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.AncientBloodlineTalentNeeded\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tfor (const attribute of Object.keys(this.baseAttributes)) {\n\t\t\t\tif (this.baseAttributes[attribute].value > 14) {\n\t\t\t\t\tthis.valid = false;\n\t\t\t\t\tthis.errors.push(\n\t\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.AttributeExceedsMax\")\n\t\t\t\t\t);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.fortuneSpend === \"skill\") {\n\t\t\tif (this.skill === \"\") {\n\t\t\t\tthis.valid = false;\n\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.Fortune.MustSelectSkill\")\n\t\t\t\t);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst focus = (this.baseSkills[this.skill]?.focus?.value ?? 0) + 2;\n\t\t\t\tconst expertise = (this.baseSkills[this.skill]?.expertise?.value ?? 0) + 2;\n\n\t\t\t\tif (focus > 3 || expertise > 3) {\n\t\t\t\t\tthis.valid = false;\n\n\t\t\t\t\tthis.errors.push(\n\t\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.Fortune.SkillCannotExceedThree\")\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _onDeleteSkill(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst deleteUuid = $(event.currentTarget).data(\"uuid\");\n\n\t\tthis.skill = \"\";\n\n\t\tdelete this.skillBonuses[deleteUuid];\n\n\t\tawait this.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenHomeland extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"homeland\";\n\n\t\tthis.homeland = null;\n\t\tthis.homelandTalent = null;\n\n\t\tthis.language = null;\n\t\tthis.languageChanged = false;\n\t\tthis.languages = [];\n\n\t\tthis.validate();\n\t}\n\n\tasync _onRollHomeland(event) {\n\t\tevent.preventDefault();\n\n\t\tconst homelands = await conan.compendiums.homelands();\n\t\tthis.homeland = await this.randomItem(homelands);\n\n\t\tconst talentUuid = this.homeland?.system?.talent?.choices[0];\n\n\t\tthis.homelandTalent = await fromUuid(talentUuid) ?? null;\n\n\t\tawait this._updateLanguageChoices();\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tasync _updateLanguageChoices() {\n\t\tconst languages = this.homeland?.system?.language?.choices ?? [];\n\n\t\tthis.languages = [];\n\t\tfor (const language of languages) {\n\t\t\tconst languageObject = await fromUuid(language);\n\n\t\t\tthis.languages.push({\n\t\t\t\tname: languageObject.name,\n\t\t\t\tvalue: language,\n\t\t\t});\n\t\t}\n\n\t\tthis.languages.sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tthis.language = this.languages[0]?.value ?? \"\";\n\t\tthis.languageChanged = true;\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".homeland-roll\").click(event => this._onRollHomeland(event));\n\t}\n\n\tasync characterData() {\n\t\treturn {\n\t\t\t\"system.background.homeland.value\": this.homeland?.uuid ?? \"\",\n\t\t\t\"system.background.languages\": this.language ? [this.language] : [],\n\t\t};\n\t}\n\n\tasync formConfig() {\n\t\tconst homelandUuid = this.homeland?.uuid ?? \"\";\n\n\t\tconst [selectedHomelands, unselectedHomelands] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.homelands(),\n\t\t\t\thomelandUuid ? [homelandUuid] : []\n\t\t\t);\n\n\n\t\tlet talentDescriptionHTML = \"\";\n\n\t\tif (this.homelandTalent) {\n\t\t\ttalentDescriptionHTML = await TextEditor.enrichHTML(\n\t\t\t\tthis.homelandTalent.system.description.value,\n\t\t\t\t{\n\t\t\t\t\tasync: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tlet languageItem = null;\n\t\tif (this.language) {\n\t\t\tlanguageItem = await fromUuid(this.language);\n\t\t}\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Homeland.description\"),\n\t\t\thomeland: this.homeland,\n\t\t\thomelandTalent: this.homelandTalent,\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Homeland.label\"),\n\t\t\tlanguage: this.language,\n\t\t\tlanguageItem,\n\t\t\tlanguages: this.languages,\n\t\t\tchooseLanguage: (this.languages ?? []).length > 1,\n\t\t\tselected: selectedHomelands,\n\t\t\ttalentDescriptionHTML,\n\t\t\ttemplate: () => \"apps/character-creator/homeland\",\n\t\t\tunselected: unselectedHomelands,\n\t\t};\n\t}\n\n\tasync getHomelandLanguages() {\n\t\treturn this.language ? [this.language] : [];\n\t}\n\n\tasync getItems() {\n\t\tif (!this.homelandTalent) return;\n\n\t\treturn [this.homelandTalent];\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tif (this.languageChanged) {\n\t\t\tthis.languageChanged = false;\n\t\t}\n\t\telse {\n\t\t\tthis.language = updateData.homelandLanguage;\n\t\t}\n\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"homelandUuid\") {\n\t\t\tthis.homeland = await fromUuid(updateData.uuid);\n\n\t\t\tconst talentUuid = this.homeland?.system?.talent?.choices[0];\n\n\t\t\tthis.homelandTalent = await fromUuid(talentUuid) ?? null;\n\n\t\t\tawait this._updateLanguageChoices();\n\n\t\t\tthis.validate();\n\n\t\t\tthis.characterCreator.update();\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (!(this.homeland && this.homeland.type === \"homeland\")) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Homeland.Errors.YouMustSelectAHomeland\")\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenLanguage extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"language\";\n\t\tthis.skills = {};\n\n\t\tthis.selectedLanguages = [];\n\n\t\tthis.validate();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".delete-choice\").click(event => this._onDeleteLanguage(event));\n\t}\n\n\tasync applySkillBonuses(skills) {\n\t\tthis.skills = foundry.utils.duplicate(skills);\n\t}\n\n\tasync characterData() {\n\t\treturn {\n\t\t\t\"system.background.languages\": this.selectedLanguages,\n\t\t};\n\t}\n\n\tasync formConfig() {\n\t\tconst homelandLanguages = await this.characterCreator.getHomelandLanguages();\n\n\t\tlet [selected, unselected] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.languages(),\n\t\t\t\t[...homelandLanguages, ...this.selectedLanguages]\n\t\t\t);\n\n\t\tselected = selected.filter(\n\t\t\tlanguage => !homelandLanguages.includes(language.uuid)\n\t\t);\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Languages.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Languages.label\"),\n\t\t\tselected,\n\t\t\ttemplate: () => \"apps/character-creator/languages\",\n\t\t\tunselected,\n\t\t};\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"languageUuid\") {\n\t\t\tif (!this.selectedLanguages.includes(updateData.uuid)) {\n\t\t\t\tthis.selectedLanguages.push(updateData.uuid);\n\t\t\t}\n\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tasync setHomelandLanguages(languages) {\n\t\tthis.homelandLanguages = languages;\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tconst allowedLanguages = 1 + (this.skills?.lin?.focus?.value ?? 0);\n\t\tconst selectedCount = this.selectedLanguages.length;\n\n\t\tif (selectedCount !== allowedLanguages) {\n\t\t\tthis.valid = false;\n\n\t\t\tlet i18nKey = \"YouMustSelectMutliple\";\n\t\t\tif (allowedLanguages === 1) {\n\t\t\t\ti18nKey = \"YouMustSelectSingle\";\n\t\t\t}\n\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.format(\n\t\t\t\t\t`CONAN.CharacterCreator.Languages.Errors.${i18nKey}`,\n\t\t\t\t\t{ num: allowedLanguages })\n\t\t\t);\n\t\t}\n\t}\n\n\tasync _onDeleteLanguage(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst deleteUuid = $(event.currentTarget).data(\"uuid\");\n\n\t\tconst languages = [];\n\t\tfor (const language of this.selectedLanguages) {\n\t\t\tif (language === deleteUuid) continue;\n\t\t\tlanguages.push(language);\n\t\t}\n\t\tthis.selectedLanguages = languages;\n\n\t\tawait this.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenName extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"name\";\n\n\t\tthis.characterName = \"\";\n\n\t\tthis.validate();\n\t}\n\n\tasync characterData() {\n\t\treturn {name: this.characterName};\n\t}\n\n\tasync formConfig() {\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tcharacterName: this.characterName,\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Name.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Name.label\"),\n\t\t\ttemplate: () => \"apps/character-creator/name\",\n\t\t};\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.characterName = updateData.characterName;\n\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = typeof this.characterName === \"string\" && this.characterName.length > 0;\n\n\t\tif (!this.valid) {\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Name.Errors.NameCannotBeBlank\")\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenNature extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"nature\";\n\n\t\tthis.nature = null;\n\t\tthis.natureAttribute = \"\";\n\n\t\tthis.natureTalents = [];\n\t\tthis.selectedTalent = \"\";\n\n\t\tthis.mandatorySkills = [];\n\t\tthis.electiveSkills = [];\n\n\t\tthis.validate();\n\t}\n\n\tasync _onRollNature(event) {\n\t\tevent.preventDefault();\n\n\t\tconst natures = await conan.compendiums.natures();\n\t\tthis.nature = await this.randomItem(natures);\n\n\t\tawait this.updateNatureData();\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".nature-roll\").click(event => this._onRollNature(event));\n\t}\n\n\tasync applyAttributeBonuses(attributes) {\n\t\tif (this.nature) {\n\t\t\tconst key = this.nature.system.attribute;\n\t\t\tattributes[key].value += 1;\n\t\t}\n\t}\n\n\tasync applySkillBonuses(skills) {\n\t\tif (this.nature) {\n\t\t\tfor (const mandatorySkill of this.mandatorySkills) {\n\t\t\t\tconst key = mandatorySkill.skill;\n\t\t\t\tskills[key].focus.value += 1;\n\t\t\t\tskills[key].expertise.value += 1;\n\t\t\t}\n\n\t\t\tfor (const electiveSkill of this.electiveSkills) {\n\t\t\t\tconst key = electiveSkill.skill;\n\t\t\t\tskills[key].focus.value += electiveSkill.bonus;\n\t\t\t\tskills[key].expertise.value += electiveSkill.bonus;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync characterData() {\n\t\treturn {\n\t\t\t\"system.background.nature.value\": this.nature?.uuid ?? \"\",\n\t\t};\n\t}\n\n\tasync formConfig() {\n\t\tconst natureUuid = this.nature?.uuid ?? \"\";\n\n\t\tconst [selectedNatures, unselectedNatures] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.natures(),\n\t\t\t\tnatureUuid ? [natureUuid] : []\n\t\t\t);\n\n\t\tlet natureDescriptionHTML = \"\";\n\n\t\tif (this.nature) {\n\t\t\tnatureDescriptionHTML = await TextEditor.enrichHTML(\n\t\t\t\tthis.nature.system.description.value,\n\t\t\t\t{\n\t\t\t\t\tasync: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Nature.description\"),\n\t\t\telectiveSkills: this.electiveSkills,\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Nature.label\"),\n\t\t\tmandatorySkills: this.mandatorySkills,\n\t\t\tnature: this.nature,\n\t\t\tnatureAttribute: this.natureAttribute,\n\t\t\tnatureDescriptionHTML,\n\t\t\tnatureTalents: this.natureTalents,\n\t\t\tselected: selectedNatures,\n\t\t\tselectedTalent: this.selectedTalent,\n\t\t\ttemplate: () => \"apps/character-creator/nature\",\n\t\t\tunselected: unselectedNatures,\n\t\t};\n\t}\n\n\tasync getItems() {\n\t\tconst items = [];\n\n\t\tif (this.selectedTalent !== \"\") {\n\t\t\titems.push(await fromUuid(this.selectedTalent));\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tconst electiveChanged = await this.processElectiveSkillsSubmit(updateData);\n\n\t\tif (electiveChanged) {\n\t\t\tthis.selectedTalent = \"\";\n\t\t\tawait this.updateNatureTalents();\n\t\t}\n\t\telse {\n\t\t\tthis.selectedTalent = updateData.nature_talent ?? \"\";\n\t\t}\n\n\t\tif (updateData.natureUuid !== \"\") {\n\t\t\tawait this.selectorUuidUpdated(updateData);\n\t\t}\n\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"natureUuid\") {\n\t\t\tthis.nature = await fromUuid(updateData.uuid);\n\n\t\t\tthis.updateNatureData();\n\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tasync updateNatureTalents() {\n\t\tawait this.characterCreator.updateCharacterData();\n\n\t\tthis.natureTalents = await this.talentManager.getAvailableTalentsForSkills(\n\t\t\tthis.natureSkills\n\t\t);\n\t}\n\n\tasync updateNatureData() {\n\t\tconst skills = {};\n\n\t\tthis.mandatorySkills = [];\n\t\tfor (const skill of this.nature?.system?.mandatorySkill?.choices ?? []) {\n\t\t\tskills[skill] = true;\n\t\t\tthis.mandatorySkills.push({\n\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\tskill,\n\t\t\t});\n\t\t}\n\n\t\tthis.electiveSkills = [];\n\t\tfor (const skill of this.nature?.system?.electiveSkill?.choices ?? []) {\n\t\t\tskills[skill] = true;\n\t\t\tthis.electiveSkills.push({\n\t\t\t\tbonus: 0,\n\t\t\t\tchecked: false,\n\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\tskill,\n\t\t\t});\n\t\t}\n\n\t\tthis.selectedTalent = \"\";\n\t\tthis.natureSkills = Object.keys(skills);\n\n\t\tthis.natureAttribute = CONFIG.CONAN.attributeLabels[\n\t\t\tthis.nature?.system?.attribute\n\t\t] ?? \"\";\n\n\t\tawait this.updateNatureTalents();\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (!(this.nature && this.nature.type === \"nature\")) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectANature\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.nature) {\n\t\t\tlet electiveSkillCount = 0;\n\t\t\tfor (const skill of this.electiveSkills) {\n\t\t\t\tif (skill.checked) electiveSkillCount++;\n\t\t\t}\n\n\t\t\tif (electiveSkillCount !== 2) {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectTwoElectiveSkills\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.selectedTalent === \"\") {\n\t\t\t\tthis.valid = false;\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectATalent\")\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenSkills extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"final skills\";\n\n\t\tthis.baseSkills = [];\n\t\tthis.skills = [];\n\t\tthis.skillBonuses = {};\n\n\t\tthis.validate();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".delete-choice\").click(event => this._onDeleteSkill(event));\n\t}\n\n\tasync applySkillBonuses(skills) {\n\t\tthis.baseSkills = foundry.utils.duplicate(skills);\n\t\tfor (const skill of this.skills) {\n\t\t\tconst bonus = this.skillBonuses[skill] ?? 0;\n\t\t\tskills[skill].focus.value += bonus;\n\t\t\tskills[skill].expertise.value += bonus;\n\t\t}\n\t}\n\n\tasync formConfig() {\n\t\tconst [selectedSkills, availableSkills] =\n\t\t\tconan.utils.getDedupedSelectedSkills(\n\t\t\t\tCONFIG.CONAN.sortedSkills,\n\t\t\t\tthis.skills\n\t\t\t);\n\n\t\tfor (const skill of selectedSkills) {\n\t\t\tskill.bonus = this.skillBonuses[skill.uuid] ?? 0;\n\t\t}\n\n\t\tconst config = {\n\t\t\t...await super.formConfig(),\n\t\t\tshowSkillTable: this.skills.length > 0,\n\t\t\tselectedSkills,\n\t\t\tavailableSkills,\n\t\t\tskillBonuses: this.skillBonuses,\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Skills.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Skills.label\"),\n\t\t\ttemplate: () => \"apps/character-creator/skills\",\n\t\t};\n\n\t\treturn config;\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tfor (const key in updateData) {\n\t\t\tif (key.startsWith(\"finishing_skill::\")) {\n\t\t\t\tconst value = updateData[key];\n\t\t\t\tif (value === undefined) continue;\n\t\t\t\tconst [skillId, selectedBonus] = value.split(\"::\");\n\t\t\t\tthis.skillBonuses[skillId] = Number(selectedBonus);\n\t\t\t}\n\t\t}\n\n\t\tawait this.validate();\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"finishingSkillUuid\") {\n\t\t\tif (!this.skills.includes(updateData.uuid)) {\n\t\t\t\tthis.skills.push(updateData.uuid);\n\n\t\t\t\tthis.skillBonuses[updateData.uuid] = 1;\n\n\t\t\t\tthis.skills.sort((a, b) => a.localeCompare(b));\n\t\t\t}\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.valid = true;\n\t\tthis.errors = [];\n\n\t\tconst skillBonusTotal = Object.values(this.skillBonuses).reduce(\n\t\t\t(accumulator, currentValue) => accumulator + currentValue,\n\t\t\t0\n\t\t);\n\n\t\tif (skillBonusTotal < 3) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Skills.Errors.YouMustAssignThreeSkillPoints\")\n\t\t\t);\n\t\t}\n\t\telse if (skillBonusTotal > 3) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Skills.Errors.MaximumThreeSkillPointsExceeded\")\n\t\t\t);\n\t\t}\n\n\t\tfor (const skill in this.baseSkills) {\n\t\t\tconst bonus = this.skillBonuses[skill] ?? 0;\n\t\t\tconst focus = (this.baseSkills[skill]?.focus?.value ?? 0) + bonus;\n\t\t\tconst expertise = (this.baseSkills[skill]?.expertise?.value ?? 0) + bonus;\n\n\t\t\tif (focus > 5 || expertise > 5) {\n\t\t\t\tthis.valid = false;\n\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.Fortune.SkillExceededMax\")\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync _onDeleteSkill(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst deleteUuid = $(event.currentTarget).data(\"uuid\");\n\n\t\tconst newSkills = [];\n\t\tfor (const skill of this.skills) {\n\t\t\tif (skill === deleteUuid) continue;\n\t\t\tnewSkills.push(skill);\n\t\t}\n\t\tthis.skills = newSkills;\n\n\t\tdelete this.skillBonuses[deleteUuid];\n\n\t\tawait this.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenStartingAttributes extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"starting attributes\";\n\n\t\tthis.attributes = {};\n\n\t\tCONFIG.CONAN.attributeIds.forEach(attribute => {\n\t\t\tthis.attributes[attribute] = {\n\t\t\t\tattribute,\n\t\t\t\tlabel: CONFIG.CONAN.attributeLabels[attribute],\n\t\t\t\ttooltip: CONFIG.CONAN.attributeTooltips[attribute],\n\t\t\t\tvalue: 7,\n\t\t\t};\n\t\t});\n\n\t\tthis.increased = 0;\n\t\tthis.decreased = 0;\n\n\t\tthis.validate();\n\t}\n\n\tactivateListeners(html) {\n\t\tconst me = this;\n\n\t\thtml.find(\".starting-attributes .quantity-grid\")\n\t\t\t.each(function() {\n\t\t\t\tconst spinner = $(this);\n\t\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\t\tconst btnUp = spinner.find(\".quantity-up\");\n\t\t\t\tconst btnDown = spinner.find(\".quantity-down\");\n\t\t\t\tconst attribute = input.attr(\"data-attribute\");\n\n\t\t\t\tinput.on(\"wheel\", ev => {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tif (ev.originalEvent.deltaY < 0) {\n\t\t\t\t\t\tme._inc_attribute(input, attribute);\n\t\t\t\t\t}\n\t\t\t\t\telse if (ev.originalEvent.deltaY > 0) {\n\t\t\t\t\t\tme._dec_attribute(input, attribute);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tbtnUp.click(ev => {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tme._inc_attribute(input, attribute);\n\t\t\t\t});\n\n\t\t\t\tbtnDown.click(ev => {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tme._dec_attribute(input, attribute);\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tasync applyAttributeBonuses(attributes) {\n\t\tfor (const attribute in attributes) {\n\t\t\tconst attributeBonus = this.attributes[attribute].value - attributes[attribute].value;\n\t\t\tattributes[attribute].value += attributeBonus;\n\t\t}\n\t}\n\n\tasync formConfig() {\n\t\tconst config = {\n\t\t\t...await super.formConfig(),\n\t\t\tattributes: this.attributes,\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.StartingAttributes.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.StartingAttributes.label\"),\n\t\t\ttemplate: () => \"apps/character-creator/starting-attributes\",\n\t\t};\n\n\t\treturn config;\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.validate();\n\t\treturn updateData;\n\t}\n\n\tasync validate() {\n\t\tthis.valid = true;\n\t\tthis.errors = [];\n\n\t\tthis.reduced = 0;\n\t\tthis.increased = 0;\n\n\t\tfor (const attributeId of Object.keys(this.attributes)) {\n\t\t\tconst attribute = this.attributes[attributeId];\n\n\t\t\tif (attribute.value === 6) this.reduced++;\n\t\t\tif (attribute.value === 8) this.increased++;\n\n\t\t\tif (attribute.value < 6) {\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.format(\"CONAN.CharacterCreator.StartingAttributes.Errors.OutOfBoundsLow\",\n\t\t\t\t\t\t{attributeName: attribute.label}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if (attribute.value > 8) {\n\t\t\t\tthis.errors.push(\n\t\t\t\t\tgame.i18n.format(\"CONAN.CharacterCreator.StartingAttributes.Errors.OutOfBoundsHigh\",\n\t\t\t\t\t\t{attributeName: attribute.label}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t}\n\n\t\tif (this.reduced > 2) {\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.StartingAttributes.Errors.MaxTwoReduced\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.increased > 2) {\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.StartingAttributes.Errors.MaxTwoIncreased\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.reduced !== this.increased) {\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.StartingAttributes.Errors.SameNumberOfAttributes\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.errors.length > 0) this.valid = false;\n\t}\n\n\t_dec_attribute(input, attribute) {\n\t\tlet value = this.attributes[attribute].value;\n\t\tvalue--;\n\t\tif (value < 6) value = 6;\n\n\t\tthis.attributes[attribute].value = value;\n\n\t\tthis.validate();\n\t\tthis.characterCreator.update();\n\t}\n\n\t_inc_attribute(input, attribute) {\n\t\tlet value = this.attributes[attribute].value;\n\t\tvalue++;\n\t\tif (value > 8) value = 8;\n\n\t\tthis.attributes[attribute].value = value;\n\n\t\tthis.validate();\n\t\tthis.characterCreator.update();\n\t}\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenStory extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"story\";\n\n\t\tthis.caste = null;\n\t\tthis.casteUuid = \"\";\n\n\t\tthis.story = null;\n\n\t\tthis.validate();\n\t}\n\n\tasync _onRollStory(event) {\n\t\tevent.preventDefault();\n\n\t\tif (!this.caste) return;\n\n\t\tconst stories = new Collection();\n\t\tfor (const storyUuid of this.caste.system.story.choices) {\n\t\t\tconst story = await fromUuid(storyUuid);\n\t\t\tstories.set(story.id, story);\n\t\t}\n\n\t\tthis.story = await this.randomItem(stories);\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".story-roll\").click(event => this._onRollStory(event));\n\t}\n\n\tasync characterData() {\n\t\treturn {\n\t\t\t\"system.background.story.value\": this.story?.uuid ?? \"\",\n\t\t\t\"system.background.trait.value\": this.story?.system.trait ?? \"\",\n\t\t};\n\t}\n\n\tasync formConfig() {\n\n\t\tconst casteUuid = this.characterCreator.getCasteUuid();\n\n\t\tif (casteUuid !== this.casteUuid) {\n\t\t\t// The caste has been changed, some data is probably not valid now\n\t\t\tthis.casteUuid = casteUuid;\n\n\t\t\tthis.story = null;\n\n\t\t\tif (typeof casteUuid === \"string\" && casteUuid !== \"\") {\n\t\t\t\t// Load the new caste\n\t\t\t\tthis.caste = await fromUuid(casteUuid);\n\t\t\t}\n\n\t\t\tthis.validate();\n\t\t}\n\n\t\tlet selectedStories = [];\n\t\tlet unselectedStories = [];\n\n\t\tif (this.caste) {\n\t\t\tconst storyUuid = this.story?.uuid ?? \"\";\n\n\t\t\tconst allStoryUuids = this.caste?.system?.story?.choices ?? [];\n\t\t\tlet docs = [];\n\t\t\tfor (const uuid of allStoryUuids) {\n\t\t\t\tdocs.push(await fromUuid(uuid));\n\t\t\t}\n\t\t\tdocs = Array.from(new Set(docs)).sort((a, b) => a.name.localeCompare(b.name));\n\t\t\tconst allStories = new Collection();\n\t\t\tfor (let d of docs) {\n\t\t\t\tallStories.set(d.id, d);\n\t\t\t}\n\n\t\t\t[selectedStories, unselectedStories] =\n\t\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\t\tallStories,\n\t\t\t\t\tstoryUuid ? [storyUuid] : []\n\t\t\t\t);\n\t\t}\n\n\t\tconst storyLabel = this.caste\n\t\t\t? `${this.caste.name} ${game.i18n.localize(\"CONAN.CharacterCreator.Story.label\")}`\n\t\t\t: game.i18n.localize(\"CONAN.CharacterCreator.Story.label\");\n\n\t\tlet storyDescriptionHTML = \"\";\n\n\t\tif (this.story) {\n\t\t\tstoryDescriptionHTML = await TextEditor.enrichHTML(\n\t\t\t\tthis.story.system.description.value,\n\t\t\t\t{\n\t\t\t\t\tasync: true,\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Story.description\"),\n\t\t\tstory: this.story,\n\t\t\tcaste: this.caste ?? false,\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Story.label\"),\n\t\t\tselected: selectedStories,\n\t\t\tstoryLabel,\n\t\t\tstoryDescriptionHTML,\n\t\t\ttemplate: () => \"apps/character-creator/story\",\n\t\t\tunselected: unselectedStories,\n\t\t};\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"storyUuid\") {\n\t\t\tthis.story = await fromUuid(updateData.uuid);\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (!(this.caste && this.caste.type === \"caste\")) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Story.Errors.YouMustSelectACasteFirst\")\n\t\t\t);\n\t\t}\n\t\telse if (!(this.story && this.story.type === \"story\")) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Story.Errors.YouMustSelectAStory\")\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenTalent extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"talent\";\n\n\t\tthis.selectedTalent = \"\";\n\n\t\tthis.validate();\n\t}\n\n\tasync formConfig() {\n\t\tconst availableTalents = await this.talentManager.getAvailableSkillTalents();\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tavailableTalents,\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.FinalTalent.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Talent.label\"),\n\t\t\tselectedTalent: this.selectedTalent,\n\t\t\ttemplate: () => \"apps/character-creator/talent\",\n\t\t};\n\t}\n\n\tasync getItems() {\n\t\tconst items = [];\n\n\t\tif (this.selectedTalent !== \"\") {\n\t\t\titems.push(await fromUuid(this.selectedTalent));\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.selectedTalent = updateData.final_talent ?? \"\";\n\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (this.selectedTalent === \"\") {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectATalent\")\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenWarStory extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"war story\";\n\n\t\tthis.warStory = null;\n\t\tthis.warStorySkills = [];\n\n\t\tthis.validate();\n\t}\n\n\tasync _onRollWarStory(event) {\n\t\tevent.preventDefault();\n\n\t\tconst warStories = await conan.compendiums.warStories();\n\t\tthis.warStory = await this.randomItem(warStories);\n\n\t\tawait this.updateWarStoryData();\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tasync updateWarStoryData() {\n\t\tthis.warStorySkills = [];\n\n\t\tfor (const skill of this.warStory?.system?.skills?.choices ?? []) {\n\t\t\tthis.warStorySkills.push({\n\t\t\t\tlabel: CONFIG.CONAN.skills[skill],\n\t\t\t\tskill,\n\t\t\t});\n\t\t}\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".war-story-roll\").click(event => this._onRollWarStory(event));\n\t}\n\n\tasync applySkillBonuses(skills) {\n\t\tif (this.warStory) {\n\t\t\tfor (const skill of this.warStorySkills) {\n\t\t\t\tconst key = skill.skill;\n\t\t\t\tskills[key].focus.value += 1;\n\t\t\t\tskills[key].expertise.value += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\tasync characterData() {\n\t\treturn {\n\t\t\t\"system.background.warstory.value\": this.warStory?.uuid ?? \"\",\n\t\t};\n\t}\n\n\tasync formConfig() {\n\t\tconst warStoryUuid = this.warStory?.uuid;\n\n\t\tconst [selectedWarStories, unselectedWarStories] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.warStories(),\n\t\t\t\twarStoryUuid ? [warStoryUuid] : []\n\t\t\t);\n\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.WarStory.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.WarStory.label\"),\n\t\t\tselected: selectedWarStories,\n\t\t\tunselected: unselectedWarStories,\n\t\t\twarStory: this.warStory,\n\t\t\twarStorySkills: this.warStorySkills,\n\t\t\ttemplate: () => \"apps/character-creator/war-story\",\n\t\t};\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.validate();\n\n\t\treturn updateData;\n\t}\n\n\tasync selectorUuidUpdated(updateData) {\n\t\tif (updateData.name === \"warStoryUuid\") {\n\t\t\tthis.warStory = await fromUuid(updateData.uuid);\n\n\t\t\tawait this.updateWarStoryData();\n\n\t\t\tthis.validate();\n\t\t}\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (!(this.warStory && this.warStory.type === \"warstory\")) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.YouMustSelectAWarStory\")\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import CharGenBaseStage from \"./CharGenBaseStage.mjs\";\n\nexport default class CharGenBelongings extends CharGenBaseStage {\n\tconstructor(characterCreator) {\n\t\tsuper(characterCreator);\n\n\t\tthis.name = \"belongings\";\n\n\t\tthis.belonging = null;\n\t\tthis.garment = null;\n\t\tthis.weapon = null;\n\t\tthis.provenance = \"\";\n\n\t\tthis.validate();\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".belonging-roll\").click(event => this._onRollBelonging(event));\n\t\thtml.find(\".garment-roll\").click(event => this._onRollGarment(event));\n\t\thtml.find(\".weapon-roll\").click(event => this._onRollWeapon(event));\n\t}\n\n\tasync formConfig() {\n\t\treturn {\n\t\t\t...await super.formConfig(),\n\t\t\tbelonging: this.belonging,\n\t\t\tgarment: this.garment,\n\t\t\tweapon: this.weapon,\n\t\t\tprovenance: this.provenance,\n\t\t\tcharacterName: this.characterName,\n\t\t\tdescription: game.i18n.localize(\"CONAN.CharacterCreator.Belongings.description\"),\n\t\t\tlabel: game.i18n.localize(\"CONAN.CharacterCreator.Belongings.label\"),\n\t\t\ttemplate: () => \"apps/character-creator/belongings\",\n\t\t};\n\t}\n\n\tasync getItems() {\n\t\tconst items = [];\n\n\t\tif (this.belonging !== null) {\n\t\t\titems.push(this.belonging.toObject());\n\t\t}\n\t\tif (this.garment !== null) {\n\t\t\titems.push(this.garment.toObject());\n\t\t}\n\t\tif (this.weapon !== null) {\n\t\t\tconst weapon = this.weapon.toObject();\n\n\t\t\tweapon.system.description.value += `<p><b>${this.provenance}</b></p>`;\n\n\t\t\titems.push(weapon);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tasync getProvenance() {\n\t\tconst table = await this.getRollTable(\"provenance\");\n\t\tconst draw = await table.draw() ?? null;\n\n\t\tif (draw === null) {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.UnableToFindRollTable\")\n\t\t\t);\n\t\t}\n\n\t\treturn draw.results[0].text ?? \"\";\n\t}\n\n\tasync processSubmit(updateData) {\n\t\tthis.validate();\n\t\treturn updateData;\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\t\tthis.valid = true;\n\n\t\tif (this.belonging === null) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.Belongings.RollForBelonging\")\n\t\t\t);\n\t\t}\n\t\tif (this.garment === null) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.Belongings.RollForGarment\")\n\t\t\t);\n\t\t}\n\t\tif (this.weapon === null) {\n\t\t\tthis.valid = false;\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.Belongings.RollForWeapon\")\n\t\t\t);\n\t\t}\n\t}\n\n\tasync _onRollBelonging(event) {\n\t\tevent.preventDefault();\n\n\t\tconst table = await this.getRollTable(\"personal belongings\");\n\t\tconst draw = await table.draw() ?? null;\n\n\t\tif (draw === null) {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.UnableToFindRollTable\")\n\t\t\t);\n\t\t}\n\n\t\tthis.belonging = await this.getItemFromResult(draw.results[0]);\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tasync _onRollGarment(event) {\n\t\tevent.preventDefault();\n\n\t\tconst table = await this.getRollTable(\"garments\");\n\t\tconst draw = await table.draw() ?? null;\n\n\t\tif (draw === null) {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.UnableToFindRollTable\")\n\t\t\t);\n\t\t}\n\n\t\tthis.garment = await this.getItemFromResult(draw.results[0]);\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n\n\tasync _onRollWeapon(event) {\n\t\tevent.preventDefault();\n\n\t\tconst table = await this.getRollTable(\"weapon\");\n\t\tconst draw = await table.draw() ?? null;\n\n\t\tif (draw === null) {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.UnableToFindRollTable\")\n\t\t\t);\n\t\t}\n\n\t\tthis.weapon = await this.getItemFromResult(draw.results[0]);\n\n\t\tthis.provenance = await this.getProvenance();\n\n\t\tthis.validate();\n\n\t\tthis.characterCreator.update();\n\t}\n}\n","export default class ConanDice {\n\tstatic async rollHitLocation() {\n\t\tlet locationRoll = await new Roll(\"1d20\").roll();\n\t\tconst newLocation = parseInt(locationRoll.result);\n\n\t\tlet locationId;\n\t\tif (newLocation >= 1 && newLocation <= 2) {\n\t\t\tlocationId = \"head\";\n\t\t}\n\t\telse if (newLocation >= 3 && newLocation <= 5) {\n\t\t\tlocationId = \"rarm\";\n\t\t}\n\t\telse if (newLocation >= 6 && newLocation <= 8) {\n\t\t\tlocationId = \"larm\";\n\t\t}\n\t\telse if (newLocation >= 9 && newLocation <= 14) {\n\t\t\tlocationId = \"torso\";\n\t\t}\n\t\telse if (newLocation >= 15 && newLocation <= 17) {\n\t\t\tlocationId = \"rleg\";\n\t\t}\n\t\telse {\n\t\t\tlocationId = \"lleg\";\n\t\t}\n\n\t\treturn locationId;\n\t}\n\n\tstatic async calculateCombatDiceRoll(rollData) {\n\t\t// rollData = {\n\t\t//   base: {\n\t\t//     numDice: 1,\n\t\t//   },\n\t\t//   bonus: {\n\t\t//     attribute: 0,\n\t\t//   },\n\t\t//   damage: {\n\t\t//     location: null,\n\t\t//     type: null,\n\t\t//   },\n\t\t//   spends: {\n\t\t//     doom: 0,\n\t\t//     momentum: 0,\n\t\t//   },\n\t\t//   actorId: null,\n\t\t//   fixedResults: [],\n\t\t//   isReroll: false,\n\t\t//   itemId: null,\n\t\t//   numDice: 1,\n\t\t//   title: \"Combat Dice Roll\",\n\t\t// }\n\n\t\tconst results = {\n\t\t\ttotal: 0,\n\t\t\teffects: 0,\n\t\t\tlocation: null,\n\t\t\tlocationId: null,\n\t\t\trolls: [],\n\t\t};\n\n\t\t// Total number to roll doesn\"t include any fixed results from a reroll\n\t\tconst numDice = rollData.numDice - rollData.fixedResults.length;\n\n\t\tconst rollInstance = new Roll(`${numDice}dp`);\n\t\tlet combatDiceRolls = await rollInstance.roll();\n\n\t\tif (game.dice3d) {\n\t\t\tawait ConanDice.showDiceSoNice(\n\t\t\t\trollInstance,\n\t\t\t\tgame.settings.get(\"core\", \"rollMode\")\n\t\t\t);\n\t\t}\n\n\t\tresults.rolls = combatDiceRolls.terms[0].results;\n\n\t\t// Populate each roll with its display value and a null index which will\n\t\t// be set correctly after any reroll merges have occured.\n\t\t//\n\t\tresults.rolls.forEach((roll, index) => {\n\t\t\troll.index = null;\n\t\t\troll.display = combatDiceRolls.terms[0].resultValues[index];\n\t\t});\n\n\t\t// If we\"re performing a reroll, then merge the rerolled dice into the\n\t\t// correct slots in the original results which makes it more obvious how\n\t\t// the new roll performed rather than shifting the position of all results\n\t\t//\n\t\tif (rollData.isReroll) {\n\t\t\tresults.rolls = await this._mergeRerolls(\n\t\t\t\tresults.rolls,\n\t\t\t\trollData.fixedResults\n\t\t\t);\n\t\t}\n\n\t\t// Go through all rolls and index their placement for future use.\n\t\t//\n\t\tresults.rolls.forEach((roll, index) => {\n\t\t\troll.index = index;\n\t\t\tresults.effects += roll.effect ? 1 : 0;\n\t\t\tresults.total += roll.result <= 2 ? roll.result : 0;\n\t\t});\n\n\t\t// Add momentum/doom spend damage at a 1-for-1 level\n\t\t//\n\t\t// NOTE: PCs cannot use Doom to increase damage, but this is taken into\n\t\t// account by the Roller interface\n\t\tresults.total += rollData.spends.doom + rollData.spends.momentum;\n\n\t\t// Effects usually count as 1 damage, unless the wepon is improvised.\n\t\t//\n\t\t// Total damage will be reduced by the Apply Damage interface if the\n\t\t// weapon has the Improvised quality, so we'll include the extra 1\n\t\t// here for each effect\n\t\tresults.improvisedTotal = results.total;\n\t\tresults.total += results.effects;\n\n\t\t// Get a hit location if this isn\"t a reroll, otherwise used the previous\n\t\t// hit location value.  Mental damage types don\"t use hit locations.\n\t\t//\n\t\tlet hitLocation = rollData.damage.location;\n\t\tconst damageType = rollData.damage.type || \"\";\n\t\tif (!hitLocation && damageType.toLowerCase() !== \"mental\") {\n\t\t\tconst locationId = await ConanDice.rollHitLocation();\n\n\t\t\trollData.damage.locationId = locationId;\n\t\t\trollData.damage.location = CONFIG.CONAN.coverageTypes[locationId];\n\t\t}\n\n\t\tresults.location = rollData.damage.location;\n\n\t\treturn results;\n\t}\n\n\tstatic async calculateSkillRoll(rollData) {\n\t\t// rollData = {\n\t\t//   actor: null,\n\t\t//   assists: {\n\t\t//     complication: 20,\n\t\t//     focus: 0,\n\t\t//     numDice: 0,\n\t\t//     tn: 7,\n\t\t//   },\n\t\t//   bonus: {\n\t\t//     dice: 0,\n\t\t//     inhuman: 0,\n\t\t//     momentum: 0,\n\t\t//     successes: 0,\n\t\t//   },\n\t\t//   difficulty: {\n\t\t//     base: 1,\n\t\t//     display: \"&nbsp;\",\n\t\t//     increase: 0,\n\t\t//   },\n\t\t//   skill: {\n\t\t//     complication: 20,\n\t\t//     display: \"&nbsp;\",\n\t\t//     expertise: 0,\n\t\t//     focus: 0,\n\t\t//     tn: 7,\n\t\t//   },\n\t\t//   spends: {\n\t\t//     doom: 0,\n\t\t//     fortune: 0,\n\t\t//     momentum: 0,\n\t\t//   },\n\t\t//   fixedResults: [],\n\t\t//   title: \"Skill Test\",\n\t\t//   isAssist: false,\n\t\t//   isReroll: false,\n\t\t//   item: null,\n\t\t//   numDice: CONFIG.BASE_2D20_DICE,\n\t\t// };\n\n\t\tconst results = {\n\t\t\tsuccesses: 0,\n\t\t\tcrits: 0,\n\t\t\tmomentum: 0,\n\t\t\tcomplications: 0,\n\t\t\trolls: [],\n\t\t};\n\n\t\tlet skillDiceToRoll;\n\t\tif (rollData.isReroll) {\n\t\t\tskillDiceToRoll = rollData.numDice\n\t\t\t\t+ rollData.assists.numDice\n\t\t\t\t- rollData.fixedResults.length;\n\t\t}\n\t\telse {\n\t\t\tskillDiceToRoll = rollData.numDice - rollData.spends.fortune;\n\t\t}\n\n\t\tskillDiceToRoll = skillDiceToRoll >= 0 ? skillDiceToRoll : 0;\n\n\t\tlet skillRollInstance = new Roll(\n\t\t\t`${skillDiceToRoll}d20cs<=${rollData.skill.tn}cf>=${rollData.skill.complication}`\n\t\t);\n\n\t\tlet skillRolls = await skillRollInstance.roll();\n\n\t\tif (game.dice3d) {\n\t\t\tawait ConanDice.showDiceSoNice(\n\t\t\t\tskillRollInstance,\n\t\t\t\tgame.settings.get(\"core\", \"rollMode\")\n\t\t\t);\n\t\t}\n\n\t\tif (!rollData.isReroll) {\n\t\t\t// Hard code the requested fortune dice as successes\n\t\t\t//\n\t\t\tfor (let i = 0; i < rollData.spends.fortune; i++) {\n\t\t\t\tlet critical = rollData.skill.focus > 0 ? true : false;\n\n\t\t\t\tresults.rolls.unshift({\n\t\t\t\t\tassist: false,\n\t\t\t\t\tcomplication: false,\n\t\t\t\t\tcritical,\n\t\t\t\t\tresult: 1,\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\tfortuneSpend: true,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tskillRolls.terms[0].results.forEach(roll => {\n\t\t\tresults.rolls.push({\n\t\t\t\tassist: false,\n\t\t\t\tcomplication: roll.failure || false,\n\t\t\t\tcritical: roll.result <= rollData.skill.focus,\n\t\t\t\tresult: roll.result,\n\t\t\t\tsuccess: roll.success || false,\n\t\t\t});\n\t\t});\n\n\t\t// Roll assists seperately, as it\"s possible that there are different TN and\n\t\t// expertise values required for the test\n\t\t//\n\t\tif (rollData.assists.numDice > 0 && !rollData.isReroll) {\n\t\t\tlet assistSkillDiceToRoll = rollData.assists.numDice;\n\n\t\t\tlet assistRollInstance = new Roll(\n\t\t\t\t`${assistSkillDiceToRoll}d20cs<=${rollData.assists.tn}cf>=${rollData.assists.complication}`\n\t\t\t);\n\t\t\tlet assistRolls = await assistRollInstance.roll();\n\n\t\t\tif (game.dice3d) {\n\t\t\t\tawait ConanDice.showDiceSoNice(\n\t\t\t\t\tassistRollInstance,\n\t\t\t\t\tgame.settings.get(\"core\", \"rollMode\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tassistRolls.terms[0].results.forEach(roll => {\n\t\t\t\tresults.rolls.push({\n\t\t\t\t\tassist: true,\n\t\t\t\t\tcomplication: roll.failure || false,\n\t\t\t\t\tcritical: roll.result <= rollData.assists.focus,\n\t\t\t\t\tresult: roll.result,\n\t\t\t\t\tsuccess: roll.success || false,\n\t\t\t\t\tfortuneSpend: false,\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t// If we\"re performing a reroll, then merge the rerolled dice into the\n\t\t// correct slots in the original results which makes it more obvious how\n\t\t// the new roll performed rather than shifting the position of all results\n\t\t//\n\t\tif (rollData.isReroll) {\n\t\t\tresults.rolls = await this._mergeRerolls(\n\t\t\t\tresults.rolls,\n\t\t\t\trollData.fixedResults\n\t\t\t);\n\t\t}\n\n\t\t// Go through all rolls and index their placement for future use.\n\t\t// Also flag criticals, complications and successes so they can be\n\t\t// identified for display purposes.\n\t\t//\n\t\tresults.rolls.forEach((roll, i) => {\n\t\t\troll.index = i;\n\n\t\t\tif (roll.complication) {\n\t\t\t\tresults.complications++;\n\t\t\t}\n\n\t\t\tif (roll.critical) {\n\t\t\t\tresults.crits++;\n\t\t\t\tresults.successes++;\n\t\t\t}\n\n\t\t\tif (roll.success) {\n\t\t\t\tresults.successes++;\n\t\t\t}\n\t\t});\n\n\t\t// Work out if the roll was a success and add any bonuses that may apply\n\t\t// if it was.\n\t\t//\n\t\tconst totalDifficulty =\n\t\t\trollData.difficulty.base + rollData.difficulty.increase;\n\n\t\t// Inhuman bonus successes always apply\n\t\tresults.successes += rollData.bonus.inhuman;\n\n\t\tresults.result = \"failure\";\n\n\t\tif (results.successes > 0) {\n\t\t\tresults.successes += rollData.bonus.successes;\n\n\t\t\tif (results.successes >= totalDifficulty) {\n\t\t\t\tresults.momentum = results.successes - totalDifficulty;\n\n\t\t\t\t// add any bonus momentum\n\t\t\t\tresults.momentum += rollData.bonus.momentum;\n\n\t\t\t\tresults.result = \"success\";\n\t\t\t}\n\n\t\t\tif (rollData.actorId) {\n\t\t\t\tconst actor = game.actors.get(rollData.actorId);\n\t\t\t\tconst updateActorData = {};\n\t\t\t\tupdateActorData[\"system.momentum\"] = results.momentum;\n\t\t\t\tactor.update(updateActorData);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tstatic getDefaultCombatDiceRollOptions() {\n\t\treturn {\n\t\t\tbase: {\n\t\t\t\tnumDice: 1,\n\t\t\t},\n\t\t\tbonus: {\n\t\t\t\tattribute: 0,\n\t\t\t\tother: 0,\n\t\t\t\treloads: 0,\n\t\t\t\ttalent: 0,\n\t\t\t},\n\t\t\tdamage: {\n\t\t\t\tlocation: null,\n\t\t\t\ttype: null,\n\t\t\t},\n\t\t\tspends: {\n\t\t\t\tdoom: 0,\n\t\t\t\tmomentum: 0,\n\t\t\t},\n\t\t\tactorId: null,\n\t\t\tfixedResults: [],\n\t\t\tisReroll: false,\n\t\t\titemId: null,\n\t\t\tnumDice: 1,\n\t\t\ttitle: game.i18n.localize(\"CONAN.CombatDice\"),\n\t\t};\n\t}\n\n\t// TODO Document Method\n\tstatic async triggerReroll(message) {\n\t\tconst actor = game.actors.get(message.speaker.actor);\n\t\tconst messageData = message.flags.data;\n\t\tconst type = messageData.type;\n\n\t\t// find all dice that have been selected for reroll\n\t\tconst rerolls = [];\n\t\t$(message.content)\n\t\t\t.children(\".selected\")\n\t\t\t.each(function() {\n\t\t\t\tconst rollIndex = this.id;\n\t\t\t\trerolls.push(messageData.results.rolls[rollIndex]);\n\t\t\t});\n\n\t\t// now go through all dice in the result and remove those that are selected\n\t\t// to be rerolled which leaves us with the fixed results\n\t\tlet norolls = messageData.results.rolls;\n\n\t\trerolls.forEach(reroll => {\n\t\t\tfor (let i = 0; i < norolls.length; i++) {\n\t\t\t\tif (reroll.index === norolls[i].index) {\n\t\t\t\t\tnorolls.splice(i, 1);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst diceQty = rerolls.length;\n\n\t\tif (diceQty === 0) {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.NoDiceSelectedForReroll\")\n\t\t\t);\n\t\t}\n\n\t\t// update the rollData settings with the fixed results and ensure it is\n\t\t// flagged as a reroll\n\t\t//\n\t\tmessageData.rollData.fixedResults = norolls;\n\t\tmessageData.rollData.isReroll = true;\n\n\t\tconan.chat.rerollNotification(diceQty, actor);\n\n\t\tconst rerollText = game.i18n.localize(\"CONAN.reroll\");\n\t\tmessageData.rollData.title += ` (${rerollText})`;\n\n\t\tlet results;\n\t\tif (type === \"skill\") {\n\t\t\tresults = await ConanDice.calculateSkillRoll(messageData.rollData);\n\t\t}\n\t\telse {\n\t\t\tresults = await ConanDice.calculateCombatDiceRoll(\n\t\t\t\tmessageData.rollData\n\t\t\t);\n\t\t}\n\n\t\tconst cardData = {\n\t\t\tactor: actor,\n\t\t\titem: messageData.item,\n\t\t\tresults,\n\t\t\trollData: messageData.rollData,\n\t\t\ttype,\n\t\t};\n\n\t\tswitch (type) {\n\t\t\tcase \"combatDice\":\n\t\t\t\tconan.chat.renderCombatDiceRollCard(cardData);\n\t\t\t\tbreak;\n\t\t\tcase \"damage\":\n\t\t\t\tconan.chat.renderDamageRollCard(cardData);\n\t\t\t\tbreak;\n\t\t\tcase \"skill\":\n\t\t\t\tconan.chat.renderSkillTestCard(cardData);\n\t\t\t\tbreak;\n\t\t\tcase \"soak\":\n\t\t\t\tconan.chat.renderSoakDiceRollCard(cardData);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.error(`Unknown roll type: ${type}`);\n\t\t}\n\t}\n\n\t/**\n\t * Add support for the Dice So Nice module\n\t * @param {Object} roll\n\t * @param {String} rollMode\n\t */\n\tstatic async showDiceSoNice(roll, rollMode) {\n\t\tif (game.modules.get(\"dice-so-nice\")\n\t\t\t&& game.modules.get(\"dice-so-nice\").active\n\t\t) {\n\t\t\tlet whisper = null;\n\t\t\tlet blind = false;\n\t\t\tswitch (rollMode) {\n\t\t\t\tcase \"blindroll\": {\n\t\t\t\t\tblind = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"gmroll\": {\n\t\t\t\t\tconst gmList = game.users.filter(user => user.isGM);\n\t\t\t\t\tconst gmIDList = [];\n\t\t\t\t\tgmList.forEach(gm => gmIDList.push(gm.id));\n\t\t\t\t\twhisper = gmIDList;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"roll\": {\n\t\t\t\t\tconst userList = game.users.filter(user => user.active);\n\t\t\t\t\tconst userIDList = [];\n\t\t\t\t\tuserList.forEach(user => userIDList.push(user.id));\n\t\t\t\t\twhisper = userIDList;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"selfroll\": {\n\t\t\t\t\twhisper = [game.user.id];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait game.dice3d.showForRoll(roll, game.user, true, whisper, blind);\n\t\t}\n\t}\n\n\t/**\n\t * Merge new rolls and the preserved old rolls submitted to a reroll request\n\t */\n\tstatic async _mergeRerolls(newRolls, oldRolls) {\n\t\tconst mergedRolls = [];\n\n\t\tlet x = 0;\n\t\tfor (let i = 0; i < oldRolls.length; i += 1) {\n\t\t\tconst mergeRoll = oldRolls[i];\n\t\t\tif (mergeRoll.index === x) {\n\t\t\t\tmergedRolls.push(mergeRoll);\n\t\t\t\tx++;\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\twhile (x < mergeRoll.index) {\n\t\t\t\tlet newRoll = newRolls.shift();\n\t\t\t\tnewRoll.index = x;\n\t\t\t\tmergedRolls.push(newRoll);\n\t\t\t\tx++;\n\t\t\t}\n\n\t\t\tmergedRolls.push(mergeRoll);\n\t\t\tx++;\n\t\t}\n\n\t\t// Now make sure we merge any left over rolls\n\t\treturn [...mergedRolls, ...newRolls];\n\t}\n}\n","import TalentManager from \"../system/TalentManager.mjs\";\nimport ConanDice from \"../system/ConanDice.mjs\";\n\nexport default class ConanActor extends Actor {\n\n\tget canRollSkillChecks() {\n\t\treturn [\"character\", \"npc\", \"mount\"].includes(this.type);\n\t}\n\n\tget canTakeDamage() {\n\t\treturn this.type !== \"transport\";\n\t}\n\n\tget canTakeResolveDamage() {\n\t\treturn [\"character\", \"npc\", \"mount\"].includes(this.type);\n\t}\n\n\tget canTakeVigorDamage() {\n\t\treturn [\"character\", \"npc\", \"mount\", \"watercraft\"].includes(this.type);\n\t}\n\n\tget isNPC() {\n\t\treturn [\"mount\", \"npc\"].includes(this.type);\n\t}\n\n\tget isNotNPC() {\n\t\treturn !this.isNPC;\n\t}\n\n\tget isNotWatercraft() {\n\t\treturn !this.isWatercraft;\n\t}\n\n\tget isWatercraft() {\n\t\treturn this.type === \"watercraft\";\n\t}\n\n\t/**\n\t *\n\t * Set initial actor data based on type\n\t *\n\t */\n\tasync _preCreate(data, options, user) {\n\t\tawait super._preCreate(data, options, user);\n\n\t\t// If prototypeToken already exists in data then we are copying an\n\t\t// actor and really shouldn't mess with any values\n\t\t//\n\t\tif (data.prototypeToken) return;\n\n\t\tconst prototypeToken = {\n\t\t\tbar1: {attribute: \"health.physical\"}, // Default Bar 1 to Vigor\n\t\t\tbar2: {attribute: \"health.mental\"}, // Default Bar 2 to Resolve\n\t\t\tdisposition: CONST.TOKEN_DISPOSITIONS.FRIENDLY,\n\t\t\tname: data.name, // Set token name to actor name\n\t\t\ttexture: foundry.utils.duplicate(this.prototypeToken.texture),\n\t\t};\n\n\t\tif ([\"character\", \"mount\"].includes(data.type)) {\n\t\t\tprototypeToken.actorLink = true;\n\t\t\tprototypeToken.sight = { enabled: true };\n\t\t}\n\n\t\tif ([\"mount\", \"transport\", \"watercraft\"].includes(data.type)) {\n\t\t\tprototypeToken.disposition = CONST.TOKEN_DISPOSITIONS.NEUTRAL;\n\t\t}\n\n\t\tif (data.type === \"npc\") {\n\t\t\tprototypeToken.actorLink = false;\n\t\t\tprototypeToken.disposition = CONST.TOKEN_DISPOSITIONS.HOSTILE;\n\t\t}\n\n\t\tconst update = {prototypeToken};\n\n\t\tif (!data.img) {\n\t\t\tconst image = CONFIG.CONAN.defaultActorTokenImages[data.type];\n\n\t\t\tif (image) {\n\t\t\t\tupdate.img = image;\n\t\t\t\tupdate.prototypeToken.texture = {\n\t\t\t\t\tsrc: image,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst copyActionsEnabled = game.settings.get(\n\t\t\tSYSTEM_ID, \"addActionsToNewCharacters\"\n\t\t);\n\n\t\tif (data.type === \"character\" && copyActionsEnabled) {\n\t\t\t// If the Actor data already contains Action items then this is an\n\t\t\t// Actor being duplicated and we don't want to touch their\n\t\t\t// items at all\n\t\t\t//\n\t\t\tconst alreadyHasActions = Array.isArray(data.items)\n\t\t\t\t&& data.items.filter(i => i.type === \"action\").length > 0;\n\n\t\t\tif (!alreadyHasActions) {\n\t\t\t\tconst packActions =\n\t\t\t\t\tawait game.packs.get(\"conan2d20.actions-core\").getDocuments();\n\n\t\t\t\tupdate.items = this.items.map(i => i.toObject());\n\n\t\t\t\tpackActions.forEach(s => {\n\t\t\t\t\tupdate.items.push(s.toObject());\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tawait this.updateSource(update);\n\t}\n\n\tasync applyDamage(damage, qualities) {\n\t\tconst me = this;\n\n\t\tdamage.ignoreSoak = damage.penetration;\n\t\tdamage.intense = false;\n\t\tdamage.vigorIntenseApplied = false;\n\t\tdamage.resolveIntenseApplied = false;\n\t\tdamage.nonlethal = false;\n\n\t\tconst spread = [];\n\t\tconst spreadLocalized = [];\n\t\tlet spreadDamage = 0;\n\n\t\tconst qualitiesApplied = [];\n\t\tif (damage.effects > 0) {\n\t\t\tfor (const quality of qualities) {\n\t\t\t\tconst effectBonus = quality.value * damage.effects;\n\n\t\t\t\tswitch (quality.type) {\n\t\t\t\t\tcase \"blinding\":\n\t\t\t\t\t\tthis.addCondition(\"blind\");\n\n\t\t\t\t\t\tconst options =\n\t\t\t\t\t\t\tConanDice.getDefaultCombatDiceRollOptions();\n\n\t\t\t\t\t\toptions.numDice = 3;\n\t\t\t\t\t\toptions.title = \"Blinding: Mental Damage\";\n\n\t\t\t\t\t\tconst mentalDamage =\n\t\t\t\t\t\t\tawait ConanDice.calculateCombatDiceRoll(options);\n\n\t\t\t\t\t\tdamage.resolve += mentalDamage.total;\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.blinding\",\n\t\t\t\t\t\t\t\t{mentalDamage: mentalDamage.total}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"cavalryx\":\n\t\t\t\t\t\tif (damage.vigor > 0) damage.vigor += effectBonus;\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.cavalryx\",\n\t\t\t\t\t\t\t\t{ value: effectBonus }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"fearsomex\":\n\t\t\t\t\t\tdamage.resolve += effectBonus;\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.fearsomex\",\n\t\t\t\t\t\t\t\t{ value: effectBonus }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"grappling\":\n\t\t\t\t\t\tthis.addCondition(\"grappled\");\n\n\t\t\t\t\t\tconst difficulty = CONFIG.CONAN.rollDifficultyLevels[damage.effects];\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.grappling\",\n\t\t\t\t\t\t\t\t{ difficulty }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"improvised\":\n\t\t\t\t\t\tif (!qualities.find(q => q.type === \"visciousx\")) {\n\t\t\t\t\t\t\tdamage.vigor -= damage.effects;\n\n\t\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.improvised\",\n\t\t\t\t\t\t\t\t\t{ value: damage.effects }\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"incendiaryx\":\n\t\t\t\t\t\tthis.addCondition(\"burningx\", damage.effects);\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.incendiaryx\",\n\t\t\t\t\t\t\t\t{ value: damage.effects }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"intense\":\n\t\t\t\t\t\tdamage.intense = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"knockdown\":\n\t\t\t\t\t\tthis.addCondition(\"prone\");\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.knockdown\",\n\t\t\t\t\t\t\t\t{ value: damage.effects }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"nonlethal\":\n\t\t\t\t\t\tthis.addCondition(\"dazed\");\n\t\t\t\t\t\tdamage.nonlethal = true;\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.localize(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.nonlethal\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"persistentx\":\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.persistentx\",\n\t\t\t\t\t\t\t\t{ value: damage.effects }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"piercingx\":\n\t\t\t\t\t\tdamage.ignoreSoak += effectBonus;\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.piercingx\",\n\t\t\t\t\t\t\t\t{ value: effectBonus }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"spreadx\":\n\t\t\t\t\t\tfor (let i = 0; i < damage.effects; i++) {\n\t\t\t\t\t\t\tconst locationId = await ConanDice.rollHitLocation();\n\t\t\t\t\t\t\tspread.push(locationId);\n\t\t\t\t\t\t\tspreadLocalized.push(CONFIG.CONAN.coverageTypes[locationId]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"stun\":\n\t\t\t\t\t\tthis.addCondition(\"staggered\");\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.stun\",\n\t\t\t\t\t\t\t\t{ value: damage.effects }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"unforgivingx\":\n\t\t\t\t\t\tdamage.intense = true;\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.localize(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.unforgivingx\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (damage.vigor > 0) damage.vigor += effectBonus;\n\t\t\t\t\t\tif (damage.resolve > 0) damage.resolve += effectBonus;\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities.viciousx,\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.viciousx\",\n\t\t\t\t\t\t\t\t{ value: effectBonus }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"viciousx\":\n\t\t\t\t\t\tif (damage.vigor > 0) damage.vigor += effectBonus;\n\t\t\t\t\t\tif (damage.resolve > 0) damage.resolve += effectBonus;\n\n\t\t\t\t\t\tqualitiesApplied.push({\n\t\t\t\t\t\t\tname: CONFIG.CONAN.weaponQualities[quality.type],\n\t\t\t\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\t\t\t\"CONAN.QualityDamageAdjust.viciousx\",\n\t\t\t\t\t\t\t\t{ value: effectBonus }\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst damageTaken = {\n\t\t\tmob: {\n\t\t\t\tvigor: 0,\n\t\t\t\tresolve: 0,\n\t\t\t\twounds: 0,\n\t\t\t\ttraumas: 0,\n\t\t\t\tdeaths: 0,\n\t\t\t},\n\t\t\tvigor: 0,\n\t\t\tresolve: 0,\n\t\t\twounds: 0,\n\t\t\ttraumas: 0,\n\t\t};\n\n\t\tasync function _applyDamage() {\n\t\t\tconst actorUpdate = {};\n\n\t\t\tif (me.system.isMob) {\n\t\t\t\tlet mobUpdate = {};\n\t\t\t\t[damage, mobUpdate] = await me._applyMobDamage(damage);\n\n\t\t\t\tif (!foundry.utils.isEmpty(mobUpdate)) {\n\t\t\t\t\tmobUpdate[\"system.grouping.members\"].forEach((member, index) => {\n\t\t\t\t\t\tconst currentMember = me.system.grouping.members[index];\n\n\t\t\t\t\t\tdamageTaken.mob.vigor +=\n\t\t\t\t\t\t\tcurrentMember.vigor.value - member.vigor.value;\n\n\t\t\t\t\t\tconst newWounds = (\n\t\t\t\t\t\t\tmember.vigor.wounds.filter(w => w.active)\n\t\t\t\t\t\t).length;\n\n\t\t\t\t\t\tconst currentWounds = (\n\t\t\t\t\t\t\tcurrentMember.vigor.wounds.filter(w => w.active)\n\t\t\t\t\t\t).length;\n\n\t\t\t\t\t\tdamageTaken.mob.wounds += newWounds - currentWounds;\n\n\t\t\t\t\t\tdamageTaken.mob.resolve +=\n\t\t\t\t\t\t\tcurrentMember.resolve.value - member.resolve.value;\n\n\t\t\t\t\t\tconst newTraumas = (\n\t\t\t\t\t\t\tmember.resolve.traumas.filter(w => w.active)\n\t\t\t\t\t\t).length;\n\n\t\t\t\t\t\tconst currentTraumas = (\n\t\t\t\t\t\t\tcurrentMember.resolve.traumas.filter(w => w.active)\n\t\t\t\t\t\t).length;\n\n\t\t\t\t\t\tdamageTaken.mob.wounds += newTraumas - currentTraumas;\n\t\t\t\t\t});\n\n\t\t\t\t\tconst currentDead = (\n\t\t\t\t\t\tme.system.grouping.members.filter(m => m.dead)\n\t\t\t\t\t).length;\n\n\t\t\t\t\tconst newDead = (\n\t\t\t\t\t\tmobUpdate[\"system.grouping.members\"].filter(m => m.dead)\n\t\t\t\t\t).length;\n\n\t\t\t\t\tdamageTaken.mob.deaths += newDead - currentDead;\n\n\t\t\t\t\tfoundry.utils.mergeObject(actorUpdate, mobUpdate);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (damage.vigor > 0 && me.canTakeVigorDamage) {\n\t\t\t\tconst vigorUpdates = await me._applyVigorDamage(damage);\n\n\t\t\t\tif (!foundry.utils.isEmpty(vigorUpdates)) {\n\t\t\t\t\tdamageTaken.vigor += me.getCurrentVigor() - vigorUpdates[\"system.health.physical.value\"];\n\t\t\t\t\tdamageTaken.wounds += vigorUpdates[\"system.health.physical.wounds.value\"] - me.getCurrentWounds();\n\n\t\t\t\t\tfoundry.utils.mergeObject(actorUpdate, vigorUpdates);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (damage.resolve > 0 && me.canTakeResolveDamage) {\n\t\t\t\tconst resolveUpdates = await me._applyResolveDamage(damage);\n\n\t\t\t\tif (!foundry.utils.isEmpty(resolveUpdates)) {\n\t\t\t\t\tdamageTaken.resolve += me.getCurrentResolve() - resolveUpdates[\"system.health.mental.value\"];\n\t\t\t\t\tdamageTaken.traumas += resolveUpdates[\"system.health.mental.traumas.value\"] - me.getCurrentTraumas();\n\n\t\t\t\t\tfoundry.utils.mergeObject(actorUpdate, resolveUpdates);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn actorUpdate;\n\t\t}\n\n\t\tif (spread.length > 0) {\n\t\t\tspreadDamage = Math.ceil(damage.vigor / 2);\n\t\t\tqualitiesApplied.push({\n\t\t\t\tname: CONFIG.CONAN.weaponQualities.spreadx,\n\t\t\t\ttext: game.i18n.format(\n\t\t\t\t\t\"CONAN.QualityDamageAdjust.spreadx\",\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue: spreadDamage,\n\t\t\t\t\t\tlocations: spreadLocalized.sort().join(\", \"),\n\t\t\t\t\t}\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tconst initialDamage = foundry.utils.duplicate(damage);\n\n\t\tlet actorUpdate;\n\n\t\tactorUpdate = await _applyDamage();\n\t\tawait this.update(actorUpdate);\n\n\t\t// Now apply and spread damage\n\t\tfor (const location of spread) {\n\t\t\tdamage.vigor = spreadDamage;\n\t\t\tdamage.location = location;\n\n\t\t\tactorUpdate = await _applyDamage();\n\t\t\tawait this.update(actorUpdate);\n\t\t}\n\n\t\tif (damage.vigorIntenseApplied) {\n\t\t\tconst text = this.isWatercraft\n\t\t\t\t? game.i18n.localize(\"CONAN.QualityDamageAdjust.intense.wound\")\n\t\t\t\t: game.i18n.localize(\"CONAN.QualityDamageAdjust.intense.break\");\n\n\t\t\tqualitiesApplied.push({\n\t\t\t\tname: CONFIG.CONAN.weaponQualities.intense,\n\t\t\t\ttext,\n\t\t\t});\n\t\t}\n\t\tif (damage.resolveIntenseApplied) {\n\t\t\tqualitiesApplied.push({\n\t\t\t\tname: CONFIG.CONAN.weaponQualities.intense,\n\t\t\t\ttext: game.i18n.localize(\"CONAN.QualityDamageAdjust.intense.trauma\"),\n\t\t\t});\n\t\t}\n\n\t\tif (this.isDead()) {\n\t\t\tthis._setDefeated();\n\n\t\t\tui.notifications.info(\n\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\"CONAN.AppliedDamageToActorDefeated\",\n\t\t\t\t\t{\n\t\t\t\t\t\tactorName: this.name,\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tui.notifications.info(\n\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\"CONAN.AppliedDamageToActor\",\n\t\t\t\t\t{\n\t\t\t\t\t\tactorName: this.name,\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tqualitiesApplied.sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tconst chatData = {\n\t\t\tactor: this,\n\t\t\tdamageTaken,\n\t\t\thasQualities: qualitiesApplied.length > 0,\n\t\t\tinitialDamage,\n\t\t\tisDead: this.isDead(),\n\t\t\tisMob: this.system.isMob,\n\t\t\tisWatercraft: this.isWatercraft,\n\t\t\tqualitiesApplied,\n\t\t};\n\n\t\treturn chatData;\n\t}\n\n\tasync bankMomentum() {\n\t\tconst banked = this.system.momentum;\n\n\t\tconst poolType = this.isNPC ? \"doom\" : \"momentum\";\n\n\t\tif (banked > 0) {\n\t\t\tconan.apps.Counter.changeCounter(banked, poolType);\n\t\t\tthis.update({\"system.momentum\": 0});\n\n\t\t\tlet html = `<h2>${game.i18n.localize(\"CONAN.rollMomentumBanked\")}</h2><div>`;\n\n\t\t\thtml += `<p>${game.i18n.format(\"CONAN.momentumBankedChatText\", {\n\t\t\t\tcharacter: `<b>${this.name}</b>`,\n\t\t\t\tbanked: `<b>${banked}</b>`,\n\t\t\t\tpoolType: `<b>${poolType}</b>`,\n\t\t\t})}</p></div>`;\n\n\t\t\tconst chatData = {\n\t\t\t\tuser: game.user.id,\n\t\t\t\tcontent: html,\n\t\t\t};\n\n\t\t\tChatMessage.create(chatData);\n\t\t}\n\t}\n\n\t_calculateStowage(actorData) {\n\t\tlet currentStowage = 0;\n\t\tfor (const item of this.items) {\n\t\t\tif (item.system.encumbrance) {\n\t\t\t\tconst quantity = parseInt(item.system.quantity) ?? 1;\n\t\t\t\tconst encumbrance = parseInt(item.system.encumbrance) ?? 0;\n\n\t\t\t\tcurrentStowage += encumbrance * quantity;\n\t\t\t}\n\t\t}\n\n\t\tactorData.stowage.value = currentStowage;\n\t}\n\n\tcanOwnItemType(type) {\n\t\tconst config = CONFIG.CONAN.itemPermissions[type]?.canOwn ?? [];\n\t\treturn config.includes(this.type);\n\t}\n\n\tcanUseItemType(type) {\n\t\tconst config = CONFIG.CONAN.itemPermissions[type]?.canUse ?? [];\n\t\treturn config.includes(this.type);\n\t}\n\n\tasync getArmor(armorLocation) {\n\t\tif ([\"mount\", \"npc\", \"watercraft\"].includes(this.type)) {\n\t\t\treturn this.system.armor;\n\t\t}\n\t\telse if (this.type === \"character\") {\n\t\t\treturn await this.sheet.getArmor(armorLocation);\n\t\t}\n\t\telse {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tasync getAvailableDoom() {\n\t\treturn game.settings.get(\"conan2d20\", \"doom\");\n\t}\n\n\tasync getAvailableFortune() {\n\t\tif (this.isNPC) {\n\t\t\tconst doom = game.settings.get(\"conan2d20\", \"doom\");\n\t\t\treturn Math.floor(doom / 3);\n\t\t}\n\t\telse {\n\t\t\treturn this.system.resources.fortune.value;\n\t\t}\n\t}\n\n\tasync getAvailableMomentum() {\n\t\treturn this.system.momentum + game.settings.get(\"conan2d20\", \"momentum\");\n\t}\n\n\tgetCourage() {\n\t\treturn this.system.health.courage;\n\t}\n\n\tgetCurrentResolve() {\n\t\treturn this.system.health.mental.value;\n\t}\n\n\tgetCurrentTraumas() {\n\t\treturn this.system.health.mental.traumas.value;\n\t}\n\n\tgetCurrentVigor() {\n\t\treturn this.system.health.physical.value;\n\t}\n\n\tgetCurrentWounds() {\n\t\treturn this.system.health.physical.wounds.value;\n\t}\n\n\tgetDifficultyIncrease(attribute) {\n\t\tconst mentalSkill = [\"int\", \"per\", \"wil\"].includes(attribute);\n\n\t\tif (mentalSkill) {\n\t\t\treturn this.getCurrentTraumas();\n\t\t}\n\t\telse {\n\t\t\treturn this.getCurrentWounds();\n\t\t}\n\t}\n\n\t// return an item owned by the user with the specified name, or null.\n\tgetItemByName(itemName) {\n\t\treturn this.items.find(item => item.name === itemName) || null;\n\t}\n\n\tgetKits() {\n\t\treturn this.collections.items.filter(entry => entry.type === \"kit\");\n\t}\n\n\tgetMaxResolve() {\n\t\treturn (this.system.attributes.wil.value\n\t\t\t+ this.system.skills.dis.expertise.value\n\t\t\t- this.system.health.mental.despair\n\t\t\t+ this.system.health.mental.bonus\n\t\t);\n\t}\n\n\tgetMaxTraumas() {\n\t\treturn this.system.health.mental.traumas.max;\n\t}\n\n\tgetMaxWounds() {\n\t\treturn this.system.health.physical.wounds.max;\n\t}\n\n\tgetMaxVigor() {\n\t\treturn (this.system.attributes.bra.value\n\t\t\t+ this.system.skills.res.expertise.value\n\t\t\t- this.system.health.physical.fatigue\n\t\t\t+ this.system.health.physical.bonus\n\t\t);\n\t}\n\n\tgetMergedReloads() {\n\t\tconst reloads = this.getReloads();\n\n\t\tconst availableReloads = {};\n\n\t\tfor (let reload of reloads) {\n\t\t\tif (!availableReloads[reload.name]) {\n\t\t\t\tavailableReloads[reload.name] = {\n\t\t\t\t\tname: reload.name,\n\t\t\t\t\tuses: parseInt(reload.uses),\n\t\t\t\t\tmax: parseInt(reload.max),\n\t\t\t\t\tids: [reload.id],\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tavailableReloads[reload.name].uses += parseInt(reload.uses);\n\t\t\t\tavailableReloads[reload.name].max += parseInt(reload.max);\n\t\t\t\tavailableReloads[reload.name].ids.push(reload.id);\n\t\t\t}\n\t\t}\n\n\t\tlet mergedReloads = [];\n\t\t/* eslint-disable-next-line no-unused-vars */\n\t\tfor (const [key, value] of Object.entries(availableReloads)) {\n\t\t\tmergedReloads.push(availableReloads[key]);\n\t\t}\n\n\t\treturn mergedReloads;\n\t}\n\n\tgetTags() {\n\t\tconst tags = [];\n\n\t\tfor (const tag of this.system.tags?.value ?? []) {\n\t\t\tswitch (this.type) {\n\t\t\t\tcase \"mount\":\n\t\t\t\t\ttags.push({\n\t\t\t\t\t\tname: CONFIG.CONAN.MOUNT_CAPABILITIES[tag],\n\t\t\t\t\t\ttooltip: CONFIG.CONAN.MOUNT_CAPABILITY_TOOLTIPS[tag],\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"npc\":\n\t\t\t\t\ttags.push({\n\t\t\t\t\t\tname: CONFIG.CONAN.NPC_CATEGORIES[tag],\n\t\t\t\t\t\ttooltip: CONFIG.CONAN.NPC_CATEGORY_TOOLTIPS[tag],\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"watercraft\":\n\t\t\t\t\ttags.push({\n\t\t\t\t\t\tname: CONFIG.CONAN.WATERCRAFT_QUALITIES[tag],\n\t\t\t\t\t\ttooltip: CONFIG.CONAN.WATERCRAFT_QUALITY_TOOLTIPS[tag],\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\ttags.push({\n\t\t\t\t\t\tname: tag,\n\t\t\t\t\t\ttooltip: tag,\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn tags.sort((a, b) => a.name.localeCompare(b.name));\n\t}\n\n\tgetReloads() {\n\t\treturn this.items\n\t\t\t.filter(i => i.system.kitType === \"reload\")\n\t\t\t.map(\n\t\t\t\ti =>\n\t\t\t\t\t({\n\t\t\t\t\t\tid: i.id,\n\t\t\t\t\t\tname: i.name,\n\t\t\t\t\t\tuses: i.system.uses.value,\n\t\t\t\t\t\tmax: i.system.uses.max,\n\t\t\t\t\t} || [])\n\t\t\t)\n\t\t\t.sort((a, b) => {\n\t\t\t\tif (a.name < b.name) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\tif (a.name > b.name) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t});\n\t}\n\n\tgetSkillTargetNumberAndFocus(attribute, skillKey, expertiseKey) {\n\t\tconst actorSkills = this.system.skills;\n\n\t\tlet skillTn = parseInt(this.system.attributes[attribute].value) || 0;\n\t\tlet skillFocus = 0;\n\t\tlet skillExpertise = 0;\n\n\t\tif (this.isNPC) {\n\t\t\tskillFocus = skillExpertise =\n\t\t\t\tparseInt(actorSkills[expertiseKey].value) || 0;\n\t\t\tskillTn += skillExpertise;\n\t\t}\n\t\telse {\n\t\t\tskillExpertise = parseInt(actorSkills[skillKey].expertise.value) || 0;\n\t\t\tskillFocus = parseInt(actorSkills[skillKey].focus.value) || 0;\n\t\t\tskillTn += skillExpertise;\n\t\t}\n\n\t\treturn [skillTn, skillExpertise, skillFocus];\n\t}\n\n\tgetTreatedTraumas() {\n\t\tlet treatedTraumas = 0;\n\t\tif (this.isCharacter()) {\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tconst dot = this.system.health.mental.traumas.dots[i];\n\t\t\t\tif (dot.status === \"treated\") treatedTraumas++;\n\t\t\t}\n\t\t}\n\t\treturn treatedTraumas;\n\t}\n\n\tgetStartingGold() {\n\t\treturn this.system.attributes.per.value + this.system.skills.soc.expertise.value;\n\t}\n\n\tgetTreatedWounds() {\n\t\tlet treatedWounds = 0;\n\t\tif (this.isCharacter()) {\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tconst dot = this.system.health.physical.wounds.dots[i];\n\t\t\t\tif (dot.status === \"treated\") treatedWounds++;\n\t\t\t}\n\t\t}\n\t\treturn treatedWounds;\n\t}\n\n\tgetWatercraftQualities() {\n\t\tconst qualities = {};\n\n\t\tfor (const quality of this.system.categories.value) {\n\t\t\tqualities[quality] = CONFIG.CONAN.WATERCRAFT_QUALITIES[quality];\n\t\t}\n\n\t\treturn qualities;\n\t}\n\n\t/**\n\t * Augment the basic actor data with additional dynamic data\n\t */\n\tprepareData() {\n\t\tsuper.prepareData();\n\n\t\t// Get the Actor\"s data object\n\t\tconst actorData = this.system;\n\n\t\t// Prepare Character data\n\t\tif (this.type === \"character\") {\n\t\t\tthis.talentManager = new TalentManager({ignoreCost: false});\n\t\t\tthis._prepareCharacterData(actorData);\n\t\t\tthis._prepareTalentManager();\n\t\t}\n\n\t\tif ([\"mount\", \"npc\"].includes(this.type)) {\n\t\t\tthis._prepareNPCData(actorData);\n\t\t}\n\n\t\tif ([\"mount\", \"transport\", \"watercraft\"].includes(this.type)) {\n\t\t\tthis._calculateStowage(actorData);\n\t\t}\n\n\t\tif (actorData.qualities !== undefined) {\n\t\t\tconst map = {};\n\t\t\tfor (const [t] of Object.entries(map)) {\n\t\t\t\tconst quality = actorData.qualities[t];\n\t\t\t\tif (quality === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Return the prepared Actor data\n\t\treturn actorData;\n\t}\n\n\tasync _applyMobDamage(damage) {\n\t\tconan.logger.debug(\"Applying damage to Mob/Squad members\");\n\t\tconst mobMembers = foundry.utils.duplicate(this.system.grouping.members);\n\n\t\tif (damage.vigor > 0) {\n\t\t\tfor (const member of mobMembers) {\n\t\t\t\tif (this.isMobMemberDead(member)) continue;\n\t\t\t\tif (damage.vigor <= 0) break;\n\n\t\t\t\tconst soak = Math.max(0, member.armor - damage.ignoreSoak);\n\n\t\t\t\tdamage.vigor -= soak;\n\n\t\t\t\tlet newWounds = 0;\n\n\t\t\t\tif (!damage.nonlethal && damage.vigor >= 5) newWounds++;\n\n\t\t\t\tif (damage.vigor >= member.vigor.value) {\n\t\t\t\t\tdamage.vigor -= member.vigor.value;\n\t\t\t\t\tmember.vigor.value = 0;\n\n\t\t\t\t\tif (!damage.nonlethal) newWounds++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmember.vigor.value -= damage.vigor;\n\t\t\t\t\tdamage.vigor = 0;\n\t\t\t\t}\n\n\t\t\t\tif (newWounds > 0) {\n\t\t\t\t\tif (damage.intense && !damage.vigorIntenseApplied) {\n\t\t\t\t\t\tif (!damage.nonlethal) newWounds++;\n\t\t\t\t\t\tdamage.vigorIntenseApplied = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let i = 0; i < member.vigor.wounds.length; i++) {\n\t\t\t\t\t\tif (newWounds <= 0) break;\n\t\t\t\t\t\tif (!member.vigor.wounds[i].active) {\n\t\t\t\t\t\t\tmember.vigor.wounds[i].active = true;\n\t\t\t\t\t\t\tnewWounds--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.isMobMemberDead(member)) member.dead = true;\n\t\t\t}\n\t\t}\n\n\t\tif (damage.resolve > 0) {\n\t\t\tfor (const member of mobMembers) {\n\t\t\t\tif (this.isMobMemberDead(member)) continue;\n\t\t\t\tif (damage.resolve <= 0) break;\n\n\t\t\t\tconst soak = Math.max(0, member.courage - damage.ignoreSoak);\n\t\t\t\tdamage.resolve -= soak;\n\n\t\t\t\tlet newTraumas = 0;\n\n\t\t\t\tif (!damage.nonlethal && damage.resolve >= 5) newTraumas++;\n\n\t\t\t\tif (damage.resolve >= member.resolve.value) {\n\t\t\t\t\tdamage.resolve -= member.resolve.value;\n\t\t\t\t\tmember.resolve.value = 0;\n\t\t\t\t\tif (!damage.nonlethal) newTraumas++;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmember.resolve.value -= damage.resolve;\n\t\t\t\t\tdamage.resolve = 0;\n\t\t\t\t}\n\n\t\t\t\tif (newTraumas > 0) {\n\t\t\t\t\tif (damage.intense && !damage.resolveIntenseApplied) {\n\t\t\t\t\t\tif (!damage.nonlethal) newTraumas++;\n\t\t\t\t\t\tdamage.resolveIntenseApplied = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let i = 0; i < member.resolve.traumas.length; i++) {\n\t\t\t\t\t\tif (newTraumas <= 0) break;\n\t\t\t\t\t\tif (!member.resolve.traumas[i].active) {\n\t\t\t\t\t\t\tmember.resolve.traumas[i].active = true;\n\t\t\t\t\t\t\tnewTraumas--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.isMobMemberDead(member)) member.dead = true;\n\t\t\t}\n\t\t}\n\n\t\treturn [damage, {\"system.grouping.members\": mobMembers}];\n\t}\n\n\tasync _applyResolveDamage(damage) {\n\t\tconan.logger.debug(\"Applying Resolve damage\");\n\t\tconst actorUpdate = {};\n\n\t\tif (this.isDead()) return actorUpdate;\n\n\t\tconst courage = await this.getCourage();\n\n\t\tconst maxTraumas = this.getMaxTraumas();\n\t\tlet resolveRemaining = this.getCurrentResolve();\n\t\tlet currentTraumas = this.getCurrentTraumas();\n\t\tlet treatedTraumas = this.getTreatedTraumas();\n\n\t\t// Reduce the damage by the amount of soak\n\t\tconst soak = Math.max(0, courage - damage.ignoreSoak);\n\n\t\tlet damageRemaining = damage.resolve - soak;\n\n\t\tif (damageRemaining <= 0) return actorUpdate;\n\n\t\t// five or more damage at once causes a wound automatically\n\t\tlet newWounds = 0;\n\n\t\tif (!damage.nonlethal) {\n\t\t\tnewWounds = damageRemaining >= 5 ? 1 : 0;\n\t\t}\n\n\t\tif (resolveRemaining > 0) {\n\t\t\tresolveRemaining -= damageRemaining;\n\n\t\t\t// If Vigor drops to zero or below then a wound is caused\n\t\t\tif (resolveRemaining <= 0) {\n\t\t\t\tresolveRemaining = 0;\n\n\t\t\t\tif (!damage.nonlethal) newWounds++;\n\t\t\t}\n\t\t}\n\t\telse if (!damage.nonlethal) {\n\t\t\t// Damage when at zero Vigor always causes a wound\n\t\t\tnewWounds++;\n\t\t}\n\n\t\tif (newWounds > 0) {\n\t\t\tif (damage.intense && !damage.resolveIntenseApplied) {\n\t\t\t\tif (!damage.nonlethal) newWounds++;\n\n\t\t\t\tdamage.resolveIntenseApplied = true;\n\t\t\t}\n\n\t\t\tcurrentTraumas += treatedTraumas + newWounds;\n\t\t\tcurrentTraumas = Math.min(5, currentTraumas);\n\n\t\t\tif (this.isCharacter()) {\n\t\t\t\tlet woundsToAdd = newWounds;\n\t\t\t\tconst woundDots = foundry.utils.duplicate(this.system.health.mental.traumas.dots);\n\t\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\t\tswitch (woundDots[i].status) {\n\t\t\t\t\t\tcase \"healed\":\n\t\t\t\t\t\t\tif (woundsToAdd <= 0) continue;\n\n\t\t\t\t\t\t\twoundDots[i].status = \"wounded\";\n\t\t\t\t\t\t\twoundDots[i].icon = \"fas fa-skull\";\n\t\t\t\t\t\t\twoundsToAdd--;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"treated\":\n\t\t\t\t\t\t\t// Having a new wound causes any treated ones to re-open\n\t\t\t\t\t\t\twoundDots[i].status = \"wounded\";\n\t\t\t\t\t\t\twoundDots[i].icon = \"fas fa-skull\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tactorUpdate[\"system.health.mental.traumas.dots\"] = woundDots;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcurrentTraumas = currentTraumas > maxTraumas ? maxTraumas : currentTraumas;\n\t\t\t}\n\t\t}\n\n\t\tactorUpdate[\"system.health.mental.value\"] = resolveRemaining;\n\t\tactorUpdate[\"system.health.mental.traumas.value\"] = currentTraumas;\n\n\t\treturn actorUpdate;\n\t}\n\n\tasync _applyVigorDamage(damage) {\n\t\tconan.logger.debug(\"Applying Vigor damage\");\n\t\tconst actorUpdate = {};\n\n\t\tif (this.isDead()) return actorUpdate;\n\n\t\tconst armor = await this.getArmor(damage.location);\n\n\t\t// Armor values are stored differently depending on whether the Actor is\n\t\t// an NPC or Character\n\t\t//\n\t\tlet soak = 0;\n\t\tif (this.isCharacter()) {\n\t\t\tsoak = armor.soak[0] ?? 0;\n\t\t}\n\t\telse {\n\t\t\tsoak = armor;\n\t\t}\n\n\t\tconst maxWounds = this.getMaxWounds();\n\t\tlet vigorRemaining = this.getCurrentVigor();\n\t\tlet currentWounds = this.getCurrentWounds();\n\t\tlet treatedWounds = this.getTreatedWounds();\n\n\t\t// Reduce the damage by the amount of armor soak\n\t\tsoak = Math.max(0, soak - damage.ignoreSoak);\n\t\tlet damageRemaining = damage.vigor - soak;\n\n\t\tif (damageRemaining <= 0) return actorUpdate;\n\n\t\tlet newWounds = 0;\n\n\t\t// five or more damage at once causes a wound automatically\n\t\tif (!damage.nonlethal) {\n\t\t\tnewWounds = damageRemaining >= 5 ? 1 : 0;\n\t\t}\n\n\t\tif (vigorRemaining > 0) {\n\t\t\tvigorRemaining -= damageRemaining;\n\n\t\t\t// If Vigor drops to zero or below then a wound is caused\n\t\t\tif (vigorRemaining <= 0) {\n\t\t\t\tvigorRemaining = 0;\n\t\t\t\tif (!damage.nonlethal) newWounds++;\n\t\t\t}\n\t\t}\n\t\telse if (!damage.nonlethal) {\n\t\t\t// Damage when at zero Vigor always causes a wound\n\t\t\tnewWounds++;\n\t\t}\n\n\t\tif (newWounds > 0) {\n\t\t\tif (damage.intense && !damage.vigorIntenseApplied) {\n\t\t\t\tif (!damage.nonlethal) newWounds++;\n\n\t\t\t\tdamage.vigorIntenseApplied = true;\n\t\t\t}\n\n\t\t\tcurrentWounds += treatedWounds + newWounds;\n\n\t\t\tif (this.isCharacter()) {\n\t\t\t\tlet woundsToAdd = newWounds;\n\t\t\t\tconst woundDots = foundry.utils.duplicate(this.system.health.physical.wounds.dots);\n\t\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\t\tswitch (woundDots[i].status) {\n\t\t\t\t\t\tcase \"healed\":\n\t\t\t\t\t\t\tif (woundsToAdd <= 0) continue;\n\n\t\t\t\t\t\t\twoundDots[i].status = \"wounded\";\n\t\t\t\t\t\t\twoundDots[i].icon = \"fas fa-skull\";\n\t\t\t\t\t\t\twoundsToAdd--;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"treated\":\n\t\t\t\t\t\t\t// Having a new wound causes any treated ones to re-open\n\t\t\t\t\t\t\twoundDots[i].status = \"wounded\";\n\t\t\t\t\t\t\twoundDots[i].icon = \"fas fa-skull\";\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tactorUpdate[\"system.health.physical.wounds.dots\"] = woundDots;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcurrentWounds = currentWounds > maxWounds ? maxWounds : currentWounds;\n\t\t\t}\n\t\t}\n\n\t\tactorUpdate[\"system.health.physical.value\"] = vigorRemaining;\n\t\tactorUpdate[\"system.health.physical.wounds.value\"] = currentWounds;\n\n\t\treturn actorUpdate;\n\t}\n\n\t/* -------------------------------------------- */\n\n\t/**\n\t * Prepare Character type specific data\n\t */\n\t_prepareCharacterData(actorData) {\n\t\t// Calculate Vigor\n\t\tif (isNaN(actorData.health.physical.bonus)\n\t\t\t|| actorData.health.physical.bonus === null\n\t\t) {\n\t\t\tactorData.health.physical.bonus = 0;\n\t\t}\n\n\t\tactorData.health.physical.max =\n\t\t\tactorData.attributes.bra.value\n\t\t\t\t+ actorData.skills.res.expertise.value\n\t\t\t\t- actorData.health.physical.fatigue\n\t\t\t\t+ actorData.health.physical.bonus;\n\n\t\tif (actorData.health.physical.value === null) {\n\t\t\tactorData.health.physical.value =\n\t\t\t\tactorData.attributes.bra.value\n\t\t\t\t\t+ actorData.skills.res.expertise.value;\n\t\t}\n\t\telse if (actorData.health.physical.value > actorData.health.physical.max) {\n\t\t\tactorData.health.physical.value = actorData.health.physical.max;\n\t\t}\n\t\telse if (actorData.health.physical.value < 0) {\n\t\t\tactorData.health.physical.value = 0;\n\t\t}\n\n\t\t// Calculate Resolve\n\t\tif (isNaN(actorData.health.mental.bonus)\n\t\t\t|| actorData.health.mental.bonus === null\n\t\t) {\n\t\t\tactorData.health.mental.bonus = 0;\n\t\t}\n\n\t\tactorData.health.mental.max =\n\t\t\tactorData.attributes.wil.value\n\t\t\t\t+ actorData.skills.dis.expertise.value\n\t\t\t\t- actorData.health.mental.despair\n\t\t\t\t+ actorData.health.mental.bonus;\n\n\t\tif (actorData.health.mental.value === null) {\n\t\t\tactorData.health.mental.value =\n\t\t\t\tactorData.attributes.wil.value + actorData.skills.dis.expertise.value;\n\t\t}\n\t\telse if (actorData.health.mental.value > actorData.health.mental.max) {\n\t\t\tactorData.health.mental.value = actorData.health.mental.max;\n\t\t}\n\t\telse if (actorData.health.mental.value < 0) {\n\t\t\tactorData.health.mental.value = 0;\n\t\t}\n\n\t\t// Set TN for Skills\n\t\tfor (const [s, skl] of Object.entries(actorData.skills)) {\n\t\t\tconst tn = skl.expertise.value + actorData.attributes[skl.attribute].value;\n\n\t\t\tactorData.skills[s].tn = {\n\t\t\t\tvalue: tn,\n\t\t\t};\n\n\t\t\tif (actorData.skills[s].expertise.value > 0) {\n\t\t\t\tactorData.skills[s].trained = true;\n\t\t\t}\n\t\t}\n\n\t\t// Prepare Upkeep Cost\n\t\tactorData.resources.upkeep.value =\n\t\t\t3 + actorData.background.standing.value - actorData.background.renown;\n\t\tif (actorData.resources.upkeep.value < 0) {\n\t\t\tactorData.resources.upkeep.value = 0;\n\t\t}\n\n\t\t// Automatic Actions\n\t\tactorData.actions = [];\n\n\t\t// Sync Wounds & Traumas from Dots\n\t\tlet wounds = 0;\n\t\tlet traumas = 0;\n\t\tfor (let i = 0; i < 5; i++) {\n\t\t\tconst woundDot = actorData.health.physical.wounds.dots[i];\n\t\t\tif (woundDot.status === \"wounded\") wounds++;\n\t\t\tconst traumaDot = actorData.health.mental.traumas.dots[i];\n\t\t\tif (traumaDot.status === \"wounded\") traumas++;\n\t\t}\n\t\tactorData.health.physical.wounds.value = wounds;\n\t\tactorData.health.mental.traumas.value = traumas;\n\n\t\tactorData.resources.xp.available =\n\t\t\tactorData.resources.xp.value - actorData.resources.xp.spent;\n\t}\n\n\tasync _prepareCharacterDerivedData() {}\n\n\t/* -------------------------------------------- */\n\n\t/**\n\t * Prepare Character type specific data\n\t */\n\t_prepareNPCData(actorData) {\n\t\tif (actorData.isMob) {\n\t\t\tlet mobMembersAlive = actorData.grouping.members.length;\n\t\t\tfor (const member of actorData.grouping.members) {\n\t\t\t\tif (this.isMobMemberDead(member)) {\n\t\t\t\t\tmobMembersAlive--;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.isAlive()) {\n\t\t\t\tmobMembersAlive++;\n\t\t\t}\n\n\t\t\tactorData.mobMembersAlive = {\n\t\t\t\tvalue: mobMembersAlive,\n\t\t\t\tmax: CONFIG.CONAN.DEFAULT_MOB_SIZE,\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tactorData.mobMembersAlive = {\n\t\t\t\tvalue: 0,\n\t\t\t\tmax: 0,\n\t\t\t};\n\t\t}\n\t}\n\n\t_prepareTalentManager() {\n\t\tthis.talentManager.setActorAttributes(\n\t\t\tfoundry.utils.duplicate(this.system.attributes)\n\t\t);\n\n\t\tthis.talentManager.setActorSkills(\n\t\t\tfoundry.utils.duplicate(this.system.skills)\n\t\t);\n\n\t\tthis.talentManager.setActorXp(this.system.resources.xp.available);\n\n\t\tconst knownTalents = [];\n\n\t\tfor (const item of this.items) {\n\t\t\tif (item.type === \"talent\") {\n\t\t\t\tknownTalents.push({\n\t\t\t\t\tidentifier: item.system.talentIdentifier,\n\t\t\t\t\trank: item.system.rank.value,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.talentManager.setKnownTalents(knownTalents);\n\t}\n\n\tasync payDoom(doomSpend) {\n\t\tif (doomSpend <= 0) return;\n\n\t\tawait conan.apps.Counter.changeCounter(Number(`${doomSpend}`), \"doom\");\n\n\t\tlet html = `<h2>${game.i18n.localize(\"CONAN.rollDoomPaid\")}</h2><div>`;\n\n\t\thtml += `<p>${game.i18n.format(\"CONAN.rollDoomPaidChatText\", {\n\t\t\tcharacter: `<b>${this.name}</b>`,\n\t\t\tspent: `<b>${doomSpend}</b>`,\n\t\t})}</p></div>`;\n\n\t\tconst chatData = {\n\t\t\tuser: game.user.id,\n\t\t\tcontent: html,\n\t\t};\n\n\t\tChatMessage.create(chatData);\n\t}\n\n\tspendFortune(fortuneSpend) {\n\t\tif (fortuneSpend <= 0) return;\n\n\t\tconst newValue = this.system.resources.fortune.value - fortuneSpend;\n\n\t\tif (newValue < 0) {\n\t\t\tconst error = \"Fortune spend would exceed available fortune points.\";\n\t\t\tthrow error;\n\t\t}\n\t\telse {\n\t\t\tconst updateActorData = {\n\t\t\t\t\"system.resources.fortune.value\": newValue,\n\t\t\t};\n\n\t\t\tthis.update(updateActorData);\n\t\t}\n\t}\n\n\tasync buyFortune(numFortune) {\n\t\tif (numFortune <= 0) return;\n\t\tif (!this.isNPC) return;\n\n\t\tconst doomCost = numFortune * 3;\n\t\tconst newValue = game.settings.get(\"conan2d20\", \"doom\") - doomCost;\n\n\t\tif (newValue < 0) {\n\t\t\tconst error = \"Doom cost of Fortune would exceed available Doom points.\";\n\t\t\tthrow error;\n\t\t}\n\t\telse {\n\t\t\tawait conan.apps.Counter.changeCounter(-`${doomCost}`, \"doom\");\n\t\t}\n\n\t\tlet html = `<h2>${game.i18n.localize(\"CONAN.rollFortuneBought\")}</h2><div>`;\n\n\t\thtml += `<p>${game.i18n.format(\"CONAN.rollFortuneBoughtChatText\", {\n\t\t\tcharacter: `<b>${this.name}</b>`,\n\t\t\tspent: `<b>${doomCost}</b>`,\n\t\t\tfortune: `<b>${numFortune}</b>`,\n\t\t})}</p></div>`;\n\n\t\tconst chatData = {\n\t\t\tuser: game.user.id,\n\t\t\tcontent: html,\n\t\t};\n\n\t\tChatMessage.create(chatData);\n\t}\n\n\tasync spendDoom(doomSpend) {\n\t\tif (doomSpend <= 0) return;\n\n\t\tconst newValue = game.settings.get(\"conan2d20\", \"doom\") - doomSpend;\n\n\t\tif (newValue < 0) {\n\t\t\tconst error = \"Doom spend would exceed available doom points.\";\n\t\t\tthrow error;\n\t\t}\n\t\telse {\n\t\t\tawait conan.apps.Counter.changeCounter(-`${doomSpend}`, \"doom\");\n\t\t}\n\n\t\tlet html = `<h2>${game.i18n.localize(\"CONAN.rollDoomSpent\")}</h2><div>`;\n\n\t\thtml += `<p>${game.i18n.format(\"CONAN.rollDoomSpentChatText\", {\n\t\t\tcharacter: `<b>${this.name}</b>`,\n\t\t\tspent: `<b>${doomSpend}</b>`,\n\t\t})}</p></div>`;\n\n\t\tconst chatData = {\n\t\t\tuser: game.user.id,\n\t\t\tcontent: html,\n\t\t};\n\n\t\tChatMessage.create(chatData);\n\t}\n\n\tasync spendMomentum(momentumSpend) {\n\t\tif (momentumSpend <= 0) return;\n\n\t\tlet playerMomentum = this.system.momentum;\n\t\tlet poolMomentum = game.settings.get(\"conan2d20\", \"momentum\");\n\n\t\tconst availableMomentum = poolMomentum + playerMomentum;\n\n\t\tif (momentumSpend > availableMomentum) {\n\t\t\tconst error = \"Momentum spend would exceed available momentum points.\";\n\t\t\tthrow error;\n\t\t}\n\t\telse {\n\t\t\tlet newPoolMomentum = poolMomentum;\n\n\t\t\tplayerMomentum -= momentumSpend;\n\n\t\t\tif (playerMomentum < 0) {\n\t\t\t\tnewPoolMomentum += playerMomentum;\n\t\t\t\tplayerMomentum = 0;\n\t\t\t}\n\n\t\t\tthis.update({\"system.momentum\": playerMomentum});\n\t\t\tawait conan.apps.Counter.setCounter(`${newPoolMomentum}`, \"momentum\");\n\n\t\t\tlet html = `<h2>${game.i18n.localize(\n\t\t\t\t\"CONAN.rollMomentumSpent\"\n\t\t\t)}</h2><div>`;\n\n\t\t\thtml += `<p>${game.i18n.format(\"CONAN.rollMomentumSpentChatText\", {\n\t\t\t\tcharacter: `<b>${this.name}</b>`,\n\t\t\t\tspent: `<b>${momentumSpend}</b>`,\n\t\t\t})}</p></div>`;\n\n\t\t\tconst chatData = {\n\t\t\t\tuser: game.user.id,\n\t\t\t\tcontent: html,\n\t\t\t};\n\n\t\t\tChatMessage.create(chatData);\n\t\t}\n\t}\n\n\tasync spendReloads(reload, quantity) {\n\t\twhile (quantity > 0 && reload.ids.length > 0) {\n\t\t\tconst id = reload.ids.pop();\n\t\t\tconst reloadItem = this.getEmbeddedDocument(\"Item\", id);\n\n\t\t\tconst remaining = reloadItem.system.uses.value;\n\n\t\t\tlet useCount = 0;\n\t\t\tif (remaining > 0) {\n\t\t\t\tif (quantity >= remaining) {\n\t\t\t\t\tuseCount = remaining;\n\t\t\t\t\tquantity -= remaining;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tuseCount = quantity;\n\t\t\t\t}\n\n\t\t\t\tthis.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t{\n\t\t\t\t\t\t_id: id,\n\t\t\t\t\t\t\"system.uses.value\": remaining - useCount,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t}\n\t}\n\n\t_executeAttack(itemId) {\n\t\tconst weapon = this.getEmbeddedDocument(\"Item\", itemId);\n\n\t\tlet weaponSkill = weapon.skillToUse(this.type);\n\n\t\tthis._rollSkillCheck(weaponSkill, weapon);\n\t}\n\n\t_attackBonuses() {\n\t\tconst isNpc = this.isNPC;\n\n\t\treturn {\n\t\t\tthreaten: isNpc ? 0 : this._attributeBonus(\"per\"),\n\t\t\tmelee: isNpc ? 0 : this._attributeBonus(\"bra\"),\n\t\t\tranged: isNpc ? 0 : this._attributeBonus(\"awa\"),\n\t\t};\n\t}\n\n\t_attributeBonus(attribute) {\n\t\tconst attributeValue = this.system.attributes[attribute].value;\n\n\t\tif (attributeValue <= 8) return 0;\n\t\tif (attributeValue <= 9) return 1;\n\t\tif (attributeValue <= 11) return 2;\n\t\tif (attributeValue <= 13) return 3;\n\t\tif (attributeValue <= 15) return 4;\n\t\tif (attributeValue >= 16) return 5;\n\t}\n\n\tasync _rollSkillCheck(skill, item = null, bonusDice = 0) {\n\t\tlet attribute;\n\n\t\tif (this.isNPC && item?.type === \"npcattack\") {\n\t\t\tswitch (item.system.attackType) {\n\t\t\t\tcase \"melee\":\n\t\t\t\t\tattribute = \"agi\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ranged\":\n\t\t\t\t\tattribute = \"coo\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"threaten\":\n\t\t\t\t\tattribute = \"per\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tattribute = this.isNPC\n\t\t\t\t? CONFIG.CONAN.expertiseAttributeMap[skill]\n\t\t\t\t: CONFIG.CONAN.skillAttributeMap[skill];\n\t\t}\n\n\t\tconst skillData = {\n\t\t\tattribute,\n\t\t\tbonusDice,\n\t\t\tskill: this.isNPC ? null : skill,\n\t\t\texpertise: this.isNPC ? skill : null,\n\t\t\titem,\n\t\t};\n\n\t\tnew conan.apps.SkillRoller(this, skillData).render(true);\n\t}\n\n\tasync _setDefeated() {\n\t\t// If this actor is in a combat tracker, then set them as defeated and\n\t\t// add the \"dead\" effect icon to the token in the scene\n\t\t//\n\t\tfor (const combat of game.combats) {\n\t\t\tfor (const combatant of combat.combatants) {\n\n\t\t\t\t// Make sure we\"re matching on the correct id depending on whether we\"re\n\t\t\t\t// a linked actor, or just a token\n\t\t\t\t//\n\t\t\t\tconst matchFound = this.isToken\n\t\t\t\t\t? combatant.tokenId === this.token.id\n\t\t\t\t\t: combatant.actorId === this.id;\n\n\t\t\t\tif (!matchFound) continue;\n\n\t\t\t\tcombatant.update({defeated: true});\n\n\t\t\t\tconst token = combatant.token;\n\n\t\t\t\tif (!token) return;\n\n\t\t\t\t// Push the defeated status to the token\n\t\t\t\t/* eslint-disable no-loop-func */\n\t\t\t\tconst statusEffect = CONFIG.CONAN.statusEffects.find(\n\t\t\t\t\te => e.id === CONFIG.CONAN.specialStatusEffects.DEFEATED\n\t\t\t\t);\n\t\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\tif (!statusEffect && !token.object) return;\n\n\t\t\t\tconst effect = token.actor && statusEffect\n\t\t\t\t\t? statusEffect\n\t\t\t\t\t: CONFIG.CONAN.controlIcons.defeated;\n\n\t\t\t\tif (token.object) {\n\t\t\t\t\tawait token.object.toggleEffect(\n\t\t\t\t\t\teffect,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tawait token.toggleActiveEffect(\n\t\t\t\t\t\teffect,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tasync getRollOptions(rollNames) {\n\t\tconst flag = this.getFlag(game.system.id, \"rollOptions\") ?? {};\n\t\treturn rollNames\n\t\t\t.flatMap(rollName =>\n\t\t\t\t// convert flag object to array containing the names of all\n\t\t\t\t// fields with a truthy value\n\t\t\t\tObject.entries(flag[rollName] ?? {}).reduce(\n\t\t\t\t\t(opts, [key, value]) => opts.concat(value ? key : []),\n\t\t\t\t\t[]\n\t\t\t\t)\n\t\t\t)\n\t\t\t.reduce((unique, option) => {\n\t\t\t\t// ensure option entries are unique\n\t\t\t\treturn unique.includes(option) ? unique : unique.concat(option);\n\t\t\t}, []);\n\t}\n\n\tasync addCondition(effect, value = 1) {\n\t\tif (typeof effect === \"string\") {\n\t\t\teffect = foundry.utils.duplicate(\n\t\t\t\tCONFIG.CONAN.statusEffects.find(e => e.id === effect)\n\t\t\t);\n\t\t}\n\n\t\tif (!effect) return \"No Effect Found\";\n\n\t\tif (!effect.id) return \"Conditions require an id field\";\n\n\t\teffect.label = game.i18n.localize(effect.label);\n\n\t\t// eslint-disable-next-line prefer-const\n\t\tlet existing = this.hasCondition(effect.id);\n\t\tif (existing && existing.flags.conan2d20.value === null) {\n\t\t\treturn existing;\n\t\t}\n\n\t\tif (existing) {\n\t\t\texisting = foundry.utils.duplicate(existing);\n\t\t\texisting.flags.conan2d20.value += value;\n\t\t\treturn this.updateEmbeddedDocuments(\"ActiveEffect\", [existing]);\n\t\t}\n\n\t\tif (!existing) {\n\t\t\tif (Number.isNumeric(effect.flags.conan2d20.value)) {\n\t\t\t\teffect.flags.conan2d20.value = value;\n\t\t\t}\n\n\t\t\tconst statuses = effect.statuses ?? [];\n\t\t\tstatuses.push(effect.id);\n\t\t\teffect.statuses = statuses;\n\t\t}\n\t\treturn this.createEmbeddedDocuments(\"ActiveEffect\", [effect]);\n\t}\n\n\tisAlive() {\n\t\treturn !this.isDead();\n\t}\n\n\tisDead() {\n\t\tconst wounds = this.system.health.physical.wounds;\n\t\tconst woundsFull = wounds.value >= wounds.max;\n\n\t\tconst traumas = this.system.health.mental.traumas;\n\t\tconst traumasFull = traumas.value >= traumas.max;\n\n\t\treturn woundsFull || traumasFull;\n\t}\n\n\tisMobMemberDead(mobMemberData) {\n\t\tlet woundsFull = true;\n\t\tfor (const wound of mobMemberData.vigor.wounds) {\n\t\t\tif (!wound.active) {\n\t\t\t\twoundsFull = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet traumasFull = true;\n\t\tfor (const trauma of mobMemberData.resolve.traumas) {\n\t\t\tif (!trauma.active) {\n\t\t\t\ttraumasFull = false;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn woundsFull || traumasFull;\n\t}\n\n\tisCharacter() {\n\t\treturn this.type === \"character\";\n\t}\n\n\tasync removeCondition(effect, value = 1) {\n\t\teffect = foundry.utils.duplicate(\n\t\t\tCONFIG.CONAN.statusEffects.find(e => e.id === effect)\n\t\t);\n\t\tif (!effect) {\n\t\t\treturn \"No Effect Found\";\n\t\t}\n\t\tif (!effect.id) {\n\t\t\treturn \"Conditions require an id field\";\n\t\t}\n\n\t\t// eslint-disable-next-line prefer-const\n\t\tlet existing = this.hasCondition(effect.id);\n\t\tif (existing) {\n\t\t\tconst duplicated = foundry.utils.duplicate(existing);\n\t\t\tduplicated.flags.conan2d20.value -= value;\n\n\t\t\tif (duplicated.flags.conan2d20.value <= 0) {\n\t\t\t\treturn this.deleteEmbeddedDocuments(\"ActiveEffect\", [existing.id]);\n\t\t\t}\n\n\t\t\treturn this.updateEmbeddedDocuments(\"ActiveEffect\", [duplicated]);\n\t\t}\n\t}\n\n\thasCondition(conditionKey) {\n\t\treturn this.effects.find(\n\t\t\ti => i.statuses.has(conditionKey)\n\t\t);\n\t}\n\n\t// Return the type of the current actor\n\tget actorType() {\n\t\treturn this.type;\n\t}\n\n\tasync useKit(itemId) {\n\t\tconst item = this.getEmbeddedDocument(\"Item\", itemId);\n\n\t\tconst totalUses = item.system.uses.value;\n\t\tconst availableUses = totalUses > 3 ? 3 : totalUses;\n\n\t\tif (availableUses <= 0) {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.format(\"CONAN.KitHasNoUsesAvailable\", {kitName: item.name})\n\t\t\t);\n\t\t}\n\n\t\trenderTemplate(\n\t\t\t\"systems/conan2d20/templates/dialog/use-kit-dialog.hbs\",\n\t\t\t{\n\t\t\t\tavailableUses,\n\t\t\t\ttotalUses,\n\t\t\t\tkitName: item.name,\n\t\t\t}\n\t\t).then(html => {\n\t\t\tnew Dialog({\n\t\t\t\ttitle: \"Confirm Kit Use\",\n\t\t\t\tcontent: html,\n\t\t\t\tbuttons: {\n\t\t\t\t\tYes: {\n\t\t\t\t\t\ticon: \"<i class=\\\"fa fa-check\\\"></i>\",\n\t\t\t\t\t\tlabel: \"Yes\",\n\t\t\t\t\t\tcallback: async formData => {\n\t\t\t\t\t\t\tconst input = $(formData).find(\".chosen-uses\")[0];\n\t\t\t\t\t\t\tconst uses = Number.parseInt(input.value);\n\t\t\t\t\t\t\tif (Number.isInteger(uses)) {\n\t\t\t\t\t\t\t\tif (uses > 0 && uses <= availableUses) {\n\t\t\t\t\t\t\t\t\tconst remainingUses = item.system.uses.value - uses;\n\n\t\t\t\t\t\t\t\t\titem.update({\"system.uses.value\": remainingUses});\n\n\t\t\t\t\t\t\t\t\tlet chatHtml = `<h2>${game.i18n.localize(\"CONAN.kitChargesUsed\")}</h2><div>`;\n\n\t\t\t\t\t\t\t\t\tchatHtml += `<p>${game.i18n.format(\"CONAN.usedKitChargesChatText\", {\n\t\t\t\t\t\t\t\t\t\tactorName: `<b>${this.name}</b>`,\n\t\t\t\t\t\t\t\t\t\titemName: `<b>${item.name}</b>`,\n\t\t\t\t\t\t\t\t\t\tuses: `<b>${uses}</b>`,\n\t\t\t\t\t\t\t\t\t})}</p></div>`;\n\n\t\t\t\t\t\t\t\t\tconst chatData = {\n\t\t\t\t\t\t\t\t\t\tuser: game.user.id,\n\t\t\t\t\t\t\t\t\t\tcontent: chatHtml,\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tChatMessage.create(chatData);\n\n\t\t\t\t\t\t\t\t\tthis._rollSkillCheck(item.system.skill, item, uses);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\treturn ui.notifications.error(`Bad Use Value: ${uses} (${availableUses} available)`);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\treturn ui.notifications.error(`Bad Use Value: ${uses} (${availableUses} available)`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tCancel: {\n\t\t\t\t\t\ticon: \"<i class=\\\"fa fa-times\\\"></i>\",\n\t\t\t\t\t\tlabel: \"Cancel\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: \"Yes\",\n\t\t\t}).render(true);\n\t\t});\n\t}\n}\n","export default class ConanProgress {\n\tlabel = \"\";\n\n\tmax = 100;\n\n\tvalue = 0;\n\n\tconstructor(max, label) {\n\t\tthis.label = label ?? \"\";\n\t\tthis.max = max ?? 100;\n\t}\n\n\tadvance(amount = 1, label = \"\") {\n\t\tif (this.value >= this.max) return;\n\n\t\tthis.value += Math.abs(amount);\n\n\t\tconst percent = Math.floor((this.value / this.max) * 100);\n\n\t\tSceneNavigation.displayProgressBar({label, pct: percent});\n\t}\n\n\tfinished(label = \"\") {\n\t\tSceneNavigation.displayProgressBar({label, pct: 100});\n\t}\n}\n","import * as Stage from \"./CharGenStages/_module.mjs\";\n\nimport ConanActor from \"../documents/ConanActor.mjs\";\nimport ConanProgress from \"../system/ConanProgress.mjs\";\n\nexport default class CharacterCreator extends FormApplication {\n\n\tconstructor(object={}, options={}) {\n\t\tsuper(object, options);\n\n\t\tthis.baseAttributes = {};\n\n\t\tCONFIG.CONAN.attributeIds.forEach(attribute => {\n\t\t\tthis.baseAttributes[attribute] = {\n\t\t\t\tvalue: 7,\n\t\t\t};\n\t\t});\n\n\t\tthis.baseSkills = {};\n\n\t\tCONFIG.CONAN.skillIds.forEach(skill => {\n\t\t\tthis.baseSkills[skill] = {\n\t\t\t\tattribute: CONFIG.CONAN.skillAttributeMap[skill],\n\t\t\t\texpertise: {\n\t\t\t\t\tvalue: 0,\n\t\t\t\t},\n\t\t\t\tfocus: {\n\t\t\t\t\tvalue: 0,\n\t\t\t\t},\n\t\t\t};\n\t\t});\n\n\t\tthis.firstGetData = true;\n\n\t\tthis.characterData = {};\n\t\tthis.characterItems = [];\n\n\t\tthis.errors = [];\n\n\t\tthis.stages = [\n\t\t\tnew Stage.CharGenName(this),\n\t\t\tnew Stage.CharGenHomeland(this),\n\t\t\tnew Stage.CharGenStartingAttributes(this),\n\t\t\tnew Stage.CharGenAttributeAspects(this),\n\t\t\tnew Stage.CharGenCaste(this),\n\t\t\tnew Stage.CharGenStory(this),\n\t\t\tnew Stage.CharGenArchetype(this),\n\t\t\tnew Stage.CharGenNature(this),\n\t\t\tnew Stage.CharGenEducation(this),\n\t\t\tnew Stage.CharGenWarStory(this),\n\t\t\tnew Stage.CharGenAttributes(this),\n\t\t\tnew Stage.CharGenSkills(this),\n\t\t\tnew Stage.CharGenTalent(this),\n\t\t\tnew Stage.CharGenLanguage(this),\n\t\t\tnew Stage.CharGenFortune(this),\n\t\t\tnew Stage.CharGenBelongings(this),\n\t\t];\n\t}\n\n\t/** @inheritdoc */\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"character-creator\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/character-creator.hbs\",\n\t\t\twidth: 860,\n\t\t\theight: \"auto\",\n\t\t\tresizable: true,\n\t\t\tsubmitOnChange: true,\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tnavSelector: \".sheet-navigation\",\n\t\t\t\t\tcontentSelector: \".sheet-content\",\n\t\t\t\t\tinitial: \"name\",\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\t/** @inheritdoc */\n\tget title() {\n\t\treturn `${game.i18n.localize(\"CONAN.CharacterCreator.title\")}`;\n\t}\n\n\t/** @inheritdoc */\n\tactivateListeners(html) {\n\t\tfor (const stage of this.stages) {\n\t\t\tstage.activateListeners(html);\n\t\t}\n\n\t\thtml.find(\".create-character-button\").click(event => this._createCharacter(event));\n\n\t\thtml.on(\"input\", \"input[data-is-item='true']\", event => this._onChangeInput(event));\n\n\t\treturn super.activateListeners(html);\n\t}\n\n\tasync addStockItems() {\n\t\tconst compendiumUuid = game.settings.get(\"conan2d20\", \"characterCreationItemPack\");\n\t\tconst pack = game.packs.find(pack => pack.metadata.id === compendiumUuid);\n\n\t\tif (pack) {\n\t\t\tfor (const itemIndex of pack.index) {\n\t\t\t\tconst doc = await pack.getDocument(itemIndex._id);\n\t\t\t\tif (doc) this.characterItems.push(doc.toObject());\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.UnableToFindItemPack\"),\n\t\t\t\t{permanent: true}\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic async createActorFromData(characterData, characterItems, userId) {\n\t\tif (!game.user.isGM) return;\n\n\t\tconst newActor = await ConanActor.create(characterData);\n\n\t\tif (!newActor) return;\n\n\t\t// Ensure both health values are at max after creation\n\t\tawait newActor.update({\"system.health.mental.value\": newActor.getMaxResolve()});\n\t\tawait newActor.update({\"system.health.physical.value\": newActor.getMaxVigor()});\n\t\tawait newActor.update({\"system.resources.gold.value\": newActor.getStartingGold()});\n\n\t\tawait newActor.createEmbeddedDocuments(\"Item\", characterItems);\n\n\t\tif (userId !== game.userId) {\n\t\t\tconst ownership = newActor.ownership;\n\t\t\townership[userId] = CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER;\n\n\t\t\tawait newActor.update({ownership});\n\n\t\t\tconst user = game.users.get(userId);\n\n\t\t\tif (user && !user.character) {\n\t\t\t\t// User doesn't have a character assigned, so assign this new\n\t\t\t\t// one they just created\n\t\t\t\tuser.update({character: newActor.id});\n\t\t\t}\n\n\t\t\tgame.socket.emit(\"system.conan2d20\", {\n\t\t\t\ttype: \"openNewCharacter\",\n\t\t\t\tpayload: {actorId: newActor.id, userId},\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tnewActor.sheet.render(true);\n\n\t\t\treturn ui.notifications.info(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Created.message\"),\n\t\t\t\t{permanent: true}\n\t\t\t);\n\t\t}\n\t}\n\n\tgetCasteUuid() {\n\t\tfor (const stage of this.stages) {\n\t\t\tif (stage.name === \"caste\") {\n\t\t\t\treturn stage.getCasteUuid();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCareerSkill() {\n\t\tfor (const stage of this.stages) {\n\t\t\tif (stage.name === \"archetype\") {\n\t\t\t\treturn stage.getCareerSkill();\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @inheritdoc */\n\tasync getData(options) {\n\t\tconst data = super.getData(options);\n\n\t\tdata.CONFIG = CONFIG.CONAN;\n\n\t\tlet progress;\n\t\tif (this.firstGetData) {\n\t\t\tprogress = new ConanProgress((this.stages.length * 2) + 1);\n\t\t\t// populate stages with starting data\n\t\t\tawait this.updateCharacterData();\n\t\t\tif (progress) progress.advance();\n\t\t}\n\n\t\tdata.stages = [];\n\n\t\tdata.characterValid = true;\n\t\tfor (const stage of this.stages) {\n\t\t\tawait stage.validate();\n\t\t\tif (progress) progress.advance();\n\t\t\tdata.stages.push(await stage.formConfig());\n\t\t\tif (!stage.valid) data.characterValid = false;\n\t\t\tif (progress) progress.advance();\n\t\t}\n\n\t\tif (this.errors.length > 0) data.characterValid = false;\n\t\tdata.errors = this.errors;\n\n\t\tdata.characterData = this.characterData;\n\n\t\tdata.attributes = foundry.utils.duplicate(data.characterData[\"system.attributes\"]);\n\t\tfor (const attribute in data.attributes) {\n\t\t\tdata.attributes[attribute].label = CONFIG.CONAN.attributeLabels[attribute];\n\t\t\tdata.attributes[attribute].skills = [];\n\t\t}\n\n\t\tconst skills = foundry.utils.duplicate(data.characterData[\"system.skills\"]);\n\t\tfor (const skillId in skills) {\n\t\t\tconst skill = skills[skillId];\n\t\t\tskill.label = CONFIG.CONAN.skills[skillId];\n\t\t\tconst attributeScore = data.attributes[skill.attribute].value;\n\n\t\t\tskill.tn = attributeScore + skill.expertise.value;\n\n\t\t\tdata.attributes[skill.attribute].skills.push(skill);\n\t\t}\n\n\t\tdata.talents = this.talents;\n\n\t\tif (this.firstGetData) this.firstGetData = false;\n\n\t\tif (progress) progress.finished();\n\t\treturn data;\n\t}\n\n\tasync getHomelandLanguages() {\n\t\tconst homelandStage = this.stages.find(stage => stage.name === \"homeland\");\n\t\treturn await homelandStage.getHomelandLanguages();\n\t}\n\n\tasync getRollTables(prefix) {\n\t\tconst compendiumUuid = game.settings.get(\"conan2d20\", \"characterCreationRolltablePack\");\n\t\tconst pack = game.packs.find(pack => pack.metadata.id === compendiumUuid);\n\n\t\tif (pack) {\n\t\t\tconst ids = pack.index.filter(\n\t\t\t\td => (d.name.toLowerCase()).startsWith(prefix)\n\t\t\t).map(d => d._id);\n\n\t\t\tconst matchingTables = [];\n\n\t\t\tfor (const id of ids) {\n\t\t\t\tconst doc = await pack.getDocument(id);\n\t\t\t\tif (doc) matchingTables.push(doc);\n\t\t\t}\n\n\t\t\treturn matchingTables;\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.UnableToFindRollTablePack\"),\n\t\t\t\t{permanent: true}\n\t\t\t);\n\t\t}\n\t}\n\n\tasync update() {\n\t\tawait this.updateCharacterData();\n\t\tthis.render(true);\n\t}\n\n\tasync updateCharacterData() {\n\t\tconst characterDataParts = [{\n\t\t\ttype: \"character\",\n\t\t}];\n\n\t\tconst attributes = foundry.utils.duplicate(this.baseAttributes);\n\t\tconst skills = foundry.utils.duplicate(this.baseSkills);\n\n\t\tconst characterItems = [];\n\t\tconst characterTalents = [];\n\n\t\tfor (const stage of this.stages) {\n\t\t\t// Contains any Talents selected up to but not including this stage\n\t\t\tstage.talentManager.setKnownTalents(characterTalents);\n\n\t\t\tconst stageData = await stage.characterData();\n\t\t\tif (stageData) characterDataParts.push(stageData);\n\n\t\t\tawait stage.applyAttributeBonuses(attributes);\n\t\t\tawait stage.applySkillBonuses(skills);\n\n\t\t\tconst stageItems = await stage.getItems();\n\t\t\tfor (const item of stageItems ?? []) {\n\t\t\t\tif (item.type === \"talent\") {\n\t\t\t\t\tconst identifier = item.system.talentIdentifier;\n\n\t\t\t\t\tconst existingIndex = characterTalents.findIndex(\n\t\t\t\t\t\tt => t.identifier === identifier\n\t\t\t\t\t);\n\n\t\t\t\t\tif (existingIndex >= 0) {\n\t\t\t\t\t\tconst currentTalent = characterTalents[existingIndex];\n\t\t\t\t\t\tconst rank = currentTalent.rank;\n\n\t\t\t\t\t\tcharacterTalents[existingIndex] = {\n\t\t\t\t\t\t\tidentifier,\n\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\trank: rank + 1,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tcharacterTalents.push({\n\t\t\t\t\t\t\tidentifier,\n\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\trank: 1,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tcharacterItems.push(item);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// These values contain the running values so far, in case they are\n\t\t\t// required by any of the stages\n\t\t\tstage.talentManager.setActorAttributes(\n\t\t\t\tfoundry.utils.duplicate(attributes)\n\t\t\t);\n\n\t\t\tstage.talentManager.setActorSkills(foundry.utils.duplicate(skills));\n\t\t}\n\n\t\tthis.talents = [];\n\t\tfor (const talent of characterTalents) {\n\t\t\tconst itemData = talent.item.toObject();\n\n\t\t\titemData.system.rank.value = talent.rank;\n\t\t\tcharacterItems.push(itemData);\n\n\t\t\tconst dupe = foundry.utils.duplicate(itemData);\n\t\t\tdupe.system.multiRank = talent.item.system.multiRank;\n\t\t\tdupe.uuid = talent.item.uuid;\n\n\t\t\tthis.talents.push(dupe);\n\t\t}\n\n\t\tthis.talents.sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tthis.characterItems = characterItems;\n\n\t\tcharacterDataParts.push({\"system.attributes\": attributes});\n\t\tcharacterDataParts.push({\"system.skills\": skills});\n\n\t\tthis.characterData = conan.utils.deepMerge(...characterDataParts);\n\n\t\tawait this.validate();\n\t}\n\n\tasync validate() {\n\t\tthis.errors = [];\n\n\t\tconst skills = this.characterData[\"system.skills\"];\n\n\t\tlet numHighSkills = 0;\n\t\tfor (const skill in skills) {\n\t\t\tconst value = skills[skill].expertise.value;\n\t\t\tif (value > 3) numHighSkills++;\n\t\t}\n\n\t\tif (numHighSkills > 3) {\n\t\t\tthis.errors.push(\n\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Errors.TooManySkillsTooHigh\")\n\t\t\t);\n\t\t}\n\t}\n\n\tasync _createCharacter(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconsole.log(\"Creating Character\");\n\n\t\tawait this.updateCharacterData();\n\n\t\tawait this.addStockItems();\n\n\t\tif (game.user.isGM) {\n\t\t\tCharacterCreator.createActorFromData(\n\t\t\t\tthis.characterData,\n\t\t\t\tthis.characterItems,\n\t\t\t\tgame.userId\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\tgame.socket.emit(\"system.conan2d20\", {\n\t\t\t\ttype: \"createCharacter\",\n\t\t\t\tpayload: {\n\t\t\t\t\tcharacterData: this.characterData,\n\t\t\t\t\tcharacterItems: this.characterItems,\n\t\t\t\t\tuserId: game.userId,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.close();\n\t}\n\n\tasync _onChangeInput(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst isItem = event.currentTarget.dataset.isItem === \"true\";\n\n\t\t// We only have to do something special if we're handling a multi-choice\n\t\t// datalist\n\t\t//\n\t\tif (event.target.list && isItem) {\n\t\t\tconst options = event.target.list.options;\n\t\t\tconst value = event.target.value;\n\n\t\t\tconst name = event.target.name;\n\n\t\t\tlet uuid = null;\n\t\t\tfor (const option of options) {\n\t\t\t\tif (option.value === value) {\n\t\t\t\t\tuuid = option.getAttribute(\"data-uuid\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (uuid === null) return;\n\n\t\t\tfor (const stage of this.stages) {\n\t\t\t\tawait stage.selectorUuidUpdated({name, uuid});\n\t\t\t}\n\t\t}\n\n\t\treturn this._onSubmit(event);\n\t}\n\n\t/** @inheritdoc */\n\tasync _onSubmit(event) {\n\t\tlet updateData = this._getSubmitData();\n\n\t\tfor (const stage of this.stages) {\n\t\t\tupdateData = await stage.processSubmit(updateData);\n\t\t}\n\n\t\tthis.update();\n\t}\n\n\t/** @inheritdoc */\n\tasync _updateObject(event, formData) {\n\t\tconsole.log(formData);\n\t}\n\n}\n","import ConanProgress from \"../system/ConanProgress.mjs\";\n\nexport default class CharacterUpgrade extends FormApplication {\n\tconstructor(object={}, options={}) {\n\t\tsuper(object, options);\n\t\tthis.actor = object;\n\t}\n\n\n\t/** @inheritdoc */\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"character-upgrade\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/character-upgrade.hbs\",\n\t\t\twidth: 580,\n\t\t\theight: \"auto\",\n\t\t\tresizable: true,\n\t\t\tsubmitOnChange: false,\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tnavSelector: \".sheet-tabs\",\n\t\t\t\t\tcontentSelector: \".sheet-content\",\n\t\t\t\t\tinitial: \"attributes\",\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\n\tget actorData() {\n\t\treturn this.actor.system;\n\t}\n\n\n\tget availableXp() {\n\t\treturn this.actor.system.resources.xp.available;\n\t}\n\n\n\tget title() {\n\t\treturn `${game.i18n.localize(\"CONAN.CharacterUpgrade.title\")} [${this.actor.name}]`;\n\t}\n\n\n\t/** @inheritdoc */\n\tactivateListeners(html) {\n\t\thtml.find(\".purchase-talent-link\").click(event => this._onPurchaseTalent(event));\n\t\thtml.find(\".upgrade-attribute-link\").click(event => this._onUpgradeAttribute(event));\n\t\thtml.find(\".upgrade-skill-link\").click(event => this._onUpgradeSkill(event));\n\n\t\treturn super.activateListeners(html);\n\t}\n\n\n\tasync getData(options) {\n\t\tconst progress = new ConanProgress(8);\n\t\tconst data = super.getData(options);\n\t\tprogress.advance();\n\n\t\tdata.availableTalents = await this.actor.talentManager.getPurchasableTalents();\n\t\tprogress.advance();\n\n\t\tdata.attributes = await this.getAttributeUpgradeData();\n\t\tprogress.advance();\n\t\tdata.skills = await this.getSkillUpgradeData();\n\t\tprogress.advance();\n\t\tdata.skillLabels = CONFIG.CONAN.skills;\n\t\tprogress.advance();\n\t\tdata.availableXp = this.availableXp;\n\t\tprogress.advance();\n\t\tdata.talentsAvailable = data.availableTalents.size > 0;\n\t\tprogress.advance();\n\t\tdata.logEntries = await this._parseLogEntries();\n\t\tprogress.finished();\n\n\t\treturn data;\n\t}\n\n\n\tasync getAttributeUpgradeData() {\n\t\tconst attributes = [];\n\t\tfor (const id in this.actor.system.attributes) {\n\t\t\tconst value = this.actor.system.attributes[id].value;\n\n\t\t\tconst attribute = {\n\t\t\t\tid: id,\n\t\t\t\tlabel: CONFIG.CONAN.attributeLabels[id],\n\t\t\t\tvalue,\n\t\t\t\tnewValue: value + 1,\n\t\t\t\tcost: (value + 1) * 100,\n\t\t\t\tcanUpgrade: true,\n\t\t\t\tatMaximum: false,\n\t\t\t};\n\n\t\t\tif (attribute.cost > this.availableXp) attribute.canUpgrade = false;\n\n\t\t\tif (value >= 14) {\n\t\t\t\tattribute.canUpgrade = false;\n\t\t\t\tattribute.atMaximum = true;\n\t\t\t}\n\n\t\t\tattributes.push(attribute);\n\t\t}\n\n\t\tattributes.sort((a, b) => a.label.localeCompare(b.label));\n\n\t\treturn attributes;\n\t}\n\n\n\tasync getSkillUpgradeData() {\n\t\tconst skills = [];\n\t\tfor (const id in this.actor.system.skills) {\n\t\t\tconst skill = foundry.utils.duplicate(this.actor.system.skills[id]);\n\n\t\t\tskill.id = id;\n\t\t\tskill.label = CONFIG.CONAN.skills[id];\n\n\t\t\tfor (const valueType of [\"expertise\", \"focus\"]) {\n\t\t\t\tconst value = skill[valueType].value;\n\t\t\t\tconst cost = (value + 1) * 200;\n\n\t\t\t\tskill[valueType].newValue = value + 1;\n\t\t\t\tskill[valueType].cost = cost;\n\t\t\t\tskill[valueType].canUpgrade = value < 5 && cost <= this.availableXp;\n\t\t\t\tskill[valueType].atMaximum = value === 5;\n\t\t\t}\n\n\t\t\tskills.push(skill);\n\t\t}\n\n\t\tskills.sort((a, b) => a.label.localeCompare(b.label));\n\n\t\treturn skills;\n\t}\n\n\n\tasync _confirmXpPurchase(message, callback) {\n\t\tnew Dialog({\n\t\t\ttitle: `${game.i18n.localize(\"CONAN.CharacterUpgrade.ConfirmXpSpend.label\")}`,\n\t\t\tcontent: message,\n\t\t\tbuttons: {\n\t\t\t\tYes: {\n\t\t\t\t\ticon: \"<i class=\\\"fa fa-check\\\"></i>\",\n\t\t\t\t\tlabel: `${game.i18n.localize(\"CONAN.popupAcceptButton\")}`,\n\t\t\t\t\tcallback,\n\t\t\t\t},\n\t\t\t\tCancel: {\n\t\t\t\t\ticon: \"<i class=\\\"fa fa-times\\\"></i>\",\n\t\t\t\t\tlabel: `${game.i18n.localize(\"CONAN.popupDeclineButton\")}`,\n\t\t\t\t},\n\t\t\t},\n\t\t\tdefault: \"Yes\",\n\t\t}).render(true);\n\t}\n\n\n\t_createLogMessage(type, cost, data) {\n\t\tconst date = new Date().toISOString();\n\t\treturn `${date}|${type}|${cost}|${data}`;\n\t}\n\n\n\tasync _onPurchaseTalent(event) {\n\t\tevent.preventDefault();\n\n\t\tconst talentIdentifier = event.currentTarget.dataset.id;\n\t\tconst newRank = event.currentTarget.dataset.rank;\n\n\t\tconst isFortuneTalent = talentIdentifier.startsWith(\"fortune::\");\n\t\tconst isSkillTalent = talentIdentifier.startsWith(\"skill_\");\n\n\t\tconst currentTalent = this.actor.items.filter(\n\t\t\ti => i.type === \"talent\"\n\t\t).find(\n\t\t\tt => t.system.talentIdentifier === talentIdentifier\n\t\t);\n\n\t\tlet talent;\n\t\tif (isFortuneTalent) {\n\t\t\ttalent = (await conan.compendiums.fortuneTalents()).find(\n\t\t\t\tt => t.system.talentIdentifier === talentIdentifier\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\ttalent = (await conan.compendiums.skillTalents()).find(\n\t\t\t\tt => t.system.talentIdentifier === talentIdentifier\n\t\t\t);\n\t\t}\n\n\t\tconst talentName = talent.system.multiRank\n\t\t\t? `${talent.name} (Rank ${newRank})`\n\t\t\t: talent.name;\n\n\t\tconst actorSkill = isSkillTalent\n\t\t\t? this.actor.system.skills[talent.system.linkedSkill]\n\t\t\t: \"\";\n\n\t\tconst discount = isSkillTalent\n\t\t\t? Number(actorSkill.focus.value) * 25\n\t\t\t: 0;\n\n\t\tconst cost = Number(talent.system.cost) - discount;\n\n\t\tif (cost <= this.availableXp) {\n\t\t\tconst newSpent = this.actor.system.resources.xp.spent + cost;\n\n\t\t\tconst updateData = {\n\t\t\t\t\"system.resources.xp.spent\": newSpent,\n\t\t\t};\n\n\t\t\tconst message = game.i18n.format(\n\t\t\t\t\"CONAN.CharacterUpgrade.ConfirmXpSpend.talent\",\n\t\t\t\t{\n\t\t\t\t\tcost,\n\t\t\t\t\tname: talentName,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst me = this;\n\n\t\t\treturn this._confirmXpPurchase(`<p>${message}</p>`, async () => {\n\t\t\t\tlet logMessage;\n\n\t\t\t\tif (currentTalent) {\n\t\t\t\t\tawait me.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_id: currentTalent._id,\n\t\t\t\t\t\t\t\"system.rank.value\": Number(newRank),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\n\t\t\t\t\tlogMessage = this._createLogMessage(\n\t\t\t\t\t\t\"talentRank\",\n\t\t\t\t\t\tcost,\n\t\t\t\t\t\t`${currentTalent.link}|${newRank - 1}|${newRank}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst newTalent = (await fromUuid(talent.uuid)).toObject();\n\n\t\t\t\t\tnewTalent[\"system.rank.value\"] = Number(newRank);\n\n\t\t\t\t\tconst [newTalentItem] =\n\t\t\t\t\t\tawait me.actor.createEmbeddedDocuments(\"Item\", [newTalent]);\n\n\t\t\t\t\tlogMessage = this._createLogMessage(\n\t\t\t\t\t\t\"talent\",\n\t\t\t\t\t\tcost,\n\t\t\t\t\t\tnewTalentItem.link\n\t\t\t\t\t);\n\t\t\t\t}\n\n\n\t\t\t\tawait me._updateActor(updateData, logMessage);\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.warn(game.i18n.localize(\"CONAN.CharacterUpgrade.Error.NotEnoughExperience\"));\n\t\t}\n\t}\n\n\n\tasync _onUpgradeAttribute(event) {\n\t\tevent.preventDefault();\n\n\t\tconst attribute = event.currentTarget.dataset.id;\n\t\tconst newValue = event.currentTarget.dataset.value;\n\n\t\tconst cost = newValue * 100;\n\n\t\tif (cost <= this.availableXp) {\n\t\t\tconst newSpent = this.actor.system.resources.xp.spent + cost;\n\n\t\t\tconst updateData = {\n\t\t\t\t\"system.resources.xp.spent\": newSpent,\n\t\t\t};\n\n\t\t\tupdateData[`system.attributes.${attribute}.value`] = Number(newValue);\n\n\t\t\tconst attributeName = CONFIG.CONAN.attributeLabels[attribute];\n\t\t\tconst message = game.i18n.format(\n\t\t\t\t\"CONAN.CharacterUpgrade.ConfirmXpSpend.attribute\",\n\t\t\t\t{\n\t\t\t\t\tcost,\n\t\t\t\t\tname: attributeName,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst me = this;\n\n\t\t\treturn this._confirmXpPurchase(`<p>${message}</p>`, async () => {\n\t\t\t\tconst logMessage = this._createLogMessage(\n\t\t\t\t\t\"attribute\",\n\t\t\t\t\tcost,\n\t\t\t\t\t`${attributeName}|${newValue - 1}|${newValue}`\n\t\t\t\t);\n\n\t\t\t\tawait me._updateActor(updateData, logMessage);\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.warn(game.i18n.localize(\"CONAN.CharacterUpgrade.Error.NotEnoughExperience\"));\n\t\t}\n\t}\n\n\n\tasync _updateActor(updateData, logMessage) {\n\t\tconst logMessages = this.actorData?.resources?.xp?.log ?? [];\n\t\tlogMessages.push(logMessage);\n\n\t\tupdateData[\"system.resources.xp.log\"] = logMessages;\n\n\t\tawait this.actor.update(updateData);\n\t}\n\n\n\tasync _onUpgradeSkill(event) {\n\t\tevent.preventDefault();\n\n\t\tconst skill = event.currentTarget.dataset.id;\n\t\tconst newValue = event.currentTarget.dataset.value;\n\t\tconst type = event.currentTarget.dataset.type;\n\n\t\tconst cost = newValue * 200;\n\n\t\tif (cost <= this.availableXp) {\n\t\t\tconst newSpent = this.actor.system.resources.xp.spent + cost;\n\n\t\t\tconst updateData = {\n\t\t\t\t\"system.resources.xp.spent\": newSpent,\n\t\t\t};\n\n\t\t\tupdateData[`system.skills.${skill}.${type}.value`] = Number(newValue);\n\n\t\t\tconst skillName = CONFIG.CONAN.skills[skill];\n\n\t\t\tconst message = game.i18n.format(\n\t\t\t\t`CONAN.CharacterUpgrade.ConfirmXpSpend.${type}`,\n\t\t\t\t{\n\t\t\t\t\tcost,\n\t\t\t\t\tname: skillName,\n\t\t\t\t\tvalue: newValue,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tconst me = this;\n\n\t\t\treturn this._confirmXpPurchase(`<p>${message}</p>`, async () => {\n\t\t\t\tconst logMessage = this._createLogMessage(\n\t\t\t\t\ttype,\n\t\t\t\t\tcost,\n\t\t\t\t\t`${skillName}|${newValue - 1}|${newValue}`\n\t\t\t\t);\n\n\t\t\t\tawait me._updateActor(updateData, logMessage);\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.warn(game.i18n.localize(\"CONAN.CharacterUpgrade.Error.NotEnoughExperience\"));\n\t\t}\n\t}\n\n\n\tasync _parseLogEntries() {\n\t\tconst parsedLogEntries = [];\n\n\t\tlet index = -1;\n\t\tfor (const entry of (this.actorData.resources?.xp?.log ?? [])) {\n\t\t\tindex++;\n\t\t\tconst fields = entry.split(\"|\");\n\n\t\t\tconst date = new Date(fields.shift());\n\t\t\tconst type = fields.shift();\n\t\t\tconst spend = Number(fields.shift());\n\n\t\t\tconst parsedEntry = {\n\t\t\t\tcanDelete: false,\n\t\t\t\tdate,\n\t\t\t\tdateString: date.toLocaleString(),\n\t\t\t\tindex,\n\t\t\t\tspend,\n\t\t\t\ttype,\n\t\t\t};\n\n\t\t\tlet message;\n\t\t\tswitch (parsedEntry.type) {\n\t\t\t\tcase \"talent\":\n\t\t\t\t\tmessage = game.i18n.format(\n\t\t\t\t\t\t\"CONAN.CharacterUpgrade.LogEntry.talent\",\n\t\t\t\t\t\t{ talent: fields.shift() }\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"talentRank\":\n\t\t\t\t\tmessage = game.i18n.format(\n\t\t\t\t\t\t\"CONAN.CharacterUpgrade.LogEntry.talentRank\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttalent: fields.shift(),\n\t\t\t\t\t\t\tfrom: fields.shift(),\n\t\t\t\t\t\t\tto: fields.shift(),\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"attribute\":\n\t\t\t\tcase \"expertise\":\n\t\t\t\tcase \"focus\":\n\t\t\t\t\tmessage = game.i18n.format(\n\t\t\t\t\t\t`CONAN.CharacterUpgrade.LogEntry.IncreaseValue.${parsedEntry.type}`,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: fields.shift(),\n\t\t\t\t\t\t\tfrom: fields.shift(),\n\t\t\t\t\t\t\tto: fields.shift(),\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tparsedEntry.message = await TextEditor.enrichHTML(\n\t\t\t\tmessage,\n\t\t\t\t{\n\t\t\t\t\tasync: true,\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tparsedLogEntries.push(parsedEntry);\n\t\t}\n\n\t\tif (parsedLogEntries.length > 0) {\n\t\t\tparsedLogEntries.sort((a, b) => b.date.getTime() - a.date.getTime());\n\t\t\tparsedLogEntries[0].canDelete = true;\n\t\t}\n\n\t\treturn parsedLogEntries;\n\t}\n\n}\n","export default class CombatDiceRoller extends Application {\n\tconstructor(actor, options={}) {\n\t\tsuper(actor, options);\n\n\t\tthis.actor = null;\n\n\t\tthis.rollData = conan.dice.getDefaultCombatDiceRollOptions();\n\n\t\tif (actor) {\n\t\t\tthis.actor = actor;\n\t\t\tthis.rollData.actorId = this.actor.id;\n\t\t}\n\n\t\tthis.isActorRoll = this.actor ? true : false;\n\n\t\tthis.isNpc = false;\n\t\tthis.isPc = false;\n\n\t\tif (this.isActorRoll) {\n\t\t\tthis.isNpc = this.actor.isNPC;\n\t\t\tthis.isPc = !this.isNpc;\n\t\t}\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"combat-dice-roller\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/combat-dice-roller.hbs\",\n\t\t\twidth: 200,\n\t\t\theight: \"auto\",\n\t\t\tsubmitOnChange: false,\n\t\t});\n\t}\n\n\tget title() {\n\t\tconst title = game.i18n.localize(\"CONAN.CombatDice\");\n\t\tif (this.actor) {\n\t\t\treturn `${title}: ${this.actor.name}`;\n\t\t}\n\t\telse {\n\t\t\treturn title;\n\t\t}\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\t\tconst me = this;\n\n\t\t// Submit button\n\t\thtml.find(\".roll-dice\").click(this._onSubmit.bind(this));\n\n\t\t// Quantity buttons\n\t\thtml.find(\".combat-dice-roller .quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tconst btnUp = spinner.find(\".quantity-up\");\n\t\t\tconst btnDown = spinner.find(\".quantity-down\");\n\t\t\tconst quantityType = input.attr(\"data-quantity-type\");\n\n\t\t\tconst [section, type] = quantityType.split(\".\");\n\n\t\t\tinput.on(\"change\", ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_change_${section}_${type}`](input);\n\t\t\t});\n\n\t\t\tinput.on(\"wheel\", ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tif (ev.originalEvent.deltaY < 0) {\n\t\t\t\t\tme[`_inc_${section}_${type}`](input);\n\t\t\t\t}\n\t\t\t\telse if (ev.originalEvent.deltaY > 0) {\n\t\t\t\t\tme[`_dec_${section}_${type}`](input);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbtnUp.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_inc_${section}_${type}`](input);\n\t\t\t});\n\n\t\t\tbtnDown.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_dec_${section}_${type}`](input);\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getData() {\n\t\tconst data = {\n\t\t\tactorData: foundry.utils.duplicate(this.actor),\n\t\t\tisActorRoll: this.isActorRoll,\n\t\t\tisNpc: this.isNpc,\n\t\t\tisPc: this.isPc,\n\t\t\trollData: this.rollData,\n\t\t};\n\n\t\treturn data;\n\t}\n\n\tasync _dec_base_numDice(input) {\n\t\tlet currentValue = parseInt(input.val());\n\t\tcurrentValue--;\n\n\t\tif (currentValue < 1) currentValue = 1;\n\n\t\tthis.rollData.base.numDice = currentValue;\n\n\t\tinput.val(this.rollData.base.numDice);\n\t}\n\n\tasync _inc_base_numDice(input) {\n\t\tthis.rollData.base.numDice++;\n\n\t\tinput.val(this.rollData.base.numDice);\n\t}\n\n\tasync _onSubmit() {\n\t\tthis._rollDice();\n\t}\n\n\tasync _rollDice() {\n\t\tthis.close();\n\n\t\tthis.rollData.numDice =\n\t\t\tthis.rollData.base.numDice + this.rollData.bonus.attribute;\n\n\t\t// Do the actual dice rolls\n\t\tconst results = await conan.dice.calculateCombatDiceRoll(this.rollData);\n\n\t\tthis._showResults(results);\n\t}\n\n\tasync _showResults(results) {\n\t\tconan.chat.renderCombatDiceRollCard({\n\t\t\tactor: this.actor,\n\t\t\tresults,\n\t\t\trollData: this.rollData,\n\t\t\ttype: \"combatDice\",\n\t\t});\n\t}\n\n\tasync _updateAllFormValues() {\n\t\tconst me = this;\n\n\t\tthis.element.find(\".quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tlet type = input.attr(\"data-quantity-type\");\n\t\t\ttype = type.split(\".\");\n\t\t\tconst dataSection = me.rollData[type[0]] || {};\n\t\t\tinput.val(dataSection[type[1]]);\n\t\t});\n\t}\n}\n","/**\n * Counter Application for 2d20 metacurrencies\n * @type {FormApplication}\n */\nexport default class Counter extends Application {\n\tstatic get defaultOptions() {\n\t\tconst options = super.defaultOptions;\n\t\toptions.id = \"counter\";\n\t\toptions.classes = [SYSTEM_ID];\n\t\toptions.template = \"systems/conan2d20/templates/apps/counter.hbs\";\n\t\toptions.width = \"auto\";\n\t\toptions.height = 300;\n\t\toptions.popOut = false;\n\t\treturn options;\n\t}\n\n\t/* -------------------------------------------- */\n\t/**\n\t * Provide data to the HTML template for rendering\n\t * @type {Object}\n\t */\n\tgetData() {\n\t\tconst data = super.getData();\n\t\tdata.momentum = game.settings.get(SYSTEM_ID, \"momentum\");\n\t\tdata.doom = game.settings.get(SYSTEM_ID, \"doom\");\n\t\tdata.canEdit =\n\t\t\tgame.user.isGM || game.settings.get(SYSTEM_ID, \"playerCounterEdit\");\n\n\t\treturn data;\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\n\t\t// Call setCounter when input is used\n\t\thtml.find(\"input\").change(async ev => {\n\t\t\tconst type = $(ev.currentTarget).parents(\".counter\").attr(\"data-type\");\n\t\t\tawait Counter.setCounter(ev.target.value, type);\n\t\t});\n\n\t\t// Call changeCounter when +/- is used\n\t\thtml.find(\".incr,.decr\").click(async ev => {\n\t\t\tconst type = $(ev.currentTarget).parents(\".counter\").attr(\"data-type\");\n\t\t\tconst multiplier = $(ev.currentTarget).hasClass(\"incr\") ? 1 : -1;\n\t\t\tawait Counter.changeCounter(multiplier, type);\n\t\t});\n\t}\n\n\t// ************************* STATIC FUNCTIONS ***************************\n\n\t/**\n\t * Set the counter of (type) to (value)\n\t * @param value Value to set counter to\n\t * @param type  Type of counter, \"momentum\" or \"doom\"\n\t */\n\tstatic async setCounter(value, type) {\n\t\tCounter.checkCounterUpdate(value, type);\n\t\tvalue = Math.round(value);\n\n\t\tif (!game.user.isGM) {\n\t\t\tgame.socket.emit(\"system.conan2d20\", {\n\t\t\t\ttype: \"setCounter\",\n\t\t\t\tpayload: {value, type},\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (value > 6 && type === \"momentum\") {\n\t\t\tawait game.settings.set(SYSTEM_ID, type, 6);\n\t\t\tconan.counter.render(true);\n\t\t}\n\t\telse if (value < 0) {\n\t\t\tawait game.settings.set(SYSTEM_ID, type, 0);\n\t\t\tconan.counter.render(true);\n\t\t}\n\t\telse {\n\t\t\tawait game.settings.set(SYSTEM_ID, type, value);\n\t\t\tconan.counter.render(true);\n\t\t}\n\n\t\t// Emit socket event for users to rerender their counters\n\t\tgame.socket.emit(\"system.conan2d20\", {type: \"updateCounter\"});\n\t}\n\n\t/**\n\t * Change the counter of (type) by (value)\n\t * @param diff How much to change the counter\n\t * @param type  Type of counter, \"momentum\" or \"doom\"\n\t */\n\tstatic async changeCounter(diff, type) {\n\t\tCounter.checkCounterUpdate(diff, type);\n\t\tlet value = game.settings.get(SYSTEM_ID, type);\n\t\tif (value + diff > 6 && type === \"momentum\") {\n\t\t\tawait Counter.setCounter(6, type);\n\t\t}\n\t\telse if (value + diff < 0) {\n\t\t\tawait Counter.setCounter(0, type);\n\t\t}\n\t\telse {\n\t\t\tvalue += diff;\n\t\t\tawait Counter.setCounter(value, type);\n\t\t}\n\t}\n\n\t// Check user entry. Rerender if error is detected to reset to the correct value\n\tstatic checkCounterUpdate(value, type) {\n\t\tconst updateError = {\n\t\t\tcounter: \"Conan 2D20 | Error updating Counter: Invalid Counter Type\",\n\t\t\tvalue: \"Conan 2D20 | Error updating Counter: Invalid Value Type\",\n\t\t};\n\n\t\tif (type !== \"doom\" && type !== \"momentum\") {\n\t\t\tui.notifications.error(\"Error updating Counter: Invalid Counter Type\");\n\t\t\tconan.counter.render(true);\n\t\t\tthrow updateError.counter;\n\t\t}\n\n\t\tif (Number.isNaN(value)) {\n\t\t\tui.notifications.error(\"Error updating Counter: Invalid Value Type\");\n\t\t\tconan.counter.render(true);\n\t\t\tthrow updateError.value;\n\t\t}\n\t}\n}\n","export default class DamageRoller extends Application {\n\n\tconstructor(actor, options={}) {\n\t\tsuper(actor, options);\n\n\t\tthis.rollData = conan.dice.getDefaultCombatDiceRollOptions();\n\n\t\tthis.actor = null;\n\t\tthis.item = options?.item ? options.item : null;\n\n\t\tthis.attackType = options?.attackType || \"melee\";\n\n\t\tthis.reloads = [];\n\t\tthis.selectedReload = \"\";\n\n\t\tif (actor) {\n\t\t\tthis.actor = actor;\n\t\t\tthis.rollData.actorId = this.actor.id;\n\n\t\t\tthis.reloads = this.actor.getMergedReloads();\n\t\t}\n\n\t\tif (options?.item) {\n\t\t\tthis.item = options.item;\n\n\t\t\tthis.rollData.improvised = this.item.getQuality(\"improvised\")\n\t\t\t\t? true\n\t\t\t\t: false;\n\t\t}\n\n\t\tthis.isImpactDamage = options?.isImpactDamage ?? false;\n\n\t\tif (options?.numDice) {\n\t\t\tthis.rollData.base.numDice = options.numDice;\n\t\t}\n\n\t\tthis.isActorRoll = this.actor ? true : false;\n\n\t\tif (this.item) {\n\t\t\tthis.rollData.base.numDice =\n\t\t\t\tparseInt(this.item.system?.damage?.dice) || 1;\n\n\t\t\tif (this.item.type === \"npcattack\") {\n\t\t\t\tthis.attackType = this.item.system.attackType;\n\t\t\t}\n\t\t\telse if (this.item.type === \"display\") {\n\t\t\t\tthis.attackType = \"threaten\";\n\t\t\t}\n\t\t\telse if (this.item.type === \"weapon\") {\n\t\t\t\tthis.attackType = this.item.system.weaponType;\n\t\t\t}\n\t\t}\n\n\t\tthis.damageTypes = [\n\t\t\t{\n\t\t\t\ttype: \"melee\",\n\t\t\t\tactive: this.attackType === \"melee\" ? true : false,\n\t\t\t\tname: \"Melee\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"ranged\",\n\t\t\t\tactive: this.attackType === \"ranged\" ? true : false,\n\t\t\t\tname: \"Ranged\",\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: \"threaten\",\n\t\t\t\tactive: this.attackType === \"threaten\" ? true : false,\n\t\t\t\tname: \"Threaten\",\n\t\t\t},\n\t\t];\n\n\t\tthis._updateDamageType();\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"damage-roller\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/damage-roller.hbs\",\n\t\t\twidth: 280,\n\t\t\theight: \"auto\",\n\t\t\tsubmitOnChange: false,\n\t\t});\n\t}\n\n\tget title() {\n\t\tconst title = game.i18n.localize(\"CONAN.damageRollerTitle\");\n\t\tif (this.actor) {\n\t\t\treturn `${title}: ${this.actor.name}`;\n\t\t}\n\t\telse {\n\t\t\treturn title;\n\t\t}\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\t\tconst me = this;\n\n\t\t// Reload selector\n\t\thtml\n\t\t\t.find(\".damage-roller select\")\n\t\t\t.on(\"change\", this._onChangeLoad.bind(this));\n\n\t\t// Submit button\n\t\thtml.find(\".roll-dice\").click(this._onSubmit.bind(this));\n\n\t\t// Damage Type buttons\n\t\thtml\n\t\t\t.find(\".damage-roller .damage-type\")\n\t\t\t.on(\"click\", this._onClickTypeButton.bind(this));\n\n\t\t// Quantity buttons\n\t\thtml.find(\".damage-roller .quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tconst btnUp = spinner.find(\".quantity-up\");\n\t\t\tconst btnDown = spinner.find(\".quantity-down\");\n\t\t\tconst quantityType = input.attr(\"data-quantity-type\");\n\n\t\t\tconst [section, type] = quantityType.split(\".\");\n\n\t\t\tinput.on(\"wheel\", ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tif (ev.originalEvent.deltaY < 0) {\n\t\t\t\t\tme[`_inc_${section}_${type}`](input);\n\t\t\t\t}\n\t\t\t\telse if (ev.originalEvent.deltaY > 0) {\n\t\t\t\t\tme[`_dec_${section}_${type}`](input);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbtnUp.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_inc_${section}_${type}`](input);\n\t\t\t});\n\n\t\t\tbtnDown.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_dec_${section}_${type}`](input);\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getData() {\n\t\tconst data = {\n\t\t\tactorData: foundry.utils.duplicate(this.actor),\n\t\t\titemData: foundry.utils.duplicate(this.item),\n\t\t\tdamageTypes: this.damageTypes,\n\t\t\thasPlayerOwner: this.actor?.hasPlayerOwner ?? false,\n\t\t\tisActorRoll: this.isActorRoll,\n\t\t\tisImpactDamage: this.isImpactDamage,\n\t\t\trollData: this.rollData,\n\t\t\treloads: this.reloads,\n\t\t\tdisableReloads: this._disableReloads(),\n\t\t\treloadsAvailable: this.reloads.length > 0,\n\t\t};\n\n\t\treturn data;\n\t}\n\n\tasync _dec_base_numDice(input) {\n\t\tlet currentValue = parseInt(input.val());\n\t\tcurrentValue--;\n\n\t\tif (currentValue < 1) currentValue = 1;\n\n\t\tthis.rollData.base.numDice = currentValue;\n\n\t\tinput.val(this.rollData.base.numDice);\n\t}\n\n\tasync _dec_bonus_other(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.bonus.other--;\n\n\t\tinput.val(this.rollData.bonus.other);\n\t}\n\n\tasync _dec_bonus_reloads(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.bonus.reloads--;\n\n\t\tinput.val(this.rollData.bonus.reloads);\n\t}\n\n\tasync _dec_bonus_talent(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.bonus.talent--;\n\n\t\tinput.val(this.rollData.bonus.talent);\n\t}\n\n\tasync _dec_spends_doom(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.spends.doom--;\n\n\t\tinput.val(this.rollData.spends.doom);\n\t}\n\n\tasync _dec_spends_momentum(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.spends.momentum--;\n\n\t\tinput.val(this.rollData.spends.momentum);\n\t}\n\n\t_disableReloads() {\n\t\treturn this.attackType !== \"ranged\" || this.reloads.length === 0;\n\t}\n\n\tasync _inc_base_numDice(input) {\n\t\tthis.rollData.base.numDice++;\n\n\t\tinput.val(this.rollData.base.numDice);\n\t}\n\n\tasync _inc_bonus_other(input) {\n\t\tthis.rollData.bonus.other++;\n\n\t\tinput.val(this.rollData.bonus.other);\n\t}\n\n\tasync _inc_bonus_reloads(input) {\n\t\tconst reload = this.reloads.find(\n\t\t\telement => element.name === this.selectedReload\n\t\t);\n\n\t\tif (this.rollData.bonus.reloads < reload.uses) {\n\t\t\tthis.rollData.bonus.reloads++;\n\t\t\tinput.val(this.rollData.bonus.reloads);\n\t\t}\n\t}\n\n\tasync _inc_bonus_talent(input) {\n\t\tthis.rollData.bonus.talent++;\n\n\t\tinput.val(this.rollData.bonus.talent);\n\t}\n\n\tasync _inc_spends_doom(input) {\n\t\tlet currentValue = parseInt(input.val());\n\t\tlet numAvailableDoom = 0;\n\n\t\tif (this.actor) {\n\t\t\tnumAvailableDoom = await this.actor.getAvailableDoom();\n\t\t}\n\t\telse {\n\t\t\tnumAvailableDoom = game.settings.get(\"conan2d20\", \"doom\");\n\t\t}\n\n\t\tlet doomAvailable = numAvailableDoom - currentValue;\n\n\t\tif (doomAvailable > 0) {\n\t\t\tthis.rollData.spends.doom++;\n\n\t\t\tinput.val(this.rollData.spends.doom);\n\t\t}\n\t}\n\n\tasync _inc_spends_momentum(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tlet numAvailableMomentum = 0;\n\t\tif (this.actor) {\n\t\t\tnumAvailableMomentum = await this.actor.getAvailableMomentum();\n\t\t}\n\t\telse {\n\t\t\tnumAvailableMomentum = game.settings.get(\"conan2d20\", \"momentum\");\n\t\t}\n\n\t\tconst momentumAvailable = numAvailableMomentum - currentValue;\n\n\t\tif (momentumAvailable > 0) {\n\t\t\tthis.rollData.spends.momentum++;\n\n\t\t\tinput.val(this.rollData.spends.momentum);\n\t\t}\n\t}\n\n\tasync _onChangeLoad(event) {\n\t\tconst selector = $(event.target);\n\t\tconst value = selector.val();\n\n\t\tconst reloadQuantity = this.element.find(\".reload-quantity\");\n\n\t\tif (value !== \"\") {\n\t\t\treloadQuantity.removeClass(\"disable-entry\");\n\t\t}\n\t\telse {\n\t\t\treloadQuantity.addClass(\"disable-entry\");\n\t\t}\n\n\t\tthis._setReloadsQuantity(0);\n\n\t\tthis.selectedReload = value;\n\t}\n\n\tasync _onClickTypeButton(event) {\n\t\tevent.preventDefault();\n\n\t\tconst button = $(event.target);\n\n\t\tconst attackType = button.attr(\"data-damage-type\");\n\n\t\tif (attackType === this.attackType) return;\n\n\t\tthis.attackType = attackType;\n\n\t\tbutton.siblings().removeClass(\"active\");\n\t\tbutton.addClass(\"active\");\n\n\t\tif (this.item) {\n\t\t\tif (attackType === \"ranged\" && this.item.system.weaponType !== \"melee\") {\n\t\t\t\tconst reloadChoice = this.element.find(\".reload-choice\");\n\t\t\t\treloadChoice.removeClass(\"disable-entry\");\n\n\t\t\t\tconst selectedValue = reloadChoice.find(\":selected\").val();\n\n\t\t\t\tif (selectedValue !== \"\") {\n\t\t\t\t\tthis.element.find(\".reload-quantity\").removeClass(\"disable-entry\");\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst reloadQuantity = this.element.find(\".reload-quantity\");\n\t\t\t\treloadQuantity.addClass(\"disable-entry\");\n\n\t\t\t\tthis._setReloadsQuantity(0);\n\n\t\t\t\tthis.element.find(\".reload-choice\").addClass(\"disable-entry\");\n\t\t\t}\n\t\t}\n\n\t\tif (this.actor) {\n\t\t\tthis._updateDamageType();\n\t\t}\n\t}\n\n\tasync _onSubmit() {\n\t\tif (this.item) {\n\t\t\tthis.rollData.itemData = await this.item.getChatData();\n\t\t}\n\t\tthis._rollDice();\n\t}\n\n\tasync _rollDice() {\n\t\tthis.close();\n\n\t\tthis.rollData.numDice = this.rollData.base.numDice\n\t\t\t+ this.rollData.bonus.attribute\n\t\t\t+ this.rollData.bonus.other\n\t\t\t+ this.rollData.bonus.reloads\n\t\t\t+ this.rollData.bonus.talent;\n\n\t\tif (this.actor) {\n\t\t\tthis.actor.spendMomentum(this.rollData.spends.momentum);\n\t\t\tthis.actor.spendDoom(this.rollData.spends.doom);\n\n\t\t\tif (this.rollData.bonus.reloads > 0) {\n\t\t\t\tconst reload = this.reloads.find(\n\t\t\t\t\telement => element.name === this.selectedReload\n\t\t\t\t);\n\n\t\t\t\tthis.actor.spendReloads(reload, this.rollData.bonus.reloads);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tconan.apps.Counter.changeCounter(-`${this.rollData.spends.momentum}`, \"momentum\");\n\t\t\tconan.apps.Counter.changeCounter(-`${this.rollData.spends.doom}`, \"doom\");\n\t\t}\n\n\t\t// Do the actual dice rolls\n\t\tconst results = await conan.dice.calculateCombatDiceRoll(this.rollData);\n\n\t\tif (this.attackType === \"threaten\") {\n\t\t\tresults.location = null;\n\t\t}\n\n\t\tthis._showResults(results);\n\t}\n\n\tasync _setReloadsQuantity(value) {\n\t\tconst reloadValue = this.element\n\t\t\t.find(\".reload-quantity\")\n\t\t\t.find(\"input[type=\\\"number\\\"]\");\n\n\t\treloadValue.val(value);\n\t\tthis.rollData.bonus.reloads = value;\n\t}\n\n\tasync _showResults(results) {\n\t\tconan.chat.renderDamageRollCard({\n\t\t\tactor: this.actor,\n\t\t\tisImpactDamage: this.isImpactDamage,\n\t\t\titem: this.item,\n\t\t\tresults,\n\t\t\trollData: this.rollData,\n\t\t\ttype: \"damage\",\n\t\t});\n\t}\n\n\tasync _updateDamageType() {\n\t\tif (this.actor && this.actor.isNotWatercraft) {\n\t\t\tconst bonuses = this.actor._attackBonuses();\n\t\t\tthis.rollData.bonus.attribute = bonuses[this.attackType];\n\t\t}\n\n\t\tif (this.attackType === \"threaten\") {\n\t\t\tthis.rollData.damage.type = \"mental\";\n\t\t}\n\t\telse {\n\t\t\tthis.rollData.damage.type = \"physical\";\n\t\t}\n\n\t\tconst damageRollText = game.i18n.localize(\"CONAN.damageRollerTitle\");\n\t\tconst attackTypeText = game.i18n.localize(\n\t\t\t`CONAN.attackTypes.${this.attackType}`\n\t\t);\n\n\t\tthis.rollData.title = `${attackTypeText} ${damageRollText}`;\n\t}\n}\n","// A form used to spend or bank personal momentum generated by skill tests.\n//\nexport default class MomentumBanker extends FormApplication {\n\tconstructor(object, options={}) {\n\t\tsuper(object, options);\n\n\t\tthis.actor = object;\n\t\tthis.toBank = this.actor.system.momentum;\n\n\t\tthis.bankType = options.bankType\n\t\t\t? options.bankType\n\t\t\t: this.actor.type === \"character\" ? \"momentum\" : \"doom\";\n\n\t\tthis.toSpend = 0;\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tid: \"momentum-banker\",\n\t\t\tclasses: [\"conan2d20\", \"momentum-banker\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/momentum-banker.hbs\",\n\t\t\twidth: 400,\n\t\t\theight: \"auto\",\n\t\t\tsubmitOnChange: false,\n\t\t});\n\t}\n\n\tget title() {\n\t\treturn `${game.i18n.localize(\"CONAN.rollMomentumSpendTitle\")}`;\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\n\t\thtml.find(\"#momentumSpend\").on(\"input\", event => {\n\t\t\tthis.toSpend = parseInt(event.target.value);\n\t\t\tthis.toBank = this.actor.system.momentum - this.toSpend;\n\t\t\tconst buttonText = `Spend: ${this.toSpend}, Bank: ${this.toBank}`;\n\t\t\thtml.find(\"#spendBankButton\").html(buttonText);\n\t\t});\n\n\t\thtml.find(\"#spendBankButton\").click(() => {\n\t\t\tif (this.bankType === \"momentum\") {\n\t\t\t\tconan.apps.Counter.changeCounter(this.toBank, \"momentum\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconan.apps.Counter.changeCounter(this.toBank, \"doom\");\n\t\t\t}\n\n\t\t\tthis.momentumChatMessage(this.bankType);\n\n\t\t\t// Now reset the unbanked momentum to zero as it has been spent\n\t\t\tthis.actor.update({\"system.momentum\": 0});\n\n\t\t\tthis.close();\n\t\t});\n\t}\n\n\tgetData() {\n\t\tconst data = {\n\t\t\tpersonalMomentum: this.actor.system.momentum,\n\t\t};\n\n\t\treturn data;\n\t}\n\n\tmomentumChatMessage(poolType) {\n\t\tlet html = `<h2>${game.i18n.localize(\n\t\t\t\"CONAN.rollMomentumBanked\"\n\t\t)}</h2><div>`;\n\n\t\thtml += `<p>${game.i18n.format(\"CONAN.rollMomentumBankedChatText\", {\n\t\t\tcharacter: `<b>${this.actor.name}</b>`,\n\t\t\tspent: `<b>${this.toSpend}</b>`,\n\t\t\tbanked: `<b>${this.toBank}</b>`,\n\t\t\tpoolType: `<b>${poolType}</b>`,\n\t\t})}</p></div>`;\n\n\t\tconst chatData = {\n\t\t\tuser: game.user.id,\n\t\t\tcontent: html,\n\t\t};\n\n\t\tChatMessage.create(chatData);\n\t}\n}\n","export default class SkillRoller extends Application {\n\tconstructor(actor, options={}) {\n\t\tsuper(actor, options);\n\n\t\tthis.actor = null;\n\t\tthis.showBonuses = false;\n\n\t\t// default data\n\t\tthis.rollData = {\n\t\t\tactorId: null,\n\t\t\tassists: {\n\t\t\t\tcomplication: 20,\n\t\t\t\tfocus: 0,\n\t\t\t\tnumDice: 0,\n\t\t\t\ttn: 7,\n\t\t\t},\n\t\t\tbankType: null,\n\t\t\tbonus: {\n\t\t\t\tdice: 0,\n\t\t\t\tmomentum: 0,\n\t\t\t\tsuccesses: 0,\n\t\t\t\tinhuman: 0,\n\t\t\t},\n\t\t\tdifficulty: {\n\t\t\t\tassistDisplay: \"&nbsp;\",\n\t\t\t\tbase: (options.difficulty ?? 1),\n\t\t\t\tdisplay: \"&nbsp;\",\n\t\t\t\tincrease: 0,\n\t\t\t},\n\t\t\tskill: {\n\t\t\t\tcomplication: 20,\n\t\t\t\texpertise: 0,\n\t\t\t\tfocus: 0,\n\t\t\t\ttn: 7,\n\t\t\t},\n\t\t\tspends: {\n\t\t\t\tdoom: 0,\n\t\t\t\tfortune: 0,\n\t\t\t\tmomentum: 0,\n\t\t\t},\n\t\t\tfixedResults: [],\n\t\t\tignoreDifficultyIncrease: false,\n\t\t\tisAssist: false,\n\t\t\tisReroll: false,\n\t\t\titem: null,\n\t\t\tnumDice: CONFIG.CONAN.BASE_2D20_DICE,\n\t\t\ttitle: \"Skill Test\",\n\t\t};\n\n\t\tif (actor) {\n\t\t\tthis.actor = actor;\n\t\t\tthis.rollData.actorId = this.actor.id;\n\n\t\t\tthis.attribute = options.attribute;\n\t\t\tthis.expertise = options.expertise;\n\t\t\tthis.skill = options.skill;\n\n\t\t\tthis.rollData.bonus.inhuman =\n\t\t\t\tthis.actor.system.attributes[options.attribute]?.inhuman ?? 0;\n\n\t\t\tthis.rollData.item = options.item ?? null;\n\t\t\tthis.rollData.bonus.dice = options.bonusDice ?? 0;\n\t\t}\n\n\t\tthis.isActorRoll = this.actor ? true : false;\n\n\t\tthis.isNpc = false;\n\t\tthis.playerOwnedActor = false;\n\t\tthis.playerOwnedNpc = false;\n\t\tthis.rollData.bankType = \"doom\";\n\n\t\tif (this.isActorRoll) {\n\t\t\tthis.isNpc = this.actor.isNPC;\n\t\t\tthis.playerOwnedActor = this.actor.hasPlayerOwner;\n\t\t\tthis.playerOwnedNpc = this.isNpc && this.playerOwnedActor;\n\t\t\tthis.rollData.bankType = this.playerOwnedActor ? \"momentum\" : \"doom\";\n\t\t}\n\n\t\tthis.difficulties = [\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.0\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.1\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.2\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.3\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.4\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.5\"),\n\t\t\t},\n\t\t];\n\n\t\tthis.difficulties[this.rollData.difficulty.base].active = true;\n\n\t\tthis.maxDice = CONFIG.CONAN.MAX_2D20_DICE;\n\t\tlet numDice = (this.baseDice = CONFIG.CONAN.BASE_2D20_DICE);\n\t\tif (this.isNpc && this.actor.system.type === \"minion\") {\n\t\t\t// Minions only roll one die and you can only purcase up to 3 dice,\n\t\t\t// so the maximum a minion can roll is 4 dice.\n\t\t\t//\n\t\t\tnumDice = this.rollData.numDice = this.baseDice = 1;\n\t\t\tthis.maxDice = CONFIG.CONAN.MAX_2D20_DICE - 1;\n\t\t}\n\n\t\tnumDice += this.rollData.bonus.dice;\n\t\tthis.rollData.numDice = numDice;\n\n\t\tthis.dice = [];\n\n\t\tfor (let i = 0; i < CONFIG.CONAN.MAX_2D20_DICE; i++) {\n\t\t\tthis.dice.push({active: i < numDice});\n\t\t}\n\n\t\tthis.rollData.isAssist =\n\t\t\tnumDice === CONFIG.ASSIST_2D20_DICE\n\t\t\t\t&& this.baseDice !== CONFIG.ASSIST_2D20_DICE;\n\t}\n\n\tget assistActor() {\n\t\tlet assistActor = null;\n\n\t\tif (this.isNpc && this.actor.system.isMob) {\n\t\t\tconst mobData = this.actor.system.grouping;\n\n\t\t\tconst numMinions = mobData.members.length || 0;\n\t\t\tthis.rollData.assists.numDice = numMinions;\n\n\t\t\tif (mobData.baseActorId) {\n\t\t\t\tassistActor = game.actors.get(mobData.baseActorId);\n\t\t\t}\n\t\t}\n\n\t\treturn assistActor;\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"skill-roller\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/skill-roller.hbs\",\n\t\t\twidth: 320,\n\t\t\theight: \"auto\",\n\t\t\tsubmitOnChange: false,\n\t\t});\n\t}\n\n\tget title() {\n\t\tconst title = game.i18n.localize(\"CONAN.skillRollerTitle\");\n\t\tif (this.actor) {\n\t\t\treturn `${title}: ${this.actor.name}`;\n\t\t}\n\t\telse {\n\t\t\treturn title;\n\t\t}\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\t\tconst me = this;\n\n\t\thtml.find(\".toggle-show-bonuses\").click(event => {\n\t\t\tthis.showBonuses = !this.showBonuses;\n\t\t\tthis.render();\n\t\t});\n\n\t\t// Difficulty setting buttons\n\t\thtml\n\t\t\t.find(\".skill-roller .difficulty\")\n\t\t\t.on(\"click\", this._onClickDifficultyButton.bind(this));\n\n\t\t// Dice icons\n\t\thtml\n\t\t\t.find(\".skill-roller .dice\")\n\t\t\t.on(\"click\", this._onClickDiceIcon.bind(this));\n\n\t\t// Quantity buttons\n\t\thtml.find(\".skill-roller .quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tconst btnUp = spinner.find(\".quantity-up\");\n\t\t\tconst btnDown = spinner.find(\".quantity-down\");\n\t\t\tconst quantityType = input.attr(\"data-quantity-type\");\n\n\t\t\tconst [section, type] = quantityType.split(\".\");\n\n\t\t\tinput.on(\"wheel\", ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tif (ev.originalEvent.deltaY < 0) {\n\t\t\t\t\tme[`_inc_${section}_${type}`](input);\n\t\t\t\t}\n\t\t\t\telse if (ev.originalEvent.deltaY > 0) {\n\t\t\t\t\tme[`_dec_${section}_${type}`](input);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbtnUp.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_inc_${section}_${type}`](input);\n\t\t\t});\n\n\t\t\tbtnDown.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_dec_${section}_${type}`](input);\n\t\t\t});\n\t\t});\n\n\t\t// Attribute, Skill and Experise selectors\n\t\thtml.find(\".skill-roller select\").on(\"change\", function() {\n\t\t\tconst selector = $(this);\n\t\t\tconst value = selector.val();\n\t\t\tconst selectorName = selector.attr(\"name\");\n\n\t\t\tswitch (selectorName) {\n\t\t\t\tcase \"attribute\":\n\t\t\t\t\tme._updateAttribute(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"expertise\":\n\t\t\t\t\tme._updateExpertise(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"skill\":\n\t\t\t\t\tme._updateSkill(value);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.error(`Unknown selector ${selectorName}`);\n\t\t\t}\n\t\t});\n\n\t\t// Submit button\n\t\thtml.find(\".roll-skill-check\").click(this._rollSkillCheck.bind(this));\n\n\t\thtml.find(\"#isPlayerOwned\").on(\"change\", function() {\n\t\t\tme.playerOwnedActor = !me.playerOwnedActor;\n\t\t\tme.playerOwnedNpc = me.isNpc && me.playerOwnedActor;\n\t\t\tme.rollData.bankType = me.playerOwnedActor ? \"momentum\" : \"doom\";\n\n\t\t\tme.rollData.bonus = {\n\t\t\t\tdice: 0,\n\t\t\t\tmomentum: 0,\n\t\t\t\tsuccesses: 0,\n\t\t\t\tinhuman: 0,\n\t\t\t};\n\t\t\tme.rollData.spends = {\n\t\t\t\tdoom: 0,\n\t\t\t\tfortune: 0,\n\t\t\t\tmomentum: 0,\n\t\t\t};\n\t\t\tme.rollData.fixedResults = [];\n\t\t\tme.rollData.numDice = me.baseDice;\n\n\t\t\tme.render(true);\n\t\t});\n\n\t\thtml.find(\"#ignoreDifficultyIncrease\").on(\"change\", function() {\n\t\t\tme.rollData.ignoreDifficultyIncrease = !me.rollData.ignoreDifficultyIncrease;\n\n\t\t\tme.render(true);\n\t\t});\n\t}\n\n\tasync getData() {\n\t\tthis.attribute =\n\t\t\tthis.attribute !== undefined\n\t\t\t\t? this.attribute\n\t\t\t\t: this._sortedAttributes()[0].key;\n\n\t\tthis.expertise =\n\t\t\tthis.expertise !== undefined\n\t\t\t\t? this.expertise\n\t\t\t\t: this._sortedExpertiseFields()[0].key;\n\n\t\tthis.skill =\n\t\t\tthis.skill !== undefined ? this.skill : this._sortedSkills()[0].key;\n\n\t\tawait this._updateDifficulties();\n\t\tawait this._updateTestDetails();\n\n\t\tconst data = {\n\t\t\tactorData: foundry.utils.duplicate(this.actor),\n\t\t\tattributes: this._sortedAttributes(),\n\t\t\tdice: this.dice,\n\t\t\tdifficulties: this.difficulties,\n\t\t\tdifficultyIncreased: false,\n\t\t\texpertiseFields: this._sortedExpertiseFields(),\n\t\t\tignoreDifficultyIncrease: this.rollData.ignoreDifficultyIncrease,\n\t\t\tisActorRoll: this.isActorRoll,\n\t\t\tisGM: game.user.isGM,\n\t\t\tisNpc: this.isNpc,\n\t\t\tisPlayerOwned: this.playerOwnedActor,\n\t\t\tisPlayerOwnedNpc: this.playerOwnedNpc,\n\t\t\trollData: this.rollData,\n\t\t\tselectedAttribute: this.attribute,\n\t\t\tselectedExpertise: this.expertise,\n\t\t\tselectedSkill: this.skill,\n\t\t\tshowBonuses: this.showBonuses,\n\t\t\tskills: this._sortedSkills(),\n\t\t};\n\n\t\tif (this.isActorRoll) {\n\t\t\tdata.difficultyIncreased = this.rollData.ignoreDifficultyIncrease\n\t\t\t\t? 0\n\t\t\t\t: this.actor.getDifficultyIncrease(this.attribute) > 0;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/* ----------------------------------------------------------------------- */\n\n\tasync _adjustBoughtDice(numDice) {\n\t\t// We special case things if a single dice is selected, as this is an\n\t\t// assist roll\n\t\t//\n\t\tif (this.isAssist) {\n\t\t\t// Assist roll.  No additional dice can be purchased for those, and no\n\t\t\t// bonuses apply\n\t\t\t//\n\t\t\tthis.rollData.bonus.dice = 0;\n\t\t\tthis.rollData.bonus.momentum = 0;\n\t\t\tthis.rollData.bonus.successes = 0;\n\t\t\tthis.rollData.spends.doom = 0;\n\t\t\tthis.rollData.spends.fortune = 0;\n\t\t\tthis.rollData.spends.momentum = 0;\n\n\t\t\tthis.rollData.numDice = numDice;\n\n\t\t\tawait this._updateAllFormValues();\n\n\t\t\treturn true;\n\t\t}\n\n\t\t// fixedDice is the base 2d20 dice, plus any fortune and bonus d20s\n\t\t// already entered.\n\t\t//\n\t\tconst fixedDice =\n\t\t\tthis.baseDice + this.rollData.bonus.dice + this.rollData.spends.fortune;\n\n\t\t// If the requested amount of dice is below this then we can't adjust the\n\t\t// dice until either the number of bonus d20s and/or number of fortune\n\t\t// spent has been reduced.\n\t\t//\n\t\tif (numDice < fixedDice) return false;\n\n\t\tlet availableToSpend = 0;\n\t\tif (this.playerOwnedActor) {\n\t\t\tavailableToSpend = await this.actor.getAvailableMomentum();\n\t\t}\n\t\telse {\n\t\t\tavailableToSpend = await this.actor.getAvailableDoom();\n\t\t\tavailableToSpend -= this.rollData.spends.fortune * 3;\n\t\t}\n\n\t\tlet newDoom = 0;\n\t\tlet newMomentum = 0;\n\n\t\t// make sure we don\"t allocate more dice than we have available spends for\n\t\tnumDice = numDice > this.maxDice ? this.maxDice : numDice;\n\n\t\tlet diceToAllocate = numDice - fixedDice;\n\t\tlet allocatedDice = 0;\n\n\t\twhile (diceToAllocate > 0) {\n\t\t\tif (this.playerOwnedActor && availableToSpend > 0) {\n\t\t\t\tavailableToSpend--;\n\t\t\t\tnewMomentum++;\n\t\t\t\tallocatedDice++;\n\t\t\t}\n\t\t\telse if (this.isNpc && availableToSpend > 0) {\n\t\t\t\tavailableToSpend--;\n\t\t\t\tnewDoom++;\n\t\t\t\tallocatedDice++;\n\t\t\t}\n\t\t\telse if (this.playerOwnedActor) {\n\t\t\t\tnewDoom++;\n\t\t\t\tallocatedDice++;\n\t\t\t}\n\n\t\t\tdiceToAllocate--;\n\t\t}\n\n\t\tthis.rollData.numDice = fixedDice + allocatedDice;\n\n\t\tthis.rollData.spends.doom = newDoom;\n\t\tthis.rollData.spends.momentum = newMomentum;\n\n\t\tthis._updateAllFormValues();\n\n\t\treturn true;\n\t}\n\n\tasync _checkFortuneSpends() {\n\t\tlet fortuneSuccesses = this.rollData.spends.fortune;\n\n\t\tconst difficulty =\n\t\t\tthis.rollData.difficulty.base + this.rollData.difficulty.increase;\n\n\t\tif (this.rollData.skill.focus > 0) {\n\t\t\tfortuneSuccesses *= 2;\n\t\t}\n\n\t\treturn fortuneSuccesses >= difficulty;\n\t}\n\n\tasync _dec_bonus_dice(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.bonus.dice--;\n\t\tthis.rollData.numDice--;\n\n\t\tinput.val(this.rollData.bonus.dice);\n\n\t\tawait this._updateDiceIcons();\n\t}\n\n\tasync _dec_bonus_momentum(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.bonus.momentum--;\n\t\tthis._updateAllFormValues();\n\t}\n\n\tasync _dec_bonus_inhuman(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.bonus.inhuman--;\n\t\tthis._updateAllFormValues();\n\t}\n\n\tasync _dec_bonus_successes(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.bonus.successes--;\n\t\tthis._updateAllFormValues();\n\t}\n\n\tasync _dec_skill_complication(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.skill.complication--;\n\t\tthis._updateAllFormValues();\n\t\tthis._updateTestDetails();\n\t}\n\n\tasync _dec_skill_focus(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.skill.focus--;\n\t\tthis._updateAllFormValues();\n\t\tthis._updateTestDetails();\n\t}\n\n\tasync _dec_skill_tn(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.skill.tn--;\n\t\tthis._updateAllFormValues();\n\t\tthis._updateTestDetails();\n\t}\n\n\tasync _dec_spends_doom(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.spends.doom--;\n\t\tthis.rollData.numDice--;\n\n\t\tinput.val(this.rollData.spends.doom);\n\n\t\tawait this._updateDiceIcons();\n\t}\n\n\tasync _dec_spends_fortune(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.spends.fortune--;\n\t\tthis.rollData.numDice--;\n\n\t\tinput.val(this.rollData.spends.fortune);\n\n\t\tawait this._updateDiceIcons();\n\t}\n\n\tasync _dec_spends_momentum(input) {\n\t\tlet currentValue = parseInt(input.val());\n\n\t\tif (currentValue === 0) return;\n\n\t\tthis.rollData.spends.momentum--;\n\t\tthis.rollData.numDice--;\n\n\t\tinput.val(this.rollData.spends.momentum);\n\n\t\tawait this._updateDiceIcons();\n\t}\n\n\t_getTestDifficulty() {\n\t\tif (this.actor) {\n\t\t\t[\n\t\t\t\tthis.rollData.skill.tn,\n\t\t\t\tthis.rollData.skill.expertise,\n\t\t\t\tthis.rollData.skill.focus,\n\t\t\t] = this.actor.getSkillTargetNumberAndFocus(\n\t\t\t\tthis.attribute,\n\t\t\t\tthis.skill,\n\t\t\t\tthis.expertise\n\t\t\t);\n\n\t\t\tif (this.rollData.ignoreDifficultyIncrease) {\n\t\t\t\tthis.rollData.difficulty.increase = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.rollData.difficulty.increase =\n\t\t\t\t\tthis.actor.getDifficultyIncrease(\n\t\t\t\t\t\tthis.attribute\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.rollData.skill.expertise = 0;\n\t\t\tthis.rollData.skill.focus = this.element.find(\"#skill-focus\").val() || 0;\n\t\t\tthis.rollData.skill.tn = this.element.find(\"#skill-tn\").val() || 7;\n\t\t}\n\n\t\tlet difficultyCalc =\n\t\t\tthis.rollData.difficulty.base + this.rollData.difficulty.increase;\n\n\t\tdifficultyCalc = difficultyCalc > 5 ? 5 : difficultyCalc;\n\n\t\tconst difficulty = game.i18n.localize(\n\t\t\t`CONAN.skillRollDifficultyLevels.${difficultyCalc}`\n\t\t);\n\n\t\tconst labelTN = game.i18n.localize(\"CONAN.SkillRoll.TN.label\");\n\t\tconst labelFocus = game.i18n.localize(\"CONAN.SkillRoll.Focus.label\");\n\t\tconst labelCompShort = game.i18n.localize(\"CONAN.SkillRoll.Complication.Short.label\");\n\n\t\tlet testDetails = `${labelTN} ${this.rollData.skill.tn}, `;\n\t\ttestDetails += `${labelFocus} ${this.rollData.skill.focus}, `;\n\t\ttestDetails += `${labelCompShort} ${this.rollData.skill.complication}`;\n\n\t\tif (this.rollData.item && this.rollData.item.type === \"weapon\") {\n\t\t\tconst item = this.rollData.item;\n\n\t\t\tlet rangeLabel = \"\";\n\t\t\tlet rangeValue = item.system.range;\n\n\t\t\tif (item.system.weaponType === \"melee\") {\n\t\t\t\trangeLabel = game.i18n.localize(\"CONAN.Item.Weapon.Reach.label\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\trangeLabel = game.i18n.localize(\"CONAN.Item.Weapon.Range.label\");\n\t\t\t\trangeValue = CONFIG.CONAN.weaponRanges[rangeValue] ?? \"\";\n\t\t\t}\n\n\t\t\ttestDetails += `, ${rangeLabel} ${rangeValue}`;\n\t\t}\n\n\t\tif (this.isAssist) {\n\t\t\tconst assistLabel = game.i18n.localize(\"CONAN.Assist\");\n\t\t\ttestDetails = `${assistLabel}, ${testDetails}`;\n\t\t}\n\t\telse {\n\t\t\ttestDetails = `${difficulty}, ${testDetails}`;\n\t\t}\n\n\t\tthis.rollData.difficulty.display = testDetails;\n\n\t\tif (this.assistActor) {\n\t\t\tconst labelExpertise = game.i18n.localize(\"CONAN.SkillRoll.Expertise.label\");\n\n\t\t\tlet assistDetails = game.i18n.localize(\"CONAN.Assist\");\n\t\t\tassistDetails += ` ${labelTN}  ${this.rollData.assists.tn}, `;\n\t\t\tassistDetails += `${labelExpertise} ${this.rollData.assists.focus}, `;\n\t\t\tassistDetails += `${labelCompShort} ${this.rollData.assists.complication}`;\n\t\t\tthis.rollData.difficulty.assistDisplay = assistDetails;\n\t\t}\n\n\t\treturn testDetails;\n\t}\n\n\tasync _inc_bonus_dice(input) {\n\t\tif (this.rollData.numDice < this.maxDice) {\n\t\t\tthis.rollData.bonus.dice++;\n\t\t\tthis.rollData.numDice++;\n\n\t\t\tinput.val(this.rollData.bonus.dice);\n\n\t\t\tawait this._updateDiceIcons();\n\t\t}\n\t}\n\n\tasync _inc_bonus_inhuman() {\n\t\tthis.rollData.bonus.inhuman++;\n\t\tthis._updateAllFormValues();\n\t}\n\n\tasync _inc_bonus_momentum() {\n\t\tthis.rollData.bonus.momentum++;\n\t\tthis._updateAllFormValues();\n\t}\n\n\tasync _inc_bonus_successes() {\n\t\tthis.rollData.bonus.successes++;\n\t\tthis._updateAllFormValues();\n\t}\n\n\tasync _inc_skill_complication() {\n\t\tif (this.rollData.skill.complication < 20) {\n\t\t\tthis.rollData.skill.complication++;\n\t\t\tthis._updateAllFormValues();\n\t\t\tthis._updateTestDetails();\n\t\t}\n\t}\n\n\tasync _inc_skill_focus() {\n\t\tif (this.rollData.skill.focus < 5) {\n\t\t\tthis.rollData.skill.focus++;\n\t\t\tthis._updateAllFormValues();\n\t\t\tthis._updateTestDetails();\n\t\t}\n\t}\n\n\tasync _inc_skill_tn() {\n\t\tif (this.rollData.skill.tn < 20) {\n\t\t\tthis.rollData.skill.tn++;\n\t\t\tthis._updateAllFormValues();\n\t\t\tthis._updateTestDetails();\n\t\t}\n\t}\n\n\tasync _inc_spends_doom(input) {\n\t\tlet currentValue = parseInt(input.val());\n\t\tlet numAvailableDoom = await this.actor.getAvailableDoom();\n\n\t\tlet doomAvailable = true; // default for non-NPCs\n\n\t\tif (this.isNpc) {\n\t\t\t// Fortune used by NPCs costs 3 Doom per Fortune\n\t\t\tnumAvailableDoom -= this.rollData.spends.fortune * 3;\n\t\t\tdoomAvailable = currentValue < numAvailableDoom;\n\t\t}\n\n\t\tif (doomAvailable && this.rollData.numDice < this.maxDice) {\n\t\t\tthis.rollData.spends.doom++;\n\t\t\tthis.rollData.numDice++;\n\n\t\t\tinput.val(this.rollData.spends.doom);\n\n\t\t\tawait this._updateDiceIcons();\n\t\t}\n\t}\n\n\tasync _inc_spends_fortune(input) {\n\t\tlet currentValue = parseInt(input.val());\n\t\tconst numAvailableFortune = await this.actor.getAvailableFortune();\n\n\t\tconst fortuneAvailable = numAvailableFortune - currentValue;\n\n\t\tif (fortuneAvailable > 0 && this.rollData.numDice < this.maxDice) {\n\t\t\tthis.rollData.spends.fortune++;\n\t\t\tthis.rollData.numDice++;\n\n\t\t\tinput.val(this.rollData.spends.fortune);\n\n\t\t\tawait this._updateDiceIcons();\n\t\t}\n\t}\n\n\tasync _inc_spends_momentum(input) {\n\t\tlet currentValue = parseInt(input.val());\n\t\tlet numAvailableMomentum = await this.actor.getAvailableMomentum();\n\n\t\tconst momentumAvailable = numAvailableMomentum - currentValue;\n\n\t\tif (momentumAvailable > 0 && this.rollData.numDice < this.maxDice) {\n\t\t\tthis.rollData.spends.momentum++;\n\t\t\tthis.rollData.numDice++;\n\n\t\t\tinput.val(this.rollData.spends.momentum);\n\n\t\t\tawait this._updateDiceIcons();\n\t\t}\n\t}\n\n\tasync _onClickDiceIcon(event) {\n\t\tevent.preventDefault();\n\n\t\tconst diceIcon = $(event.currentTarget);\n\n\t\tconst numDice = parseInt(diceIcon.attr(\"data-dice-number\")) + 1;\n\t\tconst prevNumDice = this.rollData.numDice;\n\n\t\tif (numDice === prevNumDice) return; // Nothing has changed\n\n\t\tif (numDice === 1 && this.actor) {\n\t\t\tthis.isAssist = true;\n\n\t\t\tif (this.isActorRoll && this.isNpc) {\n\t\t\t\t// Minions roll 1 dice by default, make sure we don\"t set them as an\n\t\t\t\t// assist\n\t\t\t\tthis.isAssist = this.actor.system.type !== \"minion\";\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.isAssist = false;\n\t\t}\n\n\t\t// We only need to adjust the bought dice values if this is an Actor based\n\t\t// check.\n\t\t//\n\t\t// For the simple skill checks we do not adjust any momentum/doom/fortune,\n\t\t// and just roll the number of selected dice.\n\t\t//\n\t\tlet diceAdjusted = true;\n\t\tif (this.isActorRoll) {\n\t\t\tdiceAdjusted = await this._adjustBoughtDice(numDice, prevNumDice);\n\t\t}\n\t\telse {\n\t\t\tthis.rollData.numDice = numDice;\n\t\t}\n\n\t\tif (diceAdjusted) {\n\t\t\t// Hide dice difficulty, purchasing and bonus sections if there is only\n\t\t\t// one dice selected, as this will be an assistance roll which can\"t use\n\t\t\t// those bonuses.\n\t\t\t//\n\t\t\tif (this.isAssist) {\n\t\t\t\tthis.element.find(\".extra-dice-hideable\").addClass(\"disable-entry\");\n\t\t\t\tthis.element.find(\".difficulty-settings\").addClass(\"disable-entry\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.element.find(\".extra-dice-hideable\").removeClass(\"disable-entry\");\n\t\t\t\tthis.element.find(\".difficulty-settings\").removeClass(\"disable-entry\");\n\t\t\t}\n\n\t\t\tawait this._updateTestDetails();\n\t\t\tawait this._updateDiceIcons();\n\t\t}\n\t}\n\n\tasync _onClickDifficultyButton(event) {\n\t\tevent.preventDefault();\n\n\t\tconst button = $(event.currentTarget);\n\n\t\tconst difficulty = parseInt(button.attr(\"data-difficulty\"));\n\n\t\tif (difficulty === this.rollData.difficulty.base) return;\n\n\t\tthis.rollData.difficulty.base = difficulty;\n\n\t\tbutton.siblings().removeClass(\"active\");\n\t\tbutton.addClass(\"active\");\n\n\t\tthis._updateTestDetails();\n\t}\n\n\tasync _performRoll() {\n\t\tconst results = await conan.dice.calculateSkillRoll(this.rollData);\n\n\t\tconan.chat.renderSkillTestCard({\n\t\t\tactor: this.actor,\n\t\t\titem: this.rollData.item,\n\t\t\tresults,\n\t\t\trollData: this.rollData,\n\t\t\ttype: \"skill\",\n\t\t});\n\t}\n\n\tasync _rollSkillCheck() {\n\t\tthis.close();\n\n\t\tif (this.actor) {\n\t\t\tif (this.isNpc && this.actor.system.isMob) {\n\t\t\t\t// Work out how many Assist Rolls are needed\n\t\t\t\tconst mobData = this.actor.system.grouping;\n\n\t\t\t\tlet numLiveMobMembers = mobData.members.length ?? 0;\n\n\t\t\t\t// exclude dead mob members from assist dice total\n\t\t\t\tfor (const mobMember of mobData.members ?? []) {\n\t\t\t\t\tif (mobMember.dead) numLiveMobMembers--;\n\t\t\t\t}\n\n\t\t\t\tthis.rollData.assists.numDice = numLiveMobMembers;\n\t\t\t}\n\t\t}\n\n\t\t// TODO: Combine all spends into a single chat message, or just include\n\t\t// them in the Skill Roll result message?\n\t\t//\n\t\tif (this.isActorRoll) {\n\t\t\tif (this.playerOwnedActor) {\n\t\t\t\tawait this.actor.payDoom(this.rollData.spends.doom);\n\t\t\t\tawait this.actor.spendFortune(this.rollData.spends.fortune);\n\t\t\t\tawait this.actor.spendMomentum(this.rollData.spends.momentum);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tawait this.actor.buyFortune(this.rollData.spends.fortune);\n\t\t\t\tawait this.actor.spendDoom(this.rollData.spends.doom);\n\t\t\t}\n\t\t}\n\n\t\tconst fortuneWouldSucceed = await this._checkFortuneSpends();\n\n\t\tif (fortuneWouldSucceed && this.rollData.difficulty.base > 0) {\n\t\t\tconst template =\n\t\t\t\t\"systems/conan2d20/templates/apps/fortune-roll-dialogue.hbs\";\n\n\t\t\tconst html = await renderTemplate(template, {});\n\n\t\t\tnew Dialog({\n\t\t\t\tcontent: html,\n\t\t\t\ttitle: game.i18n.localize(\"CONAN.RollRemainingDice\"),\n\t\t\t\tbuttons: {\n\t\t\t\t\tyes: {\n\t\t\t\t\t\tlabel: game.i18n.localize(\"CONAN.rollYesLabel\"),\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tthis._performRoll();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tno: {\n\t\t\t\t\t\tlabel: game.i18n.localize(\"CONAN.rollNoLabel\"),\n\t\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\t\tthis.rollData.numDice = 0;\n\t\t\t\t\t\t\tthis._performRoll();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: \"yes\",\n\t\t\t}).render(true);\n\t\t}\n\t\telse {\n\t\t\tthis._performRoll();\n\t\t}\n\t}\n\n\t_sortedAttributes() {\n\t\treturn this._sortObjectsByName(CONFIG.CONAN.attributeLabels);\n\t}\n\n\t_sortedExpertiseFields() {\n\t\treturn this._sortObjectsByName(CONFIG.CONAN.expertiseFields);\n\t}\n\n\t_sortedSkills() {\n\t\treturn this._sortObjectsByName(CONFIG.CONAN.skills);\n\t}\n\n\t_sortObjectsByName(object) {\n\t\tconst sortedData = [];\n\t\tfor (let item in object) {\n\t\t\tsortedData.push({\n\t\t\t\tkey: item,\n\t\t\t\tname: object[item],\n\t\t\t});\n\t\t}\n\n\t\tsortedData.sort((a, b) => {\n\t\t\tif (a.name < b.name) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (a.name > b.name) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\n\t\treturn sortedData;\n\t}\n\n\tasync _updateAllFormValues() {\n\t\tconst me = this;\n\n\t\tthis.element.find(\".quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tlet type = input.attr(\"data-quantity-type\");\n\t\t\ttype = type.split(\".\");\n\t\t\tconst dataSection = me.rollData[type[0]] || {};\n\t\t\tinput.val(dataSection[type[1]]);\n\t\t});\n\t}\n\n\tasync _updateAttribute(value) {\n\t\tthis.attribute = value;\n\n\t\tthis.rollData.difficulty.increase = this.actor.getDifficultyIncrease(value);\n\n\t\tthis.rollData.bonus.inhuman =\n\t\t\tthis.actor.system.attributes[this.attribute]?.inhuman ?? 0;\n\n\t\tthis._updateAllFormValues();\n\t\tthis._updateTestDetails();\n\t}\n\n\tasync _updateDiceIcons() {\n\t\tconst numDice = this.rollData.numDice;\n\t\tconst me = this;\n\n\t\tthis.element.find(\".dice\").each(function() {\n\t\t\tconst icon = $(this);\n\t\t\tconst iconNum = parseInt(icon.attr(\"data-dice-number\"));\n\n\t\t\ticon.removeClass(\"fortune selected unselected\");\n\n\t\t\tif (iconNum < me.rollData.spends.fortune) {\n\t\t\t\ticon.addClass(\"fortune\");\n\t\t\t\ticon.html(\"1\");\n\t\t\t}\n\t\t\telse if (iconNum < numDice) {\n\t\t\t\ticon.addClass(\"selected\");\n\t\t\t\ticon.html(\"?\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\ticon.addClass(\"unselected\");\n\t\t\t\ticon.html(\"&nbsp;\");\n\t\t\t}\n\t\t});\n\t}\n\n\tasync _updateDifficulties() {\n\t\t// Updated the base actor skill targets\n\t\tif (this.actor) {\n\t\t\t[\n\t\t\t\tthis.rollData.skill.tn,\n\t\t\t\tthis.rollData.skill.expertise,\n\t\t\t\tthis.rollData.skill.focus,\n\t\t\t] = this.actor.getSkillTargetNumberAndFocus(\n\t\t\t\tthis.attribute,\n\t\t\t\tthis.skill,\n\t\t\t\tthis.expertise\n\t\t\t);\n\n\t\t\tif (this.rollData.ignoreDifficultyIncrease) {\n\t\t\t\tthis.rollData.difficulty.increase = 0;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.rollData.difficulty.increase =\n\t\t\t\t\tthis.actor.getDifficultyIncrease(\n\t\t\t\t\t\tthis.attribute\n\t\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.rollData.skill.expertise = 0;\n\t\t\tthis.rollData.skill.focus = this.element.find(\"#skill-focus\").val() || 0;\n\t\t\tthis.rollData.skill.tn = this.element.find(\"#skill-tn\").val() || 7;\n\t\t}\n\n\t\tconst untrained =\n\t\t\tthis.rollData.skill.expertise + this.rollData.skill.focus <= 0;\n\n\t\tthis.rollData.skill.complication = untrained ? 19 : 20;\n\n\t\t// Updated assist actor targets if needed\n\t\tif (this.assistActor) {\n\t\t\t[\n\t\t\t\tthis.rollData.assists.tn,\n\t\t\t\tthis.rollData.assists.expertise,\n\t\t\t\tthis.rollData.assists.focus,\n\t\t\t] = this.assistActor.getSkillTargetNumberAndFocus(\n\t\t\t\tthis.attribute,\n\t\t\t\tthis.skill,\n\t\t\t\tthis.expertise\n\t\t\t);\n\n\t\t\tconst untrainedAssist =\n\t\t\t\tthis.rollData.assists.expertise + this.rollData.assists.focus <= 0;\n\n\t\t\tthis.rollData.assists.complication = untrainedAssist ? 19 : 20;\n\t\t}\n\t}\n\n\tasync _updateExpertise(value) {\n\t\tthis.expertise = value;\n\t\tawait this._updateDifficulties();\n\t\tthis._updateAllFormValues();\n\t\tthis._updateTestDetails();\n\t}\n\n\tasync _updateSkill(value) {\n\t\tthis.skill = value;\n\t\tawait this._updateDifficulties();\n\t\tthis._updateAllFormValues();\n\t\tthis._updateTestDetails();\n\t}\n\n\tasync _updateSkillDescription() {\n\t\tif (this.isActorRoll) {\n\t\t\tconst attribute = CONFIG.CONAN.attributeLabels[this.attribute];\n\n\t\t\tlet skill = CONFIG.CONAN.skills[this.skill];\n\t\t\tif (this.isNpc) {\n\t\t\t\tskill = CONFIG.CONAN.expertiseFields[this.expertise];\n\t\t\t}\n\n\t\t\tthis.rollData.title = `${attribute} / ${skill}`;\n\t\t}\n\t}\n\n\tasync _updateTestDetails() {\n\t\tconst text = this._getTestDifficulty();\n\t\tawait this._updateSkillDescription();\n\t\tthis.element.find(\".test-details\").html(text);\n\n\t\tlet difficultyText = game.i18n.localize(\n\t\t\t\"CONAN.SkillRoll.DifficultyIncreased\"\n\t\t);\n\n\t\tif (this.rollData.difficulty.increase > 0) {\n\t\t\t// *difficulty increased due to wounds/traumas\n\t\t\tthis.element.find(\".difficulty-increased\").html(difficultyText);\n\t\t}\n\t\telse {\n\t\t\tthis.element.find(\".difficulty-increased\").html(\"&nbsp;\");\n\t\t}\n\t}\n}\n","export default class SkillRollRequest extends Application {\n\tconstructor(actor, options={}) {\n\t\tsuper(actor, options);\n\n\t\tthis.difficulty = 1;\n\t\tthis.skill = CONFIG.CONAN.sortedSkills[0].key;\n\n\t\tthis.difficulties = [\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.0\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: true,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.1\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.2\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.3\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.4\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.skillRollDifficultyLevels.5\"),\n\t\t\t},\n\t\t];\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"skill-roll-request\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/skill-roll-request.hbs\",\n\t\t\twidth: \"auto\",\n\t\t\theight: \"auto\",\n\t\t\tsubmitOnChange: false,\n\t\t\ttitle: game.i18n.localize(\"CONAN.SkillRollRequest.title\"),\n\t\t});\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\t\tconst me = this;\n\n\t\t// Difficulty setting buttons\n\t\thtml\n\t\t\t.find(\".skill-roll-difficulty\")\n\t\t\t.on(\"click\", this._onClickDifficultyButton.bind(this));\n\n\t\thtml.find(\".skill-roll-select\").on(\"change\", event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst selector = event.currentTarget;\n\t\t\tme.skill = selector?.value ?? CONFIG.CONAN.sortedSkills[0].key;\n\t\t});\n\n\t\thtml.find(\".copy-skill-check\").click(event => {\n\t\t\tevent.preventDefault();\n\t\t\tconan.utils.copyToClipboard(\n\t\t\t\t`@cst[${CONFIG.CONAN.skills[this.skill]},${this.difficulty}]`\n\t\t\t);\n\t\t});\n\n\t\thtml.find(\".request-skill-check\").click(event => {\n\t\t\tevent.preventDefault();\n\t\t\tconan.chat.renderSkillTestRequestCard({\n\t\t\t\tdifficulty: this.difficulty,\n\t\t\t\tskill: CONFIG.CONAN.skills[this.skill],\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getData() {\n\t\tconst data = {\n\t\t\tdifficulties: this.difficulties,\n\t\t\tselectedSkill: this.skill,\n\t\t\tskills: CONFIG.CONAN.sortedSkills,\n\t\t};\n\n\t\treturn data;\n\t}\n\n\tasync _onClickDifficultyButton(event) {\n\t\tevent.preventDefault();\n\n\t\tconst button = $(event.currentTarget);\n\n\t\tconst difficulty = parseInt(button.attr(\"data-difficulty\"));\n\n\t\tif (difficulty === this.difficulty) return;\n\n\t\tthis.difficulty = difficulty;\n\n\t\tbutton.siblings().removeClass(\"active\");\n\t\tbutton.addClass(\"active\");\n\t}\n}\n","export default class SoakDiceRoller extends Application {\n\tconstructor(actor, options={}) {\n\t\tsuper(actor, options);\n\n\t\tthis.actor = null;\n\n\t\tthis.rollData = conan.dice.getDefaultCombatDiceRollOptions();\n\n\t\tif (actor) {\n\t\t\tthis.actor = actor;\n\t\t\tthis.rollData.actorId = this.actor.id;\n\t\t}\n\n\t\tthis.isActorRoll = this.actor ? true : false;\n\n\t\tthis.isNpc = false;\n\t\tthis.isPc = false;\n\n\t\tif (this.isActorRoll) {\n\t\t\tthis.isNpc = this.actor.isNPC;\n\t\t\tthis.isPc = !this.isNpc;\n\t\t}\n\n\t\tthis.soakType = options?.type || \"cover\";\n\t\tthis.rollData.itemName = options?.itemName || null;\n\t\tthis.rollData.base.numDice = options?.soak || 1;\n\n\t\tthis.presetTitle = null;\n\n\t\tthis.rollData.title = game.i18n.localize(\"CONAN.SoakDice\");\n\n\t\tthis.coverPresets = [\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tname: game.i18n.localize(\"CONAN.LightCover\"),\n\t\t\t\tnumDice: 2,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.LightCoverTooltip\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tname: game.i18n.localize(\"CONAN.HeavyCover\"),\n\t\t\t\tnumDice: 4,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.HeavyCoverTooltip\"),\n\t\t\t},\n\t\t];\n\n\t\tthis.moralePresets = [\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tname: game.i18n.localize(\"CONAN.MinorMorale\"),\n\t\t\t\tnumDice: 2,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.MinorMoraleTooltip\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tname: game.i18n.localize(\"CONAN.MajorMorale\"),\n\t\t\t\tnumDice: 4,\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.MajorMoraleTooltip\"),\n\t\t\t},\n\t\t];\n\n\t\tthis.soakTypes = [\n\t\t\t{\n\t\t\t\tactive: this.soakType === \"cover\" ? true : false,\n\t\t\t\tname: game.i18n.localize(\"CONAN.soakCover\"),\n\t\t\t\tvalue: \"cover\",\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.SoakTypeCoverTooltip\"),\n\t\t\t},\n\t\t\t{\n\t\t\t\tactive: this.soakType === \"morale\" ? true : false,\n\t\t\t\tname: game.i18n.localize(\"CONAN.soakMorale\"),\n\t\t\t\tvalue: \"morale\",\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.SoakTypeMoraleTooltip\"),\n\t\t\t},\n\t\t];\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"soak-dice-roller\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/soak-dice-roller.hbs\",\n\t\t\twidth: 200,\n\t\t\theight: \"auto\",\n\t\t\tsubmitOnChange: false,\n\t\t});\n\t}\n\n\tget title() {\n\t\tconst title = game.i18n.localize(\"CONAN.SoakDice\");\n\t\tif (this.actor) {\n\t\t\treturn `${title}: ${this.actor.name}`;\n\t\t}\n\t\telse {\n\t\t\treturn title;\n\t\t}\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\t\tconst me = this;\n\n\t\t// Submit button\n\t\thtml.find(\".roll-dice\").click(this._onSubmit.bind(this));\n\n\t\t// Soak Preset buttons\n\t\thtml\n\t\t\t.find(\".soak-dice-roller .soak-preset\")\n\t\t\t.on(\"click\", this._onClickPresetButton.bind(this));\n\n\t\t// Soak Type buttons\n\t\thtml\n\t\t\t.find(\".soak-dice-roller .soak-type\")\n\t\t\t.on(\"click\", this._onClickTypeButton.bind(this));\n\n\t\t// Quantity buttons\n\t\thtml.find(\".soak-dice-roller .quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tconst btnUp = spinner.find(\".quantity-up\");\n\t\t\tconst btnDown = spinner.find(\".quantity-down\");\n\t\t\tconst quantityType = input.attr(\"data-quantity-type\");\n\n\t\t\tconst [section, type] = quantityType.split(\".\");\n\n\t\t\tinput.on(\"wheel\", ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme._clearPresets();\n\t\t\t\tif (ev.originalEvent.deltaY < 0) {\n\t\t\t\t\tme[`_inc_${section}_${type}`](input);\n\t\t\t\t}\n\t\t\t\telse if (ev.originalEvent.deltaY > 0) {\n\t\t\t\t\tme[`_dec_${section}_${type}`](input);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbtnUp.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme._clearPresets();\n\t\t\t\tme[`_inc_${section}_${type}`](input);\n\t\t\t});\n\n\t\t\tbtnDown.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme._clearPresets();\n\t\t\t\tme[`_dec_${section}_${type}`](input);\n\t\t\t});\n\t\t});\n\t}\n\n\tasync getData() {\n\t\tconst data = {\n\t\t\tactorData: foundry.utils.duplicate(this.actor),\n\t\t\tcoverPresets: this.coverPresets,\n\t\t\tisActorRoll: this.isActorRoll,\n\t\t\tisNpc: this.isNpc,\n\t\t\tisPc: this.isPc,\n\t\t\titemName: this.rollData.itemName,\n\t\t\tmoralePresets: this.moralePresets,\n\t\t\trollData: this.rollData,\n\t\t\tsoakType: this.soakType,\n\t\t\tsoakTypes: this.soakTypes,\n\t\t};\n\n\t\treturn data;\n\t}\n\n\tasync _dec_base_numDice(input) {\n\t\tlet currentValue = parseInt(input.val());\n\t\tcurrentValue--;\n\n\t\tif (currentValue < 1) currentValue = 1;\n\n\t\tthis.rollData.base.numDice = currentValue;\n\n\t\tinput.val(this.rollData.base.numDice);\n\t}\n\n\tasync _inc_base_numDice(input) {\n\t\tthis.rollData.base.numDice++;\n\n\t\tinput.val(this.rollData.base.numDice);\n\t}\n\n\tasync _clearPresets() {\n\t\tthis.element.find(\".soak-dice-roller .soak-preset\").removeClass(\"active\");\n\t\tthis.presetTitle = null;\n\n\t\tthis._updateTitle();\n\t}\n\n\tasync _onClickPresetButton(event) {\n\t\tevent.preventDefault();\n\n\t\tconst button = $(event.target);\n\n\t\tconst preset = parseInt(button.attr(\"data-preset\"));\n\n\t\tif (!event.target.classList.contains(\"active\")) {\n\t\t\tthis.rollData.base.numDice = preset;\n\t\t\tthis._updateAllFormValues();\n\t\t\tthis.presetTitle = event.target.innerText;\n\t\t}\n\t\telse {\n\t\t\tthis.presetTitle = null;\n\t\t}\n\n\t\tthis.element.find(\".soak-dice-roller .soak-preset\").removeClass(\"active\");\n\t\tbutton.toggleClass(\"active\");\n\t}\n\n\tasync _onClickTypeButton(event) {\n\t\tevent.preventDefault();\n\n\t\tconst button = $(event.target);\n\n\t\tconst soakType = button.attr(\"data-soak-type\");\n\n\t\tif (soakType === this.soakType) return;\n\n\t\tthis.soakType = soakType;\n\n\t\tthis.element.find(\".cover-presets\").toggle();\n\t\tthis.element.find(\".morale-presets\").toggle();\n\n\t\tthis.element.find(\".soak-dice-roller .soak-preset\").removeClass(\"active\");\n\n\t\tbutton.siblings().removeClass(\"active\");\n\t\tbutton.addClass(\"active\");\n\t}\n\n\tasync _onSubmit() {\n\t\tthis._updateTitle();\n\t\tthis._rollDice();\n\t}\n\n\tasync _rollDice() {\n\t\tthis.close();\n\n\t\tthis.rollData.numDice =\n\t\t\tthis.rollData.base.numDice + this.rollData.bonus.attribute;\n\n\t\t// Do the actual dice rolls\n\t\tconst results = await conan.dice.calculateCombatDiceRoll(this.rollData);\n\n\t\tthis._showResults(results);\n\t}\n\n\tasync _showResults(results) {\n\t\tconan.chat.renderSoakDiceRollCard({\n\t\t\tactor: this.actor,\n\t\t\titem: this.rollData.item,\n\t\t\tresults,\n\t\t\trollData: this.rollData,\n\t\t\ttype: \"soak\",\n\t\t});\n\t}\n\n\tasync _updateAllFormValues() {\n\t\tconst me = this;\n\n\t\tthis.element.find(\".quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tlet type = input.attr(\"data-quantity-type\");\n\t\t\ttype = type.split(\".\");\n\t\t\tconst dataSection = me.rollData[type[0]] || {};\n\t\t\tinput.val(dataSection[type[1]]);\n\t\t});\n\t}\n\n\tasync _updateTitle() {\n\t\tlet soakType = null;\n\n\t\tif (this.soakType === \"cover\") {\n\t\t\tsoakType = game.i18n.localize(\"CONAN.soakCover\");\n\t\t}\n\t\telse if (this.soakType === \"morale\") {\n\t\t\tsoakType = game.i18n.localize(\"CONAN.soakMorale\");\n\t\t}\n\n\t\tlet presetTitle = this.presetTitle;\n\t\tconst soakDiceTitle = game.i18n.localize(\"CONAN.Soak\");\n\n\t\tlet title = `${soakType}`;\n\t\tif (presetTitle) {\n\t\t\ttitle = `${presetTitle} ${title}`;\n\t\t}\n\n\t\tthis.rollData.title = `${title} ${soakDiceTitle}`;\n\t}\n}\n","export default class SourceFilterSettings extends FormApplication {\n\tconstructor(object, options) {\n\t\tsuper(object, options);\n\n\t\tthis.filtered = game.settings.get(\"conan2d20\", \"sourceFilters\") ?? [];\n\t}\n\n\t/** @inheritdoc */\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\t// classes: [\"conan2d20\", \"character-upgrade\"],\n\t\t\tclasses: [\"conan2d20\", \"item\", \"sheet\"],\n\t\t\ttitle: game.i18n.localize(\"CONAN.Form.BookSourceFilters.title\"),\n\t\t\ttemplate: \"systems/conan2d20/templates/settings/source-filter.hbs\",\n\t\t\twidth: 300,\n\t\t\theight: \"auto\",\n\t\t\tresizable: false,\n\t\t\tcloseOnSubmit: true,\n\t\t});\n\t}\n\n\tstatic registerSetting() {\n\t\tgame.settings.register(\"conan2d20\", \"sourceFilters\", {\n\t\t\tname: game.i18n.localize(\"CONAN.Form.BookSourceFilters.title\"),\n\t\t\thint: game.i18n.localize(\"CONAN.Form.BookSourceFilters.hint\"),\n\t\t\tconfig: false,\n\t\t\tscope: \"world\",\n\t\t\ttype: Array,\n\t\t\trequiresReload: true,\n\t\t\tdefault: [],\n\t\t});\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".delete-choice\").click(event => this._deleteChoiceItem(event));\n\n\t\tsuper.activateListeners(html);\n\t}\n\n\tasync getData() {\n\t\tconst data = await super.getData();\n\n\t\tconst sources = CONFIG.CONAN.sortedSources;\n\n\t\tdata.selectedSources = this.filtered.map(\n\t\t\tchoice => ({uuid: choice, name: CONFIG.CONAN.sources[choice]})\n\t\t);\n\n\t\tdata.hasSelectedSources = data.selectedSources.length > 0;\n\n\t\tdata.unselectedSources = sources.map(\n\t\t\t({key, name}) => ({name, uuid: key})\n\t\t).filter(source => !this.filtered.includes(source.uuid));\n\n\t\treturn data;\n\t}\n\n\tasync _deleteChoiceItem(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst deleteUuid = $(event.currentTarget).data(\"uuid\");\n\n\t\tconst newChoices = [];\n\t\tfor (const itemUuid of this.filtered) {\n\t\t\tif (itemUuid === deleteUuid) continue;\n\t\t\tnewChoices.push(itemUuid);\n\t\t}\n\n\t\tthis.filtered = newChoices;\n\n\t\treturn this.render(true);\n\t}\n\n\tasync _onChangeInput(event) {\n\t\tconst options = event.target.list.options;\n\t\tconst value = event.target.value;\n\n\t\tlet uuid = null;\n\t\tfor (const option of options) {\n\t\t\tif (option.value === value) {\n\t\t\t\tuuid = option.getAttribute(\"data-uuid\");\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (uuid === null) return;\n\n\t\tif (this.filtered.includes(uuid)) return; // No duplicates\n\n\t\tthis.filtered.push(uuid);\n\n\t\tthis.filtered.sort((a, b) => a.localeCompare(b));\n\n\t\treturn this.render(true);\n\t}\n\n\tasync _updateObject(event, data) {\n\t\tgame.settings.set(\"conan2d20\", \"sourceFilters\", this.filtered);\n\t}\n}\n","// A form used to add and remove items from transportation items that have\n// stowage and their own encumbrance limits.\n//\nexport default class SendItem extends FormApplication {\n\tselectedActor = \"\";\n\n\tconstructor(object, options={}) {\n\t\tsuper(object, options);\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tid: \"transport-stowage\",\n\t\t\tclasses: [\"conan2d20\", \"item\", \"sheet\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/send-item.hbs\",\n\t\t\twidth: \"auto\",\n\t\t\theight: \"auto\",\n\t\t});\n\t}\n\n\tget title() {\n\t\treturn `${game.i18n.localize(\"CONAN.sendItemTitle\")}`;\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\n\t\thtml.find(\".send-item\").change(event => {\n\t\t\tthis.selectedActor = event.target.value;\n\t\t});\n\n\t\thtml.find(\".send-item-save\").click(event => this._onSave(event));\n\n\t\thtml.find(\".send-item-cancel\").click(event => this._onCancel(event));\n\t}\n\n\tgetData() {\n\t\tconst data = {\n\t\t\titemName: this.object.item.name,\n\t\t\tcontainers: [\n\t\t\t\t{\n\t\t\t\t\tid: \"\",\n\t\t\t\t\tname: \"\",\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tthis.object.destinations.sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tfor (const destination of this.object.destinations) {\n\t\t\tdata.containers.push({\n\t\t\t\tid: destination.uuid,\n\t\t\t\tname: destination.name,\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t_onCancel() {\n\t\tthis.close();\n\t}\n\n\tasync _onSave() {\n\t\tif (this.selectedActor === \"\") return this.close();\n\n\t\tconst selectedActor = await fromUuid(this.selectedActor);\n\n\t\tconst itemData = this.object.item.toObject();\n\n\t\tif (itemData.system.equipped) {\n\t\t\titemData.system.equipped = false;\n\t\t}\n\n\t\tawait this.object.actor.deleteEmbeddedDocuments(\"Item\", [this.object.item._id]);\n\t\tawait selectedActor.createEmbeddedDocuments(\"Item\", [itemData]);\n\n\t\tthis.close();\n\t}\n}\n","export default class TalentRequirementEditor extends FormApplication {\n\n\tconstructor(object, options={}) {\n\t\tsuper(object, options);\n\n\t\tthis.talent = object;\n\n\t\tthis.edit = false;\n\n\t\tthis.requiredTalents = [];\n\t\tthis.requiredTalentNames = {};\n\n\t\t// Default to an expertise\n\t\tthis.requirement = this._defaultRequirement(\"expertise\");\n\n\t\tif (Number.isInteger(options.editIndex)) {\n\t\t\tconst requirements = this.talent?.system?.requirements ?? [];\n\t\t\tif (options.editIndex >= 0 && options.editIndex < requirements.length) {\n\t\t\t\tthis.editIndex = options.editIndex;\n\t\t\t\tthis.requirement = requirements[options.editIndex];\n\n\t\t\t\tif (this.requirement.type === \"talent\") {\n\t\t\t\t\tfor (const talent of this.requirement.talents) {\n\t\t\t\t\t\tlet item;\n\n\t\t\t\t\t\tconan.compendiums.talents(undefined, false).then(talents => {\n\t\t\t\t\t\t\titem = talents.find(\n\t\t\t\t\t\t\t\tt => t.uuid === talent.uuid\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (item) {\n\t\t\t\t\t\t\tthis.requiredTalentNames[item.uuid] = item.name;\n\t\t\t\t\t\t\tthis.requiredTalents.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.edit = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tclasses: [\"conan2d20\", \"talent-requirement-editor\"],\n\t\t\ttemplate: \"systems/conan2d20/templates/apps/talent-requirement-editor.hbs\",\n\t\t\twidth: 300,\n\t\t\theight: 400,\n\t\t\tresizable: true,\n\t\t});\n\t}\n\n\tget title() {\n\t\treturn `${game.i18n.localize(\"CONAN.Item.Talent.RequirementEditor.label\")}`;\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".delete-talent\").click(event => this._deleteTalentChoice(event));\n\n\t\thtml.find(\".requirement-save-button\").click(\n\t\t\tevent => this._onSaveRequirement(event)\n\t\t);\n\n\t\tsuper.activateListeners(html);\n\t}\n\n\tasync getData(options) {\n\t\tconst data = await super.getData(options);\n\n\t\tconst [selectedTalents, unselectedTalents] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.talents(undefined, false),\n\t\t\t\t(this.requirement?.talents ?? []).map(t => t.uuid)\n\t\t\t);\n\n\t\tconst requirement = foundry.utils.duplicate(this.requirement);\n\n\t\tif (requirement.type === \"talent\") {\n\t\t\tfor (const talent of requirement?.talents ?? []) {\n\t\t\t\tconst requiredTalent = (await conan.compendiums.talents(undefined, false)).find(\n\t\t\t\t\tt => t.uuid === talent.uuid\n\t\t\t\t);\n\n\t\t\t\ttalent.name = requiredTalent.name;\n\t\t\t}\n\n\t\t\trequirement.talents.sort((a, b) => a.name.localeCompare(b.name));\n\t\t}\n\n\t\tfoundry.utils.mergeObject(data, {\n\t\t\tCONFIG: CONFIG.CONAN,\n\t\t\tappId: this.id,\n\t\t\trequiredTalent: this.requiredTalent,\n\t\t\trequirement,\n\t\t\tselected: selectedTalents,\n\t\t\ttalent: this.talent,\n\t\t\tunselected: unselectedTalents,\n\t\t});\n\n\t\treturn data;\n\t}\n\n\t_defaultRequirement(type) {\n\t\tswitch (type) {\n\t\t\tcase \"expertise\":\n\t\t\t\treturn {\n\t\t\t\t\tskill: CONFIG.CONAN.sortedSkills[0].key,\n\t\t\t\t\ttype: \"expertise\",\n\t\t\t\t\tvalue: 1,\n\t\t\t\t};\n\t\t\tcase \"focus\":\n\t\t\t\treturn {\n\t\t\t\t\tskill: CONFIG.CONAN.sortedSkills[0].key,\n\t\t\t\t\ttype: \"focus\",\n\t\t\t\t\tvalue: 1,\n\t\t\t\t};\n\t\t\tcase \"special\":\n\t\t\t\treturn {\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\ttype: \"special\",\n\t\t\t\t};\n\t\t\tcase \"talent\":\n\t\t\t\treturn {\n\t\t\t\t\tmin: 1,\n\t\t\t\t\ttype: \"talent\",\n\t\t\t\t\ttalents: [],\n\t\t\t\t};\n\t\t}\n\t}\n\n\tasync _deleteTalentChoice(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst uuid = event.currentTarget.dataset.uuid;\n\n\t\tconst newRequiredTalents = [];\n\t\tfor (const talent of this.requiredTalents) {\n\t\t\tif (talent.uuid === uuid) continue;\n\t\t\tnewRequiredTalents.push(talent);\n\t\t}\n\t\tthis.requiredTalents = newRequiredTalents;\n\n\t\tconst talents = [];\n\t\tfor (const talent of this.requirement.talents) {\n\t\t\tif (talent.uuid === uuid) continue;\n\t\t\ttalents.push(talent);\n\t\t}\n\t\tthis.requirement.talents = talents;\n\n\t\tthis.render(true);\n\t}\n\n\tasync _onChangeInput(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst isItem = event.currentTarget.dataset.isItem === \"true\";\n\n\t\t// We only have to do something special if we're handling a multi-choice\n\t\t// datalist\n\t\t//\n\t\tif (event.target.list && isItem) {\n\t\t\tconst options = event.target.list.options;\n\t\t\tconst value = event.target.value;\n\n\t\t\t// const name = event.target.name;\n\n\t\t\tlet uuid = null;\n\t\t\tfor (const option of options) {\n\t\t\t\tif (option.value === value) {\n\t\t\t\t\tuuid = option.getAttribute(\"data-uuid\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (uuid === null) return;\n\n\t\t\tconst talent = await fromUuid(uuid);\n\n\t\t\tif (talent) {\n\t\t\t\tthis.requiredTalents.push(talent);\n\n\t\t\t\tthis.requirement.talents.push({\n\t\t\t\t\trank: 1,\n\t\t\t\t\tuuid,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this._onSubmit(event);\n\t}\n\n\tasync _onSaveRequirement(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst requirements = this.talent?.system?.requirements ?? [];\n\n\t\tlet valid = true;\n\t\tswitch (this.requirement.type) {\n\t\t\tcase \"expertise\":\n\t\t\tcase \"focus\":\n\t\t\t\tconst value = Number.parseInt(this.requirement.value);\n\t\t\t\tvalid = value >= 1 && value <= 5;\n\n\t\t\t\tif (this.requirement.skill === \"\") valid = false;\n\n\t\t\t\tbreak;\n\t\t\tcase \"special\":\n\t\t\t\tif (this.requirement.value === \"\") valid = false;\n\t\t\t\tbreak;\n\t\t\tcase \"talent\":\n\t\t\t\tconst numTalents = (this.requirement?.talents ?? []).length;\n\n\t\t\t\tif (numTalents <= 0) {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\t\t\t\tif (this.requirement.min <= 0 || this.requirement.min > numTalents) {\n\t\t\t\t\tvalid = false;\n\t\t\t\t}\n\n\t\t\t\tfor (const talent of this.requirement?.talents ?? []) {\n\t\t\t\t\tconst required = await fromUuid(talent.uuid);\n\t\t\t\t\tif (talent.rank > required.system.rank.max) {\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t}\n\n\t\tif (valid) {\n\t\t\tif (this.edit) {\n\t\t\t\trequirements[this.editIndex] = this.requirement;\n\t\t\t}\n\t\t\telse {\n\t\t\t\trequirements.push(this.requirement);\n\t\t\t}\n\n\t\t\trequirements.sort((a, b) => a.type.localeCompare(b.type));\n\n\t\t\tawait this.talent.update({\"system.requirements\": requirements});\n\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\t/** @inheritdoc */\n\tasync _onSubmit(event) {\n\t\tlet updateData = this._getSubmitData();\n\n\t\tif (this.requirement.type !== updateData.type) {\n\t\t\tthis.requirement = this._defaultRequirement(updateData.type);\n\t\t\treturn this.render(true);\n\t\t}\n\n\t\tswitch (this.requirement.type) {\n\t\t\tcase \"expertise\":\n\t\t\tcase \"focus\":\n\t\t\t\tthis.requirement.skill = updateData.skill;\n\t\t\t\tthis.requirement.value = updateData[this.requirement.type];\n\t\t\t\tbreak;\n\t\t\tcase \"special\":\n\t\t\t\tthis.requirement.value = updateData.special;\n\t\t\t\tbreak;\n\t\t\tcase \"talent\":\n\t\t\t\tthis.requirement.min = updateData.talentMin;\n\n\t\t\t\tfor (const talentRank of Object.keys(updateData)) {\n\t\t\t\t\tif (talentRank.startsWith(\"rank_\")) {\n\t\t\t\t\t\tconst uuid = talentRank.split(\"_\")[1] ?? \"\";\n\n\t\t\t\t\t\tif (uuid !== \"\") {\n\t\t\t\t\t\t\tfor (const talent of this.requirement.talents) {\n\t\t\t\t\t\t\t\tif (talent.uuid === uuid) {\n\t\t\t\t\t\t\t\t\ttalent.rank = updateData[talentRank];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.render(true);\n\t}\n\n\t/** @inheritdoc */\n\tasync _updateObject(event, formData) {\n\t\tconsole.log(formData);\n\t}\n}\n","/* eslint-disable no-shadow, no-unused-vars */\n\n/**\n * THIS MODULE IS TAKEN AND MODIFIED FROM THE D&D5E SYSTEM\n * Original code resides here: https://gitlab.com/foundrynet/dnd5e/-/blob/master/module/apps/trait-selector.js\n/**\n * A specialized form used to select damage or condition types which apply to an Actor\n * @type {FormApplication}\n */\nexport default class TraitSelector extends FormApplication {\n\tconstructor(object, options) {\n\t\tsuper(object, options);\n\n\t\t// Internal flags\n\t\tthis.searchString = null;\n\n\t\t/**\n\t\t * A filtering timeout function reference used to rate limit string filtering operations\n\t\t * @type {number|null}\n\t\t */\n\t\tthis._filterTimeout = null;\n\t}\n\n\tstatic get defaultOptions() {\n\t\tconst options = super.defaultOptions;\n\t\toptions.id = \"trait-selector\";\n\t\toptions.classes = [\"conan2d20\"];\n\t\toptions.title = \"Actor Trait Selection\";\n\t\toptions.template = \"systems/conan2d20/templates/apps/trait-selector.hbs\";\n\t\toptions.width = \"auto\";\n\t\toptions.height = 700;\n\t\toptions.scrollY = [\".trait-list\"];\n\t\treturn options;\n\t}\n\n\t/* -------------------------------------------- */\n\t/**\n\t * Return a reference to the target attribute\n\t * @type {String}\n\t */\n\tget attribute() {\n\t\treturn this.options.name;\n\t}\n\n\t/* -------------------------------------------- */\n\t/**\n\t * Provide data to the HTML template for rendering\n\t * @type {Object}\n\t */\n\tgetData() {\n\t\t// Get current values\n\t\tconst attr = foundry.utils.getProperty(this.object, this.attribute);\n\t\tif (typeof attr.value === \"string\") {\n\t\t\tattr.value = TraitSelector._backCompat(attr.value, this.options.choices);\n\t\t}\n\n\t\tif (!attr.value) attr.value = \"\";\n\n\t\tconst {hasValues} = this.options;\n\t\tconst choices = foundry.utils.duplicate(this.options.choices);\n\n\t\t// Populate choices\n\t\tif (hasValues) {\n\t\t\tconst selected = [];\n\t\t\tfor (const [_k, trait] of Object.entries(attr)) {\n\t\t\t\tselected[trait.type] = {\n\t\t\t\t\tvalue: trait.value,\n\t\t\t\t};\n\t\t\t}\n\t\t\tfor (const [k, v] of Object.entries(choices)) {\n\t\t\t\tif (k in selected) {\n\t\t\t\t\tchoices[k] = {\n\t\t\t\t\t\tlabel: v,\n\t\t\t\t\t\tchosen: true,\n\t\t\t\t\t\tvalue: selected[k].value || \"\",\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchoices[k] = {\n\t\t\t\t\t\tlabel: v,\n\t\t\t\t\t\tchosen: false,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfor (const [k, v] of Object.entries(choices)) {\n\t\t\t\tchoices[k] = {\n\t\t\t\t\tlabel: v,\n\t\t\t\t\tchosen: attr.value.includes(k),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst orderedChoices = {};\n\t\tObject.keys(choices)\n\t\t\t.sort((a, b) => {\n\t\t\t\treturn choices[a].label.localeCompare(choices[b].label);\n\t\t\t})\n\t\t\t.forEach(key => {\n\t\t\t\torderedChoices[key] = choices[key];\n\t\t\t});\n\n\t\treturn {\n\t\t\torderedChoices,\n\t\t\thasValues,\n\t\t\tsearchString: this.searchString,\n\t\t};\n\t}\n\n\t/**\n\t * Filter the potential traits to only show ones which match a provided search string\n\t * @param {string} searchString    The search string to match\n\t */\n\tsearch(searchString) {\n\t\tconst query = new RegExp(RegExp.escape(searchString), \"i\");\n\t\tthis.element.find(\"li.trait-item\").each((i, li) => {\n\t\t\tconst name = li.getElementsByClassName(\"trait-label\")[0].textContent;\n\t\t\tli.style.display = query.test(name) ? \"flex\" : \"none\";\n\t\t});\n\t\tthis.searchString = searchString;\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\n\t\t// Search filtering\n\t\thtml.find(\"input[name=\\\"search\\\"]\").keyup(this._onFilterResults.bind(this));\n\t\tif (this.searchString) {\n\t\t\tthis.search(this.searchString);\n\t\t}\n\n\t\tif (this.options.hasValues) {\n\t\t\thtml.find(\"input[id^=input_value]\").focusin(ev => {\n\t\t\t\tconst {name} = ev.currentTarget;\n\t\t\t\thtml.find(`input[type=checkbox][name=\"${name}\"]`).prop(\"checked\", true);\n\t\t\t});\n\t\t\tif (!this.options.allowEmptyValues) {\n\t\t\t\thtml.find(\"input[id^=input_value]\").focusout(ev => {\n\t\t\t\t\tconst input = ev.currentTarget;\n\n\t\t\t\t\tif (input.value === \"\") {\n\t\t\t\t\t\thtml\n\t\t\t\t\t\t\t.find(`input[type=checkbox][name=\"${input.name}\"]`)\n\t\t\t\t\t\t\t.prop(\"checked\", false);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handle trait filtering through search field\n\t * Toggle the visibility of indexed trait entries by name match\n\t * @private\n\t */\n\t_onFilterResults(event) {\n\t\tevent.preventDefault();\n\t\tconst input = event.currentTarget;\n\t\tif (this._filterTimeout) {\n\t\t\tclearTimeout(this._filterTimeout);\n\t\t\tthis._filterTimeout = null;\n\t\t}\n\t\tthis._filterTimeout = setTimeout(() => this.search(input.value), 100);\n\t}\n\n\t/* -------------------------------------------- */\n\n\t/**\n\t * Support backwards compatibility for old-style string separated traits\n\t * @private\n\t */\n\tstatic _backCompat(current, choices) {\n\t\tif (!current || current.length === 0) return [];\n\t\tcurrent = current.split(/[\\s,]/).filter(t => !!t);\n\t\treturn current\n\t\t\t.map(val => {\n\t\t\t\tfor (const [k, v] of Object.entries(choices)) {\n\t\t\t\t\tif (val === v) return k;\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t})\n\t\t\t.filter(val => !!val);\n\t}\n\n\t/* -------------------------------------------- */\n\n\t/**\n\t * Update the Actor object with new trait data processed from the form\n\t * @private\n\t */\n\tasync _updateObject(event, formData) {\n\t\tconst choices = [];\n\t\tif (this.options.hasValues) {\n\t\t\tfor (const [k, v] of Object.entries(formData)) {\n\t\t\t\tif (v.length > 1 && v[0]) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t(!Number.isNaN(v[1]) && v[1] !== \"\")\n\t\t\t\t\t\t\t|| this.options.allowEmptyValues\n\t\t\t\t\t) {\n\t\t\t\t\t\tchoices.push({type: k, value: v[1]});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait this.object.update({[`${this.attribute}`]: choices});\n\t\t\tawait this.object.sheet.render(true);\n\t\t}\n\t\telse {\n\t\t\tfor (const [k, v] of Object.entries(formData)) {\n\t\t\t\tif (k !== \"search\" && v) choices.push(k);\n\t\t\t}\n\t\t\tawait this.object.update({\n\t\t\t\t[`${this.attribute}.value`]: choices,\n\t\t\t});\n\t\t\tawait this.object.sheet.render(true);\n\t\t}\n\t}\n}\n","export default class ConanItem extends Item {\n\n\tasync _preCreate(data, options, user) {\n\t\tawait super._preCreate(data, options, user);\n\n\t\tif (this.type === \"transportation\") {\n\t\t\tui.notifications.warn(\n\t\t\t\t\"Transportation items are deprecated and will be removed with the next system release, please use the relevant new actor types instead.\",\n\t\t\t\t{permanent: true}\n\t\t\t);\n\t\t}\n\n\t\tif (data.img) return; // Already had an image set so we won't change it\n\n\t\tconst baseDir = \"systems/conan2d20/assets/icons/compendiums\";\n\t\tlet img = null;\n\t\tswitch (this.type) {\n\t\t\tcase \"archetype\":\n\t\t\tcase \"aspect\":\n\t\t\tcase \"caste\":\n\t\t\tcase \"display\":\n\t\t\tcase \"education\":\n\t\t\tcase \"homeland\":\n\t\t\tcase \"language\":\n\t\t\tcase \"nature\":\n\t\t\tcase \"npcaction\":\n\t\t\tcase \"story\":\n\t\t\tcase \"talent\":\n\t\t\tcase \"warstory\":\n\t\t\t\timg = \"icon-talent-books.png\";\n\t\t\t\tbreak;\n\t\t\tcase \"action\":\n\t\t\t\tif (this.system.actionType) {\n\t\t\t\t\timg = `icon-action-${this.system.actionType}.png`;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\timg = \"icon-action-standard.png\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"armor\":\n\t\t\t\timg = \"icon-armor.png\";\n\t\t\t\tbreak;\n\t\t\tcase \"enchantment\":\n\t\t\t\timg = \"icon-enchantment.png\";\n\t\t\t\tbreak;\n\t\t\tcase \"kit\":\n\t\t\t\timg = \"icon-tools.png\";\n\t\t\t\tbreak;\n\t\t\tcase \"npcattack\":\n\t\t\t\tif (this.system.attackType === \"threaten\") {\n\t\t\t\t\timg = \"icon-display-power.png\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\timg = \"icon-weapon.png\";\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"spell\":\n\t\t\t\timg = \"icon-spells.png\";\n\t\t\t\tbreak;\n\t\t\tcase \"transportation\":\n\t\t\t\timg = \"icon-ride.png\";\n\t\t\t\tbreak;\n\t\t\tcase \"weapon\":\n\t\t\t\timg = \"icon-weapon.png\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (img) {\n\t\t\timg = `${baseDir}/${img}`;\n\t\t\tthis.updateSource({img});\n\t\t}\n\t}\n\n\n\tprepareData() {\n\t\tsuper.prepareData();\n\n\t\tthis.prepareQualities();\n\t\tthis.prepareEffects();\n\n\t\tif (this.type === \"talent\") {\n\t\t\tthis.prepareTalentData();\n\t\t}\n\n\t}\n\n\n\tprepareEffects() {\n\t\tif (!this.type === \"enchantment\") return;\n\t\tif (!this.system.effects) return;\n\n\t\t// These are technically qualities, although referred to as effects in\n\t\t// the source books\n\t\tfor (const quality of this.system.effects.value ?? []) {\n\t\t\tquality.value = Number(quality.value);\n\n\t\t\tquality.label = game.i18n.localize(\n\t\t\t\tCONFIG.CONAN.weaponQualities[quality.type]\n\t\t\t);\n\n\t\t\tif (quality.value) {\n\t\t\t\tconst regex = /X$/i;\n\t\t\t\tquality.label = quality.label.replace(regex, `${quality.value}`);\n\t\t\t}\n\n\t\t\tquality.description = game.i18n.localize(\n\t\t\t\tCONFIG.CONAN.qualitiesDescriptions[quality.type]\n\t\t\t);\n\t\t}\n\t}\n\n\n\tprepareQualities() {\n\t\tif (!this.system.qualities) return;\n\n\t\tif (this.type === \"weapon\") this.system.isShield = this.isShield();\n\n\t\tfor (const quality of this.system.qualities.value ?? []) {\n\t\t\tquality.value = Number(quality.value);\n\n\t\t\tif (this.type === \"armor\") {\n\t\t\t\tquality.label = game.i18n.localize(\n\t\t\t\t\tCONFIG.CONAN.armorQualities[quality.type]\n\t\t\t\t);\n\t\t\t}\n\t\t\telse if ([\"display\", \"npcattack\", \"weapon\"].includes(this.type)) {\n\t\t\t\tquality.label = game.i18n.localize(\n\t\t\t\t\tCONFIG.CONAN.weaponQualities[quality.type]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (quality.value) {\n\t\t\t\tconst regex = /X$/i;\n\t\t\t\tquality.label = quality.label.replace(regex, `${quality.value}`);\n\t\t\t}\n\n\t\t\tquality.description = game.i18n.localize(\n\t\t\t\tCONFIG.CONAN.qualitiesDescriptions[quality.type]\n\t\t\t);\n\t\t}\n\t}\n\n\n\tprepareTalentData() {\n\t\tthis.system.talentIdentifier = conan.utils.generateTalentIdentifier(this);\n\t\tthis.system.multiRank = this.system.rank.max > 1;\n\t}\n\n\n\tasync postItem() {\n\t\tconst templateData = {\n\t\t\tactorId: \"\",\n\t\t\tcanUseItem: false,\n\t\t\tdata: await this.getChatData(),\n\t\t\titem: this.toObject(false),\n\t\t};\n\n\t\tlet tokenId = \"\";\n\n\t\t// Actor doesn't exist if the Post button is used to post the item to chat\n\t\tif (this.actor) {\n\t\t\ttemplateData.actorId = this.actor.id;\n\t\t\ttemplateData.canUseItem = this.actor.canUseItemType(this.type);\n\n\t\t\tif (this.actor.isToken) {\n\t\t\t\ttokenId = this.actor.token.id;\n\t\t\t}\n\t\t}\n\n\t\tconst template = `systems/conan2d20/templates/chat/${this.type}-card.hbs`;\n\t\tconst html = await renderTemplate(template, templateData);\n\n\t\tconst messageStyles = conan.utils.getMessageStyles();\n\n\t\tconst chatData = {\n\t\t\tuser: game.user.id,\n\t\t\tspeaker: null,\n\t\t\ttype: messageStyles.OTHER,\n\t\t\tcontent: html,\n\t\t};\n\n\t\t// Actor doesn\"t exist if the Post button is used to post the item to chat\n\t\tif (this.actor) {\n\t\t\tchatData.speaker = ChatMessage.getSpeaker({\n\t\t\t\tactor: this.actor,\n\t\t\t\ttoken: this.actor.token,\n\t\t\t});\n\t\t}\n\n\t\tChatMessage.create(chatData, {displaySheet: false}).then(msg => {\n\t\t\tmsg.setFlag(\"conan2d20\", \"itemId\", this._id);\n\t\t\tmsg.setFlag(\"conan2d20\", \"tokenId\", tokenId);\n\t\t});\n\t}\n\n\tasync getChatData(htmlOptions = {}) {\n\t\tconst itemType = this.type;\n\n\t\tconst data = this[`_${itemType}ChatData`]();\n\n\t\thtmlOptions = {...htmlOptions, async: true};\n\n\t\tif (data) {\n\t\t\tdata.description.value = await TextEditor.enrichHTML(\n\t\t\t\tdata.description.value,\n\t\t\t\thtmlOptions\n\t\t\t);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tcanCauseDamage() {\n\t\treturn (this.type === \"weapon\"\n\t\t\t\t|| this.type === \"npcattack\"\n\t\t\t\t|| this.type === \"display\"\n\t\t);\n\t}\n\n\tgetQuality(name) {\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\treturn (data.qualities.value ?? []).find(q => q.type === name);\n\t}\n\n\tgetSoak() {\n\t\tconst quality = this.getQuality(\"shieldx\");\n\t\tconst soak = quality !== undefined ? parseInt(quality.value) : 0;\n\t\treturn soak;\n\t}\n\n\tisShield() {\n\t\treturn this.getQuality(\"shieldx\") ? true : false;\n\t}\n\n\ttriggerDamageRoll() {\n\t\tconst options = {\n\t\t\titem: this,\n\t\t};\n\n\t\tnew conan.apps.DamageRoller(this.actor, options).render(true);\n\t}\n\n\ttriggerSoakRoll() {\n\t\tconst options = {\n\t\t\ttype: \"cover\",\n\t\t\titemName: this.name,\n\t\t\tsoak: this.getSoak(),\n\t\t};\n\n\t\tnew conan.apps.SoakDiceRoller(this.actor, options).render(true);\n\t}\n\n\tskillToUse(actorType) {\n\t\t// TODO This could be reworked into a more generic method for returning\n\t\t// the default skill used for any item\n\t\tif (actorType === \"npc\") {\n\t\t\tif (this.system.attackType === \"melee\") {\n\t\t\t\treturn \"cmb\";\n\t\t\t}\n\t\t\telse if (this.system.attackType === \"ranged\") {\n\t\t\t\treturn \"cmb\";\n\t\t\t}\n\t\t\telse if (this.system.attackType === \"threaten\") {\n\t\t\t\treturn \"scl\";\n\t\t\t}\n\t\t}\n\n\t\tif (actorType === \"character\") {\n\t\t\tif (this.system.skillOverride && this.system.skillOverride !== \"\") {\n\t\t\t\treturn this.system.skillOverride;\n\t\t\t}\n\t\t\telse if (this.system.weaponType === \"melee\") {\n\t\t\t\treturn \"mel\";\n\t\t\t}\n\t\t\telse if (this.system.weaponType === \"ranged\") {\n\t\t\t\treturn \"ran\";\n\t\t\t}\n\t\t\telse if (this.type === \"display\") {\n\t\t\t\treturn this.system.skill;\n\t\t\t}\n\t\t\telse if (this.type === \"spell\") {\n\t\t\t\treturn \"sor\";\n\t\t\t}\n\t\t}\n\t}\n\n\t/* -------------------------------------------- */\n\n\t_actionChatData() {\n\t\tif (this.type !== \"action\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create an action chat data for a non-action item\"\n\t\t\t);\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\tconst props = [\n\t\t\tCONFIG.CONAN.actionTypes[data.actionType],\n\t\t];\n\n\n\t\tdata.properties = props.filter(p => p);\n\t\tdata.qualities = [];\n\n\t\tif (data.isMovementAction) {\n\t\t\tdata.qualities.push({\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Item.Action.Movement.label\"),\n\t\t\t\tdescription: game.i18n.localize(\"CONAN.Item.Action.Movement.tooltip\"),\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t_enchantmentChatData() {\n\t\tif (this.type !== \"enchantment\") {\n\t\t\tthrow new Error(\"tried to create a spell chat data for a non-spell item\");\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\t\tconst effects = data.effects.value;\n\t\tconst properties = [];\n\t\tconst details = [];\n\n\t\tconst qualities = [];\n\t\tif ((effects || []).length !== 0) {\n\t\t\tlet effectsObject;\n\t\t\tfor (let i = 0; i < effects.length; i += 1) {\n\t\t\t\tif (effects[i].value) {\n\t\t\t\t\teffectsObject = {\n\t\t\t\t\t\tlabel: `${effects[i].label} ${effects[i].value}`\n\t\t\t\t\t\t\t|| effects[i].label.charAt(0).toUpperCase()\n\t\t\t\t\t\t\t\t+ effects[i].label.slice(1),\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\tCONFIG.CONAN.qualitiesDescriptions[\n\t\t\t\t\t\t\t\teffects[i].label.replace(\" \", \"\").toLowerCase()\n\t\t\t\t\t\t\t] || \"\",\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst labelN = effects[i].label;\n\t\t\t\t\teffectsObject = {\n\t\t\t\t\t\tlabel:\n\t\t\t\t\t\t\tCONFIG.CONAN.weaponQualities[labelN]\n\t\t\t\t\t\t\t\t|| effects[i].label.charAt(0).toUpperCase()\n\t\t\t\t\t\t\t\t\t+ effects[i].label.slice(1),\n\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\tCONFIG.CONAN.qualitiesDescriptions[\n\t\t\t\t\t\t\t\teffects[i].label.replace(\" \", \"\").toLowerCase()\n\t\t\t\t\t\t\t] || \"\",\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tqualities.push(effectsObject);\n\t\t\t}\n\t\t}\n\t\tconst enchantmentType = {\n\t\t\tlabel: \"CONAN.Item.Enchantment.Type.label\",\n\t\t\tdetail: CONFIG.CONAN.enchantmentTypes[data.enchantmentType],\n\t\t};\n\t\tdetails.push(enchantmentType);\n\t\tif (enchantmentType.detail === \"Exploding Powder\") {\n\t\t\tconst enchantmentDamage = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Damage.label\",\n\t\t\t\tdetail: `${data.damage.dice}`,\n\t\t\t};\n\t\t\tconst enchantmentItem = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Item.label\",\n\t\t\t\tdetail:\n\t\t\t\t\tCONFIG.CONAN.enchantmentExplodingItems[data.traits.explodingItem],\n\t\t\t};\n\t\t\tconst enchantmentStrength = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Strength.label\",\n\t\t\t\tdetail: CONFIG.CONAN.enchantmentStrengths[data.traits.strength],\n\t\t\t};\n\t\t\tdetails.push(enchantmentItem);\n\t\t\tdetails.push(enchantmentDamage);\n\t\t\tdetails.push(enchantmentStrength);\n\t\t}\n\t\telse if (enchantmentType.detail === \"Blinding Powder\") {\n\t\t\tconst enchantmentDamage = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Damage.label\",\n\t\t\t\tdetail: `${data.damage.dice}`,\n\t\t\t};\n\t\t\tconst enchantmentStrength = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Strength.label\",\n\t\t\t\tdetail: CONFIG.CONAN.enchantmentBlindingStrengths[data.traits.strength],\n\t\t\t};\n\t\t\tdetails.push(enchantmentStrength);\n\t\t\tdetails.push(enchantmentDamage);\n\t\t}\n\t\telse if (enchantmentType.detail === \"Burning Liquid\") {\n\t\t\tconst enchantmentDamage = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Damage.label\",\n\t\t\t\tdetail: `${data.damage.dice}`,\n\t\t\t};\n\t\t\tconst enchantmentStrength = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Volatility.label\",\n\t\t\t\tdetail: CONFIG.CONAN.enchantmentVolatilities[data.traits.volatility],\n\t\t\t};\n\t\t\tdetails.push(enchantmentDamage);\n\t\t\tdetails.push(enchantmentStrength);\n\t\t}\n\t\telse if (enchantmentType.detail === \"Reinforced Fabric\") {\n\t\t\tconst enchantmentIngredients = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Ingredients.label\",\n\t\t\t\tdetail: data.traits.ingredients,\n\t\t\t};\n\t\t\tconst localize = game.i18n.localize.bind(game.i18n);\n\t\t\tif ((data.damage.hitLocation || []).length !== 0) {\n\t\t\t\tfor (let i = 0; i < data.damage.hitLocation.value.length; i += 1) {\n\t\t\t\t\tproperties.push(\n\t\t\t\t\t\t`${data.damage.hitLocation.value[i]} ${localize(\n\t\t\t\t\t\t\t\"CONAN.Item.Armor.Coverage.label\"\n\t\t\t\t\t\t)}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata.properties = properties.filter(p => p !== null);\n\t\t\tdetails.push(enchantmentIngredients);\n\t\t}\n\t\telse if (enchantmentType.detail === \"Upas-Glass\") {\n\t\t\tconst enchantmentCover = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Cover.label\",\n\t\t\t\tdetail: `${data.damage.dice}`,\n\t\t\t};\n\t\t\tconst enchantmentSize = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Size.label\",\n\t\t\t\tdetail: CONFIG.CONAN.upasGlassSizes[data.traits.size],\n\t\t\t};\n\t\t\tdetails.push(enchantmentSize);\n\t\t\tdetails.push(enchantmentCover);\n\t\t}\n\t\telse if (enchantmentType.detail === \"Talisman\") {\n\t\t\tconst talismanHindrance = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Hindrance.label\",\n\t\t\t\tdetail: data.traits.hindrance,\n\t\t\t};\n\t\t\tconst talismanType = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.Talisman.label\",\n\t\t\t\tdetail: CONFIG.CONAN.enchantmentTalismanTypes[data.traits.talismanType],\n\t\t\t};\n\t\t\tdetails.push(talismanHindrance);\n\t\t\tdetails.push(talismanType);\n\t\t}\n\t\telse {\n\t\t\tconst enchantmentUse = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.LotusPollenUse.label\",\n\t\t\t\tdetail: CONFIG.CONAN.lotusPollenUses[data.traits.lotusPollenUse],\n\t\t\t};\n\t\t\tconst enchantmentColor = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.LotusPollenColor.label\",\n\t\t\t\tdetail: CONFIG.CONAN.lotusPollenColors[data.traits.lotusPollenColor],\n\t\t\t};\n\t\t\tconst enchantmentForm = {\n\t\t\t\tlabel: \"CONAN.Item.Enchantment.LotusPollenForm.label\",\n\t\t\t\tdetail: CONFIG.CONAN.lotusPollenForms[data.traits.lotusPollenForm],\n\t\t\t};\n\t\t\tdetails.push(enchantmentUse);\n\t\t\tdetails.push(enchantmentColor);\n\t\t\tdetails.push(enchantmentForm);\n\t\t}\n\n\t\tdata.itemDetails = details.filter(p => p !== null);\n\t\tdata.qualities = qualities.filter(p => !!p);\n\n\t\treturn data;\n\t}\n\n\t_homelandChatData() {\n\t\tif (this.type !== \"homeland\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create homeland chat data for a non-homeland item\"\n\t\t\t);\n\t\t}\n\t\tconst data = foundry.utils.duplicate(this.system);\n\t\treturn data;\n\t}\n\n\t_spellChatData() {\n\t\tif (this.type !== \"spell\") {\n\t\t\tthrow new Error(\"tried to create a spell chat data for a non-spell item\");\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\t\tconst details = [];\n\n\t\tif (data.difficulty.includes) {\n\t\t\tconst difficultyIncludes = {\n\t\t\t\tlabel: \"CONAN.difficultyIncludesLabel\",\n\t\t\t\tdetail: data.difficulty.includes,\n\t\t\t};\n\t\t\tdetails.push(difficultyIncludes);\n\t\t}\n\n\t\tif (data.duration) {\n\t\t\tconst duration = {\n\t\t\t\tlabel: \"CONAN.spellDurationLabel\",\n\t\t\t\tdetail: data.duration,\n\t\t\t};\n\t\t\tdetails.push(duration);\n\t\t}\n\n\t\tif (data.cost) {\n\t\t\tconst cost = {\n\t\t\t\tlabel: \"CONAN.spellCostLabel\",\n\t\t\t\tdetail: data.cost,\n\t\t\t};\n\t\t\tdetails.push(cost);\n\t\t}\n\n\t\tif (data.notes) {\n\t\t\tconst notes = {\n\t\t\t\tlabel: \"CONAN.spellNotesHeader\",\n\t\t\t\tdetail: data.notes,\n\t\t\t};\n\t\t\tdetails.push(notes);\n\t\t}\n\n\t\tdata.itemDetails = details.filter(p => p !== null);\n\n\t\treturn data;\n\t}\n\n\t_armorChatData() {\n\t\tif (this.type !== \"armor\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create an armor chat data for a non-armor item\"\n\t\t\t);\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\tdata.itemDetails = [];\n\t\tdata.properties = [];\n\t\tdata.qualities = data.qualities.value;\n\n\t\tdata.itemDetails.push({\n\t\t\tlabel: \"CONAN.Item.Armor.Type.label\",\n\t\t\tdetail: CONFIG.CONAN.armorTypes[data.armorType],\n\t\t});\n\t\tdata.itemDetails.push({\n\t\t\tlabel: \"CONAN.Item.Armor.Soak.label\",\n\t\t\tdetail: `${data.soak}`,\n\t\t});\n\n\t\tfor (const location of data.coverage.value) {\n\t\t\tdata.properties.push(CONFIG.CONAN.coverageTypes[location]);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t_kitChatData() {\n\t\tif (this.type !== \"kit\") {\n\t\t\tthrow new Error(\"tried to create a kit chat data for a non-kit item\");\n\t\t}\n\n\t\tconst localize = game.i18n.localize.bind(game.i18n);\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\tdata.kitTypeString = CONFIG.CONAN.kitTypes[data.kitType];\n\n\t\tdata.properties = [\n\t\t\tdata.kitTypeString,\n\t\t\t`${data.uses.value}/${data.uses.max} ${localize(\"CONAN.kitUsesLabel\")}`,\n\t\t];\n\t\tdata.qualities = [];\n\n\t\tdata.hasCharges = data.uses.value >= 0;\n\n\t\treturn data;\n\t}\n\n\t_transportationChatData() {\n\t\tif (this.type !== \"transportation\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create a transportation chat data for a non-transpo item\"\n\t\t\t);\n\t\t}\n\n\t\tconst details = [];\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\tif (data.category) {\n\t\t\tconst category = {\n\t\t\t\tlabel: \"CONAN.Item.Transportation.Category.label\",\n\t\t\t\tdetail: CONFIG.CONAN.transpoCategories[data.category],\n\t\t\t};\n\t\t\tdetails.push(category);\n\t\t}\n\t\tif (data.transpoType) {\n\t\t\tlet ttype;\n\t\t\tif (data.category === \"mounts\") {\n\t\t\t\tttype = {\n\t\t\t\t\tlabel: \"CONAN.Item.Transportation.Type.label\",\n\t\t\t\t\tdetail: CONFIG.CONAN.transpoMountTypes[data.transpoType],\n\t\t\t\t};\n\t\t\t}\n\t\t\telse if (data.category === \"carts\") {\n\t\t\t\tttype = {\n\t\t\t\t\tlabel: \"CONAN.Item.Transportation.Type.label\",\n\t\t\t\t\tdetail: CONFIG.CONAN.transpoCartTypes[data.transpoType],\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tttype = {\n\t\t\t\t\tlabel: \"CONAN.Item.Transportation.Type.label\",\n\t\t\t\t\tdetail: CONFIG.CONAN.transpoBoatTypes[data.transpoType],\n\t\t\t\t};\n\t\t\t}\n\t\t\tdetails.push(ttype);\n\t\t}\n\t\tif (data.passengers.max) {\n\t\t\tconst capacity = {\n\t\t\t\tlabel: \"CONAN.Item.Transportation.PassengerCapacity.label\",\n\t\t\t\tdetail: String(data.passengers.max),\n\t\t\t};\n\t\t\tdetails.push(capacity);\n\t\t}\n\t\tif (data.capabilities !== \"\") {\n\t\t\tconst capabilities = {\n\t\t\t\tlabel: \"CONAN.Item.Transportation.Capabilities.label\",\n\t\t\t\tdetail: CONFIG.CONAN.transpoCapabilities[data.capabilities],\n\t\t\t};\n\t\t\tdetails.push(capabilities);\n\t\t}\n\t\tif (data.animals !== \"\") {\n\t\t\tconst animals = {\n\t\t\t\tlabel: \"CONAN.Item.Transportation.Animals.label\",\n\t\t\t\tdetail: CONFIG.CONAN.transpoAnimals[data.animals],\n\t\t\t};\n\t\t\tdetails.push(animals);\n\t\t}\n\n\t\tdata.itemDetails = details.filter(p => p !== null);\n\n\t\treturn data;\n\t}\n\n\t_talentChatData() {\n\t\tif (this.type !== \"talent\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create a talent chat data for a non-talent item\"\n\t\t\t);\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\tconst props = [\n\t\t\tdata.talentType ? CONFIG.CONAN.talentTypes[data.talentType] : null,\n\t\t\tCONFIG.CONAN.skills[data.linkedSkill],\n\t\t\tdata.rank.max > 1\n\t\t\t\t? `Rank ${data.rank.value || 1}/${data.rank.max || 1}`\n\t\t\t\t: null,\n\t\t];\n\n\t\tdata.properties = props.filter(p => p);\n\n\t\treturn data;\n\t}\n\n\t_weaponChatData() {\n\t\tif (this.type !== \"weapon\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create a weapon chat data for a non-weapon item\"\n\t\t\t);\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\tconst qualities = data.qualities.value;\n\t\tconst properties = [];\n\t\tconst details = [];\n\n\t\tconst shield = qualities.find(q => q.type === \"shieldx\");\n\t\tif (shield) {\n\t\t\tdata.hasShieldSoak = true;\n\t\t\tdata.shieldSoak = parseInt(shield.value) ?? 1;\n\t\t}\n\n\t\tconst weaponDamage = {\n\t\t\tlabel: \"CONAN.Item.Weapon.BaseDamage.label\",\n\t\t\tdetail: `${data.damage.dice}`,\n\t\t};\n\t\tdetails.push(weaponDamage);\n\n\t\tlet weaponRange;\n\t\tif (data.weaponType === \"ranged\") {\n\t\t\tweaponRange = {\n\t\t\t\tlabel: \"CONAN.Item.Weapon.Range.label\",\n\t\t\t\tdetail: CONFIG.CONAN.weaponRanges[data.range],\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tweaponRange = {\n\t\t\t\tlabel: \"CONAN.Item.Weapon.Reach.label\",\n\t\t\t\tdetail: CONFIG.CONAN.weaponReaches[data.range],\n\t\t\t};\n\t\t}\n\t\tdetails.push(weaponRange);\n\n\t\tif (data.size) {\n\t\t\tproperties.push(CONFIG.CONAN.weaponSizes[data.size]);\n\t\t}\n\n\t\tdata.properties = properties.filter(p => !!p);\n\t\tdata.itemDetails = details.filter(p => p !== null);\n\t\tdata.qualities = qualities.filter(p => !!p);\n\n\t\treturn data;\n\t}\n\n\t_npcattackChatData() {\n\t\tif (this.type !== \"npcattack\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create an NPC Attack chat data for an incorrect item\"\n\t\t\t);\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\t\tconst qualities = data.qualities.value;\n\t\tconst details = [];\n\n\t\tfor (const quality of qualities) {\n\t\t\tif (quality.type === \"shieldx\") {\n\t\t\t\tdata.hasShieldSoak = true;\n\t\t\t\tdata.shieldSoak = parseInt(quality.value) || 1;\n\t\t\t}\n\t\t}\n\n\t\tconst attackDamage = {\n\t\t\tlabel: \"CONAN.damageLabel\",\n\t\t\tdetail: `${data.damage.dice}`,\n\t\t};\n\t\tdetails.push(attackDamage);\n\n\t\tconst attackType = {\n\t\t\tlabel: \"CONAN.Item.NpcAttack.DamageType.label\",\n\t\t\tdetail: CONFIG.CONAN.damageTypes[data.damage.type],\n\t\t};\n\t\tdetails.push(attackType);\n\n\t\tlet attackRange;\n\t\tif (data.attackType === \"ranged\") {\n\t\t\tattackRange = {\n\t\t\t\tlabel: \"CONAN.rangeLabel\",\n\t\t\t\tdetail: CONFIG.CONAN.weaponRanges[data.range],\n\t\t\t};\n\t\t}\n\t\telse if (data.attackType === \"threaten\") {\n\t\t\tattackRange = {\n\t\t\t\tlabel: \"CONAN.rangeLabel\",\n\t\t\t\tdetail: CONFIG.CONAN.weaponRanges[data.range],\n\t\t\t};\n\t\t}\n\t\telse {\n\t\t\tattackRange = {\n\t\t\t\tlabel: \"CONAN.reachLabel\",\n\t\t\t\tdetail: CONFIG.CONAN.weaponReaches[data.range],\n\t\t\t};\n\t\t}\n\t\tdetails.push(attackRange);\n\n\t\tdata.itemDetails = details.filter(p => p !== null);\n\t\tdata.qualities = qualities.filter(p => !!p);\n\n\t\treturn data;\n\t}\n\n\t_miscellaneousChatData() {\n\t\tif (this.type !== \"miscellaneous\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create an miscellaneous chat data for a non-miscellaneous item\"\n\t\t\t);\n\t\t}\n\t\tconst data = foundry.utils.duplicate(this.system);\n\t\treturn data;\n\t}\n\n\t_npcactionChatData() {\n\t\tif (this.type !== \"npcaction\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create an npcaction chat data for a non-npcaction item\"\n\t\t\t);\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\tconst props = [CONFIG.CONAN.npcActionTypes[data.actionType]];\n\n\t\tdata.properties = props.filter(p => p);\n\t\tdata.qualities = [];\n\n\t\treturn data;\n\t}\n\n\t_displayChatData() {\n\t\tif (this.type !== \"display\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"tried to create a display chat data for a non-display item\"\n\t\t\t);\n\t\t}\n\n\t\tconst data = foundry.utils.duplicate(this.system);\n\n\t\tconst qualities = data.qualities.value;\n\t\tconst properties = [];\n\t\tconst details = [];\n\n\t\tconst displaySkill = {\n\t\t\tlabel: \"CONAN.Item.Display.Skill.label\",\n\t\t\tdetail: CONFIG.CONAN.skills[data.skill],\n\t\t};\n\t\tdetails.push(displaySkill);\n\n\t\tconst damageDice = data.damage.special\n\t\t\t? \"X\"\n\t\t\t: `${data.damage.dice}`;\n\n\t\tconst displayDamage = {\n\t\t\tlabel: \"CONAN.Item.Display.BaseDamage.label\",\n\t\t\tdetail: damageDice,\n\t\t};\n\t\tdetails.push(displayDamage);\n\n\t\tconst displayRange = {\n\t\t\tlabel: \"CONAN.rangeLabel\",\n\t\t\tdetail: CONFIG.CONAN.weaponRanges[data.range],\n\t\t};\n\t\tdetails.push(displayRange);\n\n\t\tdata.properties = properties.filter(p => !!p);\n\t\tdata.itemDetails = details.filter(p => p !== null);\n\t\tdata.qualities = qualities.filter(p => !!p);\n\n\t\treturn data;\n\t}\n}\n","export default class ConanBaseItemSheet extends ItemSheet {\n\n\t/** @inheritdoc */\n\tstatic get defaultOptions() {\n\t\tconst options = super.defaultOptions;\n\n\t\tfoundry.utils.mergeObject(options, {\n\t\t\tclasses: options.classes.concat([\"conan2d20\", \"item\", \"sheet\"]),\n\t\t\twidth: 700,\n\t\t\theight: 505,\n\t\t\ttemplate: \"systems/conan2d20/templates/items/item-sheet.hbs\",\n\t\t\tresizable: false,\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tnavSelector: \".sheet-tabs\",\n\t\t\t\t\tcontentSelector: \".sheet-body\",\n\t\t\t\t\tinitial: \"description\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tscrollY: [\n\t\t\t\t\".requirement-table\",\n\t\t\t],\n\t\t});\n\t\treturn options;\n\t}\n\n\t/** @inheritdoc */\n\tget title() {\n\t\treturn `[${this.item.type}] ${this.item.name}`;\n\t}\n\n\t/**\n\t * Deletes an Item/Skill choice from this item, using the data stored\n\t * on the target element\n\t *\n\t * @param {event} Event The triggered event\n\t */\n\t_deleteChoiceItem(event) {\n\t\tif (!this.isEditable) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst deleteUuid = $(event.currentTarget).data(\"uuid\");\n\t\tconst choicesKey = $(event.currentTarget).data(\"choices-key\");\n\n\t\tconst currentChoices = this.item.system[choicesKey].choices ?? [];\n\n\t\tconst newChoices = [];\n\t\tfor (const itemUuid of currentChoices) {\n\t\t\tif (itemUuid === deleteUuid) continue;\n\t\t\tnewChoices.push(itemUuid);\n\t\t}\n\n\t\tconst dataKey = `system.${choicesKey}.choices`;\n\t\tthis.item.update({[dataKey]: newChoices});\n\t}\n\n\t/** @inheritdoc */\n\t_getHeaderButtons() {\n\t\tlet buttons = super._getHeaderButtons();\n\n\t\t// Add \"Post to chat\" button\n\t\tbuttons = [\n\t\t\t{\n\t\t\t\tlabel: \"Post\",\n\t\t\t\tclass: \"post\",\n\t\t\t\ticon: \"fas fa-comment\",\n\t\t\t\tonclick: ev => this.item.postItem(ev),\n\t\t\t},\n\t\t].concat(buttons);\n\n\t\treturn buttons;\n\t}\n\n\t_onAddTalentRequirement(event) {\n\t\tif (!this.isEditable) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tnew conan.apps.TalentRequirementEditor(this.item).render(true);\n\t}\n\n\t/** @inheritdoc */\n\tasync _onChangeInput(event) {\n\t\tconst choicesKey = $(event.currentTarget).data(\"choices-key\");\n\t\tconst isItem = $(event.currentTarget).data(\"is-item\") === \"true\";\n\n\t\t// We only have to do something special if we're handling a multi-choice\n\t\t// datalist\n\t\t//\n\t\tif (event.target.list && choicesKey) {\n\t\t\tconst options = event.target.list.options;\n\t\t\tconst value = event.target.value;\n\n\t\t\tlet uuid = null;\n\t\t\tfor (const option of options) {\n\t\t\t\tif (option.value === value) {\n\t\t\t\t\tuuid = option.getAttribute(\"data-uuid\");\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (uuid === null) return;\n\n\t\t\tconst currentChoices = this.item.system[choicesKey].choices ?? [];\n\n\t\t\tif (currentChoices.includes(uuid)) return; // No duplicates\n\n\t\t\tcurrentChoices.push(uuid);\n\n\t\t\tconst choiceItems = [];\n\t\t\tfor (const itemUuid of currentChoices) {\n\t\t\t\tif (isItem) {\n\t\t\t\t\tchoiceItems.push(await fromUuid(itemUuid));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tchoiceItems.push(itemUuid);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isItem) {\n\t\t\t\tchoiceItems.sort((a, b) => a.name.localeCompare(b.name));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tchoiceItems.sort((a, b) => a.localeCompare(b));\n\t\t\t}\n\n\t\t\tconst sortedChoiceUuids = isItem\n\t\t\t\t? choiceItems.map(item => item.uuid)\n\t\t\t\t: choiceItems;\n\n\t\t\treturn this.item.update({[event.target.name]: sortedChoiceUuids});\n\t\t}\n\n\t\treturn this._onSubmit(event);\n\t}\n\n\tasync _onDeleteTalentRequirement(event) {\n\t\tif (this.item.type !== \"talent\") return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst requirementIndex = Number(\n\t\t\tevent.currentTarget.getAttribute(\"data-requirement-index\")\n\t\t);\n\n\t\tif (Number.isInteger(requirementIndex)) {\n\t\t\tconst requirements = this.item?.system?.requirements ?? [];\n\t\t\tconst newRequirements = [];\n\t\t\tfor (let i = 0; i < requirements.length; i++) {\n\t\t\t\tif (i === requirementIndex) continue;\n\t\t\t\tnewRequirements.push(requirements[i]);\n\t\t\t}\n\n\t\t\tthis.item.update({\"system.requirements\": newRequirements});\n\t\t}\n\t}\n\n\tasync _onEditTalentRequirement(event) {\n\t\tif (this.item.type !== \"talent\") return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst editIndex = Number(\n\t\t\tevent.currentTarget.getAttribute(\"data-requirement-index\")\n\t\t);\n\n\t\tif (Number.isInteger(editIndex)) {\n\t\t\tnew conan.apps.TalentRequirementEditor(this.item, {editIndex}).render(true);\n\t\t}\n\t}\n\n\t/** @inheritdoc */\n\t_onSubmit(event) {\n\t\tswitch (this.item.type) {\n\t\t\tcase \"archetype\": {\n\t\t\t\tconst updateData = this._getSubmitData();\n\n\t\t\t\tdelete updateData[\"system.careerSkill.choices\"];\n\t\t\t\tdelete updateData[\"system.electiveSkill.choices\"];\n\t\t\t\tdelete updateData[\"system.mandatorySkill.choices\"];\n\t\t\t\tdelete updateData[\"system.careerTalent.choices\"];\n\n\t\t\t\tthis.item.update(updateData);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"aspect\": {\n\t\t\t\tconst updateData = this._getSubmitData();\n\n\t\t\t\tdelete updateData[\"system.mandatoryAttribute.choices\"];\n\t\t\t\tdelete updateData[\"system.optionalAttribute.choices\"];\n\n\t\t\t\tthis.item.update(updateData);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"caste\": {\n\t\t\t\tconst updateData = this._getSubmitData();\n\n\t\t\t\tdelete updateData[\"system.story.choices\"];\n\t\t\t\tdelete updateData[\"system.talent.choices\"];\n\n\t\t\t\tthis.item.update(updateData);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"education\": {\n\t\t\t\tconst updateData = this._getSubmitData();\n\n\t\t\t\tdelete updateData[\"system.electiveSkill.choices\"];\n\t\t\t\tdelete updateData[\"system.mandatorySkill.choices\"];\n\n\t\t\t\tthis.item.update(updateData);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"homeland\": {\n\t\t\t\tconst updateData = this._getSubmitData();\n\n\t\t\t\tdelete updateData[\"system.language.choices\"];\n\t\t\t\tdelete updateData[\"system.talent.choices\"];\n\n\t\t\t\tthis.item.update(updateData);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"nature\": {\n\t\t\t\tconst updateData = this._getSubmitData();\n\n\t\t\t\tdelete updateData[\"system.electiveSkill.choices\"];\n\t\t\t\tdelete updateData[\"system.mandatorySkill.choices\"];\n\n\t\t\t\tthis.item.update(updateData);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"npcattack\": {\n\t\t\t\tconst updateData = this._getSubmitData();\n\n\t\t\t\tif (updateData[\"system.attackType\"] === \"threaten\") {\n\t\t\t\t\tupdateData[\"system.damage.type\"] = \"mental\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tupdateData[\"system.damage.type\"] = \"physical\";\n\t\t\t\t}\n\n\t\t\t\tthis.item.update(updateData);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"warstory\": {\n\t\t\t\tconst updateData = this._getSubmitData();\n\n\t\t\t\tdelete updateData[\"system.skills.choices\"];\n\n\t\t\t\tthis.item.update(updateData);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tsuper._onSubmit(event);\n\t\t}\n\t}\n\n\t/** @inheritdoc */\n\tactivateListeners(html) {\n\t\t// add row to spell alternate effects\n\t\thtml.find(\".alt-row-add\").click(event => this.insertAltRow(event));\n\n\t\t// delete row from spell alternate effects\n\t\thtml.find(\".alt-row-delete\").click(event => this.deleteAltRow(event));\n\n\t\thtml.find(\".delete-choice\").click(event => this._deleteChoiceItem(event));\n\n\t\t// save checkbox changes\n\t\thtml.find(\"input[type=\\\"checkbox\\\"]\").change(event => this._onSubmit(event));\n\n\t\t// activate trait selector\n\t\thtml.find(\".trait-selector\").click(event => this.onTraitSelector(event));\n\n\t\t// add row to spell momentum spends\n\t\thtml.find(\".spend-row-add\").click(event => this.insertSpendRow(event));\n\n\t\t// delete row from spell momentum spends\n\t\thtml.find(\".spend-row-delete\").click(event => this.deleteSpendRow(event));\n\n\t\thtml.find(\".add-talent-requirement\").click(event => this._onAddTalentRequirement(event));\n\t\thtml.find(\".item-delete-requirement\").click(event => this._onDeleteTalentRequirement(event));\n\t\thtml.find(\".item-edit-requirement\").click(event => this._onEditTalentRequirement(event));\n\n\t\tsuper.activateListeners(html);\n\t}\n\n\tdeleteAltRow(_event) {\n\t\ttry {\n\t\t\tconst table = document.getElementById(\"altEffects\");\n\t\t\tconst toDelete = table.rows.length - 1;\n\t\t\tconst key = `system.effects.alternative.-=${[toDelete]}`;\n\t\t\tthis.item.update({[key]: null});\n\t\t}\n\t\tcatch(e) {\n\t\t\tui.notifications.error(e);\n\t\t}\n\t}\n\n\tdeleteSpendRow(_event) {\n\t\ttry {\n\t\t\tconst table = document.getElementById(\"spellSpends\");\n\t\t\tconst toDelete = table.rows.length - 1;\n\t\t\tconst key = `system.effects.momentum.-=${[toDelete]}`;\n\t\t\tthis.item.update({[key]: null});\n\t\t}\n\t\tcatch(e) {\n\t\t\tui.notifications.error(e);\n\t\t}\n\t}\n\n\t/** @inheritdoc */\n\tasync getData(options) {\n\t\tconst data = await super.getData(options);\n\n\t\tconst {type} = this.item;\n\n\t\tfoundry.utils.mergeObject(data, {\n\t\t\tCONFIG: CONFIG.CONAN,\n\t\t\tdetailsTemplate: () => `items/${type}-details`,\n\t\t\trequirementsTemplate: () => `items/${type}-requirements`,\n\t\t\tsidebarTemplate: () => `items/${type}-sidebar`,\n\t\t\thasNoDetails: [\n\t\t\t\t\"language\",\n\t\t\t\t\"miscellaneous\",\n\t\t\t].includes(type),\n\t\t\thasRequirements: type === \"talent\",\n\t\t\thasSidebar: [\n\t\t\t\t\"armor\",\n\t\t\t\t\"kit\",\n\t\t\t\t\"miscellaneous\",\n\t\t\t\t\"transportation\",\n\t\t\t\t\"weapon\",\n\t\t\t].includes(type),\n\t\t});\n\n\t\tdata.descriptionHTML = await TextEditor.enrichHTML(\n\t\t\tthis.item.system.description.value,\n\t\t\t{\n\t\t\t\tasync: true,\n\t\t\t}\n\t\t);\n\n\t\tswitch (type) {\n\t\t\tcase \"archetype\": await this.getArchetypeConfigs(data); break;\n\t\t\tcase \"aspect\": await this.getBackgroundAttributeConfigs(data); break;\n\t\t\tcase \"caste\": await this.getCasteData(data); break;\n\t\t\tcase \"education\": await this.getBackgroundSkillConfigs(data); break;\n\t\t\tcase \"homeland\": await this.getHomelandData(data); break;\n\t\t\tcase \"nature\": await this.getBackgroundSkillConfigs(data); break;\n\t\t\tcase \"talent\": await this.getTalentData(data); break;\n\t\t\tcase \"warstory\": await this.getSkillsConfig(data); break;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * Creates the configurations required for some classes of items which\n\t * have both Mandatory Skills and Elective Skill choices\n\t *\n\t * @param {data} Object Item Sheet context data being created by getData()\n\t * @returns {Promise}\n\t */\n\tasync getArchetypeConfigs(data) {\n\t\tawait this.getBackgroundSkillConfigs(data);\n\n\t\t// Elective Skills\n\t\t//\n\t\tconst [selectedCareerSkills, availableCareerSkills] =\n\t\t\tconan.utils.getDedupedSelectedSkills(\n\t\t\t\tCONFIG.CONAN.sortedSkills,\n\t\t\t\tthis.item.system.careerSkill.choices ?? []\n\t\t\t);\n\n\t\tdata.careerSkillsConfig = {\n\t\t\tavailableItems: availableCareerSkills,\n\t\t\tchoicesKey: \"careerSkill\",\n\t\t\tisItem: false,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.CareerSkill.label\"),\n\t\t\tname: \"system.careerSkill.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.CareerSkill.prompt\"),\n\t\t\tselectedItems: selectedCareerSkills,\n\t\t};\n\n\t\tconst [selectedTalents, availableTalents] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.skillTalents(false),\n\t\t\t\tthis.item.system.careerTalent.choices ?? []\n\t\t\t);\n\n\t\tdata.careerTalentConfig = {\n\t\t\tavailableItems: availableTalents,\n\t\t\tchoicesKey: \"careerTalent\",\n\t\t\tisItem: true,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.Archetype.CareerTalent.label\"),\n\t\t\tname: \"system.careerTalent.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.Archetype.CareerTalent.prompt\"),\n\t\t\tselectedItems: selectedTalents,\n\t\t};\n\t}\n\n\t/**\n\t * Creates configurations data required for caste item sheets\n\t *\n\t * @param {data} Object Item Sheet context data being created by getData()\n\t * @returns {Promise}\n\t */\n\tasync getCasteData(data) {\n\t\t// Caste Talents\n\t\tconst [selectedTalents, availableTalents] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.casteTalents(false),\n\t\t\t\tthis.item.system.talent.choices ?? []\n\t\t\t);\n\n\t\tdata.casteTalentConfig = {\n\t\t\tavailableItems: availableTalents,\n\t\t\tchoicesKey: \"talent\",\n\t\t\tisItem: true,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.Caste.Talents.label\"),\n\t\t\tname: \"system.talent.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.Caste.Talents.prompt\"),\n\t\t\tselectedItems: selectedTalents,\n\t\t};\n\n\t\t// Caste Stories\n\t\tconst [selectedStories, availableStories] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.stories(false),\n\t\t\t\tthis.item.system.story.choices ?? []\n\t\t\t);\n\n\t\tdata.casteStoriesConfig = {\n\t\t\tavailableItems: availableStories,\n\t\t\tchoicesKey: \"story\",\n\t\t\tisItem: true,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.Caste.Stories.label\"),\n\t\t\tname: \"system.story.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.Caste.Stories.prompt\"),\n\t\t\tselectedItems: selectedStories,\n\t\t};\n\t}\n\n\t/**\n\t * Creates configurations data required for homeland item sheets\n\t *\n\t * @param {data} Object Item Sheet context data being created by getData()\n\t * @returns {Promise}\n\t */\n\tasync getHomelandData(data) {\n\t\t// Homeland Talents\n\t\tconst [selectedTalents, availableTalents] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.homelandTalents(false),\n\t\t\t\tthis.item.system.talent.choices ?? []\n\t\t\t);\n\n\t\tdata.homelandTalentConfig = {\n\t\t\tavailableItems: availableTalents,\n\t\t\tchoicesKey: \"talent\",\n\t\t\tisItem: true,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.Homeland.Talents.label\"),\n\t\t\tname: \"system.talent.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.Homeland.Talents.prompt\"),\n\t\t\tselectedItems: selectedTalents,\n\t\t};\n\n\t\t// Homeland Languages\n\t\tconst [selectedLanguages, availableLanguages] =\n\t\t\tawait conan.utils.getDedupedSelectedItems(\n\t\t\t\tawait conan.compendiums.languages(false),\n\t\t\t\tthis.item.system.language.choices ?? []\n\t\t\t);\n\n\t\tdata.homelandLanguageConfig = {\n\t\t\tavailableItems: availableLanguages,\n\t\t\tchoicesKey: \"language\",\n\t\t\tisItem: true,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.Homeland.Languages.label\"),\n\t\t\tname: \"system.language.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.Homeland.Languages.prompt\"),\n\t\t\tselectedItems: selectedLanguages,\n\t\t};\n\t}\n\n\t/**\n\t * Creates the configurations required for some classes of items which\n\t * have both Mandatory and Optional Attribute choices\n\t *\n\t * @param {data} Object Item Sheet context data being created by getData()\n\t * @returns {Promise}\n\t */\n\tasync getBackgroundAttributeConfigs(data) {\n\t\t// Optional Attributes\n\t\t//\n\t\tconst [selectedOptionalAttributes, availableOptionalAttributes] =\n\t\t\tconan.utils.getDedupedSelectedAttributes(\n\t\t\t\tCONFIG.CONAN.sortedAttributes,\n\t\t\t\tthis.item.system.optionalAttribute.choices ?? []\n\t\t\t);\n\n\t\tdata.optionalAttributesConfig = {\n\t\t\tavailableItems: availableOptionalAttributes,\n\t\t\tchoicesKey: \"optionalAttribute\",\n\t\t\tisItem: false,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.OptionalAttributes.label\"),\n\t\t\tname: \"system.optionalAttribute.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.OptionalAttributes.prompt\"),\n\t\t\tselectedItems: selectedOptionalAttributes,\n\t\t};\n\n\t\t// Mandatory Attributes\n\t\t//\n\t\tconst [selectedMandatoryAttributes, availableMandatoryAttributes] =\n\t\t\tconan.utils.getDedupedSelectedAttributes(\n\t\t\t\tCONFIG.CONAN.sortedAttributes,\n\t\t\t\tthis.item.system.mandatoryAttribute.choices ?? []\n\t\t\t);\n\n\t\tdata.mandatoryAttributesConfig = {\n\t\t\tavailableItems: availableMandatoryAttributes,\n\t\t\tchoicesKey: \"mandatoryAttribute\",\n\t\t\tisItem: false,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.MandatoryAttributes.label\"),\n\t\t\tname: \"system.mandatoryAttribute.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.MandatoryAttributes.prompt\"),\n\t\t\tselectedItems: selectedMandatoryAttributes,\n\t\t};\n\t}\n\n\t/**\n\t * Creates the configurations required for some classes of items which\n\t * have both Mandatory Skills and Elective Skill choices\n\t *\n\t * @param {data} Object Item Sheet context data being created by getData()\n\t * @returns {Promise}\n\t */\n\tasync getBackgroundSkillConfigs(data) {\n\t\t// Elective Skills\n\t\t//\n\t\tconst [selectedElectiveSkills, availableElectiveSkills] =\n\t\t\tconan.utils.getDedupedSelectedSkills(\n\t\t\t\tCONFIG.CONAN.sortedSkills,\n\t\t\t\tthis.item.system.electiveSkill.choices ?? []\n\t\t\t);\n\n\t\tdata.electiveSkillsConfig = {\n\t\t\tavailableItems: availableElectiveSkills,\n\t\t\tchoicesKey: \"electiveSkill\",\n\t\t\tisItem: false,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.ElectiveSkills.label\"),\n\t\t\tname: \"system.electiveSkill.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.ElectiveSkills.prompt\"),\n\t\t\tselectedItems: selectedElectiveSkills,\n\t\t};\n\n\t\t// Mandatory Skills\n\t\t//\n\t\tconst [selectedMandatorySkills, availableMandatorySkills] =\n\t\t\tconan.utils.getDedupedSelectedSkills(\n\t\t\t\tCONFIG.CONAN.sortedSkills,\n\t\t\t\tthis.item.system.mandatorySkill.choices ?? []\n\t\t\t);\n\n\t\tdata.mandatorySkillsConfig = {\n\t\t\tavailableItems: availableMandatorySkills,\n\t\t\tchoicesKey: \"mandatorySkill\",\n\t\t\tisItem: false,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.MandatorySkills.label\"),\n\t\t\tname: \"system.mandatorySkill.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.MandatorySkills.prompt\"),\n\t\t\tselectedItems: selectedMandatorySkills,\n\t\t};\n\t}\n\n\t/**\n\t * Creates the configuration required for some classes of items which\n\t * have a single Skill Improvement selector\n\t *\n\t * @param {data} Object Item Sheet context data being created by getData()\n\t * @returns {Promise}\n\t */\n\tasync getSkillsConfig(data) {\n\t\tconst [selectedSkills, availableSkills] =\n\t\t\tconan.utils.getDedupedSelectedSkills(\n\t\t\t\tCONFIG.CONAN.sortedSkills,\n\t\t\t\tthis.item.system.skills.choices ?? []\n\t\t\t);\n\n\t\tdata.skillImprovementsConfig = {\n\t\t\tavailableItems: availableSkills,\n\t\t\tchoicesKey: \"skills\",\n\t\t\tisItem: false,\n\t\t\tlabel: game.i18n.localize(\"CONAN.Item.SkillImprovements.label\"),\n\t\t\tname: \"system.skills.choices\",\n\t\t\tprompt: game.i18n.localize(\"CONAN.Item.SkillImprovements.prompt\"),\n\t\t\tselectedItems: selectedSkills,\n\t\t};\n\t}\n\n\tasync getTalentData(data) {\n\t\tdata.requirements = foundry.utils.duplicate(data.data?.system?.requirements ?? []);\n\t\tfor (const requirement of data.requirements) {\n\t\t\tif (requirement.type === \"talent\") {\n\t\t\t\trequirement.showMin = requirement.talents.length > requirement.min;\n\n\t\t\t\tfor (const talent of requirement.talents) {\n\t\t\t\t\tconst requiredTalent = (await conan.compendiums.talents(undefined, false)).find(\n\t\t\t\t\t\tt => t.uuid === talent.uuid\n\t\t\t\t\t);\n\n\t\t\t\t\tif (!requiredTalent) {\n\t\t\t\t\t\tui.notifications.error(\n\t\t\t\t\t\t\tgame.i18n.format(\"CONAN.Item.Talent.Error.RequiredTalentMissing\",\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttalentName: this.item.name,\n\t\t\t\t\t\t\t\t\tmissingUuid: talent.uuid,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t{ permanent: true }\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\ttalent.name = requiredTalent?.name ?? \"ERROR: MISSING TALENT\";\n\t\t\t\t\ttalent.showRequiredRanks = talent.rank > 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tinsertAltRow(_event) {\n\t\ttry {\n\t\t\tconst table = document.getElementById(\"altEffects\");\n\t\t\tconst itemId = this.item._id;\n\t\t\tconst index = table.rows.length - 1;\n\t\t\tconst key = `system.effects.alternative.${[index + 1]}`;\n\t\t\tthis.item.update({\n\t\t\t\tid: itemId,\n\t\t\t\t[key]: {type: \"\", difficulty: \"\", effect: \"\"},\n\t\t\t});\n\t\t}\n\t\tcatch(e) {\n\t\t\tui.notifications.error(e);\n\t\t}\n\t}\n\n\tinsertSpendRow(_event) {\n\t\ttry {\n\t\t\tconst table = document.getElementById(\"spellSpends\");\n\t\t\tconst itemId = this.item._id;\n\t\t\tconst index = table.rows.length - 1;\n\t\t\tconst key = `system.effects.momentum.${[index + 1]}`;\n\t\t\tthis.item.update({\n\t\t\t\tid: itemId,\n\t\t\t\t[key]: {type: \"\", difficulty: \"\", effect: \"\"},\n\t\t\t});\n\t\t}\n\t\tcatch(e) {\n\t\t\tui.notifications.error(e);\n\t\t}\n\t}\n\n\tonTraitSelector(event) {\n\t\tevent.preventDefault();\n\t\tconst a = $(event.currentTarget);\n\t\tconst options = {\n\t\t\tname: a.parents(\"label\").attr(\"for\"),\n\t\t\ttitle: a.parent().text().trim(),\n\t\t\tchoices: CONFIG.CONAN[a.attr(\"data-options\")],\n\t\t\thasValues: a.attr(\"data-has-values\") === \"true\",\n\t\t\tallowEmptyValues: a.attr(\"data-allow-empty-values\") === \"true\",\n\t\t};\n\t\tnew conan.apps.TraitSelector(this.item, options).render(true);\n\t}\n}\n","class ConanBaseActorSheet extends ActorSheet {\n\t// Default non-attack action sections to be collapsed by default\n\t_hiddenTablesLut = {\n\t\tstandard: true,\n\t\tminor: true,\n\t\treaction: true,\n\t\tfree: true,\n\t};\n\n\tstatic get defaultOptions() {\n\t\treturn foundry.utils.mergeObject(super.defaultOptions, {\n\t\t\tscrollY: [\n\t\t\t\t\".sheet-sidebar\",\n\t\t\t\t\".skills-pane\",\n\t\t\t\t\".character-pane\",\n\t\t\t\t\".talents-pane\",\n\t\t\t\t\".inventory-pane\",\n\t\t\t\t\".actions-pane\",\n\t\t\t\t\".sheet-body\",\n\t\t\t],\n\t\t});\n\t}\n\n\t/** @inheritdoc */\n\tget title() {\n\t\treturn `[${this.actor.type}] ${this.actor.name}`;\n\t}\n\n\tasync getData(options) {\n\t\t// The Actor\"s data\n\t\tconst source = this.actor.toObject();\n\t\tconst actorData = this.actor.toObject(false);\n\n\t\tconst context = {\n\t\t\tactor: actorData,\n\t\t\tattributes: CONFIG.CONAN.attributeLabels,\n\t\t\tconditions: CONFIG.CONAN.conditionTypes,\n\t\t\tCONFIG: CONFIG.CONAN,\n\t\t\tcssClass: this.actor.isOwner ? \"editable\" : \"locked\",\n\t\t\teditable: this.isEditable,\n\t\t\thiddenTables: this._hiddenTablesLut,\n\t\t\thasType: [\"mount\", \"npc\"].includes(this.actor.type),\n\t\t\tisCharacter: this.actor.type === \"character\",\n\t\t\tisGM: game.user.isGM,\n\t\t\tisMount: this.actor.type === \"mount\",\n\t\t\tisNPC: this.actor.type === \"npc\",\n\t\t\tisTransport: this.actor.type === \"transport\",\n\t\t\titems: actorData.items,\n\t\t\tlimited: this.actor.limited,\n\t\t\toptions: this.options,\n\t\t\towner: this.actor.isOwner,\n\t\t\tsource: source.system,\n\t\t\tsystem: actorData.system,\n\t\t};\n\n\t\tcontext.biographyHTML = await TextEditor.enrichHTML(\n\t\t\tcontext.system.details.biography.value,\n\t\t\t{\n\t\t\t\tsecrets: this.actor.isOwner,\n\t\t\t\tasync: true,\n\t\t\t\trelativeTo: this.actor,\n\t\t\t}\n\t\t);\n\n\t\t// Update Attribute labels\n\t\tif (context.system.attributes !== undefined) {\n\t\t\tfor (const [a, atr] of Object.entries(context.system.attributes)) {\n\t\t\t\tatr.label = CONFIG.CONAN.attributeLabels[a];\n\t\t\t\tatr.tooltip = CONFIG.CONAN.attributeTooltips[a];\n\t\t\t}\n\t\t}\n\n\t\tif (context.system.skills !== undefined) {\n\t\t\tfor (const [s, skill] of Object.entries(context.system.skills)) {\n\t\t\t\tskill.label = CONFIG.CONAN.skills[s];\n\t\t\t\tskill.tooltip = CONFIG.CONAN.skillTooltips[s];\n\t\t\t}\n\t\t}\n\n\t\tthis._prepareItems(context);\n\t\tthis._addConditionData(context);\n\n\t\treturn context;\n\t}\n\n\tactivateListeners(html) {\n\t\t// Pad field width\n\t\thtml.find(\"[data-wpad]\").each((i, e) => {\n\t\t\tconst text = e.tagName === \"INPUT\" ? e.value : e.innerText;\n\t\t\tconst w = (text.length * parseInt(e.getAttribute(\"data-wpad\"), 10)) / 2;\n\t\t\te.setAttribute(\"style\", `flex: 0 0 ${w}px`);\n\t\t});\n\n\t\t// Item summaries\n\t\thtml.find(\".item .item-name h4\").click(event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst li = $(event.currentTarget).parent().parent();\n\t\t\tthis._onItemSummary(li);\n\t\t});\n\n\t\thtml\n\t\t\t.find(\".item-control__attack\")\n\t\t\t.click(event => this._onClickAttack(event));\n\n\t\thtml\n\t\t\t.find(\".item-control__damage\")\n\t\t\t.click(event => this._onClickDamage(event));\n\n\t\thtml.find(\".item-control__shield\").click(event => this._onClickSoak(event));\n\n\t\t// Hideable sections\n\t\thtml.find(\".hideable-items\").click(event => {\n\t\t\tthis._onHideSection(event, \".item-list\", \".item-table\");\n\t\t});\n\t\thtml.find(\".hideable-skills\").click(event => {\n\t\t\tthis._onHideSection(event, \".grid-container\", \".skill-table\");\n\t\t});\n\n\t\thtml\n\t\t\t.find(\"[data-item-id].item .item-image\")\n\t\t\t.click(event => this._onPostItem(event));\n\n\t\t// Toggle equip\n\t\thtml.find(\".item-toggle-equip\").click(ev => {\n\t\t\tconst f = $(ev.currentTarget);\n\t\t\tconst itemId = f.parents(\".item\").attr(\"data-item-id\");\n\t\t\tconst active = f.hasClass(\"active\");\n\t\t\tconst equipped = !active;\n\n\t\t\tconst item = this.actor.items.get(itemId);\n\n\t\t\t// if stowed, update stowage value in container as equipping an item\n\t\t\t// automatically removes it from stowage\n\t\t\tconst stowedIn = item.system.stowedIn;\n\t\t\tif (stowedIn !== \"\") {\n\t\t\t\tlet itemEncumbrance = parseInt(item.system.encumbrance) || 0;\n\n\t\t\t\tlet originalStowageValue = this.actor.getEmbeddedDocument(\n\t\t\t\t\t\"Item\",\n\t\t\t\t\tstowedIn\n\t\t\t\t).system.stowage.value;\n\n\t\t\t\tlet newStowage = originalStowageValue - itemEncumbrance;\n\t\t\t\tnewStowage = newStowage < 0 ? 0 : newStowage;\n\n\t\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t{\n\t\t\t\t\t\t_id: stowedIn,\n\t\t\t\t\t\t\"system.stowage.value\": newStowage,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t{\n\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\"system.equipped\": equipped,\n\t\t\t\t\t\"system.stowedIn\": \"\",\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\thtml.find(\".item-toggle-broken\").click(ev => {\n\t\t\tconst f = $(ev.currentTarget);\n\t\t\tconst itemId = f.parents(\".item\").attr(\"data-item-id\");\n\t\t\tconst active = f.hasClass(\"active\");\n\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t{\n\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\"system.broken\": !active,\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\thtml.find(\".trait-selector\").click(ev => this._onTraitSelector(ev));\n\n\t\thtml.find(\".item-create\").click(ev => this._onItemCreate(ev));\n\n\t\thtml.find(\".item-edit\").click(ev => {\n\t\t\tconst itemId = $(ev.currentTarget).parents(\".item\").attr(\"data-item-id\");\n\t\t\tconst item = this.actor.items.get(itemId);\n\n\t\t\treturn item.sheet.render(true);\n\t\t});\n\n\t\thtml.find(\".add-gold\").click(() => {\n\t\t\tconst updateActorData = {};\n\t\t\tupdateActorData[\"system.resources.gold.value\"] =\n\t\t\t\tthis.actor.system.resources.gold.value + 1;\n\t\t\tthis.actor.update(updateActorData);\n\t\t});\n\n\t\thtml.find(\".subtract-gold\").click(() => {\n\t\t\tconst updateActorData = {};\n\t\t\tif (this.actor.system.resources.gold.value <= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdateActorData[\"system.resources.gold.value\"] =\n\t\t\t\tthis.actor.system.resources.gold.value - 1;\n\t\t\tthis.actor.update(updateActorData);\n\t\t});\n\n\t\thtml.find(\".consumable-increase\").click(event => {\n\t\t\tconst itemId = $(event.currentTarget)\n\t\t\t\t.parents(\".item\")\n\t\t\t\t.attr(\"data-item-id\");\n\t\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t{\n\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\"system.uses.value\": Number(item.system.uses.value) + 1,\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\thtml.find(\".consumable-decrease\").click(event => {\n\t\t\tconst itemId = $(event.currentTarget)\n\t\t\t\t.parents(\".item\")\n\t\t\t\t.attr(\"data-item-id\");\n\t\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\t\t\tif (Number(item.system.uses.value) > 0) {\n\t\t\t\tthis.actor.updateEmbeddedDocuments(\"OwnedItem\", [\n\t\t\t\t\t{\n\t\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\t\"system.uses.value\": Number(item.system.uses.value) - 1,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t});\n\t\thtml.find(\".mount-increase-pass\").click(event => {\n\t\t\tconst itemId = $(event.currentTarget)\n\t\t\t\t.parents(\".item\")\n\t\t\t\t.attr(\"data-item-id\");\n\t\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t{\n\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\"system.passengers.value\":\n\t\t\t\t\t\tNumber(item.system.passengers.value) + 1,\n\t\t\t\t},\n\t\t\t]);\n\t\t});\n\n\t\thtml.find(\".mount-decrease-pass\").click(event => {\n\t\t\tconst itemId = $(event.currentTarget)\n\t\t\t\t.parents(\".item\")\n\t\t\t\t.attr(\"data-item-id\");\n\t\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\t\t\tif (Number(item.system.passengers.value) > 0) {\n\t\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t{\n\t\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\t\"system.passengers.value\":\n\t\t\t\t\t\t\tNumber(item.system.passengers.value) - 1,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t});\n\t\thtml.find(\".item-increase-quantity\").click(event => {\n\t\t\tconst itemId = $(event.currentTarget)\n\t\t\t\t.parents(\".item\")\n\t\t\t\t.attr(\"data-item-id\");\n\t\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t{\n\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\"system.quantity\": Number(item.system.quantity) + 1,\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\t// if stowed, update stowage value in container\n\t\t\tconst stowedIn = item.system.stowedIn;\n\t\t\tif (stowedIn && stowedIn !== \"\") {\n\t\t\t\tlet itemEncumbrance = parseInt(item.system.encumbrance) || 0;\n\n\t\t\t\tlet originalStowageValue = this.actor.getEmbeddedDocument(\n\t\t\t\t\t\"Item\",\n\t\t\t\t\tstowedIn\n\t\t\t\t).system.stowage.value;\n\n\t\t\t\tlet newStowage = originalStowageValue + itemEncumbrance;\n\n\t\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t{\n\t\t\t\t\t\t_id: stowedIn,\n\t\t\t\t\t\t\"system.stowage.value\": newStowage,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t});\n\n\t\thtml.find(\".item-decrease-quantity\").click(event => {\n\t\t\tconst itemId = $(event.currentTarget)\n\t\t\t\t.parents(\".item\")\n\t\t\t\t.attr(\"data-item-id\");\n\t\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\t\t\tif (Number(item.system.quantity) > 0) {\n\t\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t{\n\t\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\t\"system.quantity\": Number(item.system.quantity) - 1,\n\t\t\t\t\t},\n\t\t\t\t]);\n\n\t\t\t\t// if stowed, update stowage value in container\n\t\t\t\tconst stowedIn = item.system.stowedIn;\n\t\t\t\tif (stowedIn && stowedIn !== \"\") {\n\t\t\t\t\tlet itemEncumbrance = parseInt(item.system.encumbrance) || 0;\n\n\t\t\t\t\tlet originalStowageValue = this.actor.getEmbeddedDocument(\n\t\t\t\t\t\t\"Item\",\n\t\t\t\t\t\tstowedIn\n\t\t\t\t\t).system.stowage.value;\n\n\t\t\t\t\tlet newStowage = originalStowageValue - itemEncumbrance;\n\t\t\t\t\tnewStowage = newStowage < 0 ? 0 : newStowage;\n\n\t\t\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_id: stowedIn,\n\t\t\t\t\t\t\t\"system.stowage.value\": newStowage,\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\thtml.find(\".item-decrease-uses\").click(event => {\n\t\t\tconst itemId = $(event.currentTarget)\n\t\t\t\t.parents(\".item\")\n\t\t\t\t.attr(\"data-item-id\");\n\n\t\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\n\t\t\tlet uses = Number(item.system.uses.value);\n\n\t\t\tif (uses > 0) {\n\t\t\t\tuses -= 1;\n\n\t\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t{\n\t\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\t\"system.uses.value\": uses,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t});\n\n\t\thtml.find(\".item-increase-uses\").click(event => {\n\t\t\tconst itemId = $(event.currentTarget)\n\t\t\t\t.parents(\".item\")\n\t\t\t\t.attr(\"data-item-id\");\n\t\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\n\t\t\tlet maxUses = parseInt(item.system.uses.max);\n\n\t\t\tif (isNaN(maxUses) || item.system.uses.value < maxUses) {\n\t\t\t\tthis.actor.updateEmbeddedDocuments(\"Item\", [\n\t\t\t\t\t{\n\t\t\t\t\t\t_id: itemId,\n\t\t\t\t\t\t\"system.uses.value\": Number(item.system.uses.value) + 1,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t});\n\n\t\thtml.find(\".item-delete\").click(event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst li = $(event.currentTarget).parents(\".item\");\n\t\t\tconst itemId = li.attr(\"data-item-id\");\n\n\t\t\tthis._onItemDelete(itemId);\n\t\t});\n\n\t\thtml.find(\".item-stowage-view\").mouseup(event => this._onSendItem(event));\n\n\t\thtml.find(\".fa-dice-d20.rollable\").click(event => {\n\t\t\tthis._onRollSkillCheck(event);\n\t\t});\n\n\t\thtml.find(\".skill-name.rollable\").click(event => {\n\t\t\tthis._onRollSkillCheck(event);\n\t\t});\n\n\t\thtml\n\t\t\t.find(\".wounds\")\n\t\t\t.on(\"click contextmenu\", this._onClickWounded.bind(this));\n\n\t\tthis._contextMenu(html);\n\n\t\t// Handle default listeners last so system listeners are triggered first\n\t\tsuper.activateListeners(html);\n\t}\n\n\tasync _onApplyDamage(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\treturn new conan.apps.ApplyDamage({targets: [this.actor]}).render(true);\n\t}\n\n\tasync _onClickAttack(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst f = $(event.currentTarget);\n\t\tconst itemId = f.parents(\".item\").attr(\"data-item-id\");\n\t\tthis.actor._executeAttack(itemId);\n\t}\n\n\tasync _onClickDamage(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst f = $(event.currentTarget);\n\t\tconst itemId = f.parents(\".item\").attr(\"data-item-id\");\n\t\tthis._executeDamage(event, itemId);\n\t}\n\n\tasync _onClickSoak(event) {\n\t\tevent.preventDefault();\n\t\tconst f = $(event.currentTarget);\n\t\tconst itemId = f.parents(\".item\").attr(\"data-item-id\");\n\t\tconst shieldItem = this.actor.items.get(itemId);\n\t\tshieldItem.triggerSoakRoll();\n\t}\n\n\t_addConditionData(data) {\n\t\tdata.conditions = foundry.utils.duplicate(CONFIG.CONAN.statusEffects);\n\t\tfor (const condition of data.conditions) {\n\t\t\tconst existing = this.actor.effects.find(\n\t\t\t\te => e.statuses.has(condition.id)\n\t\t\t);\n\n\t\t\tif (existing) {\n\t\t\t\tcondition.value = existing.flags.conan2d20.value;\n\t\t\t\tcondition.existing = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcondition.value = 0;\n\t\t\t}\n\n\t\t\tif (condition.flags.conan2d20.value === null) {\n\t\t\t\tcondition.boolean = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t_contextMenu(html) {\n\t\tContextMenu.create(this, html, \".item\", this._getItemContextOptions());\n\t}\n\n\tasync _onClickWounded(event) {\n\t\tevent.preventDefault();\n\t\tconst field = $(event.currentTarget).parent().attr(\"data-target\");\n\t\tconst icon = $(event.currentTarget).attr(\"data-target\");\n\n\t\tconst actorData = foundry.utils.duplicate(this.actor);\n\t\tconst dot = foundry.utils.getProperty(actorData, field);\n\n\t\tif (event.type === \"click\") {\n\t\t\tfoundry.utils.setProperty(actorData, field, \"wounded\");\n\t\t\tfoundry.utils.setProperty(actorData, icon, \"fas fa-skull\");\n\t\t}\n\t\telse if (event.type === \"contextmenu\") {\n\t\t\tif (dot === \"wounded\") {\n\t\t\t\tfoundry.utils.setProperty(actorData, field, \"treated\");\n\t\t\t\tfoundry.utils.setProperty(actorData, icon, \"fas fa-star-of-life\");\n\t\t\t}\n\t\t\telse if (dot === \"treated\") {\n\t\t\t\tfoundry.utils.setProperty(actorData, field, \"healed\");\n\t\t\t\tfoundry.utils.setProperty(actorData, icon, \"far fa-circle\");\n\t\t\t}\n\t\t}\n\t\tthis.actor.update(actorData);\n\t}\n\n\t_getHeaderButtons() {\n\t\tconst buttons = super._getHeaderButtons();\n\n\t\tif (this.actor.type !== \"transport\") {\n\t\t\t// Only have the Apply Damage button available on Token sheets, or\n\t\t\t// sheets with linked data\n\t\t\t//\n\t\t\tif (this.actor.isToken || this.actor.prototypeToken.actorLink) {\n\t\t\t\tbuttons.unshift({\n\t\t\t\t\tclass: \"apply-damage\",\n\t\t\t\t\ticon: \"fa-solid fa-droplet\",\n\t\t\t\t\tlabel: \"Apply Damage\",\n\t\t\t\t\tonclick: event => this._onApplyDamage(event),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\t_getItemContextOptions() {\n\t\tconst me = this;\n\n\t\tconst canEdit = function(li) {\n\t\t\tlet result = false;\n\t\t\tconst itemId = li.data(\"itemId\");\n\n\t\t\tif (game.user.isGM) {\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tresult = me.actor.items.find(item => item._id === itemId)\n\t\t\t\t\t? true\n\t\t\t\t\t: false;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t\treturn [\n\t\t\t{\n\t\t\t\tname: game.i18n.localize(\"CONAN.editItemTitle\"),\n\t\t\t\ticon: \"<i class=\\\"fas fa-edit\\\"></i>\",\n\t\t\t\tcondition: li => canEdit(li),\n\t\t\t\tcallback: li => {\n\t\t\t\t\tconst itemId = li.data(\"itemId\");\n\t\t\t\t\tconst item = this.actor.items.get(itemId);\n\t\t\t\t\treturn item.sheet.render(true);\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: game.i18n.localize(\"CONAN.deleteItemTitle\"),\n\t\t\t\ticon: \"<i class=\\\"fas fa-trash\\\"></i>\",\n\t\t\t\tcondition: li => canEdit(li),\n\t\t\t\tcallback: li => {\n\t\t\t\t\tconst itemId = li.data(\"itemId\");\n\t\t\t\t\tthis._onItemDelete(itemId);\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t}\n\n\tasync _onDropItem(event, data) {\n\t\tif ( !this.actor.isOwner ) return false;\n\n\t\tconst item = await Item.implementation.fromDropData(data);\n\t\tconst itemData = item.toObject();\n\n\t\tif (item.parent !== null) {\n\t\t\tif (item.parent.isOwner) item.delete();\n\t\t}\n\n\t\treturn this._onDropItemCreate(itemData);\n\t}\n\n\t_onTraitSelector(event) {\n\t\tevent.preventDefault();\n\t\tconst a = $(event.currentTarget);\n\t\tconst options = {\n\t\t\tname: a.parents(\"li\").attr(\"for\"),\n\t\t\ttitle: a.parent().parent().siblings(\"h4\").text().trim(),\n\t\t\tchoices: CONFIG.CONAN[a.attr(\"data-options\")],\n\t\t\thasValues: a.attr(\"data-has-values\") === \"true\",\n\t\t\tallowEmptyValues: a.attr(\"data-allow-empty-values\") === \"true\",\n\t\t};\n\t\tnew conan.apps.TraitSelector(this.actor, options).render(true);\n\t}\n\n\t_onHideSection(event, holdingParent, toHide) {\n\t\tevent.preventDefault();\n\n\t\tconst hideableTable = $(event.currentTarget)\n\t\t\t.parentsUntil(holdingParent)\n\t\t\t.next(toHide);\n\n\t\tconst iconElement = $(event.currentTarget).find(\"i\");\n\n\t\tconst hideableTableId = hideableTable.attr(\"data-hideable-table-id\");\n\n\t\tif (this._hiddenTablesLut[hideableTableId]) {\n\t\t\tthis._hiddenTablesLut[hideableTableId] =\n\t\t\t\t!this._hiddenTablesLut[hideableTableId];\n\t\t}\n\t\telse {\n\t\t\tthis._hiddenTablesLut[hideableTableId] = true;\n\t\t}\n\n\t\tif (this._hiddenTablesLut[hideableTableId]) {\n\t\t\thideableTable.slideUp(200);\n\t\t}\n\t\telse {\n\t\t\thideableTable.slideDown(200);\n\t\t}\n\t\ticonElement.toggleClass(\"fa-caret-down\");\n\t\ticonElement.toggleClass(\"fa-caret-right\");\n\t}\n\n\tasync _onItemCreate(event) {\n\t\tevent.preventDefault();\n\t\tconst header = event.currentTarget;\n\t\tconst data = foundry.utils.duplicate(header.dataset);\n\t\tif (data.type === \"talent\") {\n\t\t\tdata.name = `New ${data.talentType.capitalize()} ${data.type.capitalize()}`;\n\t\t\tfoundry.utils.mergeObject(data, {\"system.talentType\": data.talentType});\n\t\t}\n\t\telse if (data.type === \"action\") {\n\t\t\tdata.name = `New ${data.actionType.capitalize()}`;\n\t\t\tfoundry.utils.mergeObject(data, {\"system.actionType\": data.actionType});\n\t\t}\n\t\telse if (data.type === \"npcaction\") {\n\t\t\tif (data.actionType === \"doom\") {\n\t\t\t\tdata.name = `New ${game.i18n.localize(\"CONAN.doomSpendHeader\")}`;\n\t\t\t}\n\t\t\telse if (data.actionType === \"abilities\") {\n\t\t\t\tdata.name = `New ${game.i18n\n\t\t\t\t\t.localize(\"CONAN.specialAbilityHeader\")\n\t\t\t\t\t.capitalize()}`;\n\t\t\t}\n\t\t\tfoundry.utils.mergeObject(data, {\"system.actionType\": data.actionType});\n\t\t}\n\t\telse if (data.type === \"npcattack\") {\n\t\t\tdata.name = `New ${game.i18n\n\t\t\t\t.localize(\"CONAN.attackHeader\")\n\t\t\t\t.capitalize()}`;\n\t\t\tfoundry.utils.mergeObject(data, {\"system.actionType\": data.actionType});\n\t\t}\n\t\telse {\n\t\t\tdata.name = `New ${data.type.capitalize()}`;\n\t\t}\n\t\tconst [newItem] = await this.actor.createEmbeddedDocuments(\"Item\", [data]);\n\t\tnewItem.sheet.render(true);\n\t}\n\n\t_onItemDelete(itemId) {\n\t\tconst itemData = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\n\t\trenderTemplate(\n\t\t\t\"systems/conan2d20/templates/dialog/delete-item-confirm.hbs\",\n\t\t\t{name: itemData.name}\n\t\t).then(html => {\n\t\t\tnew Dialog({\n\t\t\t\ttitle: game.i18n.localize(\"CONAN.Dialog.ConfirmItemDeletion.title\"),\n\t\t\t\tcontent: html,\n\t\t\t\tbuttons: {\n\t\t\t\t\tYes: {\n\t\t\t\t\t\ticon: \"<i class=\\\"fa fa-check\\\"></i>\",\n\t\t\t\t\t\tlabel: \"Yes\",\n\t\t\t\t\t\tcallback: async () => {\n\t\t\t\t\t\t\tawait this.actor.deleteEmbeddedDocuments(\"Item\", [itemId]);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tCancel: {\n\t\t\t\t\t\ticon: \"<i class=\\\"fa fa-times\\\"></i>\",\n\t\t\t\t\t\tlabel: \"Cancel\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tdefault: \"Yes\",\n\t\t\t}).render(true);\n\t\t});\n\t}\n\n\tasync _onSendItem(event, type) {\n\t\tevent.preventDefault();\n\t\tconst li = $(event.currentTarget).parents(\".item\");\n\t\tconst itemId = li.attr(\"data-item-id\");\n\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\n\t\tconst destinations = game.actors.filter(\n\t\t\ta => a._id !== this.actor._id\n\t\t\t\t&& a.permission === CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER\n\t\t);\n\n\t\tif (destinations.length > 0) {\n\t\t\tnew conan.apps.SendItem({\n\t\t\t\tactor: this.actor,\n\t\t\t\tdestinations,\n\t\t\t\titem,\n\t\t\t}).render(true);\n\t\t}\n\t\telse {\n\t\t\tui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.sendItemNoDestinationsAvailable\")\n\t\t\t);\n\t\t}\n\t}\n\n\t_onPostItem(event) {\n\t\tevent.preventDefault();\n\n\t\tconst itemId = $(event.currentTarget).parents(\".item\").attr(\"data-item-id\");\n\t\tconst item = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\t\titem.postItem(event);\n\t}\n\n\t_onRollSkillCheck(event) {\n\t\tevent.preventDefault();\n\n\t\tconst skill = $(event.currentTarget)\n\t\t\t.parents(\".skill-entry-name\")\n\t\t\t.attr(\"data-skill\");\n\n\t\tthis.actor._rollSkillCheck(skill);\n\t}\n\n\tasync _onItemSummary(li) {\n\t\tconst localize = game.i18n.localize.bind(game.i18n);\n\t\tconst itemId = li.attr(\"data-item-id\");\n\t\tconst actionIndex = li.attr(\"data-action-index\");\n\n\t\tlet item;\n\n\t\ttry {\n\t\t\titem = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\t\t\tif (!item.type) return;\n\t\t}\n\t\tcatch(error) {\n\t\t\tconan.logger.error(error);\n\t\t\treturn;\n\t\t}\n\n\t\t// Toggle summary\n\t\tif (li.hasClass(\"expanded\")) {\n\t\t\tconst summary = li.children(\".item-summary\");\n\t\t\tsummary.slideUp(200, () => summary.remove());\n\t\t}\n\t\telse {\n\t\t\tlet div;\n\t\t\tconst chatData = await item.getChatData({secrets: this.actor.isOwner});\n\t\t\tif (!actionIndex) {\n\t\t\t\tdiv = $(\n\t\t\t\t\t`<div class=\"item-summary\"><div class=\"item-description\">${chatData.description.value}</div></div>`\n\t\t\t\t);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst flavor = conan.utils.getAttackDescription(item).description;\n\t\t\t\tdiv = $(\n\t\t\t\t\t`<div class=\"item-summary\"><div class=\"item-description\">${localize(\n\t\t\t\t\t\tflavor\n\t\t\t\t\t)}</div></div>`\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst details = $(\"<div class=\\\"item-details\\\"><br></div>\");\n\t\t\tconst props = $(\"<div class=\\\"item-properties tags\\\"></div>\");\n\n\t\t\tif (chatData.itemDetails) {\n\t\t\t\tchatData.itemDetails.forEach(p => {\n\t\t\t\t\tconst concat = `<div class=\"chat-item-detail\"><b>${localize(\n\t\t\t\t\t\tp.label\n\t\t\t\t\t)}:</b> ${localize(p.detail)} </div>`;\n\t\t\t\t\tdetails.append(concat);\n\t\t\t\t});\n\t\t\t\tdiv.append(details);\n\t\t\t}\n\t\t\tdiv.append(\"</br>\");\n\t\t\tif (chatData.properties) {\n\t\t\t\tchatData.properties\n\t\t\t\t\t.filter(p => typeof p === \"string\")\n\t\t\t\t\t.forEach(p => {\n\t\t\t\t\t\tprops.append(\n\t\t\t\t\t\t\t`<span class=\"tag tag_secondary\" data-tooltip=\"${localize(p)}\">${localize(p)}</span>`\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t}\n\t\t\tdiv.append(props);\n\t\t\t// append qualities (only style the tags if they contain description data)\n\t\t\tif (chatData.qualities && chatData.qualities.length) {\n\t\t\t\tchatData.qualities.forEach(p => {\n\t\t\t\t\tif (p.description) {\n\t\t\t\t\t\tprops.append(\n\t\t\t\t\t\t\t`<span class=\"tag\" data-tooltip=\"${localize(p.description)}\">${localize(\n\t\t\t\t\t\t\t\tp.label\n\t\t\t\t\t\t\t)}</span>`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tprops.append(`<span class=\"tag\">${localize(p.label)}</span>`);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst buttons = $(\"<div class=\\\"item-buttons\\\"></div>\");\n\n\t\t\tif (this.actor.canUseItemType(item.type)) {\n\t\t\t\tswitch (item.type) {\n\t\t\t\t\tcase \"weapon\":\n\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t`<button class=\"tag weapon_damage execute-attack\" data-action=\"weaponAttack\">${localize(\n\t\t\t\t\t\t\t\t\"CONAN.attackRollLabel\"\n\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t`<button class=\"tag weapon_damage execute-damage\" data-action=\"weaponDamage\">${localize(\n\t\t\t\t\t\t\t\t\"CONAN.damageRollLabel\"\n\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (item.getSoak() > 0) {\n\t\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t\t`<button class=\"tag weapon_soak execute-soak\" data-action=\"shieldSoak\">${localize(\n\t\t\t\t\t\t\t\t\t\"CONAN.shieldSoakRollLabel\"\n\t\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"display\":\n\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t`<button class=\"tag weapon_damage execute-attack\" data-action=\"weaponAttack\">${localize(\n\t\t\t\t\t\t\t\t\"CONAN.attackRollLabel\"\n\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t`<button class=\"tag display_damage execute-damage\" data-action=\"weaponDamage\">${localize(\n\t\t\t\t\t\t\t\t\"CONAN.damageRollLabel\"\n\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"kit\":\n\t\t\t\t\t\tif (chatData.hasCharges) {\n\t\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t\t`<button class=\"use-kit\" data-action=\"useKit\">${localize(\n\t\t\t\t\t\t\t\t\t\"CONAN.kitUseLabel\"\n\t\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"npcattack\":\n\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t`<button class=\"tag npc_damage execute-attack\" data-action=\"npcAttack\">${localize(\n\t\t\t\t\t\t\t\t\"CONAN.attackRollLabel\"\n\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t`<button class=\"tag npc_damage execute-damage\" data-action=\"npcDamage\">${localize(\n\t\t\t\t\t\t\t\t\"CONAN.damageRollLabel\"\n\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (item.getSoak() > 0) {\n\t\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t\t`<button class=\"tag weapon_soak execute-soak\" data-action=\"shieldSoak\">${localize(\n\t\t\t\t\t\t\t\t\t\"CONAN.shieldSoakRollLabel\"\n\t\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"spell\":\n\t\t\t\t\t\tbuttons.append(\n\t\t\t\t\t\t\t`<button class=\"tag spell_attack execute-attack\" data-action=\"spellCast\">${localize(\n\t\t\t\t\t\t\t\t\"CONAN.spellCastLabel\"\n\t\t\t\t\t\t\t)}</button>`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdiv.append(buttons);\n\n\t\t\tbuttons.find(\"button\").click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tev.stopPropagation();\n\n\t\t\t\t// which function gets called depends on the type of button stored in\n\t\t\t\t// the dataset attribute action\n\t\t\t\tswitch (ev.target.dataset.action) {\n\t\t\t\t\tcase \"useKit\": {\n\t\t\t\t\t\tthis.actor.useKit(itemId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"weaponDamage\": {\n\t\t\t\t\t\tthis._executeDamage(ev, itemId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"weaponAttack\": {\n\t\t\t\t\t\tthis.actor._executeAttack(itemId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"shieldSoak\": {\n\t\t\t\t\t\tconst shieldItem = this.actor.items.get(itemId);\n\t\t\t\t\t\tshieldItem.triggerSoakRoll();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"spellCast\": {\n\t\t\t\t\t\tconst spell = this.actor.items.get(itemId);\n\t\t\t\t\t\tconst skill = \"sor\";\n\n\t\t\t\t\t\tthis.actor._rollSkillCheck(skill, spell);\n\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"npcDamage\": {\n\t\t\t\t\t\tthis._executeDamage(ev, itemId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tcase \"npcAttack\": {\n\t\t\t\t\t\tthis.actor._executeAttack(itemId);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tli.append(div.hide());\n\t\t\tdiv.slideDown(200);\n\t\t}\n\t\tli.toggleClass(\"expanded\");\n\t}\n\n\t_sortAllItems(context) {\n\t\t// Pre-sort all items so that when they are filtered into their relevant\n\t\t// categories they are already sorted alphabetically (case-sensitive)\n\t\tconst allItems = [];\n\t\t(context.items ?? []).forEach(item => allItems.push(item));\n\n\t\tallItems.sort((a, b) => {\n\t\t\tif (a.name < b.name) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (a.name > b.name) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\n\t\treturn allItems;\n\t}\n\n\t_executeDamage(ev, itemId) {\n\t\tconst weapon = this.actor.getEmbeddedDocument(\"Item\", itemId);\n\n\t\tweapon.triggerDamageRoll();\n\t}\n}\n\nexport default ConanBaseActorSheet;\n","export class InventoryWeight {\n\tcombinedEnc;\n\n\tencumberedAt;\n\n\tlimit;\n\n\tconstructor(combinedEnc, encumberedAt, limit) {\n\t\tthis.combinedEnc = combinedEnc;\n\t\tthis.encumberedAt = encumberedAt;\n\t\tthis.limit = limit;\n\t}\n\n\tget encumberedPercentage() {\n\t\tconst totalTimes10 = this.combinedEnc * 10;\n\t\tconst limitTimes10 = this.limit * 10;\n\t\treturn Math.floor((totalTimes10 / limitTimes10) * 100);\n\t}\n\n\tget limitPercentage() {\n\t\tconst totalTimes10 = this.combinedEnc * 10;\n\t\tconst limitTimes10 = this.limit * 10;\n\t\treturn Math.floor((totalTimes10 / limitTimes10) * 100);\n\t}\n\n\tget limitPercentageMax() {\n\t\tif (this.limitPercentage > 100) {\n\t\t\treturn 100;\n\t\t}\n\t\treturn this.limitPercentage;\n\t}\n\n\tget isEncumbered() {\n\t\treturn this.combinedEnc > this.encumberedAt;\n\t}\n\n\tget encumbranceFactor() {\n\t\tconst pct = this.encumberedPercentage;\n\t\tconst encObject = {\n\t\t\tcarried: \"\",\n\t\t\tfatigue: \"\",\n\t\t};\n\n\t\tconst carriedLabel = game.i18n.localize(\"CONAN.encumbranceCarriedRatingLabel\");\n\t\tconst fatigueLabel = game.i18n.localize(\"CONAN.encumbranceRatingFatigueLabel\");\n\n\t\tif (pct < 60 && pct >= 40) {\n\t\t\tencObject.carried = `${carriedLabel}: x2`;\n\t\t\tencObject.fatigue = `${fatigueLabel}: +1`;\n\t\t\treturn encObject;\n\t\t}\n\t\tif (pct < 80 && pct >= 60) {\n\t\t\tencObject.carried = `${carriedLabel}: x3`;\n\t\t\tencObject.fatigue = `${fatigueLabel}: +2`;\n\t\t\treturn encObject;\n\t\t}\n\t\tif (pct < 100 && pct >= 80) {\n\t\t\tencObject.carried = `${carriedLabel}: x4`;\n\t\t\tencObject.fatigue = `${fatigueLabel}: +3`;\n\t\t\treturn encObject;\n\t\t}\n\t\tif (pct < 120 && pct >= 100) {\n\t\t\tencObject.carried = `${carriedLabel}: x5`;\n\t\t\tencObject.fatigue = `${fatigueLabel}: +4`;\n\t\t\treturn encObject;\n\t\t}\n\t\tif (pct < 140 && pct >= 120) {\n\t\t\tencObject.carried = `${carriedLabel}: x6`;\n\t\t\tencObject.fatigue = `${fatigueLabel}: +5`;\n\t\t\treturn encObject;\n\t\t}\n\t\tif (pct < 160 && pct >= 140) {\n\t\t\tencObject.carried = `${carriedLabel}: x7`;\n\t\t\tencObject.fatigue = `${fatigueLabel}: +6`;\n\t\t\treturn encObject;\n\t\t}\n\t\tif (pct >= 160) {\n\t\t\tencObject.carried = `${carriedLabel}: x8`;\n\t\t\tencObject.fatigue = `${fatigueLabel}: +7`;\n\t\t\treturn encObject;\n\t\t}\n\n\t\tencObject.carried = `${carriedLabel}: ${game.i18n.localize(\"CONAN.encumbranceRatingLessLabel\")}`;\n\t\tencObject.fatigue = `${fatigueLabel}: -`;\n\n\t\treturn encObject;\n\t}\n\n\tget isOverLimit() {\n\t\treturn this.combinedEnc > this.limit;\n\t}\n\n\tget enc() {\n\t\treturn this.combinedEnc;\n\t}\n}\n\nexport function combinedEncumbrance(actorInventory) {\n\tlet totalEnc = 0;\n\n\tfor (const itemType in actorInventory) {\n\t\tif (itemType === \"consumable\") continue; // they don\"t have encumbrance\n\n\t\tif (itemType === \"transportation\") continue;\n\n\t\tfor (let x = 0; x < actorInventory[itemType].items.length; x++) {\n\t\t\tconst item = actorInventory[itemType].items[x];\n\t\t\tconst itemData = item.system;\n\t\t\tconst equipped = item.canBeEquipped && itemData.equipped;\n\n\t\t\t// stowed items don\"t count towards player encumbrance\n\t\t\tif (itemData.stowedIn !== \"\") continue;\n\n\t\t\tif (itemType === \"armor\" && equipped) {\n\t\t\t\t// equipped armor does\"t count towards encumbrance as it has qualities\n\t\t\t\t// that apply when worn instead (see core rules p.157), but if the\n\t\t\t\t// armor is in a stack then we will include the encumbrance of the\n\t\t\t\t// additional armor sets\n\t\t\t\tconst quantity = itemData.quantity || 1;\n\n\t\t\t\tif (quantity > 1) {\n\t\t\t\t\ttotalEnc +=\n\t\t\t\t\t\tNumber(itemData.encumbrance) * Number(itemData.quantity - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\ttotalEnc += Number(itemData.encumbrance) * Number(itemData.quantity);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn totalEnc;\n}\n\nexport function calculateEncumbrance(actorInventory, actorBrawn) {\n\tactorBrawn = Number(actorBrawn);\n\n\tconst combinedEnc = Math.floor(combinedEncumbrance(actorInventory));\n\tconst encumberedAt = actorBrawn * 2;\n\tconst limit = actorBrawn * 5;\n\n\treturn new InventoryWeight(combinedEnc, encumberedAt, limit);\n}\n","export default class CompendiumItemSelector extends FormApplication {\n\n\tcloseOnSelection = false;\n\n\tmaxChoices = 0;\n\n\tuuid = foundry.utils.randomID();\n\n\tstatic get defaultOptions() {\n\t\tconst options = super.defaultOptions;\n\n\t\tfoundry.utils.mergeObject(options, {\n\t\t\tclasses: [\"conan2d20\", \"compendium-item-selector\"],\n\t\t\theight: \"auto\",\n\t\t\twidth: 320,\n\t\t\tcloseOnSubmit: false,\n\t\t\tsubmitOnChange: true,\n\t\t});\n\n\t\treturn options;\n\t}\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectCompendiumItem.prompt\");\n\t}\n\n\tget template() {\n\t\treturn \"systems/conan2d20/templates/apps/compendium-item-selector.hbs\";\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectCompendiumItem.title\");\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".remove-item\").click(event => this._onRemoveItem(event));\n\n\t\tsuper.activateListeners(html);\n\t}\n\n\tasync getAllItemData() {\n\t\tthis.availableItems = await this.getAvailableItems() ?? [];\n\t\tthis.currentItemUuids = await this.getUuids() ?? [];\n\t\tthis.currentItems = await this.getCurrentItems() ?? [];\n\t}\n\n\tasync getCurrentItems() {\n\t\tconst items = [];\n\t\tfor (const uuid of this.currentItemUuids) {\n\t\t\tconst item = await fromUuid(uuid);\n\t\t\titems.push(item);\n\t\t}\n\n\t\treturn items.sort((a, b) => {\n\t\t\tif (a.name < b.name) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (a.name > b.name) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\t}\n\n\tasync getData() {\n\t\tawait this.getAllItemData();\n\n\t\tconst data = {\n\t\t\tcurrentItems: this.currentItems,\n\t\t\titemChoices: [],\n\t\t\tprompt: this.prompt,\n\t\t\tuuid: this.uuid,\n\t\t};\n\n\t\t// Don\"t include already selected items\n\t\tfor (const item of this.availableItems) {\n\t\t\tif (!this.currentItemUuids.includes(item.uuid)) {\n\t\t\t\tdata.itemChoices.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tasync _onRemoveItem(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tlet itemIndex = $(event.currentTarget).data(\"item-index\");\n\n\t\tconst newItemUuids = [];\n\n\t\tfor (let i = 0; i < this.currentItems.length; i++) {\n\t\t\tif (itemIndex === i) continue;\n\t\t\tnewItemUuids.push(this.currentItems[i].uuid);\n\t\t}\n\n\t\tawait this._saveUuids(newItemUuids);\n\t}\n\n\tasync _saveUuids(uuids) {\n\t\tawait this.saveUuids(uuids);\n\n\t\tthis.render(false);\n\t}\n\n\tasync _updateObject(event, formData) {\n\t\tlet newUuids = this.currentItemUuids;\n\n\t\tconst currentItemCount = this.currentItemUuids.length;\n\t\tif (this.maxChoices === 1 && currentItemCount === 1 && formData[\"item-selected\"] !== \"\") {\n\t\t\tfor (const item of this.availableItems) {\n\t\t\t\tif (item.name === formData[\"item-selected\"]) {\n\t\t\t\t\tnewUuids = [item.uuid];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this._saveUuids(newUuids);\n\t\t}\n\t\telse if (this.maxChoices === 0 || this.maxChoices > currentItemCount) {\n\t\t\tfor (const item of this.availableItems) {\n\t\t\t\tif (item.name === formData[\"item-selected\"]) {\n\t\t\t\t\tnewUuids.push(item.uuid);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this._saveUuids(newUuids);\n\t\t}\n\t\telse {\n\t\t\tui.notifications.warn(\n\t\t\t\tgame.i18n.format(\"CONAN.Form.SelectCompendiumItem.Error.MaxChoicesReached\",\n\t\t\t\t\t{maxChoices: this.maxChoices}\n\t\t\t\t)\n\t\t\t);\n\n\t\t\treturn this.render(true);\n\t\t}\n\n\t\tif (this.closeOnSelection) this.close();\n\t}\n}\n","import CompendiumItemSelector from \"../CompendiumItemSelector.mjs\";\n\nexport default class ArchetypeSelector extends CompendiumItemSelector {\n\n\tmaxChoices = 1;\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectArchetype.prompt\");\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectArchetype.title\");\n\t}\n\n\tasync getAvailableItems() {\n\t\treturn await conan.compendiums.archetypes(false);\n\t}\n\n\tasync getUuids() {\n\t\tconst uuid = this.object?.system?.background?.archetype?.value;\n\n\t\treturn uuid !== \"\" ? [uuid] : [];\n\t}\n\n\tasync saveUuids(uuids) {\n\t\tconst uuid = uuids[0] ?? \"\";\n\n\t\treturn this.object.update({\n\t\t\t\"system.background.archetype.value\": uuid,\n\t\t});\n\t}\n}\n","import CompendiumItemSelector from \"../CompendiumItemSelector.mjs\";\n\nexport default class CasteSelector extends CompendiumItemSelector {\n\n\tmaxChoices = 1;\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectCaste.prompt\");\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectCaste.title\");\n\t}\n\n\tasync getAvailableItems() {\n\t\treturn await conan.compendiums.castes(false);\n\t}\n\n\tasync getUuids() {\n\t\tconst uuid = this.object?.system?.background?.caste?.value;\n\n\t\treturn uuid !== \"\" ? [uuid] : [];\n\t}\n\n\tasync saveUuids(uuids) {\n\t\tconst uuid = uuids[0] ?? \"\";\n\n\t\treturn this.object.update({\n\t\t\t\"system.background.caste.value\": uuid,\n\t\t});\n\t}\n}\n","import CompendiumItemSelector from \"../CompendiumItemSelector.mjs\";\n\nexport default class EducationSelector extends CompendiumItemSelector {\n\n\tmaxChoices = 1;\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectEducation.prompt\");\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectEducation.title\");\n\t}\n\n\tasync getAvailableItems() {\n\t\treturn await conan.compendiums.educations(false);\n\t}\n\n\tasync getUuids() {\n\t\tconst uuid = this.object?.system?.background?.education?.value;\n\n\t\treturn uuid !== \"\" ? [uuid] : [];\n\t}\n\n\tasync saveUuids(uuids) {\n\t\tconst uuid = uuids[0] ?? \"\";\n\n\t\treturn this.object.update({\n\t\t\t\"system.background.education.value\": uuid,\n\t\t});\n\t}\n}\n","import CompendiumItemSelector from \"../CompendiumItemSelector.mjs\";\n\nexport default class HomelandSelector extends CompendiumItemSelector {\n\n\tmaxChoices = 1;\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectHomeland.prompt\");\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectHomeland.title\");\n\t}\n\n\tasync getAvailableItems() {\n\t\treturn await conan.compendiums.homelands(false);\n\t}\n\n\tasync getUuids() {\n\t\tconst uuid = this.object?.system?.background?.homeland?.value;\n\n\t\treturn uuid !== \"\" ? [uuid] : [];\n\t}\n\n\tasync saveUuids(uuids) {\n\t\tconst uuid = uuids[0] ?? \"\";\n\n\t\treturn this.object.update({\n\t\t\t\"system.background.homeland.value\": uuid,\n\t\t});\n\t}\n}\n","import CompendiumItemSelector from \"../CompendiumItemSelector.mjs\";\n\nexport default class LanguageSelector extends CompendiumItemSelector {\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectLanguage.prompt\");\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectLanguages.title\");\n\t}\n\n\tasync getAvailableItems() {\n\t\treturn await conan.compendiums.languages(false);\n\t}\n\n\tasync getUuids() {\n\t\treturn this.object?.system?.background?.languages ?? [];\n\t}\n\n\tasync saveUuids(uuids) {\n\t\treturn this.object.update({\n\t\t\t\"system.background.languages\": uuids,\n\t\t});\n\t}\n}\n","import CompendiumItemSelector from \"../CompendiumItemSelector.mjs\";\n\nexport default class NatureSelector extends CompendiumItemSelector {\n\n\tmaxChoices = 1;\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectNature.prompt\");\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectNature.title\");\n\t}\n\n\tasync getAvailableItems() {\n\t\treturn await conan.compendiums.natures(false);\n\t}\n\n\tasync getUuids() {\n\t\tconst uuid = this.object?.system?.background?.nature?.value;\n\n\t\treturn uuid !== \"\" ? [uuid] : [];\n\t}\n\n\tasync saveUuids(uuids) {\n\t\tconst uuid = uuids[0] ?? \"\";\n\n\t\treturn this.object.update({\n\t\t\t\"system.background.nature.value\": uuid,\n\t\t});\n\t}\n}\n","import CompendiumItemSelector from \"../CompendiumItemSelector.mjs\";\n\nexport default class StorySelector extends CompendiumItemSelector {\n\n\tmaxChoices = 1;\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectStory.prompt\");\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectStory.title\");\n\t}\n\n\tasync getAvailableItems() {\n\t\treturn await conan.compendiums.stories(false);\n\t}\n\n\tasync getUuids() {\n\t\tconst uuid = this.object?.system?.background?.story?.value;\n\n\t\treturn uuid !== \"\" ? [uuid] : [];\n\t}\n\n\tasync saveUuids(uuids) {\n\t\tconst uuid = uuids[0] ?? \"\";\n\n\t\treturn this.object.update({\n\t\t\t\"system.background.story.value\": uuid,\n\t\t});\n\t}\n}\n","import CompendiumItemSelector from \"../CompendiumItemSelector.mjs\";\n\nexport default class WarStorySelector extends CompendiumItemSelector {\n\n\tmaxChoices = 1;\n\n\tget prompt() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectWarStory.prompt\");\n\t}\n\n\tget title() {\n\t\treturn game.i18n.localize(\"CONAN.Form.SelectWarStory.title\");\n\t}\n\n\tasync getAvailableItems() {\n\t\treturn await conan.compendiums.warStories(false);\n\t}\n\n\tasync getUuids() {\n\t\tconst uuid = this.object?.system?.background?.warstory?.value;\n\n\t\treturn uuid !== \"\" ? [uuid] : [];\n\t}\n\n\tasync saveUuids(uuids) {\n\t\tconst uuid = uuids[0] ?? \"\";\n\n\t\treturn this.object.update({\n\t\t\t\"system.background.warstory.value\": uuid,\n\t\t});\n\t}\n}\n","import ConanBaseActorSheet from \"./ConanBaseActorSheet.mjs\";\n\nimport { calculateEncumbrance } from \"../utils/encumbrance.mjs\";\n\nimport * as backgroundSelectors from \"../apps/CompendiumItemSelectors/_module.mjs\";\n\nclass ConanCharacterSheet extends ConanBaseActorSheet {\n\n\tconstructor(object, options={}) {\n\t\tsuper(object, options);\n\n\t\tthis.characterUpgrade = new conan.apps.CharacterUpgrade(this.actor);\n\t}\n\n\tstatic get defaultOptions() {\n\t\tconst options = super.defaultOptions;\n\n\t\tfoundry.utils.mergeObject(options, {\n\t\t\tclasses: options.classes.concat([\n\t\t\t\t\"conan2d20\",\n\t\t\t\t\"actor\",\n\t\t\t\t\"pc\",\n\t\t\t\t\"character-sheet\",\n\t\t\t]),\n\t\t\twidth: 730,\n\t\t\theight: 800,\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tnavSelector: \".sheet-navigation\",\n\t\t\t\t\tcontentSelector: \".sheet-content\",\n\t\t\t\t\tinitial: \"character\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tdragDrop: [{dragSelector: \".item\", dropSelector: null}],\n\t\t\tscrollY: [\n\t\t\t\t\".tab.actions\",\n\t\t\t\t\".tab.skills\",\n\t\t\t\t\".talents-list\",\n\t\t\t\t\".inventory-list\",\n\t\t\t\t\".tab.sorcery\",\n\t\t\t],\n\t\t});\n\n\t\treturn options;\n\t}\n\n\tget template() {\n\t\tconst path = \"systems/conan2d20/templates/actors/\";\n\t\tif (!game.user.isGM && this.actor.limited) {\n\t\t\treturn `${path}character-sheet-readonly.hbs`;\n\t\t}\n\t\telse {\n\t\t\treturn `${path}character-sheet.hbs`;\n\t\t}\n\t}\n\n\tasync getData(options = {}) {\n\t\tconst context = await super.getData(options);\n\n\t\t// Update skill labels\n\t\tif (context.system.skills !== undefined) {\n\t\t\tfor (const [s, skl] of Object.entries(context.system.skills)) {\n\t\t\t\tskl.label = CONFIG.CONAN.skills[s];\n\t\t\t}\n\t\t}\n\n\t\t// Update Encumbrance Level\n\t\tcontext.system.encumbrance = calculateEncumbrance(\n\t\t\tcontext.inventory,\n\t\t\tcontext.system.attributes.bra.value\n\t\t);\n\n\t\tconst shields = context.inventory.weapon.items.filter(\n\t\t\ti => i.system.isShield && i.isEquipped && !i.isBroken\n\t\t);\n\n\t\tcontext.system.armor = conan.utils.calculateArmor(\n\t\t\tcontext.inventory.armor.items,\n\t\t\tshields\n\t\t);\n\n\t\tcontext.skills = CONFIG.CONAN.skills;\n\n\t\tcontext.notesHTML = await TextEditor.enrichHTML(\n\t\t\tcontext.system.details.notes,\n\t\t\t{\n\t\t\t\tsecrets: this.actor.isOwner,\n\t\t\t\tasync: true,\n\t\t\t\trelativeTo: this.actor,\n\t\t\t}\n\t\t);\n\n\t\tcontext.biographySelectors = await this.getBiographySelectors();\n\n\t\tcontext.languages = [];\n\t\tfor (const itemUuid of context.system.background.languages ?? []) {\n\t\t\tcontext.languages.push(await fromUuid(itemUuid));\n\t\t}\n\t\tcontext.languages.sort((a, b) => a.name.localeCompare(b.name));\n\n\t\tcontext.disableManualHealthEdit = game.settings.get(SYSTEM_ID, \"disableManualHealthEdit\");\n\n\t\tthis.characterUpgrade.render(false);\n\n\t\treturn context;\n\t}\n\n\tasync getBiographySelectors() {\n\t\tconst background = this.actor.system.background;\n\n\t\tconst data = {\n\t\t\tarchetype: {\n\t\t\t\tname: \"archetype\",\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.Background.Archetype.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.Background.Archetype.tooltip\"),\n\t\t\t\titem: await fromUuid(background.archetype.value) ?? null,\n\t\t\t},\n\t\t\tcaste: {\n\t\t\t\tname: \"caste\",\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.Background.Caste.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.Background.Caste.tooltip\"),\n\t\t\t\titem: await fromUuid(background.caste.value) ?? null,\n\t\t\t},\n\t\t\teducation: {\n\t\t\t\tname: \"education\",\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.Background.Education.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.Background.Education.tooltip\"),\n\t\t\t\titem: await fromUuid(background.education.value) ?? null,\n\t\t\t},\n\t\t\thomeland: {\n\t\t\t\tname: \"homeland\",\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.Background.Homeland.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.Background.Homeland.tooltip\"),\n\t\t\t\titem: await fromUuid(background.homeland.value) ?? null,\n\t\t\t},\n\t\t\tnature: {\n\t\t\t\tname: \"nature\",\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.Background.Nature.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.Background.Nature.tooltip\"),\n\t\t\t\titem: await fromUuid(background.nature.value) ?? null,\n\t\t\t},\n\t\t\tstory: {\n\t\t\t\tname: \"story\",\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.Background.Story.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.Background.Story.tooltip\"),\n\t\t\t\titem: await fromUuid(background.story.value) ?? null,\n\t\t\t},\n\t\t\twarstory: {\n\t\t\t\tname: \"warstory\",\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.Background.WarStory.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.Background.WarStory.tooltip\"),\n\t\t\t\titem: await fromUuid(background.warstory.value) ?? null,\n\t\t\t},\n\t\t};\n\n\t\treturn data;\n\t}\n\n\n\tasync getArmor(armorLocation) {\n\t\t// TODO Code Smell: We shouldn't need to go through the character sheet\n\t\t// to get the Actor\"s armor.  That should be a function on the Actor class\n\t\t//\n\t\tconst context = await this.getData();\n\t\treturn context.system.armor[armorLocation];\n\t}\n\n\tgetMaxResolve(actorData) {\n\t\treturn (actorData.system.attributes.wil.value\n\t\t\t+ actorData.system.skills.dis.expertise.value\n\t\t\t- actorData.system.health.mental.despair\n\t\t\t+ actorData.system.health.mental.bonus\n\t\t);\n\t}\n\n\tgetMaxVigor(actorData) {\n\t\treturn (actorData.system.attributes.bra.value\n\t\t\t+ actorData.system.skills.res.expertise.value\n\t\t\t- actorData.system.health.physical.fatigue\n\t\t\t+ actorData.system.health.physical.bonus\n\t\t);\n\t}\n\n\t/* -------------------------------------------- */\n\n\t/**\n\t * Organize and classify Items for Character sheets\n\t * @private\n\t */\n\n\t_prepareItems(context) {\n\t\tconst inventory = {\n\t\t\tarmor: {\n\t\t\t\tstandardHeader: true,\n\t\t\t\tcanCreate: true,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryArmorHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t\tweapon: {\n\t\t\t\tcanCreate: true,\n\t\t\t\tstandardHeader: true,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryWeaponsHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t\tkit: {\n\t\t\t\tcanCreate: true,\n\t\t\t\tstandardHeader: false,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryKitsHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t\tconsumable: {\n\t\t\t\tcanCreate: false,\n\t\t\t\tstandardHeader: false,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryConsumablesHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t\tmiscellaneous: {\n\t\t\t\tcanCreate: true,\n\t\t\t\tstandardHeader: true,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryMiscHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t};\n\n\t\tconst talents = [];\n\n\t\tconst sorcery = {\n\t\t\tenchantment: {\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.sorceryEnchantmentHeader\"),\n\t\t\t\tsorcery: [],\n\t\t\t},\n\t\t\tspell: {\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.sorcerySpellHeader\"),\n\t\t\t\tsorcery: [],\n\t\t\t},\n\t\t};\n\n\t\t// Actions\n\t\tconst actions = {\n\t\t\tstandard: {\n\t\t\t\tactions: [],\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.ActionHeaders.StandardActions.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.ActionHeaders.StandardActions.tooltip\"),\n\t\t\t},\n\t\t\tminor: {\n\t\t\t\tactions: [],\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.ActionHeaders.MinorActions.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.ActionHeaders.MinorActions.tooltip\"),\n\t\t\t},\n\t\t\treaction: {\n\t\t\t\tactions: [],\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.ActionHeaders.Reactions.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.ActionHeaders.Reactions.tooltip\"),\n\t\t\t},\n\t\t\tfree: {\n\t\t\t\tactions: [],\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Actor.ActionHeaders.FreeActions.label\"),\n\t\t\t\ttooltip: game.i18n.localize(\"CONAN.Actor.ActionHeaders.FreeActions.tooltip\"),\n\t\t\t},\n\t\t};\n\n\t\tconst attacks = {\n\t\t\tdisplay: [],\n\t\t\tweapon: [],\n\t\t};\n\n\t\tconst allItems = this._sortAllItems(context);\n\n\t\tlet talentTrees = {};\n\n\t\tfor (const i of allItems) {\n\t\t\ti.img = i.img || DEFAULT_TOKEN;\n\n\t\t\ti.canBeStowed = true; // default for all\n\t\t\ti.isStowed = false;\n\n\t\t\t// Read-Only Equipment\n\t\t\tif (i.type === \"armor\" || i.type === \"kit\") {\n\t\t\t\tcontext.hasEquipment = true;\n\t\t\t}\n\n\t\t\tif (i.type === \"armor\" || i.type === \"weapon\") {\n\t\t\t\ti.canBeEquipped = true;\n\t\t\t\ti.canBeBroken = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ti.canBeEquipped = false;\n\t\t\t\ti.canBeBroken = false;\n\t\t\t}\n\n\t\t\ti.isBroken = i.system.broken ? true : false;\n\t\t\ti.isEquipped = i.system.equipped ? true : false;\n\n\t\t\t// Filter all displays and equipped weapons into the relevant attack\n\t\t\t// arrays for display on the actions tab\n\t\t\tif (i.type === \"display\" || i.type === \"weapon\") {\n\t\t\t\tconst action = {};\n\t\t\t\taction.imageUrl = i.img;\n\t\t\t\taction.name = i.name;\n\t\t\t\taction.type = \"attack\";\n\n\t\t\t\taction.isShield = i.system.qualities.value.find(\n\t\t\t\t\tq => q.type === \"shieldx\"\n\t\t\t\t) ? true : false;\n\n\t\t\t\taction.qualities = [{\n\t\t\t\t\tname: \"attack\",\n\t\t\t\t\tlabel: game.i18n.localize(CONFIG.CONAN.attacks[i.type]),\n\t\t\t\t}];\n\n\t\t\t\tif (i.type === \"weapon\") {\n\t\t\t\t\taction.qualities.push({\n\t\t\t\t\t\tname: \"weaponType\",\n\t\t\t\t\t\tlabel: CONFIG.CONAN.weaponTypes[i.system.weaponType],\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t/* eslint-disable no-loop-func */\n\t\t\t\ti?.system?.qualities?.value?.forEach(quality => {\n\t\t\t\t\tconst key = CONFIG.CONAN.weaponQualities[quality] ?? quality;\n\n\t\t\t\t\tlet qualityLabel = \"\";\n\t\t\t\t\tif (key.value) {\n\t\t\t\t\t\tqualityLabel = `${game.i18n.localize(key.label)}(${key.value})`;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tqualityLabel = `${game.i18n.localize(key.label)}`;\n\t\t\t\t\t}\n\n\t\t\t\t\taction.qualities.push({\n\t\t\t\t\t\tname: quality,\n\t\t\t\t\t\tlabel: qualityLabel,\n\t\t\t\t\t\tdescription: CONFIG.CONAN.qualitiesDescriptions[key.type] || \"\",\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t/* eslint-enable no-loop-func */\n\n\t\t\t\taction.attack = {};\n\t\t\t\taction.attack.id = i._id;\n\t\t\t\taction.attack.type = i.type;\n\t\t\t\taction.weaponType = i.system.weaponType;\n\n\t\t\t\tif (i.type === \"display\" || (i.isEquipped && !i.isBroken)) {\n\t\t\t\t\tattacks[i.type].push(action);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Inventory\n\t\t\tif (Object.keys(inventory).includes(i.type)) {\n\t\t\t\ti.system.quantity = i.system.quantity || 0;\n\t\t\t\ti.system.encumbrance = i.system.encumbrance || 0;\n\t\t\t\ti.hasCharges = i.type === \"kit\" && i.system.uses.max > 0;\n\n\t\t\t\tif (i.canBeStowed && i.system.stowedIn && i.system.stowedIn !== \"\") {\n\t\t\t\t\tconst container = this.actor.getEmbeddedDocument(\n\t\t\t\t\t\t\"Item\",\n\t\t\t\t\t\ti.system.stowedIn\n\t\t\t\t\t);\n\n\t\t\t\t\ti.stowedInName = container.name;\n\t\t\t\t\ti.isStowed = true;\n\t\t\t\t}\n\n\t\t\t\tinventory[i.type].items.push(i);\n\t\t\t}\n\t\t\telse if (i.type === \"talent\") {\n\t\t\t\tlet itemsTalentTree = \"\";\n\n\t\t\t\tif (i.system.talentType === \"skill\") {\n\t\t\t\t\titemsTalentTree = CONFIG.CONAN.skills[i.system.linkedSkill].toLowerCase();\n\t\t\t\t}\n\t\t\t\telse if (i.system.talentType === \"other\") {\n\t\t\t\t\t// If tree has been set use that, otherwise default to `other`\n\t\t\t\t\titemsTalentTree = i.system.tree.toLowerCase() ?? \"other\";\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\titemsTalentTree = i.system.talentType;\n\t\t\t\t}\n\n\t\t\t\tif (!talentTrees[itemsTalentTree]) {\n\t\t\t\t\ttalentTrees[itemsTalentTree] = {\n\t\t\t\t\t\tlabel: itemsTalentTree,\n\t\t\t\t\t\tranks: 0,\n\t\t\t\t\t\ttalentCount: 0,\n\t\t\t\t\t\ttalents: [],\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\ttalentTrees[itemsTalentTree].talents.push(i);\n\t\t\t\ttalentTrees[itemsTalentTree].ranks += i.system.rank.value;\n\t\t\t\ttalentTrees[itemsTalentTree].talentCount += 1;\n\t\t\t}\n\t\t\telse if (i.type === \"spell\") {\n\t\t\t\tsorcery[i.type].sorcery.push(i);\n\t\t\t}\n\t\t\telse if (i.type === \"enchantment\") {\n\t\t\t\ti.canBeStowed = false;\n\t\t\t\tsorcery[i.type].sorcery.push(i);\n\t\t\t\tinventory.consumable.items.push(i);\n\t\t\t}\n\t\t\telse if (i.type === \"miscellaneous\") {\n\t\t\t\tinventory.miscellaneous.items.push(i);\n\t\t\t}\n\n\t\t\t// Actions\n\t\t\tif (i.type === \"action\") {\n\t\t\t\tactions[i.system.actionType].actions.push(i);\n\t\t\t}\n\t\t}\n\n\t\t// Sort the discovered talent trees and add them to the talents data to\n\t\t// be stored in the context\n\t\tObject.keys(talentTrees)\n\t\t\t.sort()\n\t\t\t.forEach(talent => {\n\t\t\t\ttalents.push(talentTrees[talent]);\n\t\t\t});\n\n\t\t// Assign and return\n\t\tcontext.actions = actions;\n\t\tcontext.attacks = attacks;\n\t\tcontext.inventory = inventory;\n\t\tcontext.sorcery = sorcery;\n\t\tcontext.talents = talents;\n\t}\n\n\t_adjustDespair(actorData, delta) {\n\t\tlet currentMax = this.getMaxResolve(actorData);\n\n\t\tactorData.system.health.mental.despair += delta;\n\t\tcurrentMax -= delta;\n\n\t\t// clamp values if out of range\n\t\tif (actorData.system.health.mental.despair < 0) {\n\t\t\tactorData.system.health.mental.despair = 0;\n\t\t}\n\t\telse if (actorData.system.health.mental.value > currentMax) {\n\t\t\tactorData.system.health.mental.value = currentMax;\n\t\t\tactorData.system.health.mental.max = currentMax;\n\t\t}\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_adjustFatigue(actorData, delta) {\n\t\tlet currentMax = this.getMaxVigor(actorData);\n\n\t\tactorData.system.health.physical.fatigue += delta;\n\t\tcurrentMax -= delta;\n\n\t\t// clamp values if out of range\n\t\tif (actorData.system.health.physical.fatigue < 0) {\n\t\t\tactorData.system.health.physical.fatigue = 0;\n\t\t}\n\t\telse if (actorData.system.health.physical.value > currentMax) {\n\t\t\tactorData.system.health.physical.value = currentMax;\n\t\t\tactorData.system.health.physical.max = currentMax;\n\t\t}\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_adjustResolve(actorData, delta) {\n\t\tconst currentMax = this.getMaxResolve(actorData);\n\n\t\tactorData.system.health.mental.value += delta;\n\n\t\t// clamp values if out of range\n\t\tif (actorData.system.health.mental.value < 0) {\n\t\t\tactorData.system.health.mental.value = 0;\n\t\t}\n\t\telse if (actorData.system.health.mental.value > currentMax) {\n\t\t\tactorData.system.health.mental.value = currentMax;\n\t\t}\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_adjustResolveBonus(actorData, delta) {\n\t\tconst currentMax = this.getMaxResolve(actorData);\n\n\t\t// don\"t add a negative delta if the max value is already 0\n\t\tif (!(currentMax === 0 && delta < 0)) {\n\t\t\tactorData.system.health.mental.bonus += delta;\n\n\t\t\t// also apply the bonus immediately to the current health value\n\t\t\tactorData.system.health.mental.value += delta;\n\t\t}\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_adjustVigor(actorData, delta) {\n\t\tconst currentMax = this.getMaxVigor(actorData);\n\n\t\tactorData.system.health.physical.value += delta;\n\n\t\t// clamp values if out of range\n\t\tif (actorData.system.health.physical.value < 0) {\n\t\t\tactorData.system.health.physical.value = 0;\n\t\t}\n\t\telse if (actorData.system.health.physical.value > currentMax) {\n\t\t\tactorData.system.health.physical.value = currentMax;\n\t\t}\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_adjustVigorBonus(actorData, delta) {\n\t\tconst currentMax = this.getMaxVigor(actorData);\n\n\t\t// don\"t add a negative delta if the max value is already 0\n\t\tif (!(currentMax === 0 && delta < 0)) {\n\t\t\tactorData.system.health.physical.bonus += delta;\n\n\t\t\t// also apply the bonus immediately to the current health value\n\t\t\tactorData.system.health.physical.value += delta;\n\t\t}\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\tasync _onDropItem(event, data) {\n\t\tconst droppedItem = data?.uuid ? await fromUuid(data.uuid) : null;\n\t\tconst type = droppedItem.type;\n\n\t\tif (type === \"npcaction\") return;\n\n\t\tif (type === \"npcattack\") {\n\t\t\tif (droppedItem.system.attackType === \"threaten\") return; // only create physical weapons\n\n\t\t\tconst droppedItemData = foundry.utils.duplicate(droppedItem);\n\n\t\t\t// npcattack Items have any damage bonuses built in, so grab the NPCs\n\t\t\t// damage bonus as it needs to be deducted from the new Item\"s damage\n\t\t\t// setting to allow for the player\"s own damage bonuses to be applied\n\t\t\tlet damageModifier = 0;\n\t\t\tif (droppedItem.system.attackType === \"melee\") {\n\t\t\t\tdamageModifier = droppedItem.actor._attributeBonus(\"bra\");\n\t\t\t}\n\t\t\telse if (droppedItem.system.attackType === \"ranged\") {\n\t\t\t\tdamageModifier = droppedItem.actor._attributeBonus(\"awa\");\n\t\t\t}\n\n\t\t\tconst newItemData = {\n\t\t\t\ttype: \"weapon\",\n\t\t\t\tname: droppedItemData.name,\n\t\t\t\timg: droppedItemData.img,\n\t\t\t\tsystem: {\n\t\t\t\t\tweaponType: droppedItemData.system.attackType,\n\t\t\t\t\tdamage: droppedItemData.system.damage,\n\t\t\t\t\tdescription: droppedItemData.system.description,\n\t\t\t\t\tgroup: droppedItemData.system.group,\n\t\t\t\t\tqualities: droppedItemData.system.qualities,\n\t\t\t\t\trange: droppedItemData.system.range,\n\t\t\t\t\tsize: droppedItemData.system.size,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t// deduct the previously built in damage bonus from the weapon\"s base\n\t\t\t// damage\n\t\t\tnewItemData.system.damage.dice =\n\t\t\t\tnewItemData.system.damage.dice - damageModifier;\n\n\t\t\treturn this.actor.createEmbeddedDocuments(\"Item\", [newItemData]);\n\t\t}\n\t\telse if (CONFIG.CONAN.backgroundItems.includes(droppedItem.type)) {\n\t\t\treturn this._onDroppedBackgroundItem(droppedItem);\n\t\t}\n\t\telse {\n\t\t\tsuper._onDropItem(event, data);\n\t\t}\n\t}\n\n\tasync _onDroppedBackgroundItem(item) {\n\t\tif (!item.uuid.startsWith(\"Compendium.\")) {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.localize(\"CONAN.Actor.Error.BackgroundItemNotFromCompendium\")\n\t\t\t);\n\t\t}\n\n\t\tif (item.type === \"language\") {\n\t\t\tconst languages = this.actor.system.background.languages;\n\n\t\t\tif (languages.includes(item.uuid)) {\n\t\t\t\treturn ui.notifications.warn(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.Actor.Error.LanguageAlreadyKnown\")\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlanguages.push(item.uuid);\n\t\t\treturn this.actor.update({\"system.background.languages\": languages});\n\t\t}\n\t\telse {\n\t\t\tconst updateData = {};\n\t\t\tupdateData[`system.background.${item.type}.value`] = item.uuid;\n\t\t\treturn this.actor.update(updateData);\n\t\t}\n\t}\n\n\t_resetDespair(actorData) {\n\t\tactorData.system.health.mental.despair = 0;\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_resetFatigue(actorData) {\n\t\tactorData.system.health.physical.fatigue = 0;\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_resetResolve(actorData) {\n\t\tconst currentMax = this.getMaxResolve(actorData);\n\n\t\tactorData.system.health.mental.value = currentMax;\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_resetResolveBonus(actorData) {\n\t\tactorData.system.health.mental.bonus = 0;\n\n\t\tconst currentMax = this.getMaxResolve(actorData);\n\n\t\t// clamp the current value to the max if it is higher than the new maximum\n\t\tif (actorData.system.health.mental.value > currentMax) {\n\t\t\tactorData.system.health.mental.value = currentMax;\n\t\t}\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_resetVigor(actorData) {\n\t\tconst currentMax = this.getMaxVigor(actorData);\n\n\t\tactorData.system.health.physical.value = currentMax;\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_resetVigorBonus(actorData) {\n\t\tactorData.system.health.physical.bonus = 0;\n\n\t\tconst currentMax = this.getMaxVigor(actorData);\n\n\t\t// clamp the current value to the max if it is higher than the new maximum\n\t\tif (actorData.system.health.physical.value > currentMax) {\n\t\t\tactorData.system.health.physical.value = currentMax;\n\t\t}\n\n\t\tgame.actors.get(actorData._id).update(actorData);\n\t}\n\n\t_onItemSelector(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tlet itemType = $(event.currentTarget).data(\"options\");\n\n\t\tswitch (itemType) {\n\t\t\tcase \"archetype\":\n\t\t\t\tnew backgroundSelectors.ArchetypeSelector(this.actor).render(true);\n\t\t\t\tbreak;\n\t\t\tcase \"caste\":\n\t\t\t\tnew backgroundSelectors.CasteSelector(this.actor).render(true);\n\t\t\t\tbreak;\n\t\t\tcase \"education\":\n\t\t\t\tnew backgroundSelectors.EducationSelector(this.actor).render(true);\n\t\t\t\tbreak;\n\t\t\tcase \"homeland\":\n\t\t\t\tnew backgroundSelectors.HomelandSelector(this.actor).render(true);\n\t\t\t\tbreak;\n\t\t\tcase \"language\":\n\t\t\t\tnew backgroundSelectors.LanguageSelector(this.actor).render(true);\n\t\t\t\tbreak;\n\t\t\tcase \"nature\":\n\t\t\t\tnew backgroundSelectors.NatureSelector(this.actor).render(true);\n\t\t\t\tbreak;\n\t\t\tcase \"story\":\n\t\t\t\tnew backgroundSelectors.StorySelector(this.actor).render(true);\n\t\t\t\tbreak;\n\t\t\tcase \"warstory\":\n\t\t\t\tnew backgroundSelectors.WarStorySelector(this.actor).render(true);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\n\t\tif (!this.options.editable) return;\n\n\t\thtml.find(\".value-mouse-adjust\").mouseup(event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!(window.event.ctrlKey || window.event.altKey)) return;\n\n\t\t\tconst valueType = $(event.currentTarget).data(\"value-type\");\n\n\t\t\tlet functionPrefix = \"_adjust\";\n\t\t\tlet delta = 0;\n\n\t\t\tif (window.event.altKey && event.button === 0) {\n\t\t\t\tfunctionPrefix = \"_reset\";\n\t\t\t}\n\t\t\telse if (event.button === 0) {\n\t\t\t\tdelta = 1;\n\t\t\t}\n\t\t\telse if (event.button === 2) {\n\t\t\t\tdelta = -1;\n\t\t\t}\n\n\t\t\tconst functionName = `${functionPrefix}${valueType}`;\n\n\t\t\tconst actorData = foundry.utils.duplicate(this.actor);\n\n\t\t\tthis[functionName](actorData, delta);\n\t\t});\n\n\t\thtml.find(\".value-mouse-adjust\").on(\"wheel\", event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tif (!window.event.ctrlKey) return;\n\n\t\t\tconst valueType = $(event.currentTarget).data(\"value-type\");\n\t\t\tconst functionName = `_adjust${valueType}`;\n\n\t\t\tlet delta = 0;\n\n\t\t\tif (event.originalEvent.deltaY < 0) {\n\t\t\t\tdelta = 1;\n\t\t\t}\n\t\t\telse if (event.originalEvent.deltaY > 0) {\n\t\t\t\tdelta = -1;\n\t\t\t}\n\n\t\t\tconst actorData = foundry.utils.duplicate(this.actor);\n\n\t\t\tthis[functionName](actorData, delta);\n\t\t});\n\n\t\thtml.find(\".condition-value\").mouseup(event => {\n\t\t\tevent.preventDefault();\n\n\t\t\tconst condKey = $(event.currentTarget)\n\t\t\t\t.parents(\".sheet-condition\")\n\t\t\t\t.attr(\"data-cond-id\");\n\t\t\tif (event.button === 0) {\n\t\t\t\tthis.actor.addCondition(condKey);\n\t\t\t}\n\t\t\telse if (event.button === 2) {\n\t\t\t\tthis.actor.removeCondition(condKey);\n\t\t\t}\n\t\t});\n\n\t\thtml.find(\".item-selector\").click(event => this._onItemSelector(event));\n\n\t\thtml.find(\".condition-toggle\").mouseup(event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst condKey = $(event.currentTarget)\n\t\t\t\t.parents(\".sheet-condition\")\n\t\t\t\t.attr(\"data-cond-id\");\n\n\t\t\tif (\n\t\t\t\tCONFIG.CONAN.statusEffects.find(e => e.id === condKey).flags\n\t\t\t\t\t.conan2d20.value === null\n\t\t\t) {\n\t\t\t\tif (this.actor.hasCondition(condKey)) {\n\t\t\t\t\tthis.actor.removeCondition(condKey);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.actor.addCondition(condKey);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (event.button === 0) {\n\t\t\t\tthis.actor.addCondition(condKey);\n\t\t\t}\n\t\t\telse if (event.button === 2) {\n\t\t\t\tthis.actor.removeCondition(condKey);\n\t\t\t}\n\t\t});\n\n\t\thtml.on(\"click\", \".bank-momentum\", event => {\n\t\t\tevent.preventDefault();\n\t\t\tif (this.actor.isOwner || game.user.isGM) {\n\t\t\t\tif (this.actor.system.momentum <= 0) {\n\t\t\t\t\tui.notifications.warn(game.i18n.localize(\"CONAN.noUnbankedMomentum\"));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnew conan.apps.MomentumBanker(this.actor).render(true);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\thtml.on(\"click\", \".character-upgrade\", event => {\n\t\t\tevent.preventDefault();\n\t\t\tthis.characterUpgrade.render(true);\n\t\t});\n\t}\n}\n\nexport default ConanCharacterSheet;\n","import ConanBaseActorSheet from \"./ConanBaseActorSheet.mjs\";\n\nexport default class ConanNPCSheet extends ConanBaseActorSheet {\n\n\teditInhumanAttributes = false;\n\n\tstatic get defaultOptions() {\n\t\tconst options = super.defaultOptions;\n\n\t\tfoundry.utils.mergeObject(options, {\n\t\t\tclasses: options.classes.concat([\n\t\t\t\t\"conan2d20\",\n\t\t\t\t\"actor\",\n\t\t\t\t\"npc\",\n\t\t\t\t\"character-sheet\",\n\t\t\t]),\n\t\t\twidth: 600,\n\t\t\theight: 700,\n\t\t\tresizable: false,\n\t\t\ttabs: [\n\t\t\t\t{\n\t\t\t\t\tnavSelector: \".npc-sheet-navigation\",\n\t\t\t\t\tcontentSelector: \".npc-sheet__body\",\n\t\t\t\t\tinitial: \"npc-details\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tdragDrop: [{dragSelector: \".item\", dropSelector: null}],\n\t\t});\n\t\treturn options;\n\t}\n\n\tget template() {\n\t\tconst path = \"systems/conan2d20/templates/actors/\";\n\t\tif (!game.user.isGM && this.actor.limited) {\n\t\t\treturn `${path}npc-sheet-readonly.hbs`;\n\t\t}\n\t\telse {\n\t\t\treturn `${path}npc-sheet.hbs`;\n\t\t}\n\t}\n\n\tactivateListeners(html) {\n\t\thtml.find(\".isMob-checkbox\").click(event => this._onToggleMob(event));\n\n\t\thtml.find(\".npc-edit-inhuman\").click(event => {\n\t\t\tthis.editInhumanAttributes = !this.editInhumanAttributes;\n\t\t\tthis.render();\n\t\t});\n\n\t\thtml.find(\".npc-mob-count-minus\")\n\t\t\t.click(event => this._onAlterMobCount(event, -1));\n\n\t\thtml.find(\".npc-mob-count-plus\")\n\t\t\t.click(event => this._onAlterMobCount(event, 1));\n\n\t\tconst me = this;\n\t\thtml.find(\".mob-wound\").each(function() {\n\t\t\tconst wound = $(this);\n\t\t\tconst mobMemberId = wound.data(\"mob-member-id\");\n\t\t\tconst woundIndex = wound.data(\"wound-index\");\n\n\t\t\twound.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme._onToggleWound(mobMemberId, woundIndex);\n\t\t\t});\n\t\t});\n\n\t\thtml.find(\".mob-trauma\").each(function() {\n\t\t\tconst wound = $(this);\n\t\t\tconst mobMemberId = wound.data(\"mob-member-id\");\n\t\t\tconst traumaIndex = wound.data(\"trauma-index\");\n\n\t\t\twound.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme._onToggleTrauma(mobMemberId, traumaIndex);\n\t\t\t});\n\t\t});\n\n\t\thtml.find(\".quantity-grid\").each(function() {\n\t\t\tconst spinner = $(this);\n\t\t\tconst mobMemberId = spinner.data(\"mob-member-id\");\n\n\t\t\tconst input = spinner.find(\"input[type=\\\"number\\\"]\");\n\t\t\tconst btnUp = spinner.find(\".quantity-up\");\n\t\t\tconst btnDown = spinner.find(\".quantity-down\");\n\t\t\tconst quantityType = input.attr(\"data-quantity-type\");\n\n\t\t\tinput.on(\"wheel\", ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tif (ev.originalEvent.deltaY < 0) {\n\t\t\t\t\tme[`_mobInc${quantityType}`](mobMemberId);\n\t\t\t\t}\n\t\t\t\telse if (ev.originalEvent.deltaY > 0) {\n\t\t\t\t\tme[`_mobDec${quantityType}`](mobMemberId);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tbtnUp.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_mobInc${quantityType}`](mobMemberId);\n\t\t\t});\n\n\t\t\tbtnDown.click(ev => {\n\t\t\t\tev.preventDefault();\n\t\t\t\tme[`_mobDec${quantityType}`](mobMemberId);\n\t\t\t});\n\t\t});\n\n\t\tthis._mobMemberContextMenu(html);\n\n\t\tsuper.activateListeners(html);\n\t}\n\n\tasync getData(options = {}) {\n\t\tconst context = await super.getData(options);\n\t\tcontext.flags = context.actor.flags;\n\n\t\t// Update expertise fields labels\n\t\tif (context.system.skills !== undefined) {\n\t\t\tfor (const [s, skl] of Object.entries(context.system.skills)) {\n\t\t\t\tskl.label = CONFIG.CONAN.expertiseFields[s];\n\t\t\t}\n\t\t}\n\n\t\t// context.npcTypes = CONFIG.CONAN.NPC_TYPES;\n\n\t\tcontext.skills = CONFIG.CONAN.expertiseFields;\n\n\t\tcontext.tags = this.actor.getTags();\n\n\t\tcontext.noMobMemberId = !this.actor.system.grouping.baseActorId;\n\t\tcontext.editInhumanAttributes = this.editInhumanAttributes;\n\n\t\tcontext.isPurchasable = [\"mount\", \"transport\", \"watercraft\"].includes(\n\t\t\tthis.actor.type\n\t\t);\n\n\t\tcontext.isTransport = this.actor.type === \"transport\";\n\t\tcontext.isWatercraft = this.actor.type === \"watercraft\";\n\n\t\treturn context;\n\t}\n\n\tasync _clearMob() {\n\t\tconst data = {\n\t\t\t\"system.grouping.memberName\": null,\n\t\t\t\"system.grouping.members\": [],\n\t\t\t\"system.grouping.baseActorId\": null,\n\t\t\t\"system.grouping.memberImage\": null,\n\t\t\t\"system.grouping.memberToken\": null,\n\t\t\t\"system.grouping.type\": null,\n\t\t\t\"system.mobCount\": 0,\n\t\t\t\"system.isMob\": false,\n\t\t};\n\n\t\tthis.actor.update(data);\n\t}\n\n\t_createMobMemberData(mobActorId) {\n\t\tconst mobActor = game.actors.get(mobActorId);\n\t\tconst healthData = foundry.utils.duplicate(mobActor.system.health);\n\n\t\tlet wounds = [];\n\t\tlet traumas = [];\n\n\t\t// NPCs have the same amount of physical and mental wounds they can take\n\t\tfor (let i = 0; i < healthData.physical.wounds.max; i++) {\n\t\t\twounds.push({active: false});\n\t\t\ttraumas.push({active: false});\n\t\t}\n\n\t\tconst data = {\n\t\t\tarmor: mobActor.system.armor,\n\t\t\tcourage: mobActor.system.health.courage,\n\t\t\tdead: false,\n\t\t\tresolve: {\n\t\t\t\tvalue: healthData.mental.max,\n\t\t\t\tmax: healthData.mental.max,\n\t\t\t\ttraumas,\n\t\t\t},\n\t\t\tvigor: {\n\t\t\t\tvalue: healthData.physical.max,\n\t\t\t\tmax: healthData.physical.max,\n\t\t\t\twounds,\n\t\t\t},\n\t\t};\n\n\t\treturn data;\n\t}\n\n\t_getMobMemberContextOptions() {\n\t\treturn [\n\t\t\t{\n\t\t\t\tname: game.i18n.localize(\"CONAN.deleteMobMemberTitle\"),\n\t\t\t\ticon: \"<i class=\\\"fas fa-trash\\\"></i>\",\n\t\t\t\t// condition: () => canEdit(),\n\t\t\t\tcondition: () => {\n\t\t\t\t\treturn game.user.isGM;\n\t\t\t\t},\n\t\t\t\tcallback: element => {\n\t\t\t\t\tconst mobMemberDelete = element.data(\"mob-member-id\");\n\t\t\t\t\tthis._onMobMemberDelete(mobMemberDelete);\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t}\n\n\tasync _mobDecResolve(mobMemberId) {\n\t\tconst healthData = this.actor.system.grouping.members;\n\t\tconst currentResolve = healthData[mobMemberId].resolve.value;\n\n\t\tif (currentResolve > 0) {\n\t\t\thealthData[mobMemberId].resolve.value = currentResolve - 1;\n\n\t\t\tthis.actor.update({\n\t\t\t\t\"system.grouping.members\": healthData,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync _mobDecVigor(mobMemberId) {\n\t\tconst healthData = this.actor.system.grouping.members;\n\t\tconst currentVigor = healthData[mobMemberId].vigor.value;\n\n\t\tif (currentVigor > 0) {\n\t\t\thealthData[mobMemberId].vigor.value = currentVigor - 1;\n\n\t\t\tthis.actor.update({\n\t\t\t\t\"system.grouping.members\": healthData,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync _mobIncResolve(mobMemberId) {\n\t\tconst healthData = this.actor.system.grouping.members;\n\t\tconst currentResolve = healthData[mobMemberId].resolve.value;\n\n\t\tif (currentResolve < healthData[mobMemberId].resolve.max) {\n\t\t\thealthData[mobMemberId].resolve.value = currentResolve + 1;\n\n\t\t\tthis.actor.update({\n\t\t\t\t\"system.grouping.members\": healthData,\n\t\t\t});\n\t\t}\n\t}\n\n\tasync _mobIncVigor(mobMemberId) {\n\t\tconst healthData = this.actor.system.grouping.members;\n\t\tconst currentVigor = healthData[mobMemberId].vigor.value;\n\n\t\tif (currentVigor < healthData[mobMemberId].vigor.max) {\n\t\t\thealthData[mobMemberId].vigor.value = currentVigor + 1;\n\n\t\t\tthis.actor.update({\n\t\t\t\t\"system.grouping.members\": healthData,\n\t\t\t});\n\t\t}\n\t}\n\n\t_mobMemberContextMenu(html) {\n\t\tContextMenu.create(this, html, \".npc-mob-member\", this._getMobMemberContextOptions());\n\t}\n\n\tasync _onAlterMobCount(event, value) {\n\t\tevent.preventDefault();\n\n\t\tif (!this.actor.system.grouping.baseActorId) {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.localize(\"CONAN.NoBaseNpcGroupMemberSet\")\n\t\t\t);\n\t\t}\n\n\t\tconst memberCount = this.actor.system.grouping.members.length;\n\t\tconst newMemberCount = memberCount + value;\n\n\t\tif (newMemberCount <= 4 && newMemberCount >= 0) {\n\t\t\tconst data = {\n\t\t\t\t\"system.mobCount\": newMemberCount,\n\t\t\t};\n\n\t\t\tlet newMembers = [];\n\n\t\t\tif (newMemberCount > memberCount) {\n\t\t\t\tnewMembers = this.actor.system.grouping.members;\n\t\t\t\tnewMembers.push(this._createMobMemberData(this.actor.system.grouping.baseActorId));\n\t\t\t}\n\t\t\telse if (newMemberCount < memberCount) {\n\t\t\t\tif (newMemberCount > 0) {\n\t\t\t\t\tnewMembers = this.actor.system.grouping.members.slice(0, newMemberCount);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdata[\"system.grouping.members\"] = newMembers;\n\n\t\t\tthis.actor.update(data);\n\t\t}\n\t}\n\n\tasync _onDropItem(event, data) {\n\t\tconst droppedItem = data?.uuid ? await fromUuid(data.uuid) : null;\n\t\tconst type = droppedItem.type;\n\n\t\tif (![\"npcattack\", \"npcaction\", \"weapon\"].includes(type)) return;\n\n\t\tif (type === \"weapon\") {\n\t\t\tif (droppedItem.system.weaponType === \"threaten\") return; // only create physical weapons\n\n\t\t\tconst droppedItemData = foundry.utils.duplicate(droppedItem);\n\n\t\t\tlet damageModifier = 0;\n\t\t\tif (droppedItemData.system.weaponType === \"melee\") {\n\t\t\t\tdamageModifier = this.actor._attributeBonus(\"bra\");\n\t\t\t}\n\t\t\telse if (droppedItemData.system.weaponType === \"ranged\") {\n\t\t\t\tdamageModifier = this.actor._attributeBonus(\"awa\");\n\t\t\t}\n\n\t\t\tconst newItemData = {\n\t\t\t\ttype: \"npcattack\",\n\t\t\t\tname: droppedItemData.name,\n\t\t\t\timg: droppedItemData.img,\n\t\t\t\tsystem: {\n\t\t\t\t\tattackType: droppedItemData.system.weaponType,\n\t\t\t\t\tdamage: droppedItemData.system.damage,\n\t\t\t\t\tdescription: droppedItemData.system.description,\n\t\t\t\t\tgroup: droppedItemData.system.group,\n\t\t\t\t\tqualities: droppedItemData.system.qualities,\n\t\t\t\t\trange: droppedItemData.system.range,\n\t\t\t\t\tsize: droppedItemData.system.size,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\t// NPC attacks have the damage modifier built in to the weapon\"s base\n\t\t\t// damage\n\t\t\tnewItemData.system.damage.dice =\n\t\t\t\tnewItemData.system.damage.dice + damageModifier;\n\n\t\t\treturn this.actor.createEmbeddedDocuments(\"Item\", [newItemData]);\n\t\t}\n\t\telse {\n\t\t\tsuper._onDropItem(event, data);\n\t\t}\n\t}\n\n\tasync _onDropActor(event, data) {\n\t\t// Only allow drops onto a Mob leader\n\t\tif (!this.actor.system.isMob) return;\n\n\t\tconst droppedActor = data?.uuid ? await fromUuid(data.uuid) : null;\n\n\t\t// Only NPCs can be dropped\n\t\tif (droppedActor.type !== \"npc\") return;\n\n\t\tif (droppedActor) {\n\t\t\tthis._populateMob(droppedActor.id);\n\t\t}\n\t}\n\n\tasync _onEditInhuman(event) {\n\t\tevent.preventDefault();\n\t\tconsole.log(\"_onEditInhuman\");\n\t}\n\n\tasync _onMobMemberDelete(mobMemberId) {\n\t\tconst mobMembers = this.actor.system.grouping.members;\n\t\tconst newMobMembers = [];\n\n\t\tfor (let i = 0; i < mobMembers.length; i++) {\n\t\t\tif (i === mobMemberId) continue;\n\n\t\t\tnewMobMembers.push(mobMembers[i]);\n\t\t}\n\n\t\tawait this.actor.update({\n\t\t\t\"system.grouping.members\": newMobMembers,\n\t\t\t\"system.mobCount\": newMobMembers.length,\n\t\t});\n\t}\n\n\t/** @inheritdoc */\n\t_onSubmit(event) {\n\t\tconst updateData = this._getSubmitData();\n\n\t\t// If NPC type has changed, set the default max wounds/trauma for that\n\t\t// type of NPC\n\t\tif (updateData[\"system.type\"] !== this.actor.system.type) {\n\t\t\tlet maxWounds = 1; // default minion maxWounds\n\n\t\t\tif (updateData[\"system.type\"] === \"toughened\") {\n\t\t\t\tmaxWounds = 2;\n\t\t\t}\n\t\t\telse if (updateData[\"system.type\"] === \"nemesis\") {\n\t\t\t\tmaxWounds = 5;\n\t\t\t}\n\n\t\t\tupdateData[\"system.health.mental.traumas.max\"] = maxWounds;\n\t\t\tupdateData[\"system.health.physical.wounds.max\"] = maxWounds;\n\t\t}\n\n\t\tthis.actor.update(updateData);\n\t}\n\n\tasync _onToggleMob(event) {\n\t\tconst input = $(event.currentTarget);\n\t\tconst enabled = input.is(\":checked\");\n\n\t\tif (enabled) {\n\t\t\tawait this._populateMob();\n\t\t}\n\t\telse {\n\t\t\tawait this._clearMob();\n\t\t}\n\t}\n\n\tasync _onToggleWound(mobMemberId, woundIndex) {\n\t\tconst mobMembers = this.actor.system.grouping.members;\n\t\tconst woundStatus = mobMembers[mobMemberId].vigor.wounds[woundIndex].active;\n\n\t\tmobMembers[mobMemberId].vigor.wounds[woundIndex].active = !woundStatus;\n\n\t\tmobMembers[mobMemberId].dead = this.actor.isMobMemberDead(mobMembers[mobMemberId]);\n\n\t\tawait this.actor.update({\n\t\t\t\"system.grouping.members\": mobMembers,\n\t\t});\n\t}\n\n\tasync _onToggleTrauma(mobMemberId, traumaIndex) {\n\t\tconst mobMembers = this.actor.system.grouping.members;\n\t\tconst woundStatus = mobMembers[mobMemberId].resolve.traumas[traumaIndex].active;\n\n\t\tmobMembers[mobMemberId].resolve.traumas[traumaIndex].active = !woundStatus;\n\n\t\tmobMembers[mobMemberId].dead = this.actor.isMobMemberDead(mobMembers[mobMemberId]);\n\n\t\tawait this.actor.update({\n\t\t\t\"system.grouping.members\": mobMembers,\n\t\t});\n\t}\n\n\tasync _populateMob(mobActorId = null) {\n\t\tconst baseActorType = this.actor.system.type;\n\t\tconst baseActorId = this.actor._id;\n\t\tconst baseActorIsMinion = baseActorType === \"minion\";\n\n\t\tconst groupType = baseActorIsMinion ? \"mob\" : \"squad\";\n\t\tconst mobActor = mobActorId ? game.actors.get(mobActorId) : this.actor;\n\t\tconst mobActorIsMinion = mobActor.system.type === \"minion\";\n\n\t\tconst allowOverpowered = game.settings.get(\n\t\t\t\"conan2d20\",\n\t\t\t\"allowOverpoweredNpcGroups\"\n\t\t);\n\n\t\tlet populateAllowed = false;\n\t\tif (mobActorId) {\n\t\t\tif (!(allowOverpowered || mobActorIsMinion)) {\n\t\t\t\treturn ui.notifications.error(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.NpcGroupMemberNotMinion\")\n\t\t\t\t);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpopulateAllowed = true;\n\t\t\t}\n\t\t}\n\t\telse if (baseActorIsMinion) {\n\t\t\tpopulateAllowed = true;\n\t\t}\n\n\t\tif (populateAllowed) {\n\t\t\tconst members = [];\n\n\t\t\tfor (let i = 0; i < CONFIG.CONAN.DEFAULT_MOB_SIZE - 1; i++) {\n\t\t\t\tmembers.push(this._createMobMemberData(mobActorId ?? baseActorId));\n\t\t\t}\n\n\t\t\tconst data = {\n\t\t\t\t\"system.grouping.memberName\": mobActor.name,\n\t\t\t\t\"system.grouping.members\": members,\n\t\t\t\t\"system.grouping.baseActorId\": mobActorId ?? baseActorId,\n\t\t\t\t\"system.grouping.memberImage\": mobActor.img,\n\t\t\t\t\"system.grouping.memberToken\": mobActor.prototypeToken?.texture?.src ?? mobActor.img,\n\t\t\t\t\"system.grouping.type\": groupType,\n\t\t\t\t\"system.isMob\": true,\n\t\t\t\t\"system.mobCount\": members.length,\n\t\t\t};\n\n\t\t\tthis.actor.update(data);\n\t\t}\n\t}\n\n\t_prepareItems(context) {\n\t\tconst attacks = {\n\t\t\tweapon: [],\n\t\t\tdisplay: [],\n\t\t};\n\n\t\tconst actions = {\n\t\t\tabilities: {\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Item.NpcAction.Types.SpecialAbility\"),\n\t\t\t\tactions: [],\n\t\t\t},\n\t\t\tdoom: {\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.Item.NpcAction.Types.DoomSpend\"),\n\t\t\t\tactions: [],\n\t\t\t},\n\t\t};\n\n\t\tconst allItems = this._sortAllItems(context);\n\n\t\t// Get Attacks\n\t\tfor (const i of allItems) {\n\t\t\ti.img = i.img || CONST.DEFAULT_TOKEN;\n\n\t\t\tif (i.type === \"npcattack\") {\n\t\t\t\tlet item;\n\t\t\t\ttry {\n\t\t\t\t\titem = this.actor.getEmbeddedDocument(\"Item\", i._id);\n\t\t\t\t\ti.chatData = item.getChatData({secrets: this.actor.isOwner});\n\t\t\t\t}\n\t\t\t\tcatch(error) {\n\t\t\t\t\tconan.logger.error(error);\n\t\t\t\t}\n\n\t\t\t\tif (i.system.attackType === \"threaten\") {\n\t\t\t\t\tattacks.display.push(i);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ti.isShield = item.isShield();\n\t\t\t\t\tattacks.weapon.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (i.type === \"npcaction\") {\n\t\t\t\tconst actionType = i.system.actionType || \"npcaction\";\n\t\t\t\tactions[actionType].actions.push(i);\n\t\t\t}\n\t\t}\n\n\t\tcontext.actions = actions;\n\t\tcontext.attacks = attacks;\n\t}\n\n\t_onRollSkillCheck(event) {\n\t\tevent.preventDefault();\n\n\t\tconst skill = $(event.currentTarget)\n\t\t\t.parents(\".npc-skills__item\")\n\t\t\t.attr(\"data-skill\");\n\n\t\tthis.actor._rollSkillCheck(skill);\n\t}\n}\n","import ConanNPCSheet from \"./ConanNPCSheet.mjs\";\n\nexport default class ConanTransportSheet extends ConanNPCSheet {\n\n\tstatic get defaultOptions() {\n\t\tconst options = super.defaultOptions;\n\n\t\tfoundry.utils.mergeObject(options, {\n\t\t\theight: 700,\n\t\t});\n\t\treturn options;\n\t}\n\n\tget template() {\n\t\treturn `systems/conan2d20/templates/actors/${this.actor.type}-sheet.hbs`;\n\t}\n\n\tactivateListeners(html) {\n\t\tsuper.activateListeners(html);\n\n\t\tif (!this.options.editable) return;\n\n\t\thtml.find(\".impact-roll.rollable\").click(event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst options = {\n\t\t\t\tnumDice: this.actor.system.impactDamage ?? 1,\n\t\t\t\tisImpactDamage: true,\n\t\t\t};\n\n\t\t\tnew conan.apps.DamageRoller(this.actor, options).render(true);\n\t\t});\n\t}\n\n\tasync getData(options={}) {\n\t\tconst context = await super.getData(options);\n\n\t\t// Create list of NPC traits, including custom ones.\n\t\t//\n\t\t// this._prepareCapabilities(context);\n\t\tcontext.ownedByTransportActor = true;\n\t\tcontext.noMaxStowage = this.actor.system.stowage.max === null;\n\t\tcontext.isWatercraft = this.actor.isWatercraft;\n\n\t\treturn context;\n\t}\n\n\tasync _onDropItem(event, data) {\n\t\tif ( !this.actor.isOwner ) return false;\n\n\t\tconst item = await Item.implementation.fromDropData(data);\n\t\tconst type = item.type;\n\n\t\tif (!this.actor.canOwnItemType(type)) return;\n\n\t\tconst itemData = item.toObject();\n\n\t\tif (item.parent !== null) {\n\t\t\tif (item.parent.isOwner) item.delete();\n\t\t}\n\n\t\treturn this._onDropItemCreate(itemData);\n\t}\n\n\t_prepareItems(context) {\n\t\tsuper._prepareItems(context);\n\n\t\tconst inventory = {\n\t\t\tarmor: {\n\t\t\t\tstandardHeader: true,\n\t\t\t\tcanCreate: true,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryArmorHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t\tweapon: {\n\t\t\t\tcanCreate: true,\n\t\t\t\tstandardHeader: true,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryWeaponsHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t\tkit: {\n\t\t\t\tcanCreate: true,\n\t\t\t\tstandardHeader: false,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryKitsHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t\tmiscellaneous: {\n\t\t\t\tcanCreate: true,\n\t\t\t\tstandardHeader: true,\n\t\t\t\tlabel: game.i18n.localize(\"CONAN.inventoryMiscHeader\"),\n\t\t\t\titems: [],\n\t\t\t},\n\t\t};\n\n\t\tconst allItems = this._sortAllItems(context);\n\n\t\tfor (const i of allItems) {\n\t\t\ti.img = i.img || DEFAULT_TOKEN;\n\n\t\t\ti.isBroken = i.system.broken ? true : false;\n\t\t\ti.canBeStowed = true;\n\n\t\t\tif (i.type === \"armor\" || i.type === \"weapon\") {\n\t\t\t\ti.canBeEquipped = true;\n\t\t\t\ti.canBeBroken = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\ti.canBeEquipped = false;\n\t\t\t\ti.canBeBroken = false;\n\t\t\t}\n\n\t\t\t// Inventory\n\t\t\tif (Object.keys(inventory).includes(i.type)) {\n\t\t\t\ti.system.quantity = i.system.quantity || 0;\n\t\t\t\ti.system.encumbrance = i.system.encumbrance || 0;\n\t\t\t\ti.hasCharges = i.type === \"kit\" && i.system.uses.max > 0;\n\t\t\t\tinventory[i.type].items.push(i);\n\t\t\t}\n\t\t}\n\n\t\tcontext.inventory = inventory;\n\t}\n}\n","export default class Combat2d20 extends Combat {\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tthis.flags.combatantsTurnDone = this.flags.combatantsTurnDone ?? [];\n\t}\n\n\tget combatantsTurnDone() {\n\t\tconst combatantsTurnDone = this.flags.combatantsTurnDone ?? [];\n\t\treturn combatantsTurnDone[this.round] ?? {};\n\t}\n\n\tget momentumLog() {\n\t\tconst momentumLog = this.flags.momentumLog ?? [];\n\t\treturn momentumLog[this.round] ?? {};\n\t}\n\n\tget shouldUpdateMomentum() {\n\t\treturn game.settings.get(\n\t\t\t\"conan2d20\", \"combatTrackerMomentumUpdate\"\n\t\t);\n\t}\n\n\tasync endCombat() {\n\t\treturn Dialog.confirm({\n\t\t\ttitle: game.i18n.localize(\"COMBAT.EndTitle\"),\n\t\t\tcontent: `<p>${game.i18n.localize(\"COMBAT.EndConfirmation\")}</p>`,\n\t\t\tyes: () => {\n\t\t\t\tif (this.shouldUpdateMomentum && this.started) {\n\t\t\t\t\tconan.apps.Counter.changeCounter(-1, \"momentum\");\n\n\t\t\t\t\tui.notifications.info(\n\t\t\t\t\t\tgame.i18n.localize(\"CONAN.CombatEndMomentumPoolDecremented\")\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.delete();\n\t\t\t},\n\t\t});\n\t}\n\n\tasync nextRound() {\n\t\tthis.turn = null;\n\n\t\tif (this.shouldUpdateMomentum) {\n\t\t\tconan.apps.Counter.changeCounter(-1, \"momentum\");\n\n\t\t\tui.notifications.info(\n\t\t\t\tgame.i18n.localize(\"CONAN.CombatRoundMomentumPoolDecremented\")\n\t\t\t);\n\t\t}\n\n\t\tlet advanceTime = Math.max(this.turns.length - this.turn, 0) * CONFIG.time.turnTime;\n\t\tadvanceTime += CONFIG.time.roundTime;\n\t\tlet nextRound = this.round + 1;\n\n\t\t// Update the document, passing data through a hook first\n\t\tconst updateData = {round: nextRound, turn: this.turn};\n\t\tconst updateOptions = {advanceTime, direction: 1};\n\t\tHooks.callAll(\"combatRound\", this, updateData, updateOptions);\n\t\treturn this.update(updateData, updateOptions);\n\t}\n\n\tasync rollInitiative() {\n\t\treturn this;\n\t}\n\n\tasync setTurn(newTurn) {\n\t\tthis.turn = newTurn;\n\n\t\t// Update the document, passing data through a hook first\n\t\tconst updateData = {round: this.round, turn: newTurn};\n\t\tconst updateOptions = {advanceTime: CONFIG.time.turnTime, direction: 1};\n\t\tHooks.callAll(\"combatTurn\", this, updateData, updateOptions);\n\t\treturn this.update(updateData, updateOptions);\n\t}\n\n\tsetupTurns() {\n\t\t// Determine the turn order and the current turn\n\t\tconst turns = this.combatants.contents;\n\n\t\t// Sort alphabetically by name first\n\t\tturns.sort((a, b) => {\n\t\t\tif (a.name < b.name) {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\tif (a.name > b.name) {\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\n\t\t// Then make sure the player characters are first\n\t\tturns.sort(\n\t\t\t(a, b) => Number(b.hasPlayerOwner) - Number(a.hasPlayerOwner)\n\t\t);\n\n\t\tif (this.turn !== null) this.turn =\n\t\t\tMath.clamp(this.turn, 0, turns.length - 1);\n\n\t\t// Update state tracking\n\t\tlet c = turns[this.turn];\n\t\tthis.current = {\n\t\t\tround: this.round,\n\t\t\tturn: this.turn,\n\t\t\tcombatantId: c ? c.id : null,\n\t\t\ttokenId: c ? c.tokenId : null,\n\t\t};\n\n\t\t// One-time initialization of the previous state\n\t\tif (!this.previous) this.previous = this.current;\n\n\t\t// Return the array of prepared turns\n\t\treturn this.turns = turns;\n\t}\n\n\tasync startCombat() {\n\t\tconst updateData = {\n\t\t\tround: 1,\n\t\t\tturn: 0,\n\t\t\t\"flags.combatantsTurnDone\": [],\n\t\t};\n\n\t\tHooks.callAll(\"combatStart\", this, updateData);\n\n\t\treturn this.update(updateData);\n\t}\n\n\tasync toggleTurnDone(combatantId) {\n\t\tif (!game.user.isGM) return;\n\t\tif (!this.started) return;\n\n\t\tconst combatantsTurnDone = this.combatantsTurnDone;\n\n\t\tconst turnDone = !(combatantsTurnDone[combatantId] ?? false);\n\t\tcombatantsTurnDone[combatantId] = turnDone;\n\n\t\tthis.flags.combatantsTurnDone[this.round] = combatantsTurnDone;\n\n\t\tif (turnDone && this.shouldUpdateMomentum) {\n\t\t\tconst actor = this.combatants.find(c => c.id === combatantId).actor;\n\t\t\tactor.bankMomentum();\n\t\t}\n\n\t\treturn this.update({\"flags.combatantsTurnDone\": this.flags.combatantsTurnDone});\n\t}\n}\n","export default class CombatDie extends foundry.dice.terms.DiceTerm {\n\tconstructor(termData) {\n\t\tsuper(termData);\n\t\tthis.faces = 6;\n\t}\n\n\tstatic DENOMINATION = \"p\";\n\n\tstatic values = {\n\t\t1: 1,\n\t\t2: 2,\n\t\t3: 0,\n\t\t4: 0,\n\t\t5: 0,\n\t\t6: 0,\n\t};\n\n\t/**\n\t * @return the results as CombatDice values: 0,1,2,phoenix.\n\t */\n\tstatic getResultLabel(result) {\n\t\treturn result > 2 ? \"&nbsp\" : result;\n\t}\n\n\t/** @override */\n\tget total() {\n\t\tif (!this._evaluated) return null;\n\t\treturn this.results.reduce((t, r) => {\n\t\t\tif (!r.active) return t;\n\t\t\tif (r.effect) return t + 1;\n\t\t\tif (r.count !== undefined) return t + r.count;\n\t\t\treturn t + CombatDie.getValue(r.result);\n\t\t}, 0);\n\t}\n\n\t/** @override */\n\tasync roll(options) {\n\t\tconst roll = await super.roll(options);\n\t\troll.effect = roll.result === 5 || roll.result === 6;\n\t\treturn roll;\n\t}\n\n\tget resultValues() {\n\t\treturn this.results.map(result => {\n\t\t\treturn CombatDie.getResultLabel(result.result);\n\t\t});\n\t}\n\n\tstatic getValue(dieSide) {\n\t\t// 1 if Effect, otherwise take the value\n\t\treturn typeof CombatDie.values[dieSide] === \"string\"\n\t\t\t? 1\n\t\t\t: CombatDie.values[dieSide];\n\t}\n}\n","export default class CombatTracker2d20 extends CombatTracker {\n\n\tstatic get defaultOptions() {\n\t\treturn {\n\t\t\t...super.defaultOptions,\n\t\t\ttemplate: \"systems/conan2d20/templates/combat/conan-combat-tracker.hbs\",\n\t\t};\n\t}\n\n\tactivateListeners(html) {\n\t\tconst tracker = html.find(\"#combat-tracker\");\n\t\tconst combatants = tracker.find(\".combatant\");\n\n\t\thtml.find(\".conan-combatant-control\").click(\n\t\t\tev => this._onConanCombatantControl(ev)\n\t\t);\n\n\t\tcombatants.click(this._onConanCombatantMouseDown.bind(this));\n\n\t\tsuper.activateListeners(html);\n\t}\n\n\tasync getData(options) {\n\t\tconst context = await super.getData(options);\n\n\t\tconst combat = this.viewed;\n\t\tfor (const turn of context.turns) {\n\t\t\tconst combatantsTurnDone = combat.combatantsTurnDone;\n\t\t\tturn.turnDone = combatantsTurnDone[turn.id] ?? false;\n\t\t}\n\n\t\treturn context;\n\t}\n\n\tasync _onConanCombatantControl(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (!game.user.isGM) return;\n\n\t\tif (!this.viewed.started) {\n\t\t\tui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.CombatHasNotStarted\")\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst btn = event.currentTarget;\n\t\tconst li = btn.closest(\".combatant\");\n\t\tconst combatant = this.viewed.combatants.get(li.dataset.combatantId);\n\n\t\tif (combatant.isOwner) {\n\t\t\tthis.viewed.toggleTurnDone(combatant.id);\n\t\t}\n\t}\n\n\tasync _onConanCombatantMouseDown(event) {\n\t\tevent.preventDefault();\n\t\tif (game.user.isGM && this.viewed.started) {\n\t\t\tconst li = event.currentTarget;\n\t\t\tconst combatantId = li.dataset.combatantId;\n\n\t\t\tconst combat = this.viewed;\n\n\t\t\tconst currentTurn = combat.turn ?? -1;\n\n\t\t\tlet newTurn = currentTurn;\n\n\t\t\tfor (let [i, turn] of combat.turns.entries() ) {\n\t\t\t\tif (turn.isDefeated) continue;\n\t\t\t\tif (turn.id === combatantId) {\n\t\t\t\t\tnewTurn = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newTurn !== currentTurn) {\n\t\t\t\tcombat.setTurn(newTurn);\n\t\t\t}\n\t\t}\n\t}\n}\n","export default class ConanChat {\n\n\tstatic async renderApplyDamageResultCard(data) {\n\t\tconst template = \"systems/conan2d20/templates/chat/apply-damage-result-card.hbs\";\n\t\treturn ConanChat._renderChatCard(template, data);\n\t}\n\n\tstatic async renderCombatDiceRollCard(data) {\n\t\tconst template =\n\t\t\t\"systems/conan2d20/templates/chat/combat-dice-roll-card.hbs\";\n\t\tConanChat._renderChatCard(template, data);\n\t}\n\n\tstatic async renderDamageRollCard(data) {\n\t\tconst template = \"systems/conan2d20/templates/chat/damage-roll-card.hbs\";\n\t\tConanChat._renderChatCard(template, data);\n\t}\n\n\tstatic async renderSkillTestCard(data) {\n\t\tconst template = \"systems/conan2d20/templates/chat/skill-roll-card.hbs\";\n\t\tConanChat._renderChatCard(template, data);\n\t}\n\n\tstatic async renderSkillTestRequestCard(data) {\n\t\tconst template = \"systems/conan2d20/templates/chat/skill-roll-request-card.hbs\";\n\t\treturn ConanChat._renderChatCard(template, data);\n\t}\n\n\tstatic async renderSoakDiceRollCard(data) {\n\t\tconst template = \"systems/conan2d20/templates/chat/soak-roll-card.hbs\";\n\t\tConanChat._renderChatCard(template, data);\n\t}\n\n\tstatic async rerollNotification(numDice, actor) {\n\t\tlet speaker;\n\t\tif (actor) {\n\t\t\tspeaker = ChatMessage.getSpeaker({\n\t\t\t\tactor: actor,\n\t\t\t\ttoken: actor.token,\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tspeaker = ChatMessage.getSpeaker();\n\t\t}\n\n\t\tlet html = `<h2>${game.i18n.localize(\"CONAN.rerollTriggered\")}</h2><div>`;\n\n\t\tconst diceSuffix =\n\t\t\tnumDice > 1\n\t\t\t\t? game.i18n.localize(\"CONAN.dicePlural\")\n\t\t\t\t: game.i18n.localize(\"CONAN.diceSingular\");\n\n\t\tif (actor?.isNPC) {\n\t\t\thtml += `${game.i18n.format(\"CONAN.rerollTextNpc\", {\n\t\t\t\tcharacter: `<b>${speaker.alias}</b>`,\n\t\t\t\tdiceCount: `<b>${numDice}</b>`,\n\t\t\t})} ${diceSuffix}.<br>`;\n\t\t}\n\t\telse {\n\t\t\thtml += `${game.i18n.format(\"CONAN.rerollText\", {\n\t\t\t\tcharacter: `<b>${speaker.alias}</b>`,\n\t\t\t\tdiceCount: `<b>${numDice}</b>`,\n\t\t\t})} ${diceSuffix}.<br>`;\n\t\t}\n\n\t\thtml += \"</div>\";\n\n\t\tconst chatData = {\n\t\t\tspeaker,\n\t\t\trollMode: \"reroll\",\n\t\t\tcontent: html,\n\t\t};\n\n\t\tChatMessage.create(chatData);\n\t}\n\n\tstatic getMessageActor(message) {\n\t\tconst tokenId = message.flags.conan2d20.tokenId;\n\n\t\t// If tokenId is set on the message flags, then we need to use the\n\t\t// synthetic Token Actor rather than the base Actor.\n\t\t//\n\t\tlet actor;\n\t\tif (tokenId) {\n\t\t\tactor = game.actors.tokens[tokenId];\n\t\t}\n\t\telse {\n\t\t\tactor = game.actors.get(message.speaker.actor);\n\t\t}\n\n\t\treturn actor;\n\t}\n\n\tstatic async _renderChatCard(template, data) {\n\t\tconst html = await renderTemplate(template, data);\n\n\t\tlet speaker;\n\t\tif (data.actor) {\n\t\t\tspeaker = ChatMessage.getSpeaker({\n\t\t\t\tactor: data.actor,\n\t\t\t\ttoken: data.actor.token,\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tspeaker = ChatMessage.getSpeaker();\n\t\t}\n\n\t\tconst messageStyles = conan.utils.getMessageStyles();\n\n\t\tconst chatData = {\n\t\t\t\"flags.data\": data,\n\t\t\tcontent: html,\n\t\t\tspeaker,\n\t\t\ttype: messageStyles.OTHER,\n\t\t\tuser: game.user.id,\n\t\t};\n\n\t\tChatMessage.applyRollMode(chatData, game.settings.get(\"core\", \"rollMode\"));\n\n\t\treturn ChatMessage.create(chatData);\n\t}\n\n\tstatic async applyDamageFromMessage(message) {\n\t\tconst data = message.flags.data;\n\n\t\tlet item = null;\n\t\tif (data.actor) {\n\t\t\tconst actor = await game.actors.get(data.actor._id);\n\n\t\t\titem = actor.getEmbeddedDocument(\n\t\t\t\t\"Item\",\n\t\t\t\tdata.item._id\n\t\t\t);\n\t\t}\n\n\t\tlet targets = [];\n\n\t\tconst controlledTokenCount = canvas.tokens.controlled.length;\n\t\tif (controlledTokenCount > 0) {\n\t\t\tfor (const token of canvas.tokens.controlled) {\n\t\t\t\ttargets.push(token.actor);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.format(\"CONAN.ApplyDamage.Error.NoTokensSelected.message\")\n\t\t\t);\n\t\t}\n\n\t\tconst damage = {\n\t\t\tresolve: 0,\n\t\t\tvigor: 0,\n\t\t\teffects: 0,\n\t\t\tlocation: \"torso\",\n\t\t};\n\n\t\tif (data.rollData.damage.type === \"physical\") {\n\t\t\tdamage.vigor = data.results.total;\n\t\t}\n\t\telse {\n\t\t\tdamage.resolve = data.results.total;\n\t\t}\n\n\t\tdamage.effects = data.results.effects;\n\t\tdamage.location = data.rollData.damage.locationId ?? \"head\";\n\n\t\treturn new conan.apps.ApplyDamage({\n\t\t\tdamage,\n\t\t\titem,\n\t\t\ttargets,\n\t\t}).render(true);\n\t}\n}\n\n// eslint-disable-next-line no-unused-vars\nHooks.on(\"renderChatLog\", (log, html, data) => {\n\n\t// Handle clicking on the Spend/Bank Momentum button on a successfull skill\n\t// test chat card\n\thtml.on(\"click\", \".chat-bank-momentum\", event => {\n\t\tconst target = $(event.currentTarget);\n\t\tconst messageId = target.parents(\".message\").attr(\"data-message-id\");\n\t\tconst message = game.messages.get(messageId);\n\n\t\tif (message.isAuthor || game.user.isGM) {\n\t\t\tconst actor = game.actors.get(message.speaker.actor);\n\t\t\tconst bankType = message.flags?.data?.rollData?.bankType ?? null;\n\n\t\t\tif (actor.system.momentum <= 0) {\n\t\t\t\tui.notifications.warn(game.i18n.localize(\"CONAN.noUnbankedMomentum\"));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tnew conan.apps.MomentumBanker(actor, {bankType}).render(true);\n\t\t\t}\n\t\t}\n\t});\n\n\t// Handle clicking on the Attack button on a weapon chat card\n\thtml.on(\"click\", \".chat-execute-attack\", event => {\n\t\tevent.preventDefault();\n\n\t\tconst target = $(event.currentTarget);\n\n\t\tconst messageId = target.parents(\".message\").attr(\"data-message-id\");\n\t\tconst message = game.messages.get(messageId);\n\n\t\tconst actor = ConanChat.getMessageActor(message);\n\t\tconst itemId = message.flags.conan2d20.itemId;\n\n\t\tactor._executeAttack(itemId);\n\t});\n\n\t// Handle clicking on the Damage button on a weapon chat card\n\thtml.on(\"click\", \".chat-execute-damage\", event => {\n\t\tevent.preventDefault();\n\n\t\tconst target = $(event.currentTarget);\n\n\t\tconst messageId = target.parents(\".message\").attr(\"data-message-id\");\n\t\tconst message = game.messages.get(messageId);\n\n\t\tconst actor = ConanChat.getMessageActor(message);\n\n\t\tconst weapon = actor.getEmbeddedDocument(\n\t\t\t\"Item\",\n\t\t\tmessage.flags.conan2d20.itemId\n\t\t);\n\n\t\tweapon.triggerDamageRoll();\n\t});\n\n\t// Handle clicking on the Shield Soak button on a weapon chat card\n\thtml.on(\"click\", \".chat-execute-soak\", event => {\n\t\tevent.preventDefault();\n\n\t\tconst target = $(event.currentTarget);\n\n\t\tconst messageId = target.parents(\".message\").attr(\"data-message-id\");\n\t\tconst message = game.messages.get(messageId);\n\n\t\tconst actor = ConanChat.getMessageActor(message);\n\n\t\tconst item = actor.getEmbeddedDocument(\n\t\t\t\"Item\",\n\t\t\tmessage.flags.conan2d20.itemId\n\t\t);\n\n\t\titem.triggerSoakRoll();\n\t});\n\n\t// Handle clicking on the Shield Soak button on a weapon chat card\n\thtml.on(\"click\", \".chat-use-kit\", event => {\n\t\tevent.preventDefault();\n\n\t\tconst target = $(event.currentTarget);\n\n\t\tconst messageId = target.parents(\".message\").attr(\"data-message-id\");\n\t\tconst message = game.messages.get(messageId);\n\n\t\tconst actor = ConanChat.getMessageActor(message);\n\n\t\tactor.useKit(message.flags.conan2d20.itemId);\n\t});\n\n\t// Handle clicking on dice in chat to select for reroll\n\thtml.on(\"click\", \".roll-list-entry\", event => {\n\t\tconst target = $(event.currentTarget);\n\t\tconst messageId = target.parents(\".message\").attr(\"data-message-id\");\n\t\tconst message = game.messages.get(messageId);\n\n\t\tconst isReroll = message.flags.data.rollData.isReroll;\n\t\tconst rolls = message.flags.data.results.rolls;\n\n\t\tif (message.isAuthor || game.user.isGM) {\n\t\t\tif (!isReroll) {\n\t\t\t\tconst diceId = parseInt(target.attr(\"id\"));\n\t\t\t\tconst isFortuneDie = rolls[diceId].fortuneSpend;\n\n\t\t\t\t// Don\"t allow dice bought with Fortune to be re-rolled\n\t\t\t\tif (isFortuneDie) {\n\t\t\t\t\treturn ui.notifications.warn(\n\t\t\t\t\t\tgame.i18n.localize(\"CONAN.YouCannotSelectFortuneDiceForReroll\")\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\ttarget.toggleClass(\"selected\");\n\n\t\t\t\t\tconst newHtml = target.parents().children(\".message-content\").html();\n\n\t\t\t\t\tmessage.update({content: newHtml});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn ui.notifications.warn(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.YouCanOnlyRerollOnce\")\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n});\n\nHooks.on(\"getChatLogEntryContext\", (html, options) => {\n\tconst canReroll = function(li) {\n\t\tlet result = false;\n\t\tconst message = game.messages.get(li.attr(\"data-message-id\"));\n\n\t\tif (message.isAuthor || game.user.isGM) {\n\t\t\tconst card = li.find(\".roll-card\");\n\t\t\tif (card.length && message.flags.data.rollData.isReroll === false) {\n\t\t\t\tresult = true;\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t};\n\n\toptions.push(\n\t\t{\n\t\t\tname: game.i18n.localize(\"CONAN.CHATOPT.triggerReroll\"),\n\t\t\ticon: \"<i class=\\\"fas fa-dice\\\"></i>\",\n\t\t\tcondition: canReroll,\n\t\t\tcallback: li => {\n\t\t\t\tconst message = game.messages.get(li.attr(\"data-message-id\"));\n\t\t\t\ttry {\n\t\t\t\t\tconan.dice.triggerReroll(message);\n\t\t\t\t}\n\t\t\t\tcatch(e) {\n\t\t\t\t\tconan.logger.error(e);\n\t\t\t\t\tui.notifications.error(e);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\tname: game.i18n.localize(\"CONAN.ApplyDamage.title\"),\n\t\t\ticon: \"<i class=\\\"fa-solid fa-droplet\\\"></i>\",\n\t\t\tcondition: li => {\n\t\t\t\tconst message = game.messages.get(li.attr(\"data-message-id\"));\n\t\t\t\treturn game.user.isGM && message.flags?.data?.type === \"damage\";\n\t\t\t},\n\t\t\tcallback: li => {\n\t\t\t\tconst message = game.messages.get(li.attr(\"data-message-id\"));\n\t\t\t\ttry {\n\t\t\t\t\tConanChat.applyDamageFromMessage(message);\n\t\t\t\t}\n\t\t\t\tcatch(e) {\n\t\t\t\t\tconan.logger.error(e);\n\t\t\t\t\tui.notifications.error(e);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t);\n\n\toptions.sort((a, b) => a.name.localeCompare(b.name));\n});\n","export default class ConanCompendiums {\n\n\tstatic _collectionFromArray(array) {\n\t\tconst collection = new Collection();\n\t\tfor (let d of array) {\n\t\t\tcollection.set(d._id, d);\n\t\t}\n\t\treturn collection;\n\t}\n\n\tstatic async _documents(type, subtype=null, filterSources=true) {\n\t\t// let docs = game.collections.get(type).filter(d => d.type === subtype);\n\t\tlet docs = [];\n\t\tlet sources = [];\n\n\t\tif (filterSources) {\n\t\t\tsources = game.settings.get(\"conan2d20\", \"sourceFilters\") ?? [];\n\t\t}\n\n\t\tconst sourcesSet = sources.length > 0;\n\n\t\t// / Iterate through the Packs, adding them to the list\n\t\tfor (let pack of game.packs) {\n\t\t\tif (pack.metadata.type !== type) continue;\n\n\t\t\tlet documents = await pack.getIndex({fields: [\"system\"]});\n\n\t\t\t// filter by subtype\n\t\t\tif (subtype !== null) {\n\t\t\t\tdocuments = documents.filter(d => d.type === subtype);\n\t\t\t}\n\n\t\t\tfor (const doc of documents) {\n\t\t\t\tdocs.push(doc);\n\t\t\t}\n\t\t}\n\n\t\t// filter out non selected sources\n\t\tif (sourcesSet) {\n\t\t\tdocs = docs.filter(\n\t\t\t\td => {\n\t\t\t\t\tconst source = d.system?.source?.title ?? \"\";\n\t\t\t\t\treturn source === \"\" || sources.includes(source);\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\t// Dedupe and sort the list alphabetically\n\t\tdocs = Array.from(new Set(docs)).sort(\n\t\t\t(a, b) => a.name.localeCompare(b.name)\n\t\t);\n\n\t\t// return new collection\n\t\treturn this._collectionFromArray(docs);\n\t}\n\n\t// static async documents(type, sources=[]) {\n\t// \tconst noSources = sources.length === 0;\n\n\t// \tconst documents = await ConanCompendiums.compendiumDocuments(\"Item\", type);\n\n\t// \tif (noSources) {\n\t// \t\treturn documents;\n\t// \t}\n\t// \telse {\n\t// \t\tconst filteredDocuments = documents.filter(\n\t// \t\t\tdocument => {\n\t// \t\t\t\tconst source = document.system.description.source.book;\n\n\t// \t\t\t\treturn source === \"\" || sources.includes(source);\n\t// \t\t\t}\n\t// \t\t);\n\n\t// \t\t// re-create the collection from the filtered Items\n\t// \t\tconst filteredCollection = new Collection();\n\t// \t\tfor (let d of filteredDocuments) {\n\t// \t\t\tfilteredCollection.set(d.id, d);\n\t// \t\t}\n\n\t// \t\treturn filteredCollection;\n\t// \t}\n\t// }\n\n\tstatic async aspects(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"aspect\", filterSources);\n\t}\n\n\tstatic async archetypes(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"archetype\", filterSources);\n\t}\n\n\tstatic async bloodlineTalents(filterSources=true) {\n\t\treturn ConanCompendiums.talents([\"bloodline\"], filterSources);\n\t}\n\n\tstatic async characterCreationRollTables() {\n\t\tconst characterRolltableChoices = {};\n\n\t\tgame.packs.filter(\n\t\t\tpack => pack.metadata.type === \"RollTable\"\n\t\t).sort(\n\t\t\t(a, b) => a.metadata.label.localeCompare(b.metadata.label)\n\t\t).forEach(\n\t\t\tpack => {\n\t\t\t\tcharacterRolltableChoices[pack.metadata.id] = pack.metadata.label;\n\t\t\t}\n\t\t);\n\n\t\treturn characterRolltableChoices;\n\t}\n\n\tstatic async characterItemChoiceRollTables() {\n\t\tconst characterItemChoices = {};\n\n\t\tgame.packs.filter(\n\t\t\tpack => pack.metadata.type === \"Item\"\n\t\t).sort(\n\t\t\t(a, b) => a.metadata.label.localeCompare(b.metadata.label)\n\t\t).forEach(\n\t\t\tpack => {\n\t\t\t\tcharacterItemChoices[pack.metadata.id] = pack.metadata.label;\n\t\t\t}\n\t\t);\n\n\t\treturn characterItemChoices;\n\t}\n\n\tstatic async castes(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"caste\", filterSources);\n\t}\n\n\tstatic async casteTalents(filterSources=true) {\n\t\treturn ConanCompendiums.talents([\"caste\"], filterSources);\n\t}\n\n\tstatic async educations(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"education\", filterSources);\n\t}\n\n\tstatic async homelands(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"homeland\", filterSources);\n\t}\n\n\tstatic async fortuneTalents(filterSources=true) {\n\t\treturn ConanCompendiums.talents([\"fortune\"], filterSources);\n\t}\n\n\tstatic async homelandTalents(filterSources=true) {\n\t\treturn ConanCompendiums.talents([\"homeland\"], filterSources);\n\t}\n\n\tstatic async languages(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"language\", filterSources);\n\t}\n\n\tstatic async natures(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"nature\", filterSources);\n\t}\n\n\tstatic async otherTalents(filterSources=true) {\n\t\treturn ConanCompendiums.talents([\"other\"], filterSources);\n\t}\n\n\tstatic async skillTalents(filterSources=true) {\n\t\treturn ConanCompendiums.talents([\"skill\"], filterSources);\n\t}\n\n\tstatic async stories(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"story\", filterSources);\n\t}\n\n\tstatic async talents(subtypes, filterSources=true) {\n\t\tconst documents =\n\t\t\tawait ConanCompendiums._documents(\"Item\", \"talent\", filterSources);\n\n\t\tif (!subtypes) {\n\t\t\treturn documents;\n\t\t}\n\n\t\treturn this._collectionFromArray(\n\t\t\tdocuments.filter(\n\t\t\t\tdocument => subtypes.includes(document.system.talentType)\n\t\t\t)\n\t\t);\n\t}\n\n\tstatic async warStories(filterSources=true) {\n\t\treturn ConanCompendiums._documents(\"Item\", \"warstory\", filterSources);\n\t}\n}\n","import CharacterCreator from \"../apps/CharacterCreator\";\n\nexport const conanCharacterCreatorHooks = {\n\tattach: () => {\n\t\tconan.logger.log(\"Attaching conanCharacterCreatorHooks\");\n\n\t\tHooks.on(\"renderSidebarTab\", async function(app, html) {\n\t\t\tif (app.options.classes.includes(\"actors-sidebar\")) {\n\t\t\t\tconan.logger.debug(\n\t\t\t\t\t\"Running conanCharacterCreatorHooks::renderSidebarTab hook\"\n\t\t\t\t);\n\n\t\t\t\tconst title = game.i18n.localize(\"CONAN.CharacterCreator.button.label\");\n\n\t\t\t\tconst button = $(\n\t\t\t\t\tawait renderTemplate(\n\t\t\t\t\t\t\"systems/conan2d20/templates/ui/character-creator-button.hbs\",\n\t\t\t\t\t\t{ title }\n\t\t\t\t\t)\n\t\t\t\t);\n\n\t\t\t\tbutton.click(() => {\n\t\t\t\t\tnew CharacterCreator().render(true);\n\t\t\t\t});\n\n\t\t\t\thtml.find(\".directory-footer\").append(button);\n\t\t\t}\n\t\t});\n\t},\n};\n","export default class ConanMenuLayer extends PlaceablesLayer {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.objects = {};\n\t}\n\n\tstatic get layerOptions() {\n\t\treturn foundry.utils.mergeObject(super.layerOptions, {\n\t\t\tname: \"conan-menu\",\n\t\t\tzIndex: 60,\n\t\t});\n\t}\n\n\tstatic get documentName() {\n\t\treturn \"Token\";\n\t}\n\n\tget placeables() {\n\t\treturn [];\n\t}\n}\n","import ConanMenuLayer from \"./ConanMenuLayer.mjs\";\n\nexport default class ConanMenu {\n\tstatic async getButtons(controls) {\n\t\tcanvas.conanGmTools = new ConanMenuLayer();\n\n\t\tcontrols.push({\n\t\t\tname: \"conan-menu\",\n\t\t\ttitle: \"CONAN.GmTools\",\n\t\t\tlayer: \"conanGmTools\",\n\t\t\ticon: \"fa-solid fa-axe-battle\",\n\t\t\tvisible: game.user.isGM,\n\t\t\ttools: [\n\t\t\t\t{\n\t\t\t\t\tbutton: true,\n\t\t\t\t\ticon: \"fa-solid fa-user-plus\",\n\t\t\t\t\tname: \"open-character-creator\",\n\t\t\t\t\ttitle: \"CONAN.CharacterCreator.button.label\",\n\t\t\t\t\tonClick: async () => new conan.apps.CharacterCreator().render(true),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tbutton: true,\n\t\t\t\t\ticon: \"fa-solid fa-dice-d20\",\n\t\t\t\t\tname: \"request-skill-roll\",\n\t\t\t\t\ttitle: \"CONAN.SkillRollRequest.title\",\n\t\t\t\t\tonClick: async () => conan.skillRollRequest.render(true),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tbutton: true,\n\t\t\t\t\ticon: \"fa-solid fa-clapperboard\",\n\t\t\t\t\tname: \"new-scene-tool\",\n\t\t\t\t\ttitle: \"CONAN.NewScene.title\",\n\t\t\t\t\tonClick: async () => game.conan2d20.macros.newScene(),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tbutton: true,\n\t\t\t\t\ticon: \"fa-solid fa-repeat\",\n\t\t\t\t\tname: \"init-game-tool\",\n\t\t\t\t\ttitle: \"CONAN.InitialiseGame.title\",\n\t\t\t\t\tonClick: async () => game.conan2d20.macros.initGame(),\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\tstatic async renderControls(app, html, data) {}\n}\n","import ConanMenu from \"../menu/ConanMenu.mjs\";\n\nexport const conanMenuHooks = {\n\tattach: () => {\n\t\tconan.logger.log(\"Attaching conanMenuHooks\");\n\n\t\tHooks.on(\"getSceneControlButtons\", ConanMenu.getButtons);\n\t\tHooks.on(\"renderSceneControls\", ConanMenu.renderControls);\n\t},\n};\n","export class ConanUpdateBase {\n\n\tstatic version;\n\n\tversion = this.constructor[\"version\"]; // eslint-disable-line\n\n\t// Update the actor to the latest schema version.\n\t//\n\tasync updateActor(actorData) {}\n\n\t// Update the item to the latest schema version.\n\t//\n\tasync updateItem(itemData, actorData) {}\n\n\t// And updates required to system settings can be performed here.\n\t//\n\tasync updateSettings() {}\n\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_031421 extends ConanUpdateBase {\n\tstatic version = 0.031421;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"talent\" && itemData.system.skill) {\n\t\t\tconan.logger.log(\n\t\t\t\t\"Found Talent Item from previous schema. Migrating Item schema.\"\n\t\t\t);\n\n\t\t\tif (!itemData.system.tree) {\n\t\t\t\tupdateData[\"system.tree\"] =\n\t\t\t\t\tgame.i18n.localize(CONFIG.CONAN.skills[item.system.skill]) || \"\";\n\t\t\t}\n\n\t\t\tconan.logger.log(\"Removing unused field in Item schema.\");\n\n\t\t\tupdateData[\"system.-=skill\"] = null;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_220106 extends ConanUpdateBase {\n\tstatic version = 0.220106;\n\n\tasync updateActor(actorData) {\n\t\tconst updateData = {};\n\n\t\tconst physicalExists = Number.isInteger(\n\t\t\tactorData.system?.health?.physical?.bonus\n\t\t);\n\n\t\tconst mentalExists = Number.isInteger(\n\t\t\tactorData.system?.health?.mental?.bonus\n\t\t);\n\n\t\tif (!physicalExists || !mentalExists) {\n\t\t\tconan.logger.log(\n\t\t\t\t\"Found Actor missing health bonus from previous schema. Migrating Actor schema.\"\n\t\t\t);\n\n\t\t\tupdateData[\"system.health.physical.bonus\"] = 0;\n\t\t\tupdateData[\"system.health.mental.bonus\"] = 0;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_22040301 extends ConanUpdateBase {\n\tstatic version = 0.22040301;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"transportation\") {\n\t\t\tif (\n\t\t\t\ttypeof itemData.system.stowage === \"number\"\n\t\t\t\t\t|| typeof itemData.system.stowage === \"string\"\n\t\t\t) {\n\t\t\t\tconan.logger.log(\n\t\t\t\t\t\"Found Item using old stowage schema. Migrating Item schema.\"\n\t\t\t\t);\n\n\t\t\t\tlet currentStowage = parseInt(itemData.system.stowage);\n\t\t\t\tcurrentStowage = isNaN(currentStowage) ? 0 : currentStowage;\n\n\t\t\t\tupdateData[\"system.stowage.max\"] = currentStowage;\n\t\t\t\tupdateData[\"system.stowage.value\"] = currentStowage;\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_22081201 extends ConanUpdateBase {\n\tstatic version = 0.22081201;\n\n\tasync updateActor(actorData) {\n\t\tconst updateData = {};\n\n\t\tif (actorData.type === \"npc\") {\n\t\t\t// Delete these unused fields\n\t\t\tupdateData[\"system.-=isMinion\"] = null;\n\t\t\tupdateData[\"system.-=isToughened\"] = null;\n\t\t\tupdateData[\"system.-=isNemesis\"] = null;\n\n\t\t\tconst categories = actorData.system.categories.value;\n\n\t\t\tif (categories.includes(\"minion\")) {\n\t\t\t\tupdateData[\"system.type\"] = \"minion\";\n\t\t\t}\n\t\t\tif (categories.includes(\"toughened\")) {\n\t\t\t\tupdateData[\"system.type\"] = \"toughened\";\n\t\t\t}\n\t\t\tif (categories.includes(\"nemesis\")) {\n\t\t\t\tupdateData[\"system.type\"] = \"nemesis\";\n\t\t\t}\n\n\n\t\t\tconst newCategories = [];\n\t\t\tfor (const category of actorData.system.categories.value) {\n\t\t\t\tif (category !== \"minion\"\n\t\t\t\t\t&& category !== \"toughened\"\n\t\t\t\t\t&& category !== \"nemesis\"\n\t\t\t\t) {\n\t\t\t\t\tnewCategories.push(category);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tupdateData[\"system.categories.value\"] = newCategories;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_22102901 extends ConanUpdateBase {\n\tstatic version = 0.22102901;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.system.encumbrance === \"1each\") {\n\t\t\tconan.logger.log(\n\t\t\t\t\"Found Item using old '1each' encumbrance value. Migrating Item.\"\n\t\t\t);\n\n\t\t\tupdateData[\"system.encumbrance\"] = 1;\n\t\t}\n\n\t\treturn updateData;\n\t}\n\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_22110501 extends ConanUpdateBase {\n\tstatic version = 0.22110501;\n\n\tasync updateActor(actorData) {\n\t\tconst updateData = {};\n\n\t\tif (actorData.system.health.mental.traumas.current) {\n\t\t\tupdateData[\"system.health.mental.traumas.value\"] =\n\t\t\t\tactorData.system.health.mental.traumas.current;\n\n\t\t\tupdateData[\"system.health.mental.traumas.-=current\"] = null;\n\t\t\tupdateData[\"system.health.mental.traumas.-=treated\"] = null;\n\n\t\t\tconan.logger.log(\"Conan2d20 System | Migrating Actor mental health\");\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_22120601 extends ConanUpdateBase {\n\tstatic version = 0.22120601;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"spell\") {\n\t\t\t// Strip out any leading or trailing spaces for the effects on these\n\t\t\t// items caused by the template textarea issue\n\t\t\t//\n\t\t\tconst regex = /^\\s+|\\s+$/g;\n\n\t\t\tconst momentumSpends = [];\n\n\t\t\tfor (const [, value] of Object.entries(itemData.system.effects.momentum)) {\n\t\t\t\tmomentumSpends.push({\n\t\t\t\t\tdifficulty: value.difficulty.replace(regex, \"\"),\n\t\t\t\t\teffect: value.effect.replace(regex, \"\"),\n\t\t\t\t\tspend: value.spend.replace(regex, \"\"),\n\t\t\t\t\ttype: value.type.replace(regex, \"\"),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tupdateData[\"system.effects.momentum\"] = momentumSpends;\n\n\t\t\tconst alternativeSpends = [];\n\n\t\t\tfor (const [, value] of Object.entries(itemData.system.effects.alternative)) {\n\t\t\t\talternativeSpends.push({\n\t\t\t\t\tdifficulty: value.difficulty.replace(regex, \"\"),\n\t\t\t\t\teffect: value.effect.replace(regex, \"\"),\n\t\t\t\t\tspend: value.spend.replace(regex, \"\"),\n\t\t\t\t\ttype: value.type.replace(regex, \"\"),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tupdateData[\"system.effects.alternative\"] = alternativeSpends;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_22122701 extends ConanUpdateBase {\n\tstatic version = 0.22122701;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"kit\") {\n\t\t\tupdateData[\"system.quantity\"] = 1;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Remove dead/unused fields that were never removed previously due to\n// limitations with the previous migration scripts\n\nexport default class Update_23061601 extends ConanUpdateBase {\n\tstatic version = 0.23061601;\n\n\t// A whole bunch of field deletions in previous schema update scripts did\n\t// not work correctly, so we will clean them up in this one.\n\n\tasync updateActor(actorData) {\n\t\tconst updateData = {};\n\n\t\tif (actorData.type === \"npc\") {\n\t\t\tupdateData[\"system.-=isMinion\"] = null;\n\t\t\tupdateData[\"system.-=isToughened\"] = null;\n\t\t\tupdateData[\"system.-=isNemesis\"] = null;\n\t\t}\n\n\t\tupdateData[\"system.health.mental.traumas.-=current\"] = null;\n\t\tupdateData[\"system.health.mental.traumas.-=treated\"] = null;\n\n\t\treturn updateData;\n\t}\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"talent\" && itemData.system.skill) {\n\t\t\tconan.logger.log(\"Removing unused field in Item schema.\");\n\n\t\t\tupdateData[\"system.-=skill\"] = null;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Migrates a character actor's homeland from a free text field to a uuid\n// compendium link\n//\n// Attempts to match any current value to a uuid compendium link if there is\n// a match on the slugified names\n\nexport default class Update_23061901 extends ConanUpdateBase {\n\tstatic version = 0.23061901;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst updateData = {\n\t\t\t\"system.background.homeland\": {value: \"\"},\n\t\t};\n\n\t\tconst currentHomeland = actorData.system?.background?.homeland?.value ?? \"\";\n\n\t\tif (currentHomeland !== \"\") {\n\t\t\tconst itemLut = {};\n\t\t\t(await conan.compendiums.homelands(false)).forEach(\n\t\t\t\titem => itemLut[item.name.slugify()] = item.uuid\n\t\t\t);\n\n\t\t\tconst homelandItem = itemLut[currentHomeland.slugify()];\n\n\t\t\tif (homelandItem) {\n\t\t\t\tupdateData[\"system.background.homeland\"] = {value: homelandItem};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tui.notifications.warn(\n\t\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\t\"Homeland '{homeland}' for Character '{name}' does not exist in a compendium; you will need to create this Item and update the Character manually.\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thomeland: currentHomeland,\n\t\t\t\t\t\t\tname: actorData.name,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t\t{permanent: true}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Migrates a character actor's languages to uuid compendium links\n//\n// Attempts to match any custom values to a uuid compendium link if there is\n// a match on the slugified names\n\nexport default class Update_23062001 extends ConanUpdateBase {\n\tstatic version = 0.23062001;\n\n\tasync updateActor(actorData) {\n\t\tconst updateData = {};\n\n\t\tconst isCharacter = actorData.type === \"character\";\n\n\t\tif (!isCharacter) return;\n\n\t\tconst hasLanguages = (Array.isArray(actorData.system.background.languages.value)\n\t\t\t&& actorData.system.background.languages.value.length > 0\n\t\t) || actorData.system.background.languages.custom !== \"\";\n\n\t\tconst newLanguages = [];\n\t\tif (isCharacter && hasLanguages) {\n\n\t\t\tconst languageLut = {};\n\t\t\t(await conan.compendiums.languages(false)).forEach(\n\t\t\t\titem => languageLut[item.name.slugify()] = item.uuid\n\t\t\t);\n\n\t\t\tfor (const language of actorData.system.background.languages.value) {\n\t\t\t\tif (languageLut[language]) {\n\t\t\t\t\tnewLanguages.push(languageLut[language]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Custom languages can be separated by semicolon characters to allow for\n\t\t\t// more than one custom language\n\t\t\tlet customLanguages = (actorData.system?.background?.languages?.custom ?? \"\").split(\";\");\n\t\t\tcustomLanguages = customLanguages.filter(e => e); // filter out empty strings\n\n\t\t\tfor (const language of customLanguages) {\n\t\t\t\tconst lutKey = language.slugify();\n\n\t\t\t\tif (languageLut[lutKey]) {\n\t\t\t\t\tnewLanguages.push(languageLut[lutKey]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tui.notifications.warn(\n\t\t\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\t\t\"Language '{language}' for Character '{name}' does not exist in a compendium; you will need to create this Item and update the Character manually.\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlanguage,\n\t\t\t\t\t\t\t\tname: actorData.name,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t),\n\t\t\t\t\t\t{permanent: true}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\tupdateData[\"system.background.languages\"] = newLanguages;\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Removes unecessary field, and values from weapon and npcattack items\n\nexport default class Update_23062201 extends ConanUpdateBase {\n\tstatic version = 0.23062201;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"weapon\" || itemData.type === \"npcattack\") {\n\t\t\tupdateData[\"system.-=group\"] = null;\n\n\t\t\tif (itemData.system.size === \"none\") {\n\t\t\t\tupdateData[\"system.size\"] = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Migrates a character actor's caste from a free text field to a uuid\n// compendium link\n//\n// Attempts to match any current value to a uuid compendium link if there is\n// a match on the slugified names\n\nexport default class Update_23062301 extends ConanUpdateBase {\n\tstatic version = 0.23062301;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst updateData = {\n\t\t\t\"system.background.caste\": {value: \"\"},\n\t\t};\n\n\t\tconst currentValue = actorData.system?.background?.caste?.value ?? \"\";\n\n\t\tif (currentValue !== \"\") {\n\t\t\tconst itemLut = {};\n\t\t\t(await conan.compendiums.castes(false)).forEach(\n\t\t\t\titem => itemLut[item.name.slugify()] = item.uuid\n\t\t\t);\n\n\t\t\tconst matchingItem = itemLut[currentValue.slugify()];\n\n\t\t\tif (matchingItem) {\n\t\t\t\tupdateData[\"system.background.caste\"] = {value: matchingItem};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tui.notifications.warn(\n\t\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\t\"Caste '{caste}' for Character '{name}' does not exist in a compendium; you will need to create this Item and update the Character manually.\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcaste: currentValue,\n\t\t\t\t\t\t\tname: actorData.name,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t\t{permanent: true}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Removes some dead/unused fields and renames the \"war-story\" field to\n// something less problematic.  Also extracts the trait value from the weird\n// location it had got itself in and puts it in a better place\n\nexport default class Update_23062302 extends ConanUpdateBase {\n\tstatic version = 0.23062302;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst warStory = actorData.system?.background[\"war-story\"]?.value ?? \"\";\n\t\tconst trait = actorData.system?.background?.story?.trait?.value ?? \"\";\n\n\t\t// TODO If both trait and caste is set for this actor, attempt to\n\t\t// work out what the matching story is as we didn't previously use\n\t\t// that field\n\n\t\tconst updateData = {\n\t\t\t\"system.background.-=attribute-aspect\": null,\n\t\t\t\"system.background.-=war-story\": null,\n\t\t\t\"system.background.story.-=trait\": null,\n\t\t\t\"system.background.trait\": {value: trait},\n\t\t\t\"system.background.warstory\": {value: warStory},\n\t\t};\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Migrates a character actor's nature from a free text field to a uuid\n// compendium link\n//\n// Attempts to match any current value to a uuid compendium link if there is\n// a match on the slugified names\n\nexport default class Update_23062303 extends ConanUpdateBase {\n\tstatic version = 0.23062303;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst updateData = {\n\t\t\t\"system.background.nature\": {value: \"\"},\n\t\t};\n\n\t\tconst currentValue = actorData.system?.background?.nature?.value ?? \"\";\n\n\t\tif (currentValue !== \"\") {\n\t\t\tconst itemLut = {};\n\t\t\t(await conan.compendiums.natures(false)).forEach(\n\t\t\t\titem => itemLut[item.name.slugify()] = item.uuid\n\t\t\t);\n\n\t\t\tconst matchingItem = itemLut[currentValue.slugify()];\n\n\t\t\tif (matchingItem) {\n\t\t\t\tupdateData[\"system.background.nature\"] = {value: matchingItem};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tui.notifications.warn(\n\t\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\t\"Nature '{nature}' for Character '{name}' does not exist in a compendium; you will need to create this Item and update the Character manually.\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnature: currentValue,\n\t\t\t\t\t\t\tname: actorData.name,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t\t{permanent: true}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Removes some dead/unecessary fields from \"action\" item types and migrates\n// the only needed information from actionCategory to a simple boolean\n\nexport default class Update_23062601 extends ConanUpdateBase {\n\tstatic version = 0.23062601;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"action\") {\n\t\t\tupdateData[\"system.-=actionCategory\"] = null;\n\t\t\tupdateData[\"system.-=actionCount\"] = null;\n\t\t\tupdateData[\"system.-=requirements\"] = null;\n\t\t\tupdateData[\"system.-=weapon\"] = null;\n\n\t\t\t// In all the core actions but not in schema, so ditch them\n\t\t\tupdateData[\"system.-=damage\"] = null;\n\t\t\tupdateData[\"system.-=qualities\"] = null;\n\n\t\t\tif (itemData.system.actionCategory === \"movement\") {\n\t\t\t\tupdateData[\"system.isMovementAction\"] = true;\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Removes some dead/unecessary fields from \"display\" item types and migrates\n// the only needed information from actionCategory to a simple boolean\n\nexport default class Update_23062602 extends ConanUpdateBase {\n\tstatic version = 0.23062602;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"display\") {\n\t\t\tupdateData[\"system.-=requirement\"] = null;\n\n\t\t\tif (itemData.system.damage.dice === \"x\") {\n\t\t\t\tupdateData[\"system.damage.dice\"] = 0;\n\t\t\t\tupdateData[\"system.damage.special\"] = true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tlet dice = Number.parseInt(itemData.system.damage.dice);\n\n\t\t\t\tif (isNaN(dice)) dice = 1;\n\n\t\t\t\tupdateData[\"system.damage.dice\"] = dice;\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Removes some dead/unecessary fields from \"talent\" item types\n\nexport default class Update_23062701 extends ConanUpdateBase {\n\tstatic version = 0.23062701;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"talent\") {\n\t\t\tupdateData[\"system.-=actionCategory\"] = null;\n\t\t\tupdateData[\"system.-=actionType\"] = null;\n\t\t\tupdateData[\"system.-=category\"] = null;\n\t\t\tupdateData[\"system.-=skill\"] = null;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Rename schema fields for internal consistency\n\nexport default class Update_23062702 extends ConanUpdateBase {\n\tstatic version = 0.23062702;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tconst max = itemData.system.capacity;\n\t\tconst value = itemData.system.current;\n\n\t\tif (itemData.type === \"transportation\") {\n\t\t\tupdateData[\"system.passengers.-=capacity\"] = null;\n\t\t\tupdateData[\"system.passengers.-=current\"] = null;\n\t\t\tupdateData[\"system.passengers.max\"] = max;\n\t\t\tupdateData[\"system.passengers.value\"] = value;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Removes some dead/unecessary fields from \"talent\" item types\n\nexport default class Update_23062801 extends ConanUpdateBase {\n\tstatic version = 0.23062801;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"caste\") {\n\t\t\tupdateData[\"system.story.-=numAllowed\"] = null;\n\t\t\tupdateData[\"system.talent.-=numAllowed\"] = null;\n\t\t}\n\n\t\tif (itemData.type === \"homeland\") {\n\t\t\tupdateData[\"system.language.-=numAllowed\"] = null;\n\t\t\tupdateData[\"system.talent.-=numAllowed\"] = null;\n\t\t}\n\n\t\tif (itemData.type === \"nature\") {\n\t\t\tupdateData[\"system.electiveSkill.-=numAllowed\"] = null;\n\t\t\tupdateData[\"system.mandatorySkill.-=numAllowed\"] = null;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Migrates a character actor's nature from a free text field to a uuid\n// compendium link\n//\n// Attempts to match any current value to a uuid compendium link if there is\n// a match on the slugified names\n\nexport default class Update_23062901 extends ConanUpdateBase {\n\tstatic version = 0.23062901;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst updateData = {\n\t\t\t\"system.background.education\": {value: \"\"},\n\t\t};\n\n\t\tconst currentValue = actorData.system?.background?.education?.value ?? \"\";\n\n\t\tif (currentValue !== \"\") {\n\t\t\tconst itemLut = {};\n\t\t\t(await conan.compendiums.educations(false)).forEach(\n\t\t\t\titem => itemLut[item.name.slugify()] = item.uuid\n\t\t\t);\n\n\t\t\tconst matchingItem = itemLut[currentValue.slugify()];\n\n\t\t\tif (matchingItem) {\n\t\t\t\tupdateData[\"system.background.education\"] = {value: matchingItem};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tui.notifications.warn(\n\t\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\t\"Education '{education}' for Character '{name}' does not exist in a compendium; you will need to create this Item and update the Character manually.\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teducation: currentValue,\n\t\t\t\t\t\t\tname: actorData.name,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t\t{permanent: true}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Migrates a character actor's nature from a free text field to a uuid\n// compendium link\n//\n// Attempts to match any current value to a uuid compendium link if there is\n// a match on the slugified names\n\nexport default class Update_23063001 extends ConanUpdateBase {\n\tstatic version = 0.23063001;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst updateData = {\n\t\t\t\"system.background.warstory\": {value: \"\"},\n\t\t};\n\n\t\tconst currentValue = actorData.system?.background?.warstory?.value ?? \"\";\n\n\t\tif (currentValue !== \"\") {\n\t\t\tconst itemLut = {};\n\t\t\t(await conan.compendiums.warStories(false)).forEach(\n\t\t\t\titem => itemLut[item.name.slugify()] = item.uuid\n\t\t\t);\n\n\t\t\tconst matchingItem = itemLut[currentValue.slugify()];\n\n\t\t\tif (matchingItem) {\n\t\t\t\tupdateData[\"system.background.warstory\"] = {value: matchingItem};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tui.notifications.warn(\n\t\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\t\"War Story '{warstory}' for Character '{name}' does not exist in a compendium; you will need to create this Item and update the Character manually.\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twarstory: currentValue,\n\t\t\t\t\t\t\tname: actorData.name,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t\t{permanent: true}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Removes unecessary legacy data entries from character templates as they\n// are now calculated\n\nexport default class Update_23071301 extends ConanUpdateBase {\n\tstatic version = 0.23071301;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst skillKeys = [\n\t\t\t\"acr\",\n\t\t\t\"alc\",\n\t\t\t\"ani\",\n\t\t\t\"ath\",\n\t\t\t\"com\",\n\t\t\t\"cou\",\n\t\t\t\"cra\",\n\t\t\t\"dis\",\n\t\t\t\"hea\",\n\t\t\t\"ins\",\n\t\t\t\"lin\",\n\t\t\t\"lor\",\n\t\t\t\"mel\",\n\t\t\t\"obs\",\n\t\t\t\"par\",\n\t\t\t\"per\",\n\t\t\t\"ran\",\n\t\t\t\"res\",\n\t\t\t\"sai\",\n\t\t\t\"soc\",\n\t\t\t\"sor\",\n\t\t\t\"ste\",\n\t\t\t\"sur\",\n\t\t\t\"thi\",\n\t\t\t\"war\",\n\t\t];\n\n\t\tconst updateData = {};\n\n\t\tskillKeys.forEach(key => {\n\t\t\tupdateData[`system.skills.${key}.-=trained`] = null;\n\t\t\tupdateData[`system.skills.${key}.-=tn`] = null;\n\t\t});\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// The `archetype`, `education` and `nature` talent types don't really exist\n// in the game, so retire them.  If any user has created talents of these types\n// they will be moved to `other`\n//\n// Also, for skill related talents, attempt to set the linked skill from the\n// tree name as this will be useful for the new Talent Manager that's being\n// added\n\nexport default class Update_23071501 extends ConanUpdateBase {\n\tstatic version = 0.23071501;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"talent\") {\n\t\t\tconst talentType = itemData.system.talentType;\n\n\t\t\tconst typesToMigrate = [\"archetype\", \"education\", \"nature\"];\n\n\t\t\tif (typesToMigrate.includes(talentType)) {\n\t\t\t\tupdateData[\"system.talentType\"] = \"other\";\n\t\t\t}\n\t\t\telse if (talentType === \"skill\") {\n\t\t\t\tupdateData[\"system.tree\"] = \"\";\n\n\t\t\t\tlet foundSkill = false;\n\t\t\t\tconst tree = (itemData.system.tree ?? \"\").trim();\n\t\t\t\tfor (const [key, value] of Object.entries(CONFIG.CONAN.skills)) {\n\t\t\t\t\tif (tree === value) {\n\t\t\t\t\t\tfoundSkill = true;\n\t\t\t\t\t\tupdateData[\"system.linkedSkill\"] = key;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!foundSkill) {\n\t\t\t\t\tlet message;\n\n\t\t\t\t\t// linkedSkill needs to be set to _something_ so just use\n\t\t\t\t\t// the first in the list and also warning that it needs to\n\t\t\t\t\t// be manually fixed should be good enough\n\t\t\t\t\t//\n\t\t\t\t\tupdateData[\"system.linkedSkill\"] = \"acr\";\n\n\t\t\t\t\tif (actorData) {\n\t\t\t\t\t\tmessage = game.i18n.format(\n\t\t\t\t\t\t\t\"Unable to derive linked Skill for Talent '{talent}' belonging to Actor '{actorName}' from its configured Tree; you will need to update the linked Skill for this Talent manually.\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttalent: itemData.name,\n\t\t\t\t\t\t\t\tactorName: actorData.name,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tmessage = game.i18n.format(\n\t\t\t\t\t\t\t\"Unable to derive linked Skill for Talent '{talent}' from its configured Tree; you will need to update the linked Skill for this Talent manually.\",\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttalent: itemData.name,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tui.notifications.warn(message, {permanent: true});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (talentType !== \"other\") {\n\t\t\t\tupdateData[\"system.tree\"] = \"\";\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Migrates a character actor's archetype from a free text field to a uuid\n// compendium link\n//\n// Attempts to match any current value to a uuid compendium link if there is\n// a match on the slugified names\n\nexport default class Update_23072101 extends ConanUpdateBase {\n\tstatic version = 0.23072101;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst updateData = {\n\t\t\t\"system.background.archetype\": {value: \"\"},\n\t\t};\n\n\t\tconst currentValue = actorData.system?.background?.archetype?.value ?? \"\";\n\n\t\tif (currentValue !== \"\") {\n\t\t\tconst itemLut = {};\n\n\t\t\t(await conan.compendiums.archetypes(false)).forEach(\n\t\t\t\titem => itemLut[item.name.slugify()] = item.uuid\n\t\t\t);\n\n\t\t\tconst matchingItem = itemLut[currentValue.slugify()];\n\n\t\t\tif (matchingItem) {\n\t\t\t\tupdateData[\"system.background.archetype\"] = {value: matchingItem};\n\t\t\t}\n\t\t\telse {\n\t\t\t\tui.notifications.warn(\n\t\t\t\t\tgame.i18n.format(\n\t\t\t\t\t\t\"Archetype '{archetype}' for Character '{name}' does not exist in a compendium; you will need to create this Item and update the Character manually.\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tarchetype: currentValue,\n\t\t\t\t\t\t\tname: actorData.name,\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t\t{permanent: true}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\n// Remove legacy 'prerequisites' field from Talents and irrelevant `xp.max`\n// value from Actors\n\nexport default class Update_23081401 extends ConanUpdateBase {\n\tstatic version = 0.23081401;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst updateData = {\n\t\t\t\"system.resources.xp.-=max\": null,\n\t\t};\n\n\t\treturn updateData;\n\t}\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"talent\") {\n\t\t\tupdateData[\"system.-=prerequisites\"] = null;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_23091301 extends ConanUpdateBase {\n\tstatic version = 0.23091301;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tconst qualityCleanTypes = [\"display\", \"npcattack\", \"weapon\"];\n\n\t\tif (qualityCleanTypes.includes(itemData.type)) {\n\t\t\tconst qualities = itemData.system?.qualities?.value ?? [];\n\n\t\t\tfor (const quality of qualities) {\n\t\t\t\tdelete quality.exceptions;\n\t\t\t\tdelete quality.label;\n\t\t\t}\n\n\t\t\tupdateData[\"system.qualities.value\"] = qualities;\n\t\t}\n\t\telse if (itemData.type === \"armor\") {\n\t\t\tconst qualities = itemData.system?.qualities?.value ?? [];\n\n\t\t\tconst newQualities = [];\n\n\t\t\tfor (const quality of qualities) {\n\t\t\t\tnewQualities.push({\n\t\t\t\t\ttype: quality,\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tupdateData[\"system.qualities.value\"] = newQualities;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_23100201 extends ConanUpdateBase {\n\tstatic version = 0.23100201;\n\n\tasync updateActor(actorData) {\n\t\tconst updateData = {};\n\n\t\tif (actorData.system.qualities) {\n\t\t\tupdateData[\"system.qualities.-=custom\"] = null;\n\t\t}\n\n\t\tif (actorData.system.categories) {\n\t\t\tupdateData[\"system.categories.-=custom\"] = null;\n\t\t}\n\n\t\treturn updateData;\n\t}\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.system.qualities) {\n\t\t\tconst newQualities = [];\n\n\t\t\tfor (const quality of itemData.system.qualities?.value ?? []) {\n\t\t\t\tif (quality.type === \"custom\") continue;\n\t\t\t\tnewQualities.push(quality);\n\t\t\t}\n\n\t\t\tupdateData[\"system.qualities.value\"] = newQualities;\n\t\t\tupdateData[\"system.qualities.-=custom\"] = null;\n\t\t}\n\n\t\tif (itemData.system.coverage) {\n\t\t\tupdateData[\"system.coverage.-=custom\"] = null;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_23100601 extends ConanUpdateBase {\n\tstatic version = 0.23100601;\n\n\tasync updateItem(itemData, actorData) {\n\t\tconst updateData = {};\n\n\t\tif (itemData.type === \"armor\" && itemData.system.qualities) {\n\t\t\tconst newQualities = [];\n\n\t\t\tfor (const quality of itemData.system.qualities?.value ?? []) {\n\t\t\t\tif (quality.type.hasOwnProperty(\"type\")) {\n\t\t\t\t\tnewQualities.push(quality.type);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnewQualities.push(quality);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tupdateData[\"system.qualities.value\"] = newQualities;\n\t\t}\n\n\t\treturn updateData;\n\t}\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_23111001 extends ConanUpdateBase {\n\tstatic version = 0.23111001;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type === \"npc\") return;\n\n\t\tconst actor = game.actors.get(actorData._id);\n\n\t\tconst bogusBackgroundItemIds = [];\n\t\tfor (const item of actor.items) {\n\t\t\tif (CONFIG.CONAN.backgroundItems.includes(item.type)) {\n\t\t\t\tbogusBackgroundItemIds.push(item._id);\n\t\t\t}\n\t\t}\n\n\t\tif (bogusBackgroundItemIds.length > 0) {\n\t\t\tactor.deleteEmbeddedDocuments(\"Item\", bogusBackgroundItemIds);\n\t\t}\n\t}\n\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_24012101 extends ConanUpdateBase {\n\tstatic version = 0.24012101;\n\n\tasync updateActor(actorData) {\n\t\tif (actorData.type !== \"npc\") return;\n\n\t\treturn {\n\t\t\t\"system.-=description\": null,\n\t\t\t\"system.-=notes\": null,\n\t\t\t\"system.-=optional\": null,\n\t\t};\n\t}\n\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nimport ConanActor from \"../../documents/ConanActor.mjs\";\n\n// Migrates any transportation items owned by actors to the new actor classes\n// and then moves any stowed items into their inventory before deleting the\n// items from the original actor\n//\nexport default class Update_24012601 extends ConanUpdateBase {\n\tstatic version = 0.24012601;\n\n\tasync updateItem(itemData, actorData) {\n\t\tif (!actorData) return;\n\t\tif (itemData.type !== \"transportation\") return;\n\n\t\tconst actor = game.actors.get(actorData._id);\n\t\tconst stowedItems = actor.items.filter(\n\t\t\ti => (i.system.stowedIn ?? \"\") === itemData._id\n\t\t);\n\n\t\tconst animalsLut = {\n\t\t\tone: 1,\n\t\t\tonep: 1,\n\t\t\ttwo: 2,\n\t\t\ttwop: 2,\n\t\t\tfour: 4,\n\t\t\tfourp: 4,\n\t\t};\n\n\t\tconst typeMapping = {\n\t\t\tboats: \"watercraft\",\n\t\t\tcarts: \"transport\",\n\t\t\tmounts: \"mount\",\n\t\t};\n\n\t\tconst mountCapabilities = {\n\t\t\tp: [\"pack\"],\n\t\t\tmp: [\"mount\", \"pack\"],\n\t\t\tbmp: [\"battle\", \"mount\", \"pack\"],\n\t\t};\n\n\t\tconst system = {\n\t\t\tavailability: itemData.system.availability ?? 1,\n\t\t\tcost: itemData.system.cost,\n\t\t\tdetails: {\n\t\t\t\tbiography: {\n\t\t\t\t\tvalue: itemData.system.description?.value ?? \"\",\n\t\t\t\t},\n\t\t\t},\n\t\t\tpassengers: {\n\t\t\t\tmax: itemData.system.passengers?.max ?? 0,\n\t\t\t\tvalue: itemData.system.passengers?.value ?? 0,\n\t\t\t},\n\t\t\tstowage: {\n\t\t\t\tmax: itemData.system.stowage?.max ?? 0,\n\t\t\t},\n\t\t};\n\n\t\tif (itemData.system.categories === \"mounts\") {\n\t\t\tsystem.tags = {\n\t\t\t\tvalue: mountCapabilities[itemData.system.capabilities] ?? [],\n\t\t\t};\n\t\t}\n\t\tif (itemData.system.categories === \"carts\") {\n\t\t\tsystem.animals = animalsLut[itemData.system.animals] ?? 0;\n\t\t}\n\n\t\tconst newMountData = {\n\t\t\ttype: typeMapping[itemData.system.categories] ?? \"transport\",\n\t\t\tname: itemData.name,\n\t\t\timg: itemData.img,\n\t\t\townership: actorData.ownership,\n\t\t\tsystem,\n\t\t\tprototypeToken: {\n\t\t\t\tbar1: {attribute: \"health.physical\"}, // Default Bar 1 to Vigor\n\t\t\t\tbar2: {attribute: \"health.mental\"}, // Default Bar 2 to Resolve\n\t\t\t\tdisplayBars: CONST.TOKEN_DISPLAY_MODES.OWNER_HOVER,\n\t\t\t\tdisplayName: CONST.TOKEN_DISPLAY_MODES.OWNER_HOVER,\n\t\t\t\tdisposition: CONST.TOKEN_DISPOSITIONS.NEUTRAL,\n\t\t\t\tname: itemData.name, // Set token name to actor name\n\t\t\t\ttexture: {\n\t\t\t\t\tsrc: itemData.img,\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\n\t\tconst newMount = await ConanActor.create(newMountData);\n\n\t\tif (newMount) {\n\t\t\tconst itemsToDelete = [itemData._id];\n\t\t\tconst newItems = [];\n\n\t\t\tfor (const item of stowedItems) {\n\t\t\t\tconst itemData = foundry.utils.duplicate(item);\n\t\t\t\titemData.system.stowedIn = \"\";\n\n\t\t\t\tnewItems.push(itemData);\n\t\t\t\titemsToDelete.push(item._id);\n\t\t\t}\n\n\t\t\tawait newMount.createEmbeddedDocuments(\"Item\", newItems);\n\t\t\tawait actor.deleteEmbeddedDocuments(\"Item\", itemsToDelete);\n\t\t}\n\t}\n\n}\n","import { ConanUpdateBase } from \"../ConanUpdateBase.mjs\";\n\nexport default class Update_24022401 extends ConanUpdateBase {\n\tstatic version = 0.24022401;\n\n\tasync updateActor(actorData) {\n\n\t\tconst categoryValues = actorData.system.categories?.value ?? [];\n\n\t\tconst updateData = {\n\t\t\t\"system.-=categories\": null,\n\t\t\t\"system.-=difficultyModifier\": null,\n\t\t\t\"system.-=skilldice\": null,\n\t\t\t\"system.-=spells\": null,\n\t\t\t\"system.-=spellslist\": null,\n\t\t\t\"system.tags.value\": categoryValues,\n\t\t};\n\n\t\treturn updateData;\n\t}\n\n}\n","import * as migrations from \"./updates/_module.mjs\";\n\nexport default class ConanMigrationRunner {\n\tallMigrations;\n\n\tcurrentMigrationTask;\n\n\tlatestVersion = 0;\n\n\tasync buildMigrations() {\n\t\tconst unsortedMigrations = [];\n\n\t\tfor (const migration in migrations) {\n\t\t\tconst migrationVersion = migrations[migration].version;\n\n\t\t\tthis.latestVersion = migrationVersion > this.latestVersion\n\t\t\t\t? migrationVersion\n\t\t\t\t: this.latestVersion;\n\n\t\t\tif (migrationVersion > this.currentVersion) {\n\t\t\t\tunsortedMigrations.push(new migrations[migration]());\n\t\t\t}\n\t\t}\n\n\t\tthis.allMigrations = unsortedMigrations.sort((a, b) => {\n\t\t\treturn a.version - b.version;\n\t\t});\n\t}\n\n\tget currentVersion() {\n\t\treturn game.settings.get(SYSTEM_ID, \"worldSchemaVersion\");\n\t}\n\n\tasync migrateCompendium(pack) {\n\t\tconst documentName = pack.documentName;\n\n\t\tif (![\"Actor\", \"Item\"].includes(documentName)) return;\n\n\t\t// Unlock the pack for editing\n\t\tconst wasLocked = pack.locked;\n\t\tawait pack.configure({locked: false});\n\n\t\t// Begin by requesting service-side migration\n\t\tawait pack.migrate();\n\t\tconst documents = await pack.getDocuments();\n\n\t\t// Iterate over compendium entries - apply migration functions\n\t\tfor (let doc of documents) {\n\t\t\tlet updateData = {};\n\t\t\ttry {\n\t\t\t\tconst objectData = doc.toObject();\n\t\t\t\tswitch (documentName) {\n\t\t\t\t\tcase \"Actor\":\n\t\t\t\t\t\tupdateData = await this.currentMigrationTask.updateActor(objectData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"Item\":\n\t\t\t\t\t\tupdateData = await this.currentMigrationTask.updateItem(objectData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t// Save the entry if data was updated\n\t\t\t\tif (foundry.utils.isEmpty(updateData)) continue;\n\n\t\t\t\tawait doc.update(updateData);\n\n\t\t\t\tconan.logger.log(`Migrated ${documentName} document \"${doc.name}\" in Compendium \"${pack.collection}\"`);\n\t\t\t}\n\t\t\tcatch(err) {\n\t\t\t\terr.message = `Failed system migration for document \"${doc.name}\" in pack \"${pack.collection}\": ${err.message}`;\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t}\n\n\t\t// Apply the original locked status for the pack\n\t\tawait pack.configure({locked: wasLocked});\n\n\t\tconan.logger.log(`Migrated all \"${documentName}\" documents from Compendium \"${pack.collection}\"`);\n\t}\n\n\tasync migrateSceneTokens(scene) {\n\t\tfor (const token of scene.tokens) {\n\t\t\ttry {\n\t\t\t\t// if the token is linked or has no actor, we don\"t need to do anything\n\t\t\t\tif (token.actorLink || !game.actors.has(token.actorId)) continue;\n\n\t\t\t\tconst actorData = foundry.utils.duplicate(game.actors.get(token.actorId));\n\n\t\t\t\tconst delta = token.delta;\n\n\t\t\t\tif (delta?.system) {\n\t\t\t\t\tactorData.system = foundry.utils.mergeObject(\n\t\t\t\t\t\tactorData.system,\n\t\t\t\t\t\tdelta.system,\n\t\t\t\t\t\t{inplace: false}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tconst updateData = await this.currentMigrationTask.updateActor(actorData);\n\n\t\t\t\tif (!foundry.utils.isEmpty(updateData)) {\n\t\t\t\t\tconan.logger.log(`Migrating Token document \"${token.name}\"`);\n\n\t\t\t\t\tupdateData._id = token.id;\n\n\t\t\t\t\tawait scene.updateEmbeddedDocuments(\n\t\t\t\t\t\t\"Token\",\n\t\t\t\t\t\t[updateData],\n\t\t\t\t\t\t{enforceTypes: false}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch(err) {\n\t\t\t\terr.message = `Failed system migration for Token \"${token.name}\": ${err.message}`;\n\t\t\t\tconan.logger.error(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync migrateSettings() {\n\t\tawait this.currentMigrationTask.updateSettings();\n\t}\n\n\tget migrateSystemCompendiumsEnabled() {\n\t\treturn game.settings.get(SYSTEM_ID, \"migrateSystemCompendiums\");\n\t}\n\n\tasync migrateWorldCompendiums() {\n\t\tfor (let pack of game.packs) {\n\t\t\t// Don't migrate system packs unless the proper debug setting is\n\t\t\t// enabled\n\t\t\t//\n\t\t\tif (!this.migrateSystemCompendiumsEnabled) {\n\t\t\t\tif (pack.metadata.packageType !== \"world\") continue;\n\t\t\t}\n\n\t\t\tawait this.migrateCompendium(pack);\n\t\t}\n\t}\n\n\tasync migrateWorldActors() {\n\t\tconst actors = game.actors.map(a => [a, true])\n\t\t\t.concat(Array.from(game.actors.invalidDocumentIds).map(\n\t\t\t\tid => [game.actors.getInvalid(id), false]\n\t\t\t));\n\n\t\tfor (const [actor, valid] of actors) {\n\t\t\ttry {\n\t\t\t\tconst actorSource = valid\n\t\t\t\t\t? actor.toObject()\n\t\t\t\t\t: game.actors.find(a => a._id === actor.id);\n\n\t\t\t\tconst updateData = await this.currentMigrationTask.updateActor(actorSource);\n\n\t\t\t\tif (!foundry.utils.isEmpty(updateData)) {\n\t\t\t\t\tconan.logger.log(`Migrating Actor document \"${actor.name}\"`);\n\t\t\t\t\tawait actor.update(updateData);\n\t\t\t\t}\n\n\t\t\t\tconst items = actor.items.map(a => [a, true])\n\t\t\t\t\t.concat(Array.from(actor.items.invalidDocumentIds).map(\n\t\t\t\t\t\tid => [actor.items.getInvalid(id), false]\n\t\t\t\t\t));\n\n\t\t\t\tfor (const [item, validItem] of items) {\n\t\t\t\t\tconst itemSource = validItem\n\t\t\t\t\t\t? item.toObject()\n\t\t\t\t\t\t: actor.items.find(a => a._id === item.id);\n\n\t\t\t\t\tconst updateData = await this.currentMigrationTask.updateItem(\n\t\t\t\t\t\titemSource,\n\t\t\t\t\t\tactorSource\n\t\t\t\t\t);\n\n\t\t\t\t\tif (!foundry.utils.isEmpty(updateData)) {\n\t\t\t\t\t\tconan.logger.log(`Migrating Actor Item document \"${item.name}\"`);\n\t\t\t\t\t\tawait item.update(updateData);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch(err) {\n\t\t\t\terr.message = `Failed system migration for Actor \"${actor.name}\": ${err.message}`;\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync migrateWorldItems() {\n\t\tconst items = game.items.map(a => [a, true])\n\t\t\t.concat(Array.from(game.items.invalidDocumentIds).map(\n\t\t\t\tid => [game.items.getInvalid(id), false]\n\t\t\t));\n\n\t\tfor (const [item, valid] of items) {\n\t\t\ttry {\n\t\t\t\tconst source = valid\n\t\t\t\t\t? item.toObject()\n\t\t\t\t\t: game.items.find(a => a._id === item.id);\n\n\t\t\t\tconst updateData = await this.currentMigrationTask.updateItem(source);\n\n\t\t\t\tif (!foundry.utils.isEmpty(updateData)) {\n\t\t\t\t\tconan.logger.log(`Migrating Item document \"${item.name}\"`);\n\t\t\t\t\titem.update(updateData);\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch(err) {\n\t\t\t\terr.message = `Failed system migration for Item \"${item.name}\": ${err.message}`;\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync migrateWorldScenes() {\n\t\tfor (const scene of game.scenes) {\n\t\t\tawait this.migrateSceneTokens(scene);\n\t\t}\n\t}\n\n\tasync migrateWorld() {\n\t\tconst version = this.currentMigrationTask.version;\n\n\t\tconst startMessage = game.i18n.format(\"CONAN.migration.begin_schema\", {version});\n\n\t\tconan.logger.log(startMessage);\n\t\tui.notifications.info(startMessage, {permanent: false});\n\n\t\tawait this.migrateSettings();\n\t\tawait this.migrateWorldActors();\n\t\tawait this.migrateWorldItems();\n\t\tawait this.migrateWorldScenes();\n\t\tawait this.migrateWorldCompendiums();\n\n\t\tconan.logger.log(\n\t\t\tgame.i18n.format(\"CONAN.migration.completed_schema\", {version})\n\t\t);\n\t}\n\n\tneedsMigration() {\n\t\treturn this.latestVersion > this.currentVersion;\n\t}\n\n\tasync run() {\n\t\tconan.logger.log(`Current schema version ${this.currentVersion}`);\n\n\t\tawait this.buildMigrations();\n\n\t\t// If this is a brand new world then we don't need to do any migrations.\n\t\t//\n\t\tif (game.world.playtime === 0) {\n\t\t\tconan.logger.log(`Setting new world schema version to ${this.latestVersion}`);\n\n\t\t\tawait game.settings.set(\n\t\t\t\tSYSTEM_ID, \"worldSchemaVersion\",\n\t\t\t\tthis.latestVersion\n\t\t\t);\n\t\t}\n\n\t\tif (!this.needsMigration()) return;\n\n\t\tconst startMessage = game.i18n.localize(\"CONAN.migration.begin_migration\");\n\n\t\tconan.logger.log(startMessage);\n\t\tui.notifications.info(startMessage, {permanent: false});\n\n\t\tfor (const migration of this.allMigrations) {\n\t\t\tif (this.currentVersion < migration.version) {\n\t\t\t\tthis.currentMigrationTask = migration;\n\n\t\t\t\tawait this.migrateWorld();\n\n\t\t\t\tgame.settings.set(SYSTEM_ID, \"worldSchemaVersion\", migration.version);\n\t\t\t}\n\t\t}\n\n\t\tconst endMessage = game.i18n.localize(\"CONAN.migration.completed_migration\");\n\n\t\tconan.logger.log(endMessage);\n\t\tui.notifications.info(endMessage, {permanent: false});\n\t}\n}\n","export default function foundryOverrides() {\n\n\tToken.prototype.decrementCondition = async function(\n\t\teffect,\n\t\t{active, overlay = false} = {}\n\t) {\n\t\tthis.actor.removeCondition(effect.id);\n\n\t\t// Update the Token HUD\n\t\tif (this.hasActiveHUD) canvas.tokens.hud.refreshStatusIcons();\n\n\t\treturn active;\n\t};\n\n\tToken.prototype.incrementCondition = async function(\n\t\teffect,\n\t\t{active, overlay = false} = {}\n\t) {\n\t\tconst existing = this.actor.effects.find(e => e.statuses.has(effect.id));\n\t\tconst numericValue = Number.isNumeric(\n\t\t\tfoundry.utils.getProperty(existing, \"flags.conan2d20.value\")\n\t\t);\n\n\t\tif (!existing || numericValue) {\n\t\t\tthis.actor.addCondition(effect.id);\n\t\t}\n\t\telse if (existing) {\n\t\t\t// Not numeric, toggle if existing\n\t\t\tthis.actor.removeCondition(effect.id);\n\t\t}\n\n\t\t// Update the Token HUD\n\t\tif (this.hasActiveHUD) canvas.tokens.hud.refreshStatusIcons();\n\n\t\treturn active;\n\t};\n\n\tTokenHUD.prototype._onToggleEffect = function(\n\t\tevent,\n\t\t{overlay = false} = {}\n\t) {\n\t\tevent.preventDefault();\n\t\tconst img = event.currentTarget;\n\t\tconst effect =\n\t\t\timg.dataset.statusId && this.object.actor\n\t\t\t\t? CONFIG.CONAN.statusEffects.find(e => e.id === img.dataset.statusId)\n\t\t\t\t: img.getAttribute(\"src\");\n\n\t\tif (event.button === 0) return this.object.incrementCondition(effect);\n\t\tif (event.button === 2) return this.object.decrementCondition(effect);\n\t};\n}\n","export default function listenOnSocket() {\n\n\tgame.socket.on(\"system.conan2d20\", event => {\n\n\t\tif (event.type === \"createCharacter\") {\n\t\t\t// only the GM should handle this event\n\t\t\tif (!game.user.isGM) return;\n\n\t\t\tconan.apps.CharacterCreator.createActorFromData(\n\t\t\t\tevent.payload.characterData,\n\t\t\t\tevent.payload.characterItems,\n\t\t\t\tevent.payload.userId\n\t\t\t);\n\t\t}\n\n\t\tif (event.type === \"openNewCharacter\") {\n\t\t\tif (event.payload.userId === game.userId) {\n\t\t\t\tconst actor = game.actors.get(event.payload.actorId);\n\n\t\t\t\tif (actor) actor.sheet.render(true);\n\n\t\t\t\treturn ui.notifications.info(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CharacterCreator.Created.message\"),\n\t\t\t\t\t{permanent: true}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (event.type === \"setCounter\" && game.user.isGM) {\n\t\t\tconan.apps.Counter.setCounter(event.payload.value, event.payload.type);\n\t\t}\n\n\t\tif (event.type === \"updateCounter\") {\n\t\t\tconan.counter.render(true);\n\t\t}\n\n\t});\n\n}\n","export default async function() {\n\tconsole.log(`${SYSTEM_NAME} | Registering game settings`);\n\n\t// -------------------\n\t//  INTERNAL SETTINGS\n\t// -------------------\n\t//\n\tgame.settings.register(SYSTEM_ID, \"doom\", {\n\t\tname: \"Doom\",\n\t\tscope: \"world\",\n\t\tconfig: false,\n\t\tdefault: 0,\n\t\ttype: Number,\n\t});\n\n\n\tgame.settings.register(SYSTEM_ID, \"momentum\", {\n\t\tname: \"Momentum\",\n\t\tscope: \"world\",\n\t\tconfig: false,\n\t\tdefault: 0,\n\t\ttype: Number,\n\t});\n\n\n\t// -----------------\n\t//  PUBLIC SETTINGS\n\t// -----------------\n\t//\n\tgame.settings.register(SYSTEM_ID, \"combatTrackerMomentumUpdate\", {\n\t\tname: \"Combat Tracker Updates Momentum/Doom\",\n\t\thint: \"If checked the Combat Tracker will decrement the Momentum Pool when a new Combat Round starts, or when Combat ends.  It will also bank any unspent player or NPC Momentum in the Momentum or Doom Pools when their turn is flagged as completed.\",\n\t\tscope: \"world\",\n\t\tconfig: true,\n\t\tdefault: true,\n\t\ttype: Boolean,\n\t});\n\n\n\tgame.settings.register(SYSTEM_ID, \"allowOverpoweredNpcGroups\", {\n\t\tname: \"Allow Overpowered NPC Groups\",\n\t\thint: \"If checked, Mob/Squad members will not be limited to just Minions.\",\n\t\tscope: \"world\",\n\t\tconfig: true,\n\t\tdefault: false,\n\t\ttype: Boolean,\n\t});\n\n\n\tgame.settings.register(SYSTEM_ID, \"playerCounterEdit\", {\n\t\tname: \"Allow Players To Edit Counters\",\n\t\thint: \"If checked, players will be able to change counter values manually.\",\n\t\tscope: \"world\",\n\t\tconfig: true,\n\t\tdefault: false,\n\t\ttype: Boolean,\n\t});\n\n\n\tgame.settings.register(SYSTEM_ID, \"disableManualHealthEdit\", {\n\t\tname: \"Disable Health Keyboard Input\",\n\t\thint: \"If checked, players will only be able to edit their characters' health values using mouse controls.\",\n\t\tscope: \"world\",\n\t\tconfig: true,\n\t\tdefault: false,\n\t\ttype: Boolean,\n\t\trequiresReload: true,\n\t});\n\n\n\tgame.settings.registerMenu(SYSTEM_ID, \"sources\", {\n\t\tname: \"Book Source Filter\",\n\t\thint: \"If populated, only book sources included in this list will be used by the Character Creation and Upgrade interfaces. Items with no Book Source set will always be included.\",\n\t\tlabel: \"Configure Source Filter\",\n\t\ticon: \"fa-solid fa-book\",\n\t\ttype: conan.apps.SourceFilterSettings,\n\t\trestricted: true,\n\t});\n\tconan.apps.SourceFilterSettings.registerSetting();\n\n\n\tconst characterCreationRollTables = await conan.compendiums.characterCreationRollTables();\n\n\tgame.settings.register(SYSTEM_ID, \"characterCreationRolltablePack\", {\n\t\tname: \"Character Creation RollTables\",\n\t\thint: \"The Compendium for the Character Creator to use as a source of RollTables.\",\n\t\tchoices: characterCreationRollTables,\n\t\ttype: String,\n\t\tdefault: \"conan2d20.character-creation-tables-core\",\n\t\tscope: \"world\",\n\t\tconfig: true,\n\t});\n\n\n\tconst characterItemChoices = await conan.compendiums.characterItemChoiceRollTables();\n\n\tgame.settings.register(SYSTEM_ID, \"characterCreationItemPack\", {\n\t\tname: \"Character Creation Items\",\n\t\thint: \"The Compendium of default Items to be added to Characters created by the Character Creator.\",\n\t\tchoices: characterItemChoices,\n\t\ttype: String,\n\t\tdefault: \"conan2d20.new-character-items\",\n\t\tscope: \"world\",\n\t\tconfig: true,\n\t});\n\n\n\tgame.settings.register(SYSTEM_ID, \"addActionsToNewCharacters\", {\n\t\tname: \"CONAN.settings.addActionsToNewCharacters.name\",\n\t\thint: \"CONAN.settings.addActionsToNewCharacters.hint\",\n\t\tscope: \"world\",\n\t\ttype: Boolean,\n\t\tconfig: true,\n\t\tdefault: true,\n\t});\n\n\n\t// ----------------\n\t//  DEBUG SETTINGS\n\t// ----------------\n\t//\n\tgame.settings.register(SYSTEM_ID, \"debugEnabled\", {\n\t\tname: \"CONAN.settings.debugEnabled.name\",\n\t\thint: \"CONAN.settings.debugEnabled.hint\",\n\t\tscope: \"world\",\n\t\ttype: Boolean,\n\t\tconfig: true,\n\t\tdefault: false,\n\t\trequiresReload: true,\n\t});\n\n\n\tgame.settings.register(SYSTEM_ID, \"worldSchemaVersion\", {\n\t\tname: \"Schema Version\",\n\t\thint: \"Records the current schema version for the Conan 2d20 system data. (don't modify this unless you know what you are doing)\",\n\t\tscope: \"world\",\n\t\tconfig: game.settings.get(SYSTEM_ID, \"debugEnabled\"),\n\t\tdefault: -1,\n\t\ttype: Number,\n\t});\n\n\n\tgame.settings.register(SYSTEM_ID, \"systemVersion\", {\n\t\tname: \"System Version\",\n\t\thint: \"Records the current Conan 2d20 system version number (don't modify this unless you know what you are doing)\",\n\t\tscope: \"world\",\n\t\tconfig: game.settings.get(SYSTEM_ID, \"debugEnabled\"),\n\t\tdefault: \"\",\n\t\ttype: String,\n\t});\n\n\n\tgame.settings.register(SYSTEM_ID, \"migrateSystemCompendiums\", {\n\t\tname: \"Migrate System Compendiums\",\n\t\thint: \"Perform data migration on the built in Conan 2d20 system compendiums (don't modify this unless you know what you are doing)\",\n\t\tscope: \"world\",\n\t\ttype: Boolean,\n\t\tconfig: game.settings.get(SYSTEM_ID, \"debugEnabled\"),\n\t\tdefault: false,\n\t\trequiresReload: true,\n\t});\n}\n","import ConanMigrationRunner from \"../migrations/ConanMigrationRunner.mjs\";\n\nimport foundryOverrides from \"../overrides.mjs\";\nimport listenOnSocket from \"../socket.mjs\";\nimport registerSettings from \"../settings.mjs\";\n\nexport const readyHook = {\n\tattach: () => {\n\t\tconan.logger.log(\"Attaching ready hook\");\n\n\t\tHooks.once(\"ready\", async () => {\n\t\t\tconan.logger.log(\"Running ready hook\");\n\n\t\t\tregisterSettings();\n\n\t\t\tfoundryOverrides();\n\t\t\tlistenOnSocket();\n\n\t\t\tif (game.user.isGM) {\n\t\t\t\tawait new ConanMigrationRunner().run();\n\t\t\t}\n\n\t\t\tconan.skillRollRequest = new conan.apps.SkillRollRequest();\n\n\t\t\tconan.counter.render(true);\n\t\t\tconan.utils.showNewReleaseNotes();\n\t\t});\n\t},\n};\n","import { generateSortedData } from \"../config.mjs\";\n\nexport const setupHook = {\n\tattach: () => {\n\t\tconan.logger.log(\"Attaching setup hook\");\n\n\t\tHooks.once(\"setup\", () => {\n\t\t\tconan.logger.log(\"Running setup hook\");\n\n\t\t\t// Go through the CONFIG object and localize any Strings\n\t\t\tfor (const obj in CONFIG.CONAN) {\n\t\t\t\tif ({}.hasOwnProperty.call(CONFIG.CONAN, obj)) {\n\t\t\t\t\tfor (const el in CONFIG.CONAN[obj]) {\n\t\t\t\t\t\tif ({}.hasOwnProperty.call(CONFIG.CONAN[obj], el)) {\n\t\t\t\t\t\t\tif (typeof CONFIG.CONAN[obj][el] === \"string\") {\n\t\t\t\t\t\t\t\tCONFIG.CONAN[obj][el] = game.i18n.localize(\n\t\t\t\t\t\t\t\t\tCONFIG.CONAN[obj][el]\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tgenerateSortedData();\n\t\t});\n\t},\n};\n","import { conanCharacterCreatorHooks } from \"../hooks/conanCharacterCreatorHooks.mjs\";\nimport { conanMenuHooks } from \"../hooks/conanMenuHooks.mjs\";\nimport { readyHook } from \"../hooks/readyHook.mjs\";\nimport { setupHook } from \"../hooks/setupHook.mjs\";\n\nexport default class ConanHooks {\n\n\tstatic attach() {\n\t\tconst listeners = [\n\t\t\tconanCharacterCreatorHooks,\n\t\t\tconanMenuHooks,\n\t\t\treadyHook,\n\t\t\tsetupHook,\n\t\t];\n\n\t\tfor (const listener of listeners) {\n\t\t\tlistener.attach();\n\t\t}\n\t}\n\n}\n","import Counter from \"../apps/Counter.mjs\";\n\nexport default class ConanMacros {\n\tstatic async adjustDoom(value = 0) {\n\t\tif (!game.user.isGM) {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.GameMasterRoleRequired\", {\n\t\t\t\t\tmacro: \"adjustDoom\",\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tif (Number.isInteger(value) && value !== 0) {\n\t\t\tCounter.changeCounter(value, \"doom\");\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.adjustCounterValueError\", {\n\t\t\t\t\ttype: \"Doom\",\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic async adjustMomentum(value = 0) {\n\t\tif (!game.user.isGM) {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.GameMasterRoleRequired\", {\n\t\t\t\t\tmacro: \"adjustMomentum\",\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\n\t\tif (Number.isInteger(value) && value !== 0) {\n\t\t\tCounter.changeCounter(value, \"momentum\");\n\t\t}\n\t\telse {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.adjustCounterValueError\", {\n\t\t\t\t\ttype: \"Momentum\",\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n\tstatic async applyDamage() {\n\t\tconst targets = await ConanMacros._getMacroActors();\n\n\t\tif (!Array.isArray(targets) || targets.length < 1) return;\n\n\t\treturn new conan.apps.ApplyDamage({targets}).render(true);\n\t}\n\n\tstatic async basicSkillRoll() {\n\t\treturn new conan.apps.SkillRoller().render(true);\n\t}\n\n\tstatic async combatDiceRoll() {\n\t\tnew conan.apps.CombatDiceRoller().render(true);\n\t}\n\n\tstatic async coverSoakDiceRoll(itemName = null, soak = 1) {\n\t\treturn ConanMacros.soakDiceRoll(\"cover\", itemName, soak);\n\t}\n\n\tstatic async createItemMacro(dropData, slot) {\n\t\tconst itemData = await Item.implementation.fromDropData(dropData);\n\n\t\tif (!itemData) {\n\t\t\treturn ui.notifications.warn(\n\t\t\t\tgame.i18n.localize(\"CONAN.Macro.Warn.CreateItemRequiresOwnership\")\n\t\t\t);\n\t\t}\n\n\t\tconst macroData = {\n\t\t\tcommand: `game.conan2d20.macros.postItem(\"${dropData.uuid}\")`,\n\t\t\tflags: {\"conan2d20.itemMacro\": true},\n\t\t\timg: itemData.img,\n\t\t\tname: itemData.name,\n\t\t\tscope: \"actor\",\n\t\t\ttype: \"script\",\n\t\t};\n\n\t\t// Assign the macro to the hotbar\n\t\tconst macro =\n\t\t\tgame.macros.find(m => m.name === macroData.name\n\t\t\t\t&& m.command === macroData.command\n\t\t\t\t&& m.author.isSelf\n\t\t\t) || (await Macro.create(macroData));\n\n\t\tgame.user.assignHotbarMacro(macro, slot);\n\t}\n\n\tstatic async damageRoll(weaponName = null) {\n\t\tconst actor = await ConanMacros._getMacroActor();\n\n\t\tlet item = null;\n\t\tif (weaponName) {\n\t\t\tif (actor) {\n\t\t\t\titem = actor.getItemByName(weaponName);\n\t\t\t}\n\t\t\telse if (game.user.isGM) {\n\t\t\t\titem = game.items.find(x => x.name === weaponName) || null;\n\t\t\t}\n\n\t\t\tif (!item) {\n\t\t\t\treturn ui.notifications.error(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.NoSuchItem\", {\n\t\t\t\t\t\titemName: weaponName,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (!item.canCauseDamage()) {\n\t\t\t\treturn ui.notifications.error(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.ItemCannotCauseDamage\", {\n\t\t\t\t\t\titemName: weaponName,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tconst options = {item};\n\n\t\treturn new conan.apps.DamageRoller(actor, options).render(true);\n\t}\n\n\tstatic async initGame() {\n\t\tif (!game.user.isGM) {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.GameMasterRoleRequired\", {\n\t\t\t\t\tmacro: \"Initialize Game\",\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\ttry {\n\t\t\t\tconst players = game.users.players;\n\n\t\t\t\tlet startingDoom = 0;\n\n\t\t\t\tfor (const player of players) {\n\t\t\t\t\tconst actor = player.character;\n\n\t\t\t\t\tif (!actor) continue; // Player doesn\"t own a character\n\n\t\t\t\t\t// Reset current Vigor and Resolve to max.\n\t\t\t\t\tactor.update({\"system.health.mental.value\": actor.getMaxResolve()});\n\t\t\t\t\tactor.update({\"system.health.physical.value\": actor.getMaxVigor()});\n\n\t\t\t\t\t// Reset Fortune\n\t\t\t\t\tconst startingFortune = actor.system.resources.fortune.max;\n\t\t\t\t\tactor.update({\"system.resources.fortune.value\": startingFortune});\n\n\t\t\t\t\tstartingDoom += startingFortune;\n\n\t\t\t\t\t// Also purge any leftover personal momentum\n\t\t\t\t\tactor.update({\"system.momentum\": 0});\n\t\t\t\t}\n\n\t\t\t\t// Momentum is reset to zero\n\t\t\t\tCounter.setCounter(0, \"momentum\");\n\n\t\t\t\t// Set Doom to starting value (sum of all players\" starting Fortune)\n\t\t\t\tCounter.setCounter(startingDoom, \"doom\");\n\n\t\t\t\treturn ui.notifications.info(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Success\", {\n\t\t\t\t\t\tmacro: \"Initialize Game\",\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\treturn ui.notifications.error(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.CaughtError\", {\n\t\t\t\t\t\tmacro: \"Initialize Game\",\n\t\t\t\t\t\terror: e,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic async moraleSoakDiceRoll(itemName = null, soak = 1) {\n\t\treturn ConanMacros.soakDiceRoll(\"morale\", itemName, soak);\n\t}\n\n\tstatic async newScene() {\n\t\tif (!game.user.isGM) {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.GameMasterRoleRequired\", {\n\t\t\t\t\tmacro: \"New Scene\",\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\ttry {\n\t\t\t\tconst players = game.users.players;\n\n\t\t\t\tfor (const player of players) {\n\t\t\t\t\tconst actor = player.character;\n\n\t\t\t\t\tif (!actor) continue; // Player doesn't own a character\n\n\t\t\t\t\t// Reset current Vigor and Resolve to max.\n\t\t\t\t\tactor.update({\"system.health.mental.value\": actor.getMaxResolve()});\n\t\t\t\t\tactor.update({\"system.health.physical.value\": actor.getMaxVigor()});\n\n\t\t\t\t\t// Also purge any leftover personal momentum\n\t\t\t\t\tactor.update({\"system.momentum\": 0});\n\t\t\t\t}\n\n\t\t\t\t// Now reduce the momentum pool by one\n\t\t\t\tCounter.changeCounter(-1, \"momentum\");\n\n\t\t\t\treturn ui.notifications.info(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Success\", {\n\t\t\t\t\t\tmacro: \"New Scene\",\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\treturn ui.notifications.error(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.CaughtError\", {\n\t\t\t\t\t\tmacro: \"New Scene\",\n\t\t\t\t\t\terror: e,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic async postItem(itemUuid) {\n\t\t// This is very basic for now, we just post any item to chat\n\t\tconst item = await fromUuid(itemUuid);\n\t\titem.postItem();\n\t}\n\n\tstatic async requestSkillTest() {\n\t\tif (!game.user.isGM) {\n\t\t\treturn ui.notifications.error(\n\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.GameMasterRoleRequired\", {\n\t\t\t\t\tmacro: \"Request Skill Test\",\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t\telse {\n\t\t\ttry {\n\t\t\t\tconan.skillRollRequest.render(true);\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\treturn ui.notifications.error(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.CaughtError\", {\n\t\t\t\t\t\tmacro: \"Request Skill Test\",\n\t\t\t\t\t\terror: e,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic async skillRoll(skillName = null) {\n\t\tconst actor = await ConanMacros._getMacroActor();\n\n\t\tif (!actor) return new conan.apps.SkillRoller().render(true);\n\n\t\tconst options = {};\n\n\t\t// If a skill name has been specified, try and match it up to those the\n\t\t// system supports and work out what Attribute it uses by default.\n\t\t//\n\t\tif (skillName) {\n\t\t\tskillName ||= \"\";\n\t\t\tskillName = skillName.toLowerCase();\n\n\t\t\tif (actor.isNPC) {\n\t\t\t\tfor (let expertise in CONFIG.CONAN.expertiseFields) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tCONFIG.CONAN.expertiseFields[expertise].toLowerCase() === skillName\n\t\t\t\t\t) {\n\t\t\t\t\t\toptions.expertise = expertise;\n\t\t\t\t\t\toptions.attribute = CONFIG.CONAN.expertiseAttributeMap[expertise];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tfor (let skill in CONFIG.CONAN.skills) {\n\t\t\t\t\tif (CONFIG.CONAN.skills[skill].toLowerCase() === skillName) {\n\t\t\t\t\t\toptions.skill = skill;\n\t\t\t\t\t\toptions.attribute = CONFIG.CONAN.skillAttributeMap[skill];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!(options.attribute && (options.expertise || options.skill))) {\n\t\t\t\treturn ui.notifications.warn(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.UnknownSkill\", {\n\t\t\t\t\t\tskillName,\n\t\t\t\t\t\tactorName: actor.name,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (actor) {\n\t\t\tif (actor.canRollSkillChecks) {\n\t\t\t\treturn new conan.apps.SkillRoller(actor, options).render(true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tui.notifications.error(\n\t\t\t\t\tgame.i18n.format(\"CONAN.SkillRoll.Errors.InvalidActorType\", {\n\t\t\t\t\t\ttype: game.i18n.localize(`TYPES.Actor.${actor.type}`),\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic async soakDiceRoll(type = \"cover\", itemName = null, soak = 1) {\n\t\tconst actor = await ConanMacros._getMacroActor();\n\t\tconst options = {type, itemName, soak};\n\t\tnew conan.apps.SoakDiceRoller(actor, options).render(true);\n\t}\n\n\t// Work out which actor to use.  If the user running the macro is the GM and\n\t// they have no tokens selected then create a generic version, otherwise use\n\t// the selected token.\n\t//\n\t// Players running a script always use their own character Actor.\n\t//\n\tstatic async _getMacroActor() {\n\t\tlet actor = null;\n\n\t\tif (game.user.isGM) {\n\t\t\tconst controlledTokenCount = canvas.tokens.controlled.length;\n\t\t\tif (controlledTokenCount > 0) {\n\t\t\t\tif (controlledTokenCount !== 1) {\n\t\t\t\t\treturn ui.notifications.warn(\n\t\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.TooManyTokensSelected\", {\n\t\t\t\t\t\t\tmax: 1,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tactor = canvas.tokens.controlled[0].actor;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tactor = game.user.character;\n\t\t}\n\n\t\treturn actor;\n\t}\n\n\t// Work out which actors to use.  GMs need at least one token selected.\n\t//\n\t// Players always use their own character Actor.\n\t//\n\tstatic async _getMacroActors() {\n\t\tlet actors = [];\n\n\t\tif (game.user.isGM) {\n\t\t\tconst controlledTokenCount = canvas.tokens.controlled.length;\n\t\t\tif (controlledTokenCount > 0) {\n\t\t\t\tfor (const token of canvas.tokens.controlled) {\n\t\t\t\t\tactors.push(token.actor);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tui.notifications.warn(\n\t\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.NoTokensSelected\")\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tactors.push(game.user.character);\n\t\t}\n\n\t\treturn actors;\n\t}\n}\n","class ConanUtils {\n\tstatic addDots(data, woundMax = 0, valueAttribute = \"status\") {\n\t\tfor (let i = 0; i < woundMax; i += 1) {\n\t\t\tif (data.dots[i].length === 0) {\n\t\t\t\tdata.dots[i] = {\n\t\t\t\t\tstatus: \"healed\",\n\t\t\t\t\ticon: \"far fa-circle\",\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn data;\n\t}\n\n\tstatic async copyToClipboard(text) {\n\t\ttry {\n\t\t\tif (navigator.clipboard && window.isSecureContext) {\n\t\t\t\tawait navigator.clipboard.writeText(text);\n\t\t\t\treturn ui.notifications.info(\n\t\t\t\t\tgame.i18n.localize(\"CONAN.CopyToClipboardSucceeded\")\n\t\t\t\t);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconst textArea = document.createElement(\"textarea\");\n\t\t\t\ttextArea.value = text;\n\t\t\t\ttextArea.style.position = \"fixed\";\n\t\t\t\ttextArea.style.left = \"-999px\";\n\t\t\t\ttextArea.style.top = \"-999px\";\n\t\t\t\tdocument.body.appendChild(textArea);\n\t\t\t\ttextArea.focus();\n\t\t\t\ttextArea.select();\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t/* eslint-disable-next-line no-unused-expressions */\n\t\t\t\t\tdocument.execCommand(\"copy\")\n\t\t\t\t\t\t? resolve(\n\t\t\t\t\t\t\tui.notifications.info(\n\t\t\t\t\t\t\t\tgame.i18n.localize(\"CONAN.CopyToClipboardSucceeded\")\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t: reject(\n\t\t\t\t\t\t\tnew Error(game.i18n.localize(\"CONAN.CopyToClipboardFailed\"))\n\t\t\t\t\t\t);\n\t\t\t\t\ttextArea.remove();\n\t\t\t\t}).catch(error => ui.notifications.error(error));\n\t\t\t}\n\t\t}\n\t\tcatch(error) {\n\t\t\tconan.logger.error(error);\n\t\t\tui.notifications.error(game.i18n.localize(\"CONAN.CopyToClipboardFailed\"));\n\t\t}\n\t}\n\n\tstatic deepMerge(...objects) {\n\t\tfunction getType(object) {\n\t\t\treturn Object.prototype.toString.call(object).slice(8, -1).toLowerCase();\n\t\t}\n\n\t\tfunction mergeObj(clone, object) {\n\t\t\tfor (let [key, value] of Object.entries(object)) {\n\t\t\t\tlet type = getType(value);\n\n\t\t\t\tif (clone[key] !== undefined\n\t\t\t\t\t&& getType(clone[key]) === type\n\t\t\t\t\t&& [\"array\", \"object\"].includes(type)\n\t\t\t\t) {\n\t\t\t\t\tclone[key] = ConanUtils.deepMerge(clone[key], value);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tclone[key] = structuredClone(value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet clone = structuredClone(objects.shift());\n\n\t\tfor (let object of objects) {\n\t\t\tlet type = getType(object);\n\n\t\t\tif (getType(clone) !== type) {\n\t\t\t\tclone = structuredClone(object);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (type === \"array\") {\n\t\t\t\tclone = [...clone, ...structuredClone(object)];\n\t\t\t}\n\t\t\telse if (type === \"object\") {\n\t\t\t\tmergeObj(clone, object);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tclone = object;\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n\n\n\tstatic foundryMinVersion(version) {\n\t\tconst majorVersion = parseInt(game.version.split(\".\")[0]);\n\t\treturn majorVersion >= version;\n\t}\n\n\n\tstatic getAttackDescription(item) {\n\t\tconst flavor = {\n\t\t\tdescription: \"CONAN.attack.default.description\",\n\t\t};\n\n\t\tconst isImprovised = (item?.system?.qualities?.value ?? []).find(\n\t\t\tq => q.type === \"improvised\"\n\t\t) ? true : false;\n\n\t\tif (isImprovised || item.type === \"display\") {\n\t\t\tflavor.description = `${item?.system?.description?.value}`;\n\t\t}\n\t\telse if (item?.system?.weaponType === \"melee\") {\n\t\t\tflavor.description = \"CONAN.attacks.melee.description\";\n\t\t}\n\t\telse if (item?.system?.weaponType === \"ranged\") {\n\t\t\tflavor.description = \"CONAN.attacks.ranged.description\";\n\t\t}\n\n\t\treturn flavor;\n\t}\n\n\t/**\n\t * Creates de-duplicated lists of Selected and Unselected Items.\n\t *\n\t * @param {allItems} Array A list of all available skills\n\t * @param {items} Array A list of currently selected skills\n\t *\n\t * @returns {Promise} Promise which represents an array containing both the\n\t * selected and unselected skill arrays\n\t */\n\tstatic async getDedupedSelectedItems(allItems, items) {\n\t\tconst unselectedItems = [];\n\t\tconst selectedItems = [];\n\n\t\tallItems.forEach(item => {\n\t\t\tif (!items.includes(item.uuid)) {\n\t\t\t\tunselectedItems.push(item);\n\t\t\t}\n\t\t});\n\n\t\tfor (const itemUuid of items) {\n\t\t\tselectedItems.push(await fromUuid(itemUuid));\n\t\t}\n\n\t\tselectedItems.sort((a, b) => a.name.localeCompare(b.name));\n\n\t\treturn [selectedItems, unselectedItems];\n\t}\n\n\t/**\n\t * Creates de-duplicated lists of Selected and Unselected attributes and\n\t * returns them in objects that map the skill's unique identifier to its\n\t * i18n translated name for display in the interface.\n\t *\n\t * @param {allSkills} Array A list of all available skills\n\t * @param {skills} Array A list of currently selected skills\n\t * @returns {Array} Two arrays containing the selected and unselected skills\n\t */\n\tstatic getDedupedSelectedAttributes(allAttributes, attributes) {\n\t\tconst selectedAttributes = attributes.map(\n\t\t\tchoice => ({uuid: choice, name: CONFIG.CONAN.attributeLabels[choice]})\n\t\t);\n\n\t\tconst unselectedAttributes = allAttributes.map(\n\t\t\t({key, name}) => ({name, uuid: key})\n\t\t).filter(attribute => !attributes.includes(attribute.uuid));\n\n\t\tselectedAttributes.sort((a, b) => a.name.localeCompare(b.name));\n\n\t\treturn [selectedAttributes, unselectedAttributes];\n\t}\n\n\t/**\n\t * Creates de-duplicated lists of Selected and Unselected skills and returns\n\t * them in objects that map the skill's unique identifier to its i18n\n\t * translated name for display in the interface.\n\t *\n\t * @param {allSkills} Array A list of all available skills\n\t * @param {skills} Array A list of currently selected skills\n\t * @returns {Array} Two arrays containing the selected and unselected skills\n\t */\n\tstatic getDedupedSelectedSkills(allSkills, skills) {\n\t\tconst selectedSkills = skills.map(\n\t\t\tchoice => ({uuid: choice, name: CONFIG.CONAN.skills[choice]})\n\t\t);\n\n\t\tconst unselectedSkills = allSkills.map(\n\t\t\t({key, name}) => ({name, uuid: key})\n\t\t).filter(skill => !skills.includes(skill.uuid));\n\n\t\tselectedSkills.sort((a, b) => a.name.localeCompare(b.name));\n\n\t\treturn [selectedSkills, unselectedSkills];\n\t}\n\n\tstatic calculateArmor(armorItems, shieldItems=[]) {\n\n\t\tconst armor = {\n\t\t\thead: {\n\t\t\t\tsoak: [0],\n\t\t\t\tqualities: [],\n\t\t\t},\n\t\t\ttorso: {\n\t\t\t\tsoak: [0],\n\t\t\t\tqualities: [],\n\t\t\t},\n\t\t\tlarm: {\n\t\t\t\tsoak: [0],\n\t\t\t\tqualities: [],\n\t\t\t},\n\t\t\trarm: {\n\t\t\t\tsoak: [0],\n\t\t\t\tqualities: [],\n\t\t\t},\n\t\t\tlleg: {\n\t\t\t\tsoak: [0],\n\t\t\t\tqualities: [],\n\t\t\t},\n\t\t\trleg: {\n\t\t\t\tsoak: [0],\n\t\t\t\tqualities: [],\n\t\t\t},\n\t\t\tshield: {\n\t\t\t\tsoak: [0],\n\t\t\t},\n\t\t};\n\n\t\tfor (const shield of shieldItems) {\n\t\t\tconst quality = shield.system.qualities.value.find(q => q.type === \"shieldx\");\n\n\t\t\tarmor.shield.soak.push(\n\t\t\t\tparseInt(quality.value)\n\t\t\t);\n\t\t}\n\n\t\tfor (const armorItem of armorItems) {\n\t\t\tif (armorItem.isEquipped && !armorItem.isBroken) {\n\t\t\t\tfor (const cover of armorItem.system.coverage?.value ?? []) {\n\t\t\t\t\tarmor[cover].soak.push(armorItem.system.soak);\n\n\t\t\t\t\tarmor[cover].qualities.push(\n\t\t\t\t\t\t...armorItem.system.qualities.value\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst totalCounts = {\n\t\t\theavy: 0,\n\t\t\tnoisy: 0,\n\t\t\tvheavy: 0,\n\t\t\tdisplayQualities: [],\n\t\t};\n\n\t\tfor (const entry in armor) {\n\t\t\tif (entry === \"shield\") continue;\n\n\t\t\tconst armorLocation = armor[entry];\n\n\t\t\tarmorLocation.soak.sort((a, b) => b - a);\n\n\t\t\tconst qualities = armorLocation.qualities ?? [];\n\n\t\t\tarmorLocation.qualities = [\n\t\t\t\t...new Map(\n\t\t\t\t\tqualities.map(q => [q.type, q])\n\t\t\t\t).values(),\n\t\t\t];\n\n\t\t\tconst hasQuality = {\n\t\t\t\theavy: false,\n\t\t\t\tnoisy: false,\n\t\t\t\tvheavy: false,\n\t\t\t};\n\n\t\t\tconst countQualities = [\"heavy\", \"vheavy\", \"noisy\"];\n\t\t\tfor (const quality of countQualities) {\n\t\t\t\tconst count = armorLocation.qualities.filter(\n\t\t\t\t\tq => q.type === quality\n\t\t\t\t).length;\n\n\t\t\t\tif (count > 0) {\n\t\t\t\t\thasQuality[quality] = true;\n\t\t\t\t}\n\n\t\t\t\ttotalCounts[quality] += count;\n\t\t\t}\n\n\t\t\ttotalCounts.displayQualities.push(...armorLocation.qualities.filter(\n\t\t\t\tq => !countQualities.includes(q.type)\n\t\t\t));\n\n\t\t\tconst wearingMultipleLayers = armorLocation.soak.length > 2;\n\n\t\t\tif (wearingMultipleLayers) {\n\t\t\t\tif (hasQuality.heavy && !hasQuality.vheavy) {\n\t\t\t\t\ttotalCounts.vheavy++;\n\t\t\t\t\ttotalCounts.heavy--;\n\t\t\t\t}\n\t\t\t\telse if (!(hasQuality.heavy || hasQuality.vheavy)) {\n\t\t\t\t\ttotalCounts.heavy++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (totalCounts.vheavy > 0) {\n\t\t\ttotalCounts.displayQualities.push({\n\t\t\t\ttype: \"vheavy\",\n\t\t\t\tlabel: CONFIG.CONAN.armorQualities.vheavy,\n\t\t\t\tdescription: CONFIG.CONAN.qualitiesDescriptions.vheavy,\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tif (totalCounts.heavy >= 3) {\n\t\t\t\ttotalCounts.displayQualities.push({\n\t\t\t\t\ttype: \"heavy\",\n\t\t\t\t\tlabel: CONFIG.CONAN.armorQualities.heavy,\n\t\t\t\t\tdescription: CONFIG.CONAN.qualitiesDescriptions.heavy,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (totalCounts.noisy >= 2) {\n\t\t\t\ttotalCounts.displayQualities.push({\n\t\t\t\t\ttype: \"noisy\",\n\t\t\t\t\tlabel: CONFIG.CONAN.armorQualities.noisy,\n\t\t\t\t\tdescription: CONFIG.CONAN.qualitiesDescriptions.noisy,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\ttotalCounts.displayQualities = [\n\t\t\t...new Map(\n\t\t\t\ttotalCounts.displayQualities.map(q => [q.type, q])\n\t\t\t).values(),\n\t\t];\n\n\t\ttotalCounts.displayQualities.sort((a, b) => a.label.localeCompare(b.label));\n\n\t\tarmor.qualityCount = totalCounts;\n\n\t\treturn armor;\n\t}\n\n\tstatic getMessageStyles() {\n\t\tconst messageStyles = this.foundryMinVersion(12)\n\t\t\t? CONST.CHAT_MESSAGE_STYLES\n\t\t\t: CONST.CHAT_MESSAGE_TYPES;\n\n\t\treturn messageStyles;\n\t}\n\n\t// If this is a new release, show the release notes to the GM the first time\n\t// they login\n\tstatic async showNewReleaseNotes() {\n\t\tif (game.user.isGM) {\n\t\t\tconst savedVersion = game.settings.get(\"conan2d20\", \"systemVersion\");\n\t\t\tconst systemVersion = game.system.version;\n\n\t\t\tif (systemVersion !== savedVersion) {\n\t\t\t\tHotbar.toggleDocumentSheet(\n\t\t\t\t\tCONFIG.CONAN.JournalUuids.releaseNotes\n\t\t\t\t);\n\n\t\t\t\tgame.settings.set(\n\t\t\t\t\t\"conan2d20\", \"systemVersion\",\n\t\t\t\t\tsystemVersion\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tstatic generateTalentIdentifier(talent) {\n\t\tlet typeKey = talent.system.talentType;\n\n\t\tif (typeKey === \"skill\") {\n\t\t\ttypeKey = `${typeKey}_${talent.system.linkedSkill}`;\n\t\t}\n\n\t\treturn `${typeKey}::${talent.name.slugify()}`;\n\t}\n\n}\n\nexport default ConanUtils;\n","export default class Logger {\n\tstatic DEBUG_ENABLED = null;\n\n\tstatic debug(...args) {\n\t\tif (this.DEBUG_ENABLED === null) {\n\t\t\tthis.DEBUG_ENABLED = game.settings.get(SYSTEM_ID, \"debugEnabled\");\n\t\t}\n\n\t\tif (this.DEBUG_ENABLED) console.debug(`${SYSTEM_NAME} |`, ...args);\n\t}\n\n\tstatic error(...args) {\n\t\tconsole.error(`${SYSTEM_NAME} |`, ...args);\n\t}\n\n\tstatic log(...args) {\n\t\tconsole.log(`${SYSTEM_NAME} |`, ...args);\n\t}\n\n\tstatic warn(...args) {\n\t\tconsole.warn(`${SYSTEM_NAME} |`, ...args);\n\t}\n}\n","export default async function preloadHandlebarsTemplates() {\n\tconst partials = [\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/actions.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/attack.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/attacks.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/header.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/inline-tags.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/item.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/skills-readonly.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/tabs/abilities.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/tabs/details.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/tabs/notes.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/tabs/stowage.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/transport-details.hbs\",\n\t\t\"systems/conan2d20/templates/actors/_shared-partials/type.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character-sheet.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/partials/armor.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/partials/biography-selector.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/partials/details.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/partials/header.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/partials/health.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/tabs/actions.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/tabs/biography.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/tabs/character.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/tabs/inventory.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/tabs/notes.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/tabs/skills.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/tabs/spells.hbs\",\n\t\t\"systems/conan2d20/templates/actors/character/tabs/talents.hbs\",\n\t\t\"systems/conan2d20/templates/actors/npc/partials/attributes.hbs\",\n\t\t\"systems/conan2d20/templates/actors/npc/partials/health.hbs\",\n\t\t\"systems/conan2d20/templates/actors/npc/partials/mob-member.hbs\",\n\t\t\"systems/conan2d20/templates/actors/npc/partials/skills.hbs\",\n\t\t\"systems/conan2d20/templates/actors/npc/partials/type-readonly.hbs\",\n\t\t\"systems/conan2d20/templates/actors/npc/tabs/mob.hbs\",\n\t\t\"systems/conan2d20/templates/actors/watercraft/partials/attributes.hbs\",\n\t\t\"systems/conan2d20/templates/actors/watercraft/partials/health.hbs\",\n\t\t\"systems/conan2d20/templates/actors/watercraft/partials/type.hbs\",\n\t\t\"systems/conan2d20/templates/actors/watercraft/tabs/abilities.hbs\",\n\t\t\"systems/conan2d20/templates/actors/watercraft/tabs/details.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/archetype.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/attribute-aspects.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/attributes.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/belongings.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/caste.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/education.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/fortune.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/homeland.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/languages.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/name.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/nature.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/skills.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/starting-attributes.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/story.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/talent.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-creator/war-story.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-upgrade/attributes-tab.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-upgrade/log-tab.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-upgrade/skills-tab.hbs\",\n\t\t\"systems/conan2d20/templates/apps/character-upgrade/talents-tab.hbs\",\n\t\t\"systems/conan2d20/templates/apps/fortune-roll-dialogue.hbs\",\n\t\t\"systems/conan2d20/templates/apps/send-item.hbs\",\n\t\t\"systems/conan2d20/templates/combat/conan-combat-tracker.hbs\",\n\t\t\"systems/conan2d20/templates/items/action-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/archetype-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/armor-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/armor-sidebar.hbs\",\n\t\t\"systems/conan2d20/templates/items/aspect-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/caste-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/display-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/education-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/enchantment-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/homeland-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/item-sheet.hbs\",\n\t\t\"systems/conan2d20/templates/items/kit-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/kit-sidebar.hbs\",\n\t\t\"systems/conan2d20/templates/items/miscellaneous-sidebar.hbs\",\n\t\t\"systems/conan2d20/templates/items/nature-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/npcaction-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/npcattack-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/partials/choice-selector.hbs\",\n\t\t\"systems/conan2d20/templates/items/spell-sheet.hbs\",\n\t\t\"systems/conan2d20/templates/items/story-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/talent-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/talent-requirements.hbs\",\n\t\t\"systems/conan2d20/templates/items/transportation-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/transportation-sidebar.hbs\",\n\t\t\"systems/conan2d20/templates/items/warstory-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/weapon-details.hbs\",\n\t\t\"systems/conan2d20/templates/items/weapon-sidebar.hbs\",\n\t\t\"systems/conan2d20/templates/partials/card-footer-properties.hbs\",\n\t];\n\n\tconst paths = {};\n\tfor (const path of partials) {\n\t\tconst [key] = path.split(\"/\").slice(3).join(\"/\").split(\".\");\n\t\tpaths[key] = path;\n\t}\n\n\treturn loadTemplates(paths);\n}\n","export default function registerHandlebarsHelpers() {\n\tHandlebars.registerHelper(\"add\", (a, b) => {\n\t\treturn a + b;\n\t});\n\n\tHandlebars.registerHelper(\"fromConfig\", function(arg1, arg2) {\n\t\treturn CONFIG.CONAN[arg1][arg2] ? CONFIG.CONAN[arg1][arg2] : arg2;\n\t});\n\n\tHandlebars.registerHelper(\"if_all\", function() {\n\t\tconst args = [].slice.apply(arguments);\n\t\tconst opts = args.pop();\n\n\t\tlet {fn} = opts;\n\t\tfor (let i = 0; i < args.length; i += 1) {\n\t\t\tif (args[i]) continue;\n\t\t\tfn = opts.inverse;\n\t\t\tbreak;\n\t\t}\n\t\treturn fn(this);\n\t});\n\n\tHandlebars.registerHelper(\"ifCond\", function(v1, operator, v2, options) {\n\t\tswitch (operator) {\n\t\t\tcase \"==\":\n\t\t\t\treturn v1 === v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \"===\":\n\t\t\t\treturn v1 === v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \"!=\":\n\t\t\t\treturn v1 !== v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \"!==\":\n\t\t\t\treturn v1 !== v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \"<\":\n\t\t\t\treturn v1 < v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \"<=\":\n\t\t\t\treturn v1 <= v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \">\":\n\t\t\t\treturn v1 > v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \">=\":\n\t\t\t\treturn v1 >= v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \"&&\":\n\t\t\t\treturn v1 && v2 ? options.fn(this) : options.inverse(this);\n\t\t\tcase \"||\":\n\t\t\t\treturn v1 || v2 ? options.fn(this) : options.inverse(this);\n\t\t\tdefault:\n\t\t\t\treturn options.inverse(this);\n\t\t}\n\t});\n\n\tHandlebars.registerHelper(\"ifEq\", function(arg1, arg2, options) {\n\t\treturn arg1 === arg2 ? options.fn(this) : options.inverse(this);\n\t});\n\n\tHandlebars.registerHelper(\"ifModZero\", function(arg1, arg2, options) {\n\t\treturn arg1 % arg2 === 0 ? options.fn(this) : options.inverse(this);\n\t});\n\n\tHandlebars.registerHelper(\"ifNeq\", function(arg1, arg2, options) {\n\t\treturn arg1 !== arg2 ? options.fn(this) : options.inverse(this);\n\t});\n\n\tHandlebars.registerHelper(\"ifObjIndex\", function(obj, index, options) {\n\t\treturn obj[index] ? options.fn(this) : options.inverse(this);\n\t});\n\n\tHandlebars.registerHelper(\"multiply\", (a, b) => {\n\t\treturn a * b;\n\t});\n\n\tHandlebars.registerHelper(\"select\", function(selected, options) {\n\t\tconst escapedValue = RegExp.escape(Handlebars.escapeExpression(selected));\n\t\tconst rgx = new RegExp(` value=[\"']${escapedValue}[\"']`);\n\t\tconst html = options.fn(this);\n\t\treturn html.replace(rgx, \"$& selected\");\n\t});\n}\n","export default function registerTextEditorEnrichers() {\n\n\tCONFIG.TextEditor.enrichers = CONFIG.TextEditor.enrichers.concat(\n\t\t[{\n\t\t\tpattern: /@([cr]{1})st\\[([^,]+),\\s*([0-5])\\]/gm,\n\t\t\tenricher: enrichSkillTestRequest,\n\t\t},\n\t\t{\n\t\t\tpattern: /|CD|DC/gm,\n\t\t\tenricher: () => {\n\t\t\t\tconst i = document.createElement(\"i\");\n\t\t\t\ti.classList.add(\"phoenix-sigil\");\n\t\t\t\treturn i;\n\t\t\t},\n\t\t}]\n\t);\n\n\tconst body = $(\"body\");\n\tbody.on(\"click\", \"a.conan-skill-test\", _onClick);\n}\n\n// Work out which actor to use.  If the user clicking the link is the GM and\n// they have tokens selected then use these.\n//\n// Players always use their own character Actor.\n//\nasync function getActors() {\n\tlet actors = [];\n\n\tif (game.user.isGM) {\n\t\tfor (const token of canvas.tokens.controlled) {\n\t\t\tactors.push(token.actor);\n\t\t}\n\t}\n\telse {\n\t\tactors.push(game.user.character);\n\t}\n\n\treturn actors;\n}\n\nasync function enrichSkillTestRequest(match, options) {\n\tconst type = match[1];\n\tconst skill = match[2].trim();\n\tconst difficulty = Number(match[3]);\n\tconst difficultyLabel = CONFIG.CONAN.rollDifficultyLevels[difficulty];\n\n\tconst a = document.createElement(\"a\");\n\ta.classList.add(\"conan-skill-test\");\n\n\ta.dataset.difficulty = difficulty;\n\ta.dataset.skill = skill;\n\ta.dataset.type = type;\n\n\tswitch (type) {\n\t\tcase \"c\":\n\t\t\ta.classList.add(\"conan-request-skill-test\");\n\t\t\ta.innerHTML = `<i class=\"fa-regular fa-comment-dots\"></i> ${difficultyLabel} ${skill}`;\n\t\t\tbreak;\n\t\tcase \"r\":\n\t\t\ta.classList.add(\"conan-roll-skill-test\");\n\t\t\ta.innerHTML = `<i class=\"fa-solid fa-dice-d20\"></i> ${difficultyLabel} ${skill}`;\n\t\t\tbreak;\n\t}\n\n\treturn a;\n}\n\nasync function triggerSkillRollRequest(data) {\n\tconst actors = await getActors();\n\n\tif (actors.length <= 0) {\n\t\treturn ui.notifications.warn(\n\t\t\tgame.i18n.localize(\"CONAN.Macro.Error.NoTokensSelected\")\n\t\t);\n\t}\n\n\tconst skillName = data.skill.toLowerCase();\n\n\tfor (const actor of actors) {\n\t\tconst options = {\n\t\t\tdifficulty: Number(data.difficulty) ?? 1,\n\t\t};\n\n\t\tif (actor.isNPC) {\n\t\t\tfor (let expertise in CONFIG.CONAN.expertiseFields) {\n\t\t\t\tconst enName = CONFIG.CONAN.expertiseFieldsEnglish[expertise].toLowerCase();\n\t\t\t\tconst i18nName = CONFIG.CONAN.expertiseFields[expertise].toLowerCase();\n\n\t\t\t\tif (i18nName === skillName || enName === skillName) {\n\t\t\t\t\toptions.expertise = expertise;\n\t\t\t\t\toptions.attribute = CONFIG.CONAN.expertiseAttributeMap[expertise];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tfor (let skill in CONFIG.CONAN.skills) {\n\t\t\t\tconst enName = CONFIG.CONAN.skillsEnglish[skill].toLowerCase();\n\t\t\t\tconst i18nName = CONFIG.CONAN.skills[skill].toLowerCase();\n\n\t\t\t\tif (i18nName === skillName || enName === skillName) {\n\t\t\t\t\toptions.skill = skill;\n\t\t\t\t\toptions.attribute = CONFIG.CONAN.skillAttributeMap[skill];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!(options.attribute && (options.expertise || options.skill))) {\n\t\t\tui.notifications.warn(\n\t\t\t\tgame.i18n.format(\"CONAN.Macro.Error.UnknownSkill\", {\n\t\t\t\t\tskillName,\n\t\t\t\t\tactorName: actor.name,\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tcontinue;\n\t\t}\n\n\t\tnew conan.apps.SkillRoller(actor, options).render(true);\n\t}\n}\n\nasync function _onClick(event) {\n\tevent.preventDefault();\n\n\tconst element = event.currentTarget;\n\tconst data = foundry.utils.duplicate(element.dataset) ?? {};\n\n\tif (data.type === \"c\") {\n\t\treturn conan.chat.renderSkillTestRequestCard(data);\n\t}\n\n\tif (data.type === \"r\") {\n\t\treturn triggerSkillRollRequest(data);\n\n\t}\n}\n","import { SYSTEM_ID, SYSTEM_NAME, CONFIG as CONANCONFIG } from \"../config.mjs\";\n\nimport * as apps from \"../apps/_module.mjs\";\nimport * as documents from \"../documents/_module.mjs\";\nimport * as sheets from \"../sheets/_module.mjs\";\n\nimport Combat2d20 from \"../combat/Combat2d20.mjs\";\nimport CombatDie from \"../system/CombatDie.mjs\";\nimport CombatTracker2d20 from \"../combat/CombatTracker2d20.mjs\";\nimport ConanChat from \"../system/ConanChat.mjs\";\nimport ConanCompendiums from \"../documents/ConanCompendiums.mjs\";\nimport ConanDice from \"../system/ConanDice.mjs\";\nimport ConanHooks from \"../system/ConanHooks.mjs\";\nimport ConanMacros from \"../system/ConanMacros.mjs\";\nimport ConanUtils from \"../utils/ConanUtils.mjs\";\nimport Counter from \"../apps/Counter.mjs\";\nimport Logger from \"../utils/Logger.mjs\";\n\nimport preloadHandlebarsTemplates from \"../templates.mjs\";\nimport registerHandlebarsHelpers from \"../handlebars.mjs\";\nimport registerSettings from \"../settings.mjs\";\nimport registerTextEditorEnrichers from \"../enrichers.mjs\";\n\nexport function initHook() {\n\tconsole.log(`${SYSTEM_NAME} | Running init hook`);\n\n\tglobalThis.SYSTEM_ID = SYSTEM_ID;\n\tglobalThis.SYSTEM_NAME = SYSTEM_NAME;\n\n\tCONFIG.CONAN = CONANCONFIG;\n\n\t// Override the default status effects\n\tCONFIG.statusEffects = CONFIG.CONAN.statusEffects;\n\n\tglobalThis.conan = {\n\t\tapps,\n\t\tchat: ConanChat,\n\t\tcompendiums: ConanCompendiums,\n\t\tconfig: CONANCONFIG,\n\t\tcounter: new Counter(),\n\t\tdice: ConanDice,\n\t\tlogger: Logger,\n\t\tutils: ConanUtils,\n\t};\n\n\tgame.conan2d20 = {\n\t\tmacros: ConanMacros,\n\t};\n\n\tregisterSettings();\n\n\t// Override the default combat tracker with our own\n\tCONFIG.ui.combat = CombatTracker2d20;\n\n\tregisterDocumentClasses();\n\tregisterDocumentSheets();\n\n\tregisterDiceSettings();\n\n\tregisterHandlebarsHelpers();\n\tregisterTextEditorEnrichers();\n\n\tpreloadHandlebarsTemplates();\n\n\tConanHooks.attach();\n}\n\nfunction registerDiceSettings() {\n\tCONFIG.Dice.terms.p = CombatDie;\n}\n\nfunction registerDocumentClasses() {\n\tCONFIG.Actor.documentClass = documents.ConanActor;\n\tCONFIG.Combat.documentClass = Combat2d20;\n\tCONFIG.Item.documentClass = documents.ConanItem;\n}\n\nfunction registerDocumentSheets() {\n\tActors.unregisterSheet(\"core\", ActorSheet);\n\tItems.unregisterSheet(\"core\", ItemSheet);\n\n\tActors.registerSheet(SYSTEM_ID, sheets.ConanCharacterSheet, {\n\t\tmakeDefault: true,\n\t\ttypes: [\"character\"],\n\t});\n\n\tActors.registerSheet(SYSTEM_ID, sheets.ConanTransportSheet, {\n\t\tmakeDefault: true,\n\t\ttypes: [\"mount\", \"transport\", \"watercraft\"],\n\t});\n\n\tActors.registerSheet(SYSTEM_ID, sheets.ConanNPCSheet, {\n\t\tmakeDefault: true,\n\t\ttypes: [\"npc\"],\n\t});\n\n\tItems.registerSheet(SYSTEM_ID, sheets.ConanBaseItemSheet, {\n\t\tmakeDefault: true,\n\t});\n}\n","import { diceSoNiceReadyHook } from \"./src/hooks/diceSoNiceReadyHook.mjs\";\nimport { initHook } from \"./src/hooks/initHook.mjs\";\n\nHooks.once(\"init\", initHook);\nHooks.once(\"diceSoNiceReady\", diceSoNiceReadyHook);\n"],"names":["SYSTEM_ID","SYSTEM_NAME","CONFIG","Stage.CharGenName","Stage.CharGenHomeland","Stage.CharGenStartingAttributes","Stage.CharGenAttributeAspects","Stage.CharGenCaste","Stage.CharGenStory","Stage.CharGenArchetype","Stage.CharGenNature","Stage.CharGenEducation","Stage.CharGenWarStory","Stage.CharGenAttributes","Stage.CharGenSkills","Stage.CharGenTalent","Stage.CharGenLanguage","Stage.CharGenFortune","Stage.CharGenBelongings","backgroundSelectors.ArchetypeSelector","backgroundSelectors.CasteSelector","backgroundSelectors.EducationSelector","backgroundSelectors.HomelandSelector","backgroundSelectors.LanguageSelector","backgroundSelectors.NatureSelector","backgroundSelectors.StorySelector","backgroundSelectors.WarStorySelector","CONANCONFIG","documents.ConanActor","documents.ConanItem","sheets.ConanCharacterSheet","sheets.ConanTransportSheet","sheets.ConanNPCSheet","sheets.ConanBaseItemSheet"],"mappings":"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"}